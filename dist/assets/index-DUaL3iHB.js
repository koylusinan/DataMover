var eR=Object.defineProperty;var wj=e=>{throw TypeError(e)};var tR=(e,t,r)=>t in e?eR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Am=(e,t,r)=>tR(e,typeof t!="symbol"?t+"":t,r),Dm=(e,t,r)=>t.has(e)||wj("Cannot "+r);var L=(e,t,r)=>(Dm(e,t,"read from private field"),r?r.call(e):t.get(e)),Re=(e,t,r)=>t.has(e)?wj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),pe=(e,t,r,n)=>(Dm(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ge=(e,t,r)=>(Dm(e,t,"access private method"),r);var Ju=(e,t,r,n)=>({set _(a){pe(e,t,a,r)},get _(){return L(e,t,n)}});function rR(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ss(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Y2={exports:{}},F0={},X2={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),nR=Symbol.for("react.portal"),aR=Symbol.for("react.fragment"),sR=Symbol.for("react.strict_mode"),iR=Symbol.for("react.profiler"),oR=Symbol.for("react.provider"),lR=Symbol.for("react.context"),cR=Symbol.for("react.forward_ref"),dR=Symbol.for("react.suspense"),uR=Symbol.for("react.memo"),hR=Symbol.for("react.lazy"),kj=Symbol.iterator;function fR(e){return e===null||typeof e!="object"?null:(e=kj&&e[kj]||e["@@iterator"],typeof e=="function"?e:null)}var J2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z2=Object.assign,eC={};function dc(e,t,r){this.props=e,this.context=t,this.refs=eC,this.updater=r||J2}dc.prototype.isReactComponent={};dc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tC(){}tC.prototype=dc.prototype;function Mv(e,t,r){this.props=e,this.context=t,this.refs=eC,this.updater=r||J2}var Lv=Mv.prototype=new tC;Lv.constructor=Mv;Z2(Lv,dc.prototype);Lv.isPureReactComponent=!0;var jj=Array.isArray,rC=Object.prototype.hasOwnProperty,$v={current:null},nC={key:!0,ref:!0,__self:!0,__source:!0};function aC(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)rC.call(t,n)&&!nC.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:fu,type:e,key:i,ref:o,props:a,_owner:$v.current}}function gR(e,t){return{$$typeof:fu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Iv(e){return typeof e=="object"&&e!==null&&e.$$typeof===fu}function mR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nj=/\/+/g;function Rm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mR(""+e.key):t.toString(36)}function Hh(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case fu:case nR:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Rm(o,0):n,jj(a)?(r="",e!=null&&(r=e.replace(Nj,"$&/")+"/"),Hh(a,t,r,"",function(d){return d})):a!=null&&(Iv(a)&&(a=gR(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Nj,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",jj(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Rm(i,l);o+=Hh(i,t,r,c,a)}else if(c=fR(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Rm(i,l++),o+=Hh(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Zu(e,t,r){if(e==null)return e;var n=[],a=0;return Hh(e,n,"","",function(i){return t.call(r,i,a++)}),n}function pR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Br={current:null},Vh={transition:null},yR={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Vh,ReactCurrentOwner:$v};function sC(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Zu,forEach:function(e,t,r){Zu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zu(e,function(){t++}),t},toArray:function(e){return Zu(e,function(t){return t})||[]},only:function(e){if(!Iv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=dc;Ke.Fragment=aR;Ke.Profiler=iR;Ke.PureComponent=Mv;Ke.StrictMode=sR;Ke.Suspense=dR;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yR;Ke.act=sC;Ke.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Z2({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=$v.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)rC.call(t,c)&&!nC.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:fu,type:e.type,key:a,ref:i,props:n,_owner:o}};Ke.createContext=function(e){return e={$$typeof:lR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oR,_context:e},e.Consumer=e};Ke.createElement=aC;Ke.createFactory=function(e){var t=aC.bind(null,e);return t.type=e,t};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:cR,render:e}};Ke.isValidElement=Iv;Ke.lazy=function(e){return{$$typeof:hR,_payload:{_status:-1,_result:e},_init:pR}};Ke.memo=function(e,t){return{$$typeof:uR,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=Vh.transition;Vh.transition={};try{e()}finally{Vh.transition=t}};Ke.unstable_act=sC;Ke.useCallback=function(e,t){return Br.current.useCallback(e,t)};Ke.useContext=function(e){return Br.current.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e){return Br.current.useDeferredValue(e)};Ke.useEffect=function(e,t){return Br.current.useEffect(e,t)};Ke.useId=function(){return Br.current.useId()};Ke.useImperativeHandle=function(e,t,r){return Br.current.useImperativeHandle(e,t,r)};Ke.useInsertionEffect=function(e,t){return Br.current.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return Br.current.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return Br.current.useMemo(e,t)};Ke.useReducer=function(e,t,r){return Br.current.useReducer(e,t,r)};Ke.useRef=function(e){return Br.current.useRef(e)};Ke.useState=function(e){return Br.current.useState(e)};Ke.useSyncExternalStore=function(e,t,r){return Br.current.useSyncExternalStore(e,t,r)};Ke.useTransition=function(){return Br.current.useTransition()};Ke.version="18.3.1";X2.exports=Ke;var m=X2.exports;const iC=Ss(m),xR=rR({__proto__:null,default:iC},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR=m,bR=Symbol.for("react.element"),wR=Symbol.for("react.fragment"),kR=Object.prototype.hasOwnProperty,jR=vR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NR={key:!0,ref:!0,__self:!0,__source:!0};function oC(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)kR.call(t,n)&&!NR.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:bR,type:e,key:i,ref:o,props:a,_owner:jR.current}}F0.Fragment=wR;F0.jsx=oC;F0.jsxs=oC;Y2.exports=F0;var s=Y2.exports,lC={exports:{}},Nn={},cC={exports:{}},dC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,U){var I=E.length;E.push(U);e:for(;0<I;){var X=I-1>>>1,Z=E[X];if(0<a(Z,U))E[X]=U,E[I]=Z,I=X;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var U=E[0],I=E.pop();if(I!==U){E[0]=I;e:for(var X=0,Z=E.length,te=Z>>>1;X<te;){var K=2*(X+1)-1,le=E[K],me=K+1,ue=E[me];if(0>a(le,I))me<Z&&0>a(ue,le)?(E[X]=ue,E[me]=I,X=me):(E[X]=le,E[K]=I,X=K);else if(me<Z&&0>a(ue,I))E[X]=ue,E[me]=I,X=me;else break e}}return U}function a(E,U){var I=E.sortIndex-U.sortIndex;return I!==0?I:E.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,g=!1,p=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=E)n(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(d)}}function k(E){if(y=!1,b(E),!p)if(r(c)!==null)p=!0,W(j);else{var U=r(d);U!==null&&$(k,U.startTime-E)}}function j(E,U){p=!1,y&&(y=!1,v(O),O=-1),g=!0;var I=f;try{for(b(U),h=r(c);h!==null&&(!(h.expirationTime>U)||E&&!S());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Z=X(h.expirationTime<=U);U=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===r(c)&&n(c),b(U)}else n(c);h=r(c)}if(h!==null)var te=!0;else{var K=r(d);K!==null&&$(k,K.startTime-U),te=!1}return te}finally{h=null,f=I,g=!1}}var N=!1,_=null,O=-1,T=5,P=-1;function S(){return!(e.unstable_now()-P<T)}function M(){if(_!==null){var E=e.unstable_now();P=E;var U=!0;try{U=_(!0,E)}finally{U?F():(N=!1,_=null)}}else N=!1}var F;if(typeof w=="function")F=function(){w(M)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,z=q.port2;q.port1.onmessage=M,F=function(){z.postMessage(null)}}else F=function(){x(M,0)};function W(E){_=E,N||(N=!0,F())}function $(E,U){O=x(function(){E(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,W(j))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var I=f;f=U;try{return E()}finally{f=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,U){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var I=f;f=E;try{return U()}finally{f=I}},e.unstable_scheduleCallback=function(E,U,I){var X=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?X+I:X):I=X,E){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=I+Z,E={id:u++,callback:U,priorityLevel:E,startTime:I,expirationTime:Z,sortIndex:-1},I>X?(E.sortIndex=I,t(d,E),r(c)===null&&E===r(d)&&(y?(v(O),O=-1):y=!0,$(k,I-X))):(E.sortIndex=Z,t(c,E),p||g||(p=!0,W(j))),E},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(E){var U=f;return function(){var I=f;f=U;try{return E.apply(this,arguments)}finally{f=I}}}})(dC);cC.exports=dC;var SR=cC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R=m,vn=SR;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uC=new Set,Sd={};function To(e,t){Bl(e,t),Bl(e+"Capture",t)}function Bl(e,t){for(Sd[e]=t,e=0;e<t.length;e++)uC.add(t[e])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yp=Object.prototype.hasOwnProperty,CR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sj={},_j={};function PR(e){return Yp.call(_j,e)?!0:Yp.call(Sj,e)?!1:CR.test(e)?_j[e]=!0:(Sj[e]=!0,!1)}function ER(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OR(e,t,r,n){if(t===null||typeof t>"u"||ER(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pr[e]=new qr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pr[t]=new qr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pr[e]=new qr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pr[e]=new qr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pr[e]=new qr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pr[e]=new qr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pr[e]=new qr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pr[e]=new qr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pr[e]=new qr(e,5,!1,e.toLowerCase(),null,!1,!1)});var zv=/[\-:]([a-z])/g;function Fv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zv,Fv);pr[t]=new qr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zv,Fv);pr[t]=new qr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zv,Fv);pr[t]=new qr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pr[e]=new qr(e,1,!1,e.toLowerCase(),null,!1,!1)});pr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pr[e]=new qr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Uv(e,t,r,n){var a=pr.hasOwnProperty(t)?pr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OR(t,r,a,n)&&(r=null),n||a===null?PR(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var _s=_R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eh=Symbol.for("react.element"),al=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),Bv=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),hC=Symbol.for("react.provider"),fC=Symbol.for("react.context"),qv=Symbol.for("react.forward_ref"),Jp=Symbol.for("react.suspense"),Zp=Symbol.for("react.suspense_list"),Wv=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),gC=Symbol.for("react.offscreen"),Cj=Symbol.iterator;function Tc(e){return e===null||typeof e!="object"?null:(e=Cj&&e[Cj]||e["@@iterator"],typeof e=="function"?e:null)}var Ot=Object.assign,Mm;function Xc(e){if(Mm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mm=t&&t[1]||""}return`
`+Mm+e}var Lm=!1;function $m(e,t){if(!e||Lm)return"";Lm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Lm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Xc(e):""}function TR(e){switch(e.tag){case 5:return Xc(e.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return e=$m(e.type,!1),e;case 11:return e=$m(e.type.render,!1),e;case 1:return e=$m(e.type,!0),e;default:return""}}function ey(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sl:return"Fragment";case al:return"Portal";case Xp:return"Profiler";case Bv:return"StrictMode";case Jp:return"Suspense";case Zp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fC:return(e.displayName||"Context")+".Consumer";case hC:return(e._context.displayName||"Context")+".Provider";case qv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wv:return t=e.displayName||null,t!==null?t:ey(e.type)||"Memo";case zs:t=e._payload,e=e._init;try{return ey(e(t))}catch{}}return null}function AR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ey(t);case 8:return t===Bv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DR(e){var t=mC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function th(e){e._valueTracker||(e._valueTracker=DR(e))}function pC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=mC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function hf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ty(e,t){var r=t.checked;return Ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pj(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yC(e,t){t=t.checked,t!=null&&Uv(e,"checked",t,!1)}function ry(e,t){yC(e,t);var r=xi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ny(e,t.type,r):t.hasOwnProperty("defaultValue")&&ny(e,t.type,xi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ej(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ny(e,t,r){(t!=="number"||hf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Jc=Array.isArray;function wl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xi(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ay(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ie(92));if(Jc(r)){if(1<r.length)throw Error(ie(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xi(r)}}function xC(e,t){var r=xi(t.value),n=xi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Tj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rh,bC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rh=rh||document.createElement("div"),rh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _d(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RR=["Webkit","ms","Moz","O"];Object.keys(ud).forEach(function(e){RR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ud[t]=ud[e]})});function wC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ud.hasOwnProperty(e)&&ud[e]?(""+t).trim():t+"px"}function kC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=wC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var MR=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iy(e,t){if(t){if(MR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function oy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ly=null;function Hv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cy=null,kl=null,jl=null;function Aj(e){if(e=pu(e)){if(typeof cy!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=H0(t),cy(e.stateNode,e.type,t))}}function jC(e){kl?jl?jl.push(e):jl=[e]:kl=e}function NC(){if(kl){var e=kl,t=jl;if(jl=kl=null,Aj(e),t)for(e=0;e<t.length;e++)Aj(t[e])}}function SC(e,t){return e(t)}function _C(){}var Im=!1;function CC(e,t,r){if(Im)return e(t,r);Im=!0;try{return SC(e,t,r)}finally{Im=!1,(kl!==null||jl!==null)&&(_C(),NC())}}function Cd(e,t){var r=e.stateNode;if(r===null)return null;var n=H0(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ie(231,t,typeof r));return r}var dy=!1;if(fs)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){dy=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{dy=!1}function LR(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var hd=!1,ff=null,gf=!1,uy=null,$R={onError:function(e){hd=!0,ff=e}};function IR(e,t,r,n,a,i,o,l,c){hd=!1,ff=null,LR.apply($R,arguments)}function zR(e,t,r,n,a,i,o,l,c){if(IR.apply(this,arguments),hd){if(hd){var d=ff;hd=!1,ff=null}else throw Error(ie(198));gf||(gf=!0,uy=d)}}function Ao(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function PC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dj(e){if(Ao(e)!==e)throw Error(ie(188))}function FR(e){var t=e.alternate;if(!t){if(t=Ao(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Dj(a),e;if(i===n)return Dj(a),t;i=i.sibling}throw Error(ie(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ie(189))}}if(r.alternate!==n)throw Error(ie(190))}if(r.tag!==3)throw Error(ie(188));return r.stateNode.current===r?e:t}function EC(e){return e=FR(e),e!==null?OC(e):null}function OC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OC(e);if(t!==null)return t;e=e.sibling}return null}var TC=vn.unstable_scheduleCallback,Rj=vn.unstable_cancelCallback,UR=vn.unstable_shouldYield,BR=vn.unstable_requestPaint,Lt=vn.unstable_now,qR=vn.unstable_getCurrentPriorityLevel,Vv=vn.unstable_ImmediatePriority,AC=vn.unstable_UserBlockingPriority,mf=vn.unstable_NormalPriority,WR=vn.unstable_LowPriority,DC=vn.unstable_IdlePriority,U0=null,Aa=null;function HR(e){if(Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(U0,e,void 0,(e.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:GR,VR=Math.log,KR=Math.LN2;function GR(e){return e>>>=0,e===0?32:31-(VR(e)/KR|0)|0}var nh=64,ah=4194304;function Zc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Zc(l):(i&=o,i!==0&&(n=Zc(i)))}else o=r&~a,o!==0?n=Zc(o):i!==0&&(n=Zc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ca(t),a=1<<r,n|=e[r],t&=~a;return n}function QR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YR(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ca(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=QR(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function hy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function RC(){var e=nh;return nh<<=1,!(nh&4194240)&&(nh=64),e}function zm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ca(t),e[t]=r}function XR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ca(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Kv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ca(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ct=0;function MC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LC,Gv,$C,IC,zC,fy=!1,sh=[],ii=null,oi=null,li=null,Pd=new Map,Ed=new Map,qs=[],JR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mj(e,t){switch(e){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Pd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ed.delete(t.pointerId)}}function Dc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=pu(t),t!==null&&Gv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ZR(e,t,r,n,a){switch(t){case"focusin":return ii=Dc(ii,e,t,r,n,a),!0;case"dragenter":return oi=Dc(oi,e,t,r,n,a),!0;case"mouseover":return li=Dc(li,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Pd.set(i,Dc(Pd.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ed.set(i,Dc(Ed.get(i)||null,e,t,r,n,a)),!0}return!1}function FC(e){var t=Hi(e.target);if(t!==null){var r=Ao(t);if(r!==null){if(t=r.tag,t===13){if(t=PC(r),t!==null){e.blockedOn=t,zC(e.priority,function(){$C(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ly=n,r.target.dispatchEvent(n),ly=null}else return t=pu(r),t!==null&&Gv(t),e.blockedOn=r,!1;t.shift()}return!0}function Lj(e,t,r){Kh(e)&&r.delete(t)}function e6(){fy=!1,ii!==null&&Kh(ii)&&(ii=null),oi!==null&&Kh(oi)&&(oi=null),li!==null&&Kh(li)&&(li=null),Pd.forEach(Lj),Ed.forEach(Lj)}function Rc(e,t){e.blockedOn===t&&(e.blockedOn=null,fy||(fy=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,e6)))}function Od(e){function t(a){return Rc(a,e)}if(0<sh.length){Rc(sh[0],e);for(var r=1;r<sh.length;r++){var n=sh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ii!==null&&Rc(ii,e),oi!==null&&Rc(oi,e),li!==null&&Rc(li,e),Pd.forEach(t),Ed.forEach(t),r=0;r<qs.length;r++)n=qs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<qs.length&&(r=qs[0],r.blockedOn===null);)FC(r),r.blockedOn===null&&qs.shift()}var Nl=_s.ReactCurrentBatchConfig,yf=!0;function t6(e,t,r,n){var a=ct,i=Nl.transition;Nl.transition=null;try{ct=1,Qv(e,t,r,n)}finally{ct=a,Nl.transition=i}}function r6(e,t,r,n){var a=ct,i=Nl.transition;Nl.transition=null;try{ct=4,Qv(e,t,r,n)}finally{ct=a,Nl.transition=i}}function Qv(e,t,r,n){if(yf){var a=gy(e,t,r,n);if(a===null)Qm(e,t,n,xf,r),Mj(e,n);else if(ZR(a,e,t,r,n))n.stopPropagation();else if(Mj(e,n),t&4&&-1<JR.indexOf(e)){for(;a!==null;){var i=pu(a);if(i!==null&&LC(i),i=gy(e,t,r,n),i===null&&Qm(e,t,n,xf,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Qm(e,t,n,null,r)}}var xf=null;function gy(e,t,r,n){if(xf=null,e=Hv(n),e=Hi(e),e!==null)if(t=Ao(e),t===null)e=null;else if(r=t.tag,r===13){if(e=PC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xf=e,null}function UC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qR()){case Vv:return 1;case AC:return 4;case mf:case WR:return 16;case DC:return 536870912;default:return 16}default:return 16}}var ti=null,Yv=null,Gh=null;function BC(){if(Gh)return Gh;var e,t=Yv,r=t.length,n,a="value"in ti?ti.value:ti.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Gh=a.slice(e,1<n?1-n:void 0)}function Qh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ih(){return!0}function $j(){return!1}function Sn(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ih:$j,this.isPropagationStopped=$j,this}return Ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ih)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ih)},persist:function(){},isPersistent:ih}),t}var uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=Sn(uc),mu=Ot({},uc,{view:0,detail:0}),n6=Sn(mu),Fm,Um,Mc,B0=Ot({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mc&&(Mc&&e.type==="mousemove"?(Fm=e.screenX-Mc.screenX,Um=e.screenY-Mc.screenY):Um=Fm=0,Mc=e),Fm)},movementY:function(e){return"movementY"in e?e.movementY:Um}}),Ij=Sn(B0),a6=Ot({},B0,{dataTransfer:0}),s6=Sn(a6),i6=Ot({},mu,{relatedTarget:0}),Bm=Sn(i6),o6=Ot({},uc,{animationName:0,elapsedTime:0,pseudoElement:0}),l6=Sn(o6),c6=Ot({},uc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),d6=Sn(c6),u6=Ot({},uc,{data:0}),zj=Sn(u6),h6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=g6[e])?!!t[e]:!1}function Jv(){return m6}var p6=Ot({},mu,{key:function(e){if(e.key){var t=h6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jv,charCode:function(e){return e.type==="keypress"?Qh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),y6=Sn(p6),x6=Ot({},B0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fj=Sn(x6),v6=Ot({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jv}),b6=Sn(v6),w6=Ot({},uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),k6=Sn(w6),j6=Ot({},B0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N6=Sn(j6),S6=[9,13,27,32],Zv=fs&&"CompositionEvent"in window,fd=null;fs&&"documentMode"in document&&(fd=document.documentMode);var _6=fs&&"TextEvent"in window&&!fd,qC=fs&&(!Zv||fd&&8<fd&&11>=fd),Uj=" ",Bj=!1;function WC(e,t){switch(e){case"keyup":return S6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var il=!1;function C6(e,t){switch(e){case"compositionend":return HC(t);case"keypress":return t.which!==32?null:(Bj=!0,Uj);case"textInput":return e=t.data,e===Uj&&Bj?null:e;default:return null}}function P6(e,t){if(il)return e==="compositionend"||!Zv&&WC(e,t)?(e=BC(),Gh=Yv=ti=null,il=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qC&&t.locale!=="ko"?null:t.data;default:return null}}var E6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E6[e.type]:t==="textarea"}function VC(e,t,r,n){jC(n),t=vf(t,"onChange"),0<t.length&&(r=new Xv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var gd=null,Td=null;function O6(e){nP(e,0)}function q0(e){var t=cl(e);if(pC(t))return e}function T6(e,t){if(e==="change")return t}var KC=!1;if(fs){var qm;if(fs){var Wm="oninput"in document;if(!Wm){var Wj=document.createElement("div");Wj.setAttribute("oninput","return;"),Wm=typeof Wj.oninput=="function"}qm=Wm}else qm=!1;KC=qm&&(!document.documentMode||9<document.documentMode)}function Hj(){gd&&(gd.detachEvent("onpropertychange",GC),Td=gd=null)}function GC(e){if(e.propertyName==="value"&&q0(Td)){var t=[];VC(t,Td,e,Hv(e)),CC(O6,t)}}function A6(e,t,r){e==="focusin"?(Hj(),gd=t,Td=r,gd.attachEvent("onpropertychange",GC)):e==="focusout"&&Hj()}function D6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return q0(Td)}function R6(e,t){if(e==="click")return q0(t)}function M6(e,t){if(e==="input"||e==="change")return q0(t)}function L6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fa=typeof Object.is=="function"?Object.is:L6;function Ad(e,t){if(fa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Yp.call(t,a)||!fa(e[a],t[a]))return!1}return!0}function Vj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kj(e,t){var r=Vj(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vj(r)}}function QC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function YC(){for(var e=window,t=hf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hf(e.document)}return t}function eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $6(e){var t=YC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&QC(r.ownerDocument.documentElement,r)){if(n!==null&&eb(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Kj(r,i);var o=Kj(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var I6=fs&&"documentMode"in document&&11>=document.documentMode,ol=null,my=null,md=null,py=!1;function Gj(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;py||ol==null||ol!==hf(n)||(n=ol,"selectionStart"in n&&eb(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),md&&Ad(md,n)||(md=n,n=vf(my,"onSelect"),0<n.length&&(t=new Xv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ol)))}function oh(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ll={animationend:oh("Animation","AnimationEnd"),animationiteration:oh("Animation","AnimationIteration"),animationstart:oh("Animation","AnimationStart"),transitionend:oh("Transition","TransitionEnd")},Hm={},XC={};fs&&(XC=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function W0(e){if(Hm[e])return Hm[e];if(!ll[e])return e;var t=ll[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in XC)return Hm[e]=t[r];return e}var JC=W0("animationend"),ZC=W0("animationiteration"),eP=W0("animationstart"),tP=W0("transitionend"),rP=new Map,Qj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(e,t){rP.set(e,t),To(t,[e])}for(var Vm=0;Vm<Qj.length;Vm++){var Km=Qj[Vm],z6=Km.toLowerCase(),F6=Km[0].toUpperCase()+Km.slice(1);Si(z6,"on"+F6)}Si(JC,"onAnimationEnd");Si(ZC,"onAnimationIteration");Si(eP,"onAnimationStart");Si("dblclick","onDoubleClick");Si("focusin","onFocus");Si("focusout","onBlur");Si(tP,"onTransitionEnd");Bl("onMouseEnter",["mouseout","mouseover"]);Bl("onMouseLeave",["mouseout","mouseover"]);Bl("onPointerEnter",["pointerout","pointerover"]);Bl("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U6=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function Yj(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,zR(n,t,void 0,e),e.currentTarget=null}function nP(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Yj(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Yj(a,l,d),i=c}}}if(gf)throw e=uy,gf=!1,uy=null,e}function vt(e,t){var r=t[wy];r===void 0&&(r=t[wy]=new Set);var n=e+"__bubble";r.has(n)||(aP(t,e,2,!1),r.add(n))}function Gm(e,t,r){var n=0;t&&(n|=4),aP(r,e,n,t)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Dd(e){if(!e[lh]){e[lh]=!0,uC.forEach(function(r){r!=="selectionchange"&&(U6.has(r)||Gm(r,!1,e),Gm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lh]||(t[lh]=!0,Gm("selectionchange",!1,t))}}function aP(e,t,r,n){switch(UC(t)){case 1:var a=t6;break;case 4:a=r6;break;default:a=Qv}r=a.bind(null,t,r,e),a=void 0,!dy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Qm(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Hi(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}CC(function(){var d=i,u=Hv(r),h=[];e:{var f=rP.get(e);if(f!==void 0){var g=Xv,p=e;switch(e){case"keypress":if(Qh(r)===0)break e;case"keydown":case"keyup":g=y6;break;case"focusin":p="focus",g=Bm;break;case"focusout":p="blur",g=Bm;break;case"beforeblur":case"afterblur":g=Bm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ij;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=s6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=b6;break;case JC:case ZC:case eP:g=l6;break;case tP:g=k6;break;case"scroll":g=n6;break;case"wheel":g=N6;break;case"copy":case"cut":case"paste":g=d6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Fj}var y=(t&4)!==0,x=!y&&e==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var w=d,b;w!==null;){b=w;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,v!==null&&(k=Cd(w,v),k!=null&&y.push(Rd(w,k,b)))),x)break;w=w.return}0<y.length&&(f=new g(f,p,null,r,u),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==ly&&(p=r.relatedTarget||r.fromElement)&&(Hi(p)||p[gs]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(p=r.relatedTarget||r.toElement,g=d,p=p?Hi(p):null,p!==null&&(x=Ao(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=d),g!==p)){if(y=Ij,k="onMouseLeave",v="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=Fj,k="onPointerLeave",v="onPointerEnter",w="pointer"),x=g==null?f:cl(g),b=p==null?f:cl(p),f=new y(k,w+"leave",g,r,u),f.target=x,f.relatedTarget=b,k=null,Hi(u)===d&&(y=new y(v,w+"enter",p,r,u),y.target=b,y.relatedTarget=x,k=y),x=k,g&&p)t:{for(y=g,v=p,w=0,b=y;b;b=Bo(b))w++;for(b=0,k=v;k;k=Bo(k))b++;for(;0<w-b;)y=Bo(y),w--;for(;0<b-w;)v=Bo(v),b--;for(;w--;){if(y===v||v!==null&&y===v.alternate)break t;y=Bo(y),v=Bo(v)}y=null}else y=null;g!==null&&Xj(h,f,g,y,!1),p!==null&&x!==null&&Xj(h,x,p,y,!0)}}e:{if(f=d?cl(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=T6;else if(qj(f))if(KC)j=M6;else{j=D6;var N=A6}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=R6);if(j&&(j=j(e,d))){VC(h,j,r,u);break e}N&&N(e,f,d),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&ny(f,"number",f.value)}switch(N=d?cl(d):window,e){case"focusin":(qj(N)||N.contentEditable==="true")&&(ol=N,my=d,md=null);break;case"focusout":md=my=ol=null;break;case"mousedown":py=!0;break;case"contextmenu":case"mouseup":case"dragend":py=!1,Gj(h,r,u);break;case"selectionchange":if(I6)break;case"keydown":case"keyup":Gj(h,r,u)}var _;if(Zv)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else il?WC(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(qC&&r.locale!=="ko"&&(il||O!=="onCompositionStart"?O==="onCompositionEnd"&&il&&(_=BC()):(ti=u,Yv="value"in ti?ti.value:ti.textContent,il=!0)),N=vf(d,O),0<N.length&&(O=new zj(O,e,null,r,u),h.push({event:O,listeners:N}),_?O.data=_:(_=HC(r),_!==null&&(O.data=_)))),(_=_6?C6(e,r):P6(e,r))&&(d=vf(d,"onBeforeInput"),0<d.length&&(u=new zj("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=_))}nP(h,t)})}function Rd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vf(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Cd(e,r),i!=null&&n.unshift(Rd(e,i,a)),i=Cd(e,t),i!=null&&n.push(Rd(e,i,a))),e=e.return}return n}function Bo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xj(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Cd(r,i),c!=null&&o.unshift(Rd(r,c,l))):a||(c=Cd(r,i),c!=null&&o.push(Rd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var B6=/\r\n?/g,q6=/\u0000|\uFFFD/g;function Jj(e){return(typeof e=="string"?e:""+e).replace(B6,`
`).replace(q6,"")}function ch(e,t,r){if(t=Jj(t),Jj(e)!==t&&r)throw Error(ie(425))}function bf(){}var yy=null,xy=null;function vy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var by=typeof setTimeout=="function"?setTimeout:void 0,W6=typeof clearTimeout=="function"?clearTimeout:void 0,Zj=typeof Promise=="function"?Promise:void 0,H6=typeof queueMicrotask=="function"?queueMicrotask:typeof Zj<"u"?function(e){return Zj.resolve(null).then(e).catch(V6)}:by;function V6(e){setTimeout(function(){throw e})}function Ym(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Od(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Od(t)}function ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function e1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var hc=Math.random().toString(36).slice(2),Ea="__reactFiber$"+hc,Md="__reactProps$"+hc,gs="__reactContainer$"+hc,wy="__reactEvents$"+hc,K6="__reactListeners$"+hc,G6="__reactHandles$"+hc;function Hi(e){var t=e[Ea];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gs]||r[Ea]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=e1(e);e!==null;){if(r=e[Ea])return r;e=e1(e)}return t}e=r,r=e.parentNode}return null}function pu(e){return e=e[Ea]||e[gs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function H0(e){return e[Md]||null}var ky=[],dl=-1;function _i(e){return{current:e}}function wt(e){0>dl||(e.current=ky[dl],ky[dl]=null,dl--)}function yt(e,t){dl++,ky[dl]=e.current,e.current=t}var vi={},Pr=_i(vi),en=_i(!1),vo=vi;function ql(e,t){var r=e.type.contextTypes;if(!r)return vi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function tn(e){return e=e.childContextTypes,e!=null}function wf(){wt(en),wt(Pr)}function t1(e,t,r){if(Pr.current!==vi)throw Error(ie(168));yt(Pr,t),yt(en,r)}function sP(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ie(108,AR(e)||"Unknown",a));return Ot({},r,n)}function kf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vi,vo=Pr.current,yt(Pr,e),yt(en,en.current),!0}function r1(e,t,r){var n=e.stateNode;if(!n)throw Error(ie(169));r?(e=sP(e,t,vo),n.__reactInternalMemoizedMergedChildContext=e,wt(en),wt(Pr),yt(Pr,e)):wt(en),yt(en,r)}var Ga=null,V0=!1,Xm=!1;function iP(e){Ga===null?Ga=[e]:Ga.push(e)}function Q6(e){V0=!0,iP(e)}function Ci(){if(!Xm&&Ga!==null){Xm=!0;var e=0,t=ct;try{var r=Ga;for(ct=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ga=null,V0=!1}catch(a){throw Ga!==null&&(Ga=Ga.slice(e+1)),TC(Vv,Ci),a}finally{ct=t,Xm=!1}}return null}var ul=[],hl=0,jf=null,Nf=0,Rn=[],Mn=0,bo=null,ts=1,rs="";function Ii(e,t){ul[hl++]=Nf,ul[hl++]=jf,jf=e,Nf=t}function oP(e,t,r){Rn[Mn++]=ts,Rn[Mn++]=rs,Rn[Mn++]=bo,bo=e;var n=ts;e=rs;var a=32-ca(n)-1;n&=~(1<<a),r+=1;var i=32-ca(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ts=1<<32-ca(t)+a|r<<a|n,rs=i+e}else ts=1<<i|r<<a|n,rs=e}function tb(e){e.return!==null&&(Ii(e,1),oP(e,1,0))}function rb(e){for(;e===jf;)jf=ul[--hl],ul[hl]=null,Nf=ul[--hl],ul[hl]=null;for(;e===bo;)bo=Rn[--Mn],Rn[Mn]=null,rs=Rn[--Mn],Rn[Mn]=null,ts=Rn[--Mn],Rn[Mn]=null}var gn=null,hn=null,St=!1,aa=null;function lP(e,t){var r=$n(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function n1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gn=e,hn=ci(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gn=e,hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bo!==null?{id:ts,overflow:rs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=$n(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,gn=e,hn=null,!0):!1;default:return!1}}function jy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ny(e){if(St){var t=hn;if(t){var r=t;if(!n1(e,t)){if(jy(e))throw Error(ie(418));t=ci(r.nextSibling);var n=gn;t&&n1(e,t)?lP(n,r):(e.flags=e.flags&-4097|2,St=!1,gn=e)}}else{if(jy(e))throw Error(ie(418));e.flags=e.flags&-4097|2,St=!1,gn=e}}}function a1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gn=e}function dh(e){if(e!==gn)return!1;if(!St)return a1(e),St=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vy(e.type,e.memoizedProps)),t&&(t=hn)){if(jy(e))throw cP(),Error(ie(418));for(;t;)lP(e,t),t=ci(t.nextSibling)}if(a1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){hn=ci(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}hn=null}}else hn=gn?ci(e.stateNode.nextSibling):null;return!0}function cP(){for(var e=hn;e;)e=ci(e.nextSibling)}function Wl(){hn=gn=null,St=!1}function nb(e){aa===null?aa=[e]:aa.push(e)}var Y6=_s.ReactCurrentBatchConfig;function Lc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ie(309));var n=r.stateNode}if(!n)throw Error(ie(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ie(284));if(!r._owner)throw Error(ie(290,e))}return e}function uh(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function s1(e){var t=e._init;return t(e._payload)}function dP(e){function t(v,w){if(e){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function r(v,w){if(!e)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function n(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function a(v,w){return v=fi(v,w),v.index=0,v.sibling=null,v}function i(v,w,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,w,b,k){return w===null||w.tag!==6?(w=ap(b,v.mode,k),w.return=v,w):(w=a(w,b),w.return=v,w)}function c(v,w,b,k){var j=b.type;return j===sl?u(v,w,b.props.children,k,b.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===zs&&s1(j)===w.type)?(k=a(w,b.props),k.ref=Lc(v,w,b),k.return=v,k):(k=rf(b.type,b.key,b.props,null,v.mode,k),k.ref=Lc(v,w,b),k.return=v,k)}function d(v,w,b,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=sp(b,v.mode,k),w.return=v,w):(w=a(w,b.children||[]),w.return=v,w)}function u(v,w,b,k,j){return w===null||w.tag!==7?(w=uo(b,v.mode,k,j),w.return=v,w):(w=a(w,b),w.return=v,w)}function h(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ap(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case eh:return b=rf(w.type,w.key,w.props,null,v.mode,b),b.ref=Lc(v,null,w),b.return=v,b;case al:return w=sp(w,v.mode,b),w.return=v,w;case zs:var k=w._init;return h(v,k(w._payload),b)}if(Jc(w)||Tc(w))return w=uo(w,v.mode,b,null),w.return=v,w;uh(v,w)}return null}function f(v,w,b,k){var j=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,w,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eh:return b.key===j?c(v,w,b,k):null;case al:return b.key===j?d(v,w,b,k):null;case zs:return j=b._init,f(v,w,j(b._payload),k)}if(Jc(b)||Tc(b))return j!==null?null:u(v,w,b,k,null);uh(v,b)}return null}function g(v,w,b,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(b)||null,l(w,v,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case eh:return v=v.get(k.key===null?b:k.key)||null,c(w,v,k,j);case al:return v=v.get(k.key===null?b:k.key)||null,d(w,v,k,j);case zs:var N=k._init;return g(v,w,b,N(k._payload),j)}if(Jc(k)||Tc(k))return v=v.get(b)||null,u(w,v,k,j,null);uh(w,k)}return null}function p(v,w,b,k){for(var j=null,N=null,_=w,O=w=0,T=null;_!==null&&O<b.length;O++){_.index>O?(T=_,_=null):T=_.sibling;var P=f(v,_,b[O],k);if(P===null){_===null&&(_=T);break}e&&_&&P.alternate===null&&t(v,_),w=i(P,w,O),N===null?j=P:N.sibling=P,N=P,_=T}if(O===b.length)return r(v,_),St&&Ii(v,O),j;if(_===null){for(;O<b.length;O++)_=h(v,b[O],k),_!==null&&(w=i(_,w,O),N===null?j=_:N.sibling=_,N=_);return St&&Ii(v,O),j}for(_=n(v,_);O<b.length;O++)T=g(_,v,O,b[O],k),T!==null&&(e&&T.alternate!==null&&_.delete(T.key===null?O:T.key),w=i(T,w,O),N===null?j=T:N.sibling=T,N=T);return e&&_.forEach(function(S){return t(v,S)}),St&&Ii(v,O),j}function y(v,w,b,k){var j=Tc(b);if(typeof j!="function")throw Error(ie(150));if(b=j.call(b),b==null)throw Error(ie(151));for(var N=j=null,_=w,O=w=0,T=null,P=b.next();_!==null&&!P.done;O++,P=b.next()){_.index>O?(T=_,_=null):T=_.sibling;var S=f(v,_,P.value,k);if(S===null){_===null&&(_=T);break}e&&_&&S.alternate===null&&t(v,_),w=i(S,w,O),N===null?j=S:N.sibling=S,N=S,_=T}if(P.done)return r(v,_),St&&Ii(v,O),j;if(_===null){for(;!P.done;O++,P=b.next())P=h(v,P.value,k),P!==null&&(w=i(P,w,O),N===null?j=P:N.sibling=P,N=P);return St&&Ii(v,O),j}for(_=n(v,_);!P.done;O++,P=b.next())P=g(_,v,O,P.value,k),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?O:P.key),w=i(P,w,O),N===null?j=P:N.sibling=P,N=P);return e&&_.forEach(function(M){return t(v,M)}),St&&Ii(v,O),j}function x(v,w,b,k){if(typeof b=="object"&&b!==null&&b.type===sl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case eh:e:{for(var j=b.key,N=w;N!==null;){if(N.key===j){if(j=b.type,j===sl){if(N.tag===7){r(v,N.sibling),w=a(N,b.props.children),w.return=v,v=w;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===zs&&s1(j)===N.type){r(v,N.sibling),w=a(N,b.props),w.ref=Lc(v,N,b),w.return=v,v=w;break e}r(v,N);break}else t(v,N);N=N.sibling}b.type===sl?(w=uo(b.props.children,v.mode,k,b.key),w.return=v,v=w):(k=rf(b.type,b.key,b.props,null,v.mode,k),k.ref=Lc(v,w,b),k.return=v,v=k)}return o(v);case al:e:{for(N=b.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(v,w.sibling),w=a(w,b.children||[]),w.return=v,v=w;break e}else{r(v,w);break}else t(v,w);w=w.sibling}w=sp(b,v.mode,k),w.return=v,v=w}return o(v);case zs:return N=b._init,x(v,w,N(b._payload),k)}if(Jc(b))return p(v,w,b,k);if(Tc(b))return y(v,w,b,k);uh(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(v,w.sibling),w=a(w,b),w.return=v,v=w):(r(v,w),w=ap(b,v.mode,k),w.return=v,v=w),o(v)):r(v,w)}return x}var Hl=dP(!0),uP=dP(!1),Sf=_i(null),_f=null,fl=null,ab=null;function sb(){ab=fl=_f=null}function ib(e){var t=Sf.current;wt(Sf),e._currentValue=t}function Sy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Sl(e,t){_f=e,ab=fl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jr=!0),e.firstContext=null)}function Bn(e){var t=e._currentValue;if(ab!==e)if(e={context:e,memoizedValue:t,next:null},fl===null){if(_f===null)throw Error(ie(308));fl=e,_f.dependencies={lanes:0,firstContext:e}}else fl=fl.next=e;return t}var Vi=null;function ob(e){Vi===null?Vi=[e]:Vi.push(e)}function hP(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,ob(t)):(r.next=a.next,a.next=r),t.interleaved=r,ms(e,n)}function ms(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Fs=!1;function lb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function di(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ms(e,r)}return a=n.interleaved,a===null?(t.next=t,ob(n)):(t.next=a.next,a.next=t),n.interleaved=t,ms(e,r)}function Yh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kv(e,r)}}function i1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cf(e,t,r,n){var a=e.updateQueue;Fs=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,g=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(f=t,g=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(g,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(g,h,f):p,f==null)break e;h=Ot({},h,f);break e;case 2:Fs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ko|=o,e.lanes=o,e.memoizedState=h}}function o1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ie(191,a));a.call(n)}}}var yu={},Da=_i(yu),Ld=_i(yu),$d=_i(yu);function Ki(e){if(e===yu)throw Error(ie(174));return e}function cb(e,t){switch(yt($d,t),yt(Ld,e),yt(Da,yu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sy(t,e)}wt(Da),yt(Da,t)}function Vl(){wt(Da),wt(Ld),wt($d)}function gP(e){Ki($d.current);var t=Ki(Da.current),r=sy(t,e.type);t!==r&&(yt(Ld,e),yt(Da,r))}function db(e){Ld.current===e&&(wt(Da),wt(Ld))}var Pt=_i(0);function Pf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jm=[];function ub(){for(var e=0;e<Jm.length;e++)Jm[e]._workInProgressVersionPrimary=null;Jm.length=0}var Xh=_s.ReactCurrentDispatcher,Zm=_s.ReactCurrentBatchConfig,wo=0,Et=null,Ht=null,sr=null,Ef=!1,pd=!1,Id=0,X6=0;function wr(){throw Error(ie(321))}function hb(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fa(e[r],t[r]))return!1;return!0}function fb(e,t,r,n,a,i){if(wo=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xh.current=e===null||e.memoizedState===null?tM:rM,e=r(n,a),pd){i=0;do{if(pd=!1,Id=0,25<=i)throw Error(ie(301));i+=1,sr=Ht=null,t.updateQueue=null,Xh.current=nM,e=r(n,a)}while(pd)}if(Xh.current=Of,t=Ht!==null&&Ht.next!==null,wo=0,sr=Ht=Et=null,Ef=!1,t)throw Error(ie(300));return e}function gb(){var e=Id!==0;return Id=0,e}function ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?Et.memoizedState=sr=e:sr=sr.next=e,sr}function qn(){if(Ht===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var t=sr===null?Et.memoizedState:sr.next;if(t!==null)sr=t,Ht=e;else{if(e===null)throw Error(ie(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},sr===null?Et.memoizedState=sr=e:sr=sr.next=e}return sr}function zd(e,t){return typeof t=="function"?t(e):t}function ep(e){var t=qn(),r=t.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=e;var n=Ht,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((wo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Et.lanes|=u,ko|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,fa(n,t.memoizedState)||(Jr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Et.lanes|=i,ko|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tp(e){var t=qn(),r=t.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);fa(i,t.memoizedState)||(Jr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function mP(){}function pP(e,t){var r=Et,n=qn(),a=t(),i=!fa(n.memoizedState,a);if(i&&(n.memoizedState=a,Jr=!0),n=n.queue,mb(vP.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||sr!==null&&sr.memoizedState.tag&1){if(r.flags|=2048,Fd(9,xP.bind(null,r,n,a,t),void 0,null),ir===null)throw Error(ie(349));wo&30||yP(r,t,a)}return a}function yP(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function xP(e,t,r,n){t.value=r,t.getSnapshot=n,bP(t)&&wP(e)}function vP(e,t,r){return r(function(){bP(t)&&wP(e)})}function bP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fa(e,r)}catch{return!0}}function wP(e){var t=ms(e,1);t!==null&&da(t,e,1,-1)}function l1(e){var t=ka();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:e},t.queue=e,e=e.dispatch=eM.bind(null,Et,e),[t.memoizedState,e]}function Fd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function kP(){return qn().memoizedState}function Jh(e,t,r,n){var a=ka();Et.flags|=e,a.memoizedState=Fd(1|t,r,void 0,n===void 0?null:n)}function K0(e,t,r,n){var a=qn();n=n===void 0?null:n;var i=void 0;if(Ht!==null){var o=Ht.memoizedState;if(i=o.destroy,n!==null&&hb(n,o.deps)){a.memoizedState=Fd(t,r,i,n);return}}Et.flags|=e,a.memoizedState=Fd(1|t,r,i,n)}function c1(e,t){return Jh(8390656,8,e,t)}function mb(e,t){return K0(2048,8,e,t)}function jP(e,t){return K0(4,2,e,t)}function NP(e,t){return K0(4,4,e,t)}function SP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _P(e,t,r){return r=r!=null?r.concat([e]):null,K0(4,4,SP.bind(null,t,e),r)}function pb(){}function CP(e,t){var r=qn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hb(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function PP(e,t){var r=qn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hb(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function EP(e,t,r){return wo&21?(fa(r,t)||(r=RC(),Et.lanes|=r,ko|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jr=!0),e.memoizedState=r)}function J6(e,t){var r=ct;ct=r!==0&&4>r?r:4,e(!0);var n=Zm.transition;Zm.transition={};try{e(!1),t()}finally{ct=r,Zm.transition=n}}function OP(){return qn().memoizedState}function Z6(e,t,r){var n=hi(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},TP(e))AP(t,r);else if(r=hP(e,t,r,n),r!==null){var a=zr();da(r,e,n,a),DP(r,t,n)}}function eM(e,t,r){var n=hi(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(TP(e))AP(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,fa(l,o)){var c=t.interleaved;c===null?(a.next=a,ob(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=hP(e,t,a,n),r!==null&&(a=zr(),da(r,e,n,a),DP(r,t,n))}}function TP(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function AP(e,t){pd=Ef=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function DP(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kv(e,r)}}var Of={readContext:Bn,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},tM={readContext:Bn,useCallback:function(e,t){return ka().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:c1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Jh(4194308,4,SP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Jh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jh(4,2,e,t)},useMemo:function(e,t){var r=ka();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ka();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Z6.bind(null,Et,e),[n.memoizedState,e]},useRef:function(e){var t=ka();return e={current:e},t.memoizedState=e},useState:l1,useDebugValue:pb,useDeferredValue:function(e){return ka().memoizedState=e},useTransition:function(){var e=l1(!1),t=e[0];return e=J6.bind(null,e[1]),ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Et,a=ka();if(St){if(r===void 0)throw Error(ie(407));r=r()}else{if(r=t(),ir===null)throw Error(ie(349));wo&30||yP(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,c1(vP.bind(null,n,i,e),[e]),n.flags|=2048,Fd(9,xP.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ka(),t=ir.identifierPrefix;if(St){var r=rs,n=ts;r=(n&~(1<<32-ca(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Id++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=X6++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rM={readContext:Bn,useCallback:CP,useContext:Bn,useEffect:mb,useImperativeHandle:_P,useInsertionEffect:jP,useLayoutEffect:NP,useMemo:PP,useReducer:ep,useRef:kP,useState:function(){return ep(zd)},useDebugValue:pb,useDeferredValue:function(e){var t=qn();return EP(t,Ht.memoizedState,e)},useTransition:function(){var e=ep(zd)[0],t=qn().memoizedState;return[e,t]},useMutableSource:mP,useSyncExternalStore:pP,useId:OP,unstable_isNewReconciler:!1},nM={readContext:Bn,useCallback:CP,useContext:Bn,useEffect:mb,useImperativeHandle:_P,useInsertionEffect:jP,useLayoutEffect:NP,useMemo:PP,useReducer:tp,useRef:kP,useState:function(){return tp(zd)},useDebugValue:pb,useDeferredValue:function(e){var t=qn();return Ht===null?t.memoizedState=e:EP(t,Ht.memoizedState,e)},useTransition:function(){var e=tp(zd)[0],t=qn().memoizedState;return[e,t]},useMutableSource:mP,useSyncExternalStore:pP,useId:OP,unstable_isNewReconciler:!1};function Zn(e,t){if(e&&e.defaultProps){t=Ot({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _y(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ot({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var G0={isMounted:function(e){return(e=e._reactInternals)?Ao(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=zr(),a=hi(e),i=ss(n,a);i.payload=t,r!=null&&(i.callback=r),t=di(e,i,a),t!==null&&(da(t,e,a,n),Yh(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=zr(),a=hi(e),i=ss(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=di(e,i,a),t!==null&&(da(t,e,a,n),Yh(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=zr(),n=hi(e),a=ss(r,n);a.tag=2,t!=null&&(a.callback=t),t=di(e,a,n),t!==null&&(da(t,e,n,r),Yh(t,e,n))}};function d1(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ad(r,n)||!Ad(a,i):!0}function RP(e,t,r){var n=!1,a=vi,i=t.contextType;return typeof i=="object"&&i!==null?i=Bn(i):(a=tn(t)?vo:Pr.current,n=t.contextTypes,i=(n=n!=null)?ql(e,a):vi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=G0,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function u1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&G0.enqueueReplaceState(t,t.state,null)}function Cy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},lb(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Bn(i):(i=tn(t)?vo:Pr.current,a.context=ql(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(_y(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&G0.enqueueReplaceState(a,a.state,null),Cf(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Kl(e,t){try{var r="",n=t;do r+=TR(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function rp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Py(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var aM=typeof WeakMap=="function"?WeakMap:Map;function MP(e,t,r){r=ss(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Af||(Af=!0,Iy=n),Py(e,t)},r}function LP(e,t,r){r=ss(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Py(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Py(e,t),typeof n!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function h1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new aM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=xM.bind(null,e,t,r),t.then(e,e))}function f1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function g1(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ss(-1,1),t.tag=2,di(r,t,1))),r.lanes|=1),e)}var sM=_s.ReactCurrentOwner,Jr=!1;function Mr(e,t,r,n){t.child=e===null?uP(t,null,r,n):Hl(t,e.child,r,n)}function m1(e,t,r,n,a){r=r.render;var i=t.ref;return Sl(t,a),n=fb(e,t,r,n,i,a),r=gb(),e!==null&&!Jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ps(e,t,a)):(St&&r&&tb(t),t.flags|=1,Mr(e,t,n,a),t.child)}function p1(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Nb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,$P(e,t,i,n,a)):(e=rf(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ad,r(o,n)&&e.ref===t.ref)return ps(e,t,a)}return t.flags|=1,e=fi(i,n),e.ref=t.ref,e.return=t,t.child=e}function $P(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Ad(i,n)&&e.ref===t.ref)if(Jr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Jr=!0);else return t.lanes=e.lanes,ps(e,t,a)}return Ey(e,t,r,n,a)}function IP(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(ml,cn),cn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yt(ml,cn),cn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,yt(ml,cn),cn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,yt(ml,cn),cn|=n;return Mr(e,t,a,r),t.child}function zP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ey(e,t,r,n,a){var i=tn(r)?vo:Pr.current;return i=ql(t,i),Sl(t,a),r=fb(e,t,r,n,i,a),n=gb(),e!==null&&!Jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ps(e,t,a)):(St&&n&&tb(t),t.flags|=1,Mr(e,t,r,a),t.child)}function y1(e,t,r,n,a){if(tn(r)){var i=!0;kf(t)}else i=!1;if(Sl(t,a),t.stateNode===null)Zh(e,t),RP(t,r,n),Cy(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Bn(d):(d=tn(r)?vo:Pr.current,d=ql(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&u1(t,o,n,d),Fs=!1;var f=t.memoizedState;o.state=f,Cf(t,n,o,a),c=t.memoizedState,l!==n||f!==c||en.current||Fs?(typeof u=="function"&&(_y(t,r,u,n),c=t.memoizedState),(l=Fs||d1(t,r,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,fP(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Zn(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=tn(r)?vo:Pr.current,c=ql(t,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&u1(t,o,n,c),Fs=!1,f=t.memoizedState,o.state=f,Cf(t,n,o,a);var p=t.memoizedState;l!==h||f!==p||en.current||Fs?(typeof g=="function"&&(_y(t,r,g,n),p=t.memoizedState),(d=Fs||d1(t,r,d,n,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Oy(e,t,r,n,i,a)}function Oy(e,t,r,n,a,i){zP(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&r1(t,r,!1),ps(e,t,i);n=t.stateNode,sM.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Hl(t,e.child,null,i),t.child=Hl(t,null,l,i)):Mr(e,t,l,i),t.memoizedState=n.state,a&&r1(t,r,!0),t.child}function FP(e){var t=e.stateNode;t.pendingContext?t1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&t1(e,t.context,!1),cb(e,t.containerInfo)}function x1(e,t,r,n,a){return Wl(),nb(a),t.flags|=256,Mr(e,t,r,n),t.child}var Ty={dehydrated:null,treeContext:null,retryLane:0};function Ay(e){return{baseLanes:e,cachePool:null,transitions:null}}function UP(e,t,r){var n=t.pendingProps,a=Pt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),yt(Pt,a&1),e===null)return Ny(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=X0(o,n,0,null),e=uo(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ay(r),t.memoizedState=Ty,e):yb(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return iM(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=fi(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=fi(l,i):(i=uo(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Ay(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Ty,n}return i=e.child,e=i.sibling,n=fi(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function yb(e,t){return t=X0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hh(e,t,r,n){return n!==null&&nb(n),Hl(t,e.child,null,r),e=yb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=rp(Error(ie(422))),hh(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=X0({mode:"visible",children:n.children},a,0,null),i=uo(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Hl(t,e.child,null,o),t.child.memoizedState=Ay(o),t.memoizedState=Ty,i);if(!(t.mode&1))return hh(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ie(419)),n=rp(i,n,void 0),hh(e,t,o,n)}if(l=(o&e.childLanes)!==0,Jr||l){if(n=ir,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ms(e,a),da(n,e,a,-1))}return jb(),n=rp(Error(ie(421))),hh(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=vM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,hn=ci(a.nextSibling),gn=t,St=!0,aa=null,e!==null&&(Rn[Mn++]=ts,Rn[Mn++]=rs,Rn[Mn++]=bo,ts=e.id,rs=e.overflow,bo=t),t=yb(t,n.children),t.flags|=4096,t)}function v1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Sy(e.return,t,r)}function np(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function BP(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Mr(e,t,n.children,r),n=Pt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&v1(e,r,t);else if(e.tag===19)v1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(yt(Pt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Pf(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),np(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Pf(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}np(t,!0,r,null,i);break;case"together":np(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ps(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ko|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,r=fi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function oM(e,t,r){switch(t.tag){case 3:FP(t),Wl();break;case 5:gP(t);break;case 1:tn(t.type)&&kf(t);break;case 4:cb(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;yt(Sf,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(yt(Pt,Pt.current&1),t.flags|=128,null):r&t.child.childLanes?UP(e,t,r):(yt(Pt,Pt.current&1),e=ps(e,t,r),e!==null?e.sibling:null);yt(Pt,Pt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return BP(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),yt(Pt,Pt.current),n)break;return null;case 22:case 23:return t.lanes=0,IP(e,t,r)}return ps(e,t,r)}var qP,Dy,WP,HP;qP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dy=function(){};WP=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ki(Da.current);var i=null;switch(r){case"input":a=ty(e,a),n=ty(e,n),i=[];break;case"select":a=Ot({},a,{value:void 0}),n=Ot({},n,{value:void 0}),i=[];break;case"textarea":a=ay(e,a),n=ay(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=bf)}iy(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Sd.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Sd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&vt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};HP=function(e,t,r,n){r!==n&&(t.flags|=4)};function $c(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function lM(e,t,r){var n=t.pendingProps;switch(rb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(t),null;case 1:return tn(t.type)&&wf(),kr(t),null;case 3:return n=t.stateNode,Vl(),wt(en),wt(Pr),ub(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(dh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,aa!==null&&(Uy(aa),aa=null))),Dy(e,t),kr(t),null;case 5:db(t);var a=Ki($d.current);if(r=t.type,e!==null&&t.stateNode!=null)WP(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ie(166));return kr(t),null}if(e=Ki(Da.current),dh(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ea]=t,n[Md]=i,e=(t.mode&1)!==0,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(a=0;a<ed.length;a++)vt(ed[a],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":Pj(n,i),vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},vt("invalid",n);break;case"textarea":Oj(n,i),vt("invalid",n)}iy(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ch(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ch(n.textContent,l,e),a=["children",""+l]):Sd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&vt("scroll",n)}switch(r){case"input":th(n),Ej(n,i,!0);break;case"textarea":th(n),Tj(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=bf)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ea]=t,e[Md]=n,qP(e,t,!1,!1),t.stateNode=e;e:{switch(o=oy(r,n),r){case"dialog":vt("cancel",e),vt("close",e),a=n;break;case"iframe":case"object":case"embed":vt("load",e),a=n;break;case"video":case"audio":for(a=0;a<ed.length;a++)vt(ed[a],e);a=n;break;case"source":vt("error",e),a=n;break;case"img":case"image":case"link":vt("error",e),vt("load",e),a=n;break;case"details":vt("toggle",e),a=n;break;case"input":Pj(e,n),a=ty(e,n),vt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ot({},n,{value:void 0}),vt("invalid",e);break;case"textarea":Oj(e,n),a=ay(e,n),vt("invalid",e);break;default:a=n}iy(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?kC(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bC(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_d(e,c):typeof c=="number"&&_d(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vt("scroll",e):c!=null&&Uv(e,i,c,o))}switch(r){case"input":th(e),Ej(e,n,!1);break;case"textarea":th(e),Tj(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xi(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?wl(e,!!n.multiple,i,!1):n.defaultValue!=null&&wl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=bf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kr(t),null;case 6:if(e&&t.stateNode!=null)HP(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ie(166));if(r=Ki($d.current),Ki(Da.current),dh(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ea]=t,(i=n.nodeValue!==r)&&(e=gn,e!==null))switch(e.tag){case 3:ch(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ch(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ea]=t,t.stateNode=n}return kr(t),null;case 13:if(wt(Pt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(St&&hn!==null&&t.mode&1&&!(t.flags&128))cP(),Wl(),t.flags|=98560,i=!1;else if(i=dh(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ie(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ie(317));i[Ea]=t}else Wl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kr(t),i=!1}else aa!==null&&(Uy(aa),aa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Pt.current&1?Kt===0&&(Kt=3):jb())),t.updateQueue!==null&&(t.flags|=4),kr(t),null);case 4:return Vl(),Dy(e,t),e===null&&Dd(t.stateNode.containerInfo),kr(t),null;case 10:return ib(t.type._context),kr(t),null;case 17:return tn(t.type)&&wf(),kr(t),null;case 19:if(wt(Pt),i=t.memoizedState,i===null)return kr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)$c(i,!1);else{if(Kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Pf(e),o!==null){for(t.flags|=128,$c(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return yt(Pt,Pt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Lt()>Gl&&(t.flags|=128,n=!0,$c(i,!1),t.lanes=4194304)}else{if(!n)if(e=Pf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$c(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!St)return kr(t),null}else 2*Lt()-i.renderingStartTime>Gl&&r!==1073741824&&(t.flags|=128,n=!0,$c(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Lt(),t.sibling=null,r=Pt.current,yt(Pt,n?r&1|2:r&1),t):(kr(t),null);case 22:case 23:return kb(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?cn&1073741824&&(kr(t),t.subtreeFlags&6&&(t.flags|=8192)):kr(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function cM(e,t){switch(rb(t),t.tag){case 1:return tn(t.type)&&wf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vl(),wt(en),wt(Pr),ub(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return db(t),null;case 13:if(wt(Pt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));Wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return wt(Pt),null;case 4:return Vl(),null;case 10:return ib(t.type._context),null;case 22:case 23:return kb(),null;case 24:return null;default:return null}}var fh=!1,_r=!1,dM=typeof WeakSet=="function"?WeakSet:Set,ye=null;function gl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){At(e,t,n)}else r.current=null}function Ry(e,t,r){try{r()}catch(n){At(e,t,n)}}var b1=!1;function uM(e,t){if(yy=yf,e=YC(),eb(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var g;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===e)break t;if(f===r&&++d===a&&(l=o),f===i&&++u===n&&(c=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(xy={focusedElem:e,selectionRange:r},yf=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,x=p.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Zn(t.type,y),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(k){At(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return p=b1,b1=!1,p}function yd(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ry(t,r,i)}a=a.next}while(a!==n)}}function Q0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function My(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function VP(e){var t=e.alternate;t!==null&&(e.alternate=null,VP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ea],delete t[Md],delete t[wy],delete t[K6],delete t[G6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KP(e){return e.tag===5||e.tag===3||e.tag===4}function w1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||KP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ly(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=bf));else if(n!==4&&(e=e.child,e!==null))for(Ly(e,t,r),e=e.sibling;e!==null;)Ly(e,t,r),e=e.sibling}function $y(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for($y(e,t,r),e=e.sibling;e!==null;)$y(e,t,r),e=e.sibling}var ur=null,ra=!1;function As(e,t,r){for(r=r.child;r!==null;)GP(e,t,r),r=r.sibling}function GP(e,t,r){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(U0,r)}catch{}switch(r.tag){case 5:_r||gl(r,t);case 6:var n=ur,a=ra;ur=null,As(e,t,r),ur=n,ra=a,ur!==null&&(ra?(e=ur,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ur.removeChild(r.stateNode));break;case 18:ur!==null&&(ra?(e=ur,r=r.stateNode,e.nodeType===8?Ym(e.parentNode,r):e.nodeType===1&&Ym(e,r),Od(e)):Ym(ur,r.stateNode));break;case 4:n=ur,a=ra,ur=r.stateNode.containerInfo,ra=!0,As(e,t,r),ur=n,ra=a;break;case 0:case 11:case 14:case 15:if(!_r&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ry(r,t,o),a=a.next}while(a!==n)}As(e,t,r);break;case 1:if(!_r&&(gl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){At(r,t,l)}As(e,t,r);break;case 21:As(e,t,r);break;case 22:r.mode&1?(_r=(n=_r)||r.memoizedState!==null,As(e,t,r),_r=n):As(e,t,r);break;default:As(e,t,r)}}function k1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dM),t.forEach(function(n){var a=bM.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Yn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ur=l.stateNode,ra=!1;break e;case 3:ur=l.stateNode.containerInfo,ra=!0;break e;case 4:ur=l.stateNode.containerInfo,ra=!0;break e}l=l.return}if(ur===null)throw Error(ie(160));GP(i,o,a),ur=null,ra=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){At(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QP(t,e),t=t.sibling}function QP(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yn(t,e),wa(e),n&4){try{yd(3,e,e.return),Q0(3,e)}catch(y){At(e,e.return,y)}try{yd(5,e,e.return)}catch(y){At(e,e.return,y)}}break;case 1:Yn(t,e),wa(e),n&512&&r!==null&&gl(r,r.return);break;case 5:if(Yn(t,e),wa(e),n&512&&r!==null&&gl(r,r.return),e.flags&32){var a=e.stateNode;try{_d(a,"")}catch(y){At(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&yC(a,i),oy(l,o);var d=oy(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?kC(a,h):u==="dangerouslySetInnerHTML"?bC(a,h):u==="children"?_d(a,h):Uv(a,u,h,d)}switch(l){case"input":ry(a,i);break;case"textarea":xC(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?wl(a,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?wl(a,!!i.multiple,i.defaultValue,!0):wl(a,!!i.multiple,i.multiple?[]:"",!1))}a[Md]=i}catch(y){At(e,e.return,y)}}break;case 6:if(Yn(t,e),wa(e),n&4){if(e.stateNode===null)throw Error(ie(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){At(e,e.return,y)}}break;case 3:if(Yn(t,e),wa(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Od(t.containerInfo)}catch(y){At(e,e.return,y)}break;case 4:Yn(t,e),wa(e);break;case 13:Yn(t,e),wa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(bb=Lt())),n&4&&k1(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(_r=(d=_r)||u,Yn(t,e),_r=d):Yn(t,e),wa(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ye=e,u=e.child;u!==null;){for(h=ye=u;ye!==null;){switch(f=ye,g=f.child,f.tag){case 0:case 11:case 14:case 15:yd(4,f,f.return);break;case 1:gl(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){At(n,r,y)}}break;case 5:gl(f,f.return);break;case 22:if(f.memoizedState!==null){N1(h);continue}}g!==null?(g.return=f,ye=g):N1(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=wC("display",o))}catch(y){At(e,e.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){At(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yn(t,e),wa(e),n&4&&k1(e);break;case 21:break;default:Yn(t,e),wa(e)}}function wa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(KP(r)){var n=r;break e}r=r.return}throw Error(ie(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(_d(a,""),n.flags&=-33);var i=w1(e);$y(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=w1(e);Ly(e,l,o);break;default:throw Error(ie(161))}}catch(c){At(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hM(e,t,r){ye=e,YP(e)}function YP(e,t,r){for(var n=(e.mode&1)!==0;ye!==null;){var a=ye,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||fh;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||_r;l=fh;var d=_r;if(fh=o,(_r=c)&&!d)for(ye=a;ye!==null;)o=ye,c=o.child,o.tag===22&&o.memoizedState!==null?S1(a):c!==null?(c.return=o,ye=c):S1(a);for(;i!==null;)ye=i,YP(i),i=i.sibling;ye=a,fh=l,_r=d}j1(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ye=i):j1(e)}}function j1(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_r||Q0(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_r)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Zn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&o1(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}o1(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Od(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}_r||t.flags&512&&My(t)}catch(f){At(t,t.return,f)}}if(t===e){ye=null;break}if(r=t.sibling,r!==null){r.return=t.return,ye=r;break}ye=t.return}}function N1(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ye=r;break}ye=t.return}}function S1(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Q0(4,t)}catch(c){At(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){At(t,a,c)}}var i=t.return;try{My(t)}catch(c){At(t,i,c)}break;case 5:var o=t.return;try{My(t)}catch(c){At(t,o,c)}}}catch(c){At(t,t.return,c)}if(t===e){ye=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ye=l;break}ye=t.return}}var fM=Math.ceil,Tf=_s.ReactCurrentDispatcher,xb=_s.ReactCurrentOwner,Un=_s.ReactCurrentBatchConfig,Je=0,ir=null,Ft=null,mr=0,cn=0,ml=_i(0),Kt=0,Ud=null,ko=0,Y0=0,vb=0,xd=null,Yr=null,bb=0,Gl=1/0,Va=null,Af=!1,Iy=null,ui=null,gh=!1,ri=null,Df=0,vd=0,zy=null,ef=-1,tf=0;function zr(){return Je&6?Lt():ef!==-1?ef:ef=Lt()}function hi(e){return e.mode&1?Je&2&&mr!==0?mr&-mr:Y6.transition!==null?(tf===0&&(tf=RC()),tf):(e=ct,e!==0||(e=window.event,e=e===void 0?16:UC(e.type)),e):1}function da(e,t,r,n){if(50<vd)throw vd=0,zy=null,Error(ie(185));gu(e,r,n),(!(Je&2)||e!==ir)&&(e===ir&&(!(Je&2)&&(Y0|=r),Kt===4&&Ws(e,mr)),rn(e,n),r===1&&Je===0&&!(t.mode&1)&&(Gl=Lt()+500,V0&&Ci()))}function rn(e,t){var r=e.callbackNode;YR(e,t);var n=pf(e,e===ir?mr:0);if(n===0)r!==null&&Rj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Rj(r),t===1)e.tag===0?Q6(_1.bind(null,e)):iP(_1.bind(null,e)),H6(function(){!(Je&6)&&Ci()}),r=null;else{switch(MC(n)){case 1:r=Vv;break;case 4:r=AC;break;case 16:r=mf;break;case 536870912:r=DC;break;default:r=mf}r=aE(r,XP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function XP(e,t){if(ef=-1,tf=0,Je&6)throw Error(ie(327));var r=e.callbackNode;if(_l()&&e.callbackNode!==r)return null;var n=pf(e,e===ir?mr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Rf(e,n);else{t=n;var a=Je;Je|=2;var i=ZP();(ir!==e||mr!==t)&&(Va=null,Gl=Lt()+500,co(e,t));do try{pM();break}catch(l){JP(e,l)}while(!0);sb(),Tf.current=i,Je=a,Ft!==null?t=0:(ir=null,mr=0,t=Kt)}if(t!==0){if(t===2&&(a=hy(e),a!==0&&(n=a,t=Fy(e,a))),t===1)throw r=Ud,co(e,0),Ws(e,n),rn(e,Lt()),r;if(t===6)Ws(e,n);else{if(a=e.current.alternate,!(n&30)&&!gM(a)&&(t=Rf(e,n),t===2&&(i=hy(e),i!==0&&(n=i,t=Fy(e,i))),t===1))throw r=Ud,co(e,0),Ws(e,n),rn(e,Lt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ie(345));case 2:zi(e,Yr,Va);break;case 3:if(Ws(e,n),(n&130023424)===n&&(t=bb+500-Lt(),10<t)){if(pf(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){zr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=by(zi.bind(null,e,Yr,Va),t);break}zi(e,Yr,Va);break;case 4:if(Ws(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-ca(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fM(n/1960))-n,10<n){e.timeoutHandle=by(zi.bind(null,e,Yr,Va),n);break}zi(e,Yr,Va);break;case 5:zi(e,Yr,Va);break;default:throw Error(ie(329))}}}return rn(e,Lt()),e.callbackNode===r?XP.bind(null,e):null}function Fy(e,t){var r=xd;return e.current.memoizedState.isDehydrated&&(co(e,t).flags|=256),e=Rf(e,t),e!==2&&(t=Yr,Yr=r,t!==null&&Uy(t)),e}function Uy(e){Yr===null?Yr=e:Yr.push.apply(Yr,e)}function gM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!fa(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ws(e,t){for(t&=~vb,t&=~Y0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ca(t),n=1<<r;e[r]=-1,t&=~n}}function _1(e){if(Je&6)throw Error(ie(327));_l();var t=pf(e,0);if(!(t&1))return rn(e,Lt()),null;var r=Rf(e,t);if(e.tag!==0&&r===2){var n=hy(e);n!==0&&(t=n,r=Fy(e,n))}if(r===1)throw r=Ud,co(e,0),Ws(e,t),rn(e,Lt()),r;if(r===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zi(e,Yr,Va),rn(e,Lt()),null}function wb(e,t){var r=Je;Je|=1;try{return e(t)}finally{Je=r,Je===0&&(Gl=Lt()+500,V0&&Ci())}}function jo(e){ri!==null&&ri.tag===0&&!(Je&6)&&_l();var t=Je;Je|=1;var r=Un.transition,n=ct;try{if(Un.transition=null,ct=1,e)return e()}finally{ct=n,Un.transition=r,Je=t,!(Je&6)&&Ci()}}function kb(){cn=ml.current,wt(ml)}function co(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,W6(r)),Ft!==null)for(r=Ft.return;r!==null;){var n=r;switch(rb(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wf();break;case 3:Vl(),wt(en),wt(Pr),ub();break;case 5:db(n);break;case 4:Vl();break;case 13:wt(Pt);break;case 19:wt(Pt);break;case 10:ib(n.type._context);break;case 22:case 23:kb()}r=r.return}if(ir=e,Ft=e=fi(e.current,null),mr=cn=t,Kt=0,Ud=null,vb=Y0=ko=0,Yr=xd=null,Vi!==null){for(t=0;t<Vi.length;t++)if(r=Vi[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Vi=null}return e}function JP(e,t){do{var r=Ft;try{if(sb(),Xh.current=Of,Ef){for(var n=Et.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ef=!1}if(wo=0,sr=Ht=Et=null,pd=!1,Id=0,xb.current=null,r===null||r.return===null){Kt=1,Ud=t,Ft=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=mr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=f1(o);if(g!==null){g.flags&=-257,g1(g,o,l,i,t),g.mode&1&&h1(i,d,t),t=g,c=d;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){h1(i,d,t),jb();break e}c=Error(ie(426))}}else if(St&&l.mode&1){var x=f1(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),g1(x,o,l,i,t),nb(Kl(c,l));break e}}i=c=Kl(c,l),Kt!==4&&(Kt=2),xd===null?xd=[i]:xd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=MP(i,c,t);i1(i,v);break e;case 1:l=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ui===null||!ui.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=LP(i,l,t);i1(i,k);break e}}i=i.return}while(i!==null)}tE(r)}catch(j){t=j,Ft===r&&r!==null&&(Ft=r=r.return);continue}break}while(!0)}function ZP(){var e=Tf.current;return Tf.current=Of,e===null?Of:e}function jb(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),ir===null||!(ko&268435455)&&!(Y0&268435455)||Ws(ir,mr)}function Rf(e,t){var r=Je;Je|=2;var n=ZP();(ir!==e||mr!==t)&&(Va=null,co(e,t));do try{mM();break}catch(a){JP(e,a)}while(!0);if(sb(),Je=r,Tf.current=n,Ft!==null)throw Error(ie(261));return ir=null,mr=0,Kt}function mM(){for(;Ft!==null;)eE(Ft)}function pM(){for(;Ft!==null&&!UR();)eE(Ft)}function eE(e){var t=nE(e.alternate,e,cn);e.memoizedProps=e.pendingProps,t===null?tE(e):Ft=t,xb.current=null}function tE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cM(r,t),r!==null){r.flags&=32767,Ft=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kt=6,Ft=null;return}}else if(r=lM(r,t,cn),r!==null){Ft=r;return}if(t=t.sibling,t!==null){Ft=t;return}Ft=t=e}while(t!==null);Kt===0&&(Kt=5)}function zi(e,t,r){var n=ct,a=Un.transition;try{Un.transition=null,ct=1,yM(e,t,r,n)}finally{Un.transition=a,ct=n}return null}function yM(e,t,r,n){do _l();while(ri!==null);if(Je&6)throw Error(ie(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(XR(e,i),e===ir&&(Ft=ir=null,mr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gh||(gh=!0,aE(mf,function(){return _l(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var o=ct;ct=1;var l=Je;Je|=4,xb.current=null,uM(e,r),QP(r,e),$6(xy),yf=!!yy,xy=yy=null,e.current=r,hM(r),BR(),Je=l,ct=o,Un.transition=i}else e.current=r;if(gh&&(gh=!1,ri=e,Df=a),i=e.pendingLanes,i===0&&(ui=null),HR(r.stateNode),rn(e,Lt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Af)throw Af=!1,e=Iy,Iy=null,e;return Df&1&&e.tag!==0&&_l(),i=e.pendingLanes,i&1?e===zy?vd++:(vd=0,zy=e):vd=0,Ci(),null}function _l(){if(ri!==null){var e=MC(Df),t=Un.transition,r=ct;try{if(Un.transition=null,ct=16>e?16:e,ri===null)var n=!1;else{if(e=ri,ri=null,Df=0,Je&6)throw Error(ie(331));var a=Je;for(Je|=4,ye=e.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ye=d;ye!==null;){var u=ye;switch(u.tag){case 0:case 11:case 15:yd(8,u,i)}var h=u.child;if(h!==null)h.return=u,ye=h;else for(;ye!==null;){u=ye;var f=u.sibling,g=u.return;if(VP(u),u===d){ye=null;break}if(f!==null){f.return=g,ye=f;break}ye=g}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:yd(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ye=v;break e}ye=i.return}}var w=e.current;for(ye=w;ye!==null;){o=ye;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ye=b;else e:for(o=w;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Q0(9,l)}}catch(j){At(l,l.return,j)}if(l===o){ye=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ye=k;break e}ye=l.return}}if(Je=a,Ci(),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(U0,e)}catch{}n=!0}return n}finally{ct=r,Un.transition=t}}return!1}function C1(e,t,r){t=Kl(r,t),t=MP(e,t,1),e=di(e,t,1),t=zr(),e!==null&&(gu(e,1,t),rn(e,t))}function At(e,t,r){if(e.tag===3)C1(e,e,r);else for(;t!==null;){if(t.tag===3){C1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ui===null||!ui.has(n))){e=Kl(r,e),e=LP(t,e,1),t=di(t,e,1),e=zr(),t!==null&&(gu(t,1,e),rn(t,e));break}}t=t.return}}function xM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=zr(),e.pingedLanes|=e.suspendedLanes&r,ir===e&&(mr&r)===r&&(Kt===4||Kt===3&&(mr&130023424)===mr&&500>Lt()-bb?co(e,0):vb|=r),rn(e,t)}function rE(e,t){t===0&&(e.mode&1?(t=ah,ah<<=1,!(ah&130023424)&&(ah=4194304)):t=1);var r=zr();e=ms(e,t),e!==null&&(gu(e,t,r),rn(e,r))}function vM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),rE(e,r)}function bM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ie(314))}n!==null&&n.delete(t),rE(e,r)}var nE;nE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||en.current)Jr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Jr=!1,oM(e,t,r);Jr=!!(e.flags&131072)}else Jr=!1,St&&t.flags&1048576&&oP(t,Nf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Zh(e,t),e=t.pendingProps;var a=ql(t,Pr.current);Sl(t,r),a=fb(null,t,n,e,a,r);var i=gb();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tn(n)?(i=!0,kf(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,lb(t),a.updater=G0,t.stateNode=a,a._reactInternals=t,Cy(t,n,e,r),t=Oy(null,t,n,!0,i,r)):(t.tag=0,St&&i&&tb(t),Mr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Zh(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=kM(n),e=Zn(n,e),a){case 0:t=Ey(null,t,n,e,r);break e;case 1:t=y1(null,t,n,e,r);break e;case 11:t=m1(null,t,n,e,r);break e;case 14:t=p1(null,t,n,Zn(n.type,e),r);break e}throw Error(ie(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zn(n,a),Ey(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zn(n,a),y1(e,t,n,a,r);case 3:e:{if(FP(t),e===null)throw Error(ie(387));n=t.pendingProps,i=t.memoizedState,a=i.element,fP(e,t),Cf(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Kl(Error(ie(423)),t),t=x1(e,t,n,r,a);break e}else if(n!==a){a=Kl(Error(ie(424)),t),t=x1(e,t,n,r,a);break e}else for(hn=ci(t.stateNode.containerInfo.firstChild),gn=t,St=!0,aa=null,r=uP(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wl(),n===a){t=ps(e,t,r);break e}Mr(e,t,n,r)}t=t.child}return t;case 5:return gP(t),e===null&&Ny(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,vy(n,a)?o=null:i!==null&&vy(n,i)&&(t.flags|=32),zP(e,t),Mr(e,t,o,r),t.child;case 6:return e===null&&Ny(t),null;case 13:return UP(e,t,r);case 4:return cb(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Hl(t,null,n,r):Mr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zn(n,a),m1(e,t,n,a,r);case 7:return Mr(e,t,t.pendingProps,r),t.child;case 8:return Mr(e,t,t.pendingProps.children,r),t.child;case 12:return Mr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,yt(Sf,n._currentValue),n._currentValue=o,i!==null)if(fa(i.value,o)){if(i.children===a.children&&!en.current){t=ps(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ss(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Sy(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ie(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Sy(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Sl(t,r),a=Bn(a),n=n(a),t.flags|=1,Mr(e,t,n,r),t.child;case 14:return n=t.type,a=Zn(n,t.pendingProps),a=Zn(n.type,a),p1(e,t,n,a,r);case 15:return $P(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zn(n,a),Zh(e,t),t.tag=1,tn(n)?(e=!0,kf(t)):e=!1,Sl(t,r),RP(t,n,a),Cy(t,n,a,r),Oy(null,t,n,!0,e,r);case 19:return BP(e,t,r);case 22:return IP(e,t,r)}throw Error(ie(156,t.tag))};function aE(e,t){return TC(e,t)}function wM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(e,t,r,n){return new wM(e,t,r,n)}function Nb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kM(e){if(typeof e=="function")return Nb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qv)return 11;if(e===Wv)return 14}return 2}function fi(e,t){var r=e.alternate;return r===null?(r=$n(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rf(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Nb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case sl:return uo(r.children,a,i,t);case Bv:o=8,a|=8;break;case Xp:return e=$n(12,r,t,a|2),e.elementType=Xp,e.lanes=i,e;case Jp:return e=$n(13,r,t,a),e.elementType=Jp,e.lanes=i,e;case Zp:return e=$n(19,r,t,a),e.elementType=Zp,e.lanes=i,e;case gC:return X0(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hC:o=10;break e;case fC:o=9;break e;case qv:o=11;break e;case Wv:o=14;break e;case zs:o=16,n=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=$n(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function uo(e,t,r,n){return e=$n(7,e,n,t),e.lanes=r,e}function X0(e,t,r,n){return e=$n(22,e,n,t),e.elementType=gC,e.lanes=r,e.stateNode={isHidden:!1},e}function ap(e,t,r){return e=$n(6,e,null,t),e.lanes=r,e}function sp(e,t,r){return t=$n(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jM(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zm(0),this.expirationTimes=zm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zm(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Sb(e,t,r,n,a,i,o,l,c){return e=new jM(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=$n(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lb(i),e}function NM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:al,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function sE(e){if(!e)return vi;e=e._reactInternals;e:{if(Ao(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var r=e.type;if(tn(r))return sP(e,r,t)}return t}function iE(e,t,r,n,a,i,o,l,c){return e=Sb(r,n,!0,e,a,i,o,l,c),e.context=sE(null),r=e.current,n=zr(),a=hi(r),i=ss(n,a),i.callback=t??null,di(r,i,a),e.current.lanes=a,gu(e,a,n),rn(e,n),e}function J0(e,t,r,n){var a=t.current,i=zr(),o=hi(a);return r=sE(r),t.context===null?t.context=r:t.pendingContext=r,t=ss(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=di(a,t,o),e!==null&&(da(e,a,o,i),Yh(e,a,o)),o}function Mf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function P1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _b(e,t){P1(e,t),(e=e.alternate)&&P1(e,t)}function SM(){return null}var oE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cb(e){this._internalRoot=e}Z0.prototype.render=Cb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));J0(e,t,null,null)};Z0.prototype.unmount=Cb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jo(function(){J0(null,e,null,null)}),t[gs]=null}};function Z0(e){this._internalRoot=e}Z0.prototype.unstable_scheduleHydration=function(e){if(e){var t=IC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qs.length&&t!==0&&t<qs[r].priority;r++);qs.splice(r,0,e),r===0&&FC(e)}};function Pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function eg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function E1(){}function _M(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Mf(o);i.call(d)}}var o=iE(t,n,e,0,null,!1,!1,"",E1);return e._reactRootContainer=o,e[gs]=o.current,Dd(e.nodeType===8?e.parentNode:e),jo(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Mf(c);l.call(d)}}var c=Sb(e,0,!1,null,null,!1,!1,"",E1);return e._reactRootContainer=c,e[gs]=c.current,Dd(e.nodeType===8?e.parentNode:e),jo(function(){J0(t,c,r,n)}),c}function tg(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Mf(o);l.call(c)}}J0(t,o,e,a)}else o=_M(r,t,e,a,n);return Mf(o)}LC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zc(t.pendingLanes);r!==0&&(Kv(t,r|1),rn(t,Lt()),!(Je&6)&&(Gl=Lt()+500,Ci()))}break;case 13:jo(function(){var n=ms(e,1);if(n!==null){var a=zr();da(n,e,1,a)}}),_b(e,1)}};Gv=function(e){if(e.tag===13){var t=ms(e,134217728);if(t!==null){var r=zr();da(t,e,134217728,r)}_b(e,134217728)}};$C=function(e){if(e.tag===13){var t=hi(e),r=ms(e,t);if(r!==null){var n=zr();da(r,e,t,n)}_b(e,t)}};IC=function(){return ct};zC=function(e,t){var r=ct;try{return ct=e,t()}finally{ct=r}};cy=function(e,t,r){switch(t){case"input":if(ry(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=H0(n);if(!a)throw Error(ie(90));pC(n),ry(n,a)}}}break;case"textarea":xC(e,r);break;case"select":t=r.value,t!=null&&wl(e,!!r.multiple,t,!1)}};SC=wb;_C=jo;var CM={usingClientEntryPoint:!1,Events:[pu,cl,H0,jC,NC,wb]},Ic={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PM={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_s.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=EC(e),e===null?null:e.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||SM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{U0=mh.inject(PM),Aa=mh}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CM;Nn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pb(t))throw Error(ie(200));return NM(e,t,null,r)};Nn.createRoot=function(e,t){if(!Pb(e))throw Error(ie(299));var r=!1,n="",a=oE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Sb(e,1,!1,null,null,r,!1,n,a),e[gs]=t.current,Dd(e.nodeType===8?e.parentNode:e),new Cb(t)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=EC(t),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return jo(e)};Nn.hydrate=function(e,t,r){if(!eg(t))throw Error(ie(200));return tg(null,e,t,!0,r)};Nn.hydrateRoot=function(e,t,r){if(!Pb(e))throw Error(ie(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=oE;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=iE(t,null,e,1,r??null,a,!1,i,o),e[gs]=t.current,Dd(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Z0(t)};Nn.render=function(e,t,r){if(!eg(t))throw Error(ie(200));return tg(null,e,t,!1,r)};Nn.unmountComponentAtNode=function(e){if(!eg(e))throw Error(ie(40));return e._reactRootContainer?(jo(function(){tg(null,null,e,!1,function(){e._reactRootContainer=null,e[gs]=null})}),!0):!1};Nn.unstable_batchedUpdates=wb;Nn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!eg(r))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return tg(e,t,r,!1,n)};Nn.version="18.3.1-next-f1338f8080-20240426";function lE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lE)}catch(e){console.error(e)}}lE(),lC.exports=Nn;var Do=lC.exports,cE,O1=Do;cE=O1.createRoot,O1.hydrateRoot;var xu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},EM={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ks,Dv,F2,OM=(F2=class{constructor(){Re(this,Ks,EM);Re(this,Dv,!1)}setTimeoutProvider(e){pe(this,Ks,e)}setTimeout(e,t){return L(this,Ks).setTimeout(e,t)}clearTimeout(e){L(this,Ks).clearTimeout(e)}setInterval(e,t){return L(this,Ks).setInterval(e,t)}clearInterval(e){L(this,Ks).clearInterval(e)}},Ks=new WeakMap,Dv=new WeakMap,F2),Gi=new OM;function TM(e){setTimeout(e,0)}var No=typeof window>"u"||"Deno"in globalThis;function Qr(){}function AM(e,t){return typeof e=="function"?e(t):e}function By(e){return typeof e=="number"&&e>=0&&e!==1/0}function dE(e,t){return Math.max(e+(t||0)-Date.now(),0)}function gi(e,t){return typeof e=="function"?e(t):e}function Dn(e,t){return typeof e=="function"?e(t):e}function T1(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Eb(o,t.options))return!1}else if(!qd(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function A1(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Bd(t.options.mutationKey)!==Bd(i))return!1}else if(!qd(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Eb(e,t){return((t==null?void 0:t.queryKeyHashFn)||Bd)(e)}function Bd(e){return JSON.stringify(e,(t,r)=>Wy(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function qd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>qd(e[r],t[r])):!1}var DM=Object.prototype.hasOwnProperty;function uE(e,t){if(e===t)return e;const r=D1(e)&&D1(t);if(!r&&!(Wy(e)&&Wy(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],h=e[u],f=t[u];if(h===f){l[u]=h,(r?d<a:DM.call(e,u))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[u]=f;continue}const g=uE(h,f);l[u]=g,g===h&&c++}return a===o&&c===a?e:l}function qy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function D1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wy(e){if(!R1(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!R1(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function R1(e){return Object.prototype.toString.call(e)==="[object Object]"}function RM(e){return new Promise(t=>{Gi.setTimeout(t,e)})}function Hy(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?uE(e,t):t}function MM(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function LM(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ob=Symbol();function hE(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ob?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function $M(e,t){return typeof e=="function"?e(...t):!!e}var eo,Gs,Ol,U2,IM=(U2=class extends xu{constructor(){super();Re(this,eo);Re(this,Gs);Re(this,Ol);pe(this,Ol,t=>{if(!No&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){L(this,Gs)||this.setEventListener(L(this,Ol))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,Gs))==null||t.call(this),pe(this,Gs,void 0))}setEventListener(t){var r;pe(this,Ol,t),(r=L(this,Gs))==null||r.call(this),pe(this,Gs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){L(this,eo)!==t&&(pe(this,eo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof L(this,eo)=="boolean"?L(this,eo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},eo=new WeakMap,Gs=new WeakMap,Ol=new WeakMap,U2),Tb=new IM;function Vy(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var zM=TM;function FM(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=zM;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var hr=FM(),Tl,Qs,Al,B2,UM=(B2=class extends xu{constructor(){super();Re(this,Tl,!0);Re(this,Qs);Re(this,Al);pe(this,Al,t=>{if(!No&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){L(this,Qs)||this.setEventListener(L(this,Al))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,Qs))==null||t.call(this),pe(this,Qs,void 0))}setEventListener(t){var r;pe(this,Al,t),(r=L(this,Qs))==null||r.call(this),pe(this,Qs,t(this.setOnline.bind(this)))}setOnline(t){L(this,Tl)!==t&&(pe(this,Tl,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return L(this,Tl)}},Tl=new WeakMap,Qs=new WeakMap,Al=new WeakMap,B2),Lf=new UM;function BM(e){return Math.min(1e3*2**e,3e4)}function fE(e){return(e??"online")==="online"?Lf.isOnline():!0}var Ky=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function gE(e){let t=!1,r=0,n;const a=Vy(),i=()=>a.status!=="pending",o=y=>{var x;if(!i()){const v=new Ky(y);f(v),(x=e.onCancel)==null||x.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Tb.isFocused()&&(e.networkMode==="always"||Lf.isOnline())&&e.canRun(),u=()=>fE(e.networkMode)&&e.canRun(),h=y=>{i()||(n==null||n(),a.resolve(y))},f=y=>{i()||(n==null||n(),a.reject(y))},g=()=>new Promise(y=>{var x;n=v=>{(i()||d())&&y(v)},(x=e.onPause)==null||x.call(e)}).then(()=>{var y;n=void 0,i()||(y=e.onContinue)==null||y.call(e)}),p=()=>{if(i())return;let y;const x=r===0?e.initialPromise:void 0;try{y=x??e.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(h).catch(v=>{var N;if(i())return;const w=e.retry??(No?0:3),b=e.retryDelay??BM,k=typeof b=="function"?b(r,v):b,j=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,v);if(t||!j){f(v);return}r++,(N=e.onFail)==null||N.call(e,r,v),RM(k).then(()=>d()?void 0:g()).then(()=>{t?f(v):p()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?p():g().then(p),a)}}var to,q2,mE=(q2=class{constructor(){Re(this,to)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),By(this.gcTime)&&pe(this,to,Gi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(No?1/0:5*60*1e3))}clearGcTimeout(){L(this,to)&&(Gi.clearTimeout(L(this,to)),pe(this,to,void 0))}},to=new WeakMap,q2),ro,Dl,An,no,nr,lu,ao,ea,Wa,W2,qM=(W2=class extends mE{constructor(t){super();Re(this,ea);Re(this,ro);Re(this,Dl);Re(this,An);Re(this,no);Re(this,nr);Re(this,lu);Re(this,ao);pe(this,ao,!1),pe(this,lu,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,no,t.client),pe(this,An,L(this,no).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,ro,L1(this.options)),this.state=t.state??L(this,ro),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=L(this,nr))==null?void 0:t.promise}setOptions(t){if(this.options={...L(this,lu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=L1(this.options);r.data!==void 0&&(this.setState(M1(r.data,r.dataUpdatedAt)),pe(this,ro,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,An).remove(this)}setData(t,r){const n=Hy(this.state.data,t,this.options);return Ge(this,ea,Wa).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ge(this,ea,Wa).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=L(this,nr))==null?void 0:n.promise;return(a=L(this,nr))==null||a.cancel(t),r?r.then(Qr).catch(Qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,ro))}isActive(){return this.observers.some(t=>Dn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ob||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>gi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!dE(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=L(this,nr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=L(this,nr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),L(this,An).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(L(this,nr)&&(L(this,ao)?L(this,nr).cancel({revert:!0}):L(this,nr).cancelRetry()),this.scheduleGc()),L(this,An).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,ea,Wa).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,h,f,g,p,y,x,v,w,b;if(this.state.fetchStatus!=="idle"&&((c=L(this,nr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,nr))return L(this,nr).continueRetry(),L(this,nr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(j=>j.options.queryFn);k&&this.setOptions(k.options)}const n=new AbortController,a=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(pe(this,ao,!0),n.signal)})},i=()=>{const k=hE(this.options,r),N=(()=>{const _={client:L(this,no),queryKey:this.queryKey,meta:this.meta};return a(_),_})();return pe(this,ao,!1),this.options.persister?this.options.persister(k,N,this):k(N)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:L(this,no),state:this.state,fetchFn:i};return a(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),pe(this,Dl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Ge(this,ea,Wa).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),pe(this,nr,gE({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof Ky&&k.revert&&this.setState({...L(this,Dl),fetchStatus:"idle"}),n.abort()},onFail:(k,j)=>{Ge(this,ea,Wa).call(this,{type:"failed",failureCount:k,error:j})},onPause:()=>{Ge(this,ea,Wa).call(this,{type:"pause"})},onContinue:()=>{Ge(this,ea,Wa).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await L(this,nr).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(g=(f=L(this,An).config).onSuccess)==null||g.call(f,k,this),(y=(p=L(this,An).config).onSettled)==null||y.call(p,k,this.state.error,this),k}catch(k){if(k instanceof Ky){if(k.silent)return L(this,nr).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Ge(this,ea,Wa).call(this,{type:"error",error:k}),(v=(x=L(this,An).config).onError)==null||v.call(x,k,this),(b=(w=L(this,An).config).onSettled)==null||b.call(w,this.state.data,k,this),k}finally{this.scheduleGc()}}},ro=new WeakMap,Dl=new WeakMap,An=new WeakMap,no=new WeakMap,nr=new WeakMap,lu=new WeakMap,ao=new WeakMap,ea=new WeakSet,Wa=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...pE(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...M1(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return pe(this,Dl,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),hr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),L(this,An).notify({query:this,type:"updated",action:t})})},W2);function pE(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fE(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function M1(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function L1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Kr,Qe,cu,Dr,so,Rl,Ya,Ys,du,Ml,Ll,io,oo,Xs,$l,it,td,Gy,Qy,Yy,Xy,Jy,Zy,ex,yE,H2,WM=(H2=class extends xu{constructor(t,r){super();Re(this,it);Re(this,Kr);Re(this,Qe);Re(this,cu);Re(this,Dr);Re(this,so);Re(this,Rl);Re(this,Ya);Re(this,Ys);Re(this,du);Re(this,Ml);Re(this,Ll);Re(this,io);Re(this,oo);Re(this,Xs);Re(this,$l,new Set);this.options=r,pe(this,Kr,t),pe(this,Ys,null),pe(this,Ya,Vy()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Qe).addObserver(this),$1(L(this,Qe),this.options)?Ge(this,it,td).call(this):this.updateResult(),Ge(this,it,Xy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tx(L(this,Qe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tx(L(this,Qe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ge(this,it,Jy).call(this),Ge(this,it,Zy).call(this),L(this,Qe).removeObserver(this)}setOptions(t){const r=this.options,n=L(this,Qe);if(this.options=L(this,Kr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Dn(this.options.enabled,L(this,Qe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ge(this,it,ex).call(this),L(this,Qe).setOptions(this.options),r._defaulted&&!qy(this.options,r)&&L(this,Kr).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Qe),observer:this});const a=this.hasListeners();a&&I1(L(this,Qe),n,this.options,r)&&Ge(this,it,td).call(this),this.updateResult(),a&&(L(this,Qe)!==n||Dn(this.options.enabled,L(this,Qe))!==Dn(r.enabled,L(this,Qe))||gi(this.options.staleTime,L(this,Qe))!==gi(r.staleTime,L(this,Qe)))&&Ge(this,it,Gy).call(this);const i=Ge(this,it,Qy).call(this);a&&(L(this,Qe)!==n||Dn(this.options.enabled,L(this,Qe))!==Dn(r.enabled,L(this,Qe))||i!==L(this,Xs))&&Ge(this,it,Yy).call(this,i)}getOptimisticResult(t){const r=L(this,Kr).getQueryCache().build(L(this,Kr),t),n=this.createResult(r,t);return VM(this,n)&&(pe(this,Dr,n),pe(this,Rl,this.options),pe(this,so,L(this,Qe).state)),n}getCurrentResult(){return L(this,Dr)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&L(this,Ya).status==="pending"&&L(this,Ya).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){L(this,$l).add(t)}getCurrentQuery(){return L(this,Qe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=L(this,Kr).defaultQueryOptions(t),n=L(this,Kr).getQueryCache().build(L(this,Kr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ge(this,it,td).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,Dr)))}createResult(t,r){var T;const n=L(this,Qe),a=this.options,i=L(this,Dr),o=L(this,so),l=L(this,Rl),d=t!==n?t.state:L(this,cu),{state:u}=t;let h={...u},f=!1,g;if(r._optimisticResults){const P=this.hasListeners(),S=!P&&$1(t,r),M=P&&I1(t,n,r,a);(S||M)&&(h={...h,...pE(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:y,status:x}=h;g=h.data;let v=!1;if(r.placeholderData!==void 0&&g===void 0&&x==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,v=!0):P=typeof r.placeholderData=="function"?r.placeholderData((T=L(this,Ll))==null?void 0:T.state.data,L(this,Ll)):r.placeholderData,P!==void 0&&(x="success",g=Hy(i==null?void 0:i.data,P,r),f=!0)}if(r.select&&g!==void 0&&!v)if(i&&g===(o==null?void 0:o.data)&&r.select===L(this,du))g=L(this,Ml);else try{pe(this,du,r.select),g=r.select(g),g=Hy(i==null?void 0:i.data,g,r),pe(this,Ml,g),pe(this,Ys,null)}catch(P){pe(this,Ys,P)}L(this,Ys)&&(p=L(this,Ys),g=L(this,Ml),y=Date.now(),x="error");const w=h.fetchStatus==="fetching",b=x==="pending",k=x==="error",j=b&&w,N=g!==void 0,O={status:x,fetchStatus:h.fetchStatus,isPending:b,isSuccess:x==="success",isError:k,isInitialLoading:j,isLoading:j,data:g,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!b,isLoadingError:k&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&N,isStale:Ab(t,r),refetch:this.refetch,promise:L(this,Ya),isEnabled:Dn(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=F=>{O.status==="error"?F.reject(O.error):O.data!==void 0&&F.resolve(O.data)},S=()=>{const F=pe(this,Ya,O.promise=Vy());P(F)},M=L(this,Ya);switch(M.status){case"pending":t.queryHash===n.queryHash&&P(M);break;case"fulfilled":(O.status==="error"||O.data!==M.value)&&S();break;case"rejected":(O.status!=="error"||O.error!==M.reason)&&S();break}}return O}updateResult(){const t=L(this,Dr),r=this.createResult(L(this,Qe),this.options);if(pe(this,so,L(this,Qe).state),pe(this,Rl,this.options),L(this,so).data!==void 0&&pe(this,Ll,L(this,Qe)),qy(r,t))return;pe(this,Dr,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!L(this,$l).size)return!0;const o=new Set(i??L(this,$l));return this.options.throwOnError&&o.add("error"),Object.keys(L(this,Dr)).some(l=>{const c=l;return L(this,Dr)[c]!==t[c]&&o.has(c)})};Ge(this,it,yE).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ge(this,it,Xy).call(this)}},Kr=new WeakMap,Qe=new WeakMap,cu=new WeakMap,Dr=new WeakMap,so=new WeakMap,Rl=new WeakMap,Ya=new WeakMap,Ys=new WeakMap,du=new WeakMap,Ml=new WeakMap,Ll=new WeakMap,io=new WeakMap,oo=new WeakMap,Xs=new WeakMap,$l=new WeakMap,it=new WeakSet,td=function(t){Ge(this,it,ex).call(this);let r=L(this,Qe).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Qr)),r},Gy=function(){Ge(this,it,Jy).call(this);const t=gi(this.options.staleTime,L(this,Qe));if(No||L(this,Dr).isStale||!By(t))return;const n=dE(L(this,Dr).dataUpdatedAt,t)+1;pe(this,io,Gi.setTimeout(()=>{L(this,Dr).isStale||this.updateResult()},n))},Qy=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Qe)):this.options.refetchInterval)??!1},Yy=function(t){Ge(this,it,Zy).call(this),pe(this,Xs,t),!(No||Dn(this.options.enabled,L(this,Qe))===!1||!By(L(this,Xs))||L(this,Xs)===0)&&pe(this,oo,Gi.setInterval(()=>{(this.options.refetchIntervalInBackground||Tb.isFocused())&&Ge(this,it,td).call(this)},L(this,Xs)))},Xy=function(){Ge(this,it,Gy).call(this),Ge(this,it,Yy).call(this,Ge(this,it,Qy).call(this))},Jy=function(){L(this,io)&&(Gi.clearTimeout(L(this,io)),pe(this,io,void 0))},Zy=function(){L(this,oo)&&(Gi.clearInterval(L(this,oo)),pe(this,oo,void 0))},ex=function(){const t=L(this,Kr).getQueryCache().build(L(this,Kr),this.options);if(t===L(this,Qe))return;const r=L(this,Qe);pe(this,Qe,t),pe(this,cu,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},yE=function(t){hr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(L(this,Dr))}),L(this,Kr).getQueryCache().notify({query:L(this,Qe),type:"observerResultsUpdated"})})},H2);function HM(e,t){return Dn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function $1(e,t){return HM(e,t)||e.state.data!==void 0&&tx(e,t,t.refetchOnMount)}function tx(e,t,r){if(Dn(t.enabled,e)!==!1&&gi(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Ab(e,t)}return!1}function I1(e,t,r,n){return(e!==t||Dn(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ab(e,r)}function Ab(e,t){return Dn(t.enabled,e)!==!1&&e.isStaleByTime(gi(t.staleTime,e))}function VM(e,t){return!qy(e.getCurrentResult(),t)}function z1(e){return{onFetch:(t,r)=>{var u,h,f,g,p;const n=t.options,a=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],o=((p=t.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},v=hE(t.options,t.fetchOptions),w=async(b,k,j)=>{if(y)return Promise.reject();if(k==null&&b.pages.length)return Promise.resolve(b);const _=(()=>{const S={client:t.client,queryKey:t.queryKey,pageParam:k,direction:j?"backward":"forward",meta:t.options.meta};return x(S),S})(),O=await v(_),{maxPages:T}=t.options,P=j?LM:MM;return{pages:P(b.pages,O,T),pageParams:P(b.pageParams,k,T)}};if(a&&i.length){const b=a==="backward",k=b?KM:F1,j={pages:i,pageParams:o},N=k(n,j);l=await w(j,N,b)}else{const b=e??i.length;do{const k=c===0?o[0]??n.initialPageParam:F1(n,l);if(c>0&&k==null)break;l=await w(l,k),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var y,x;return(x=(y=t.options).persister)==null?void 0:x.call(y,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function F1(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function KM(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var uu,Sa,Rr,lo,_a,$s,V2,GM=(V2=class extends mE{constructor(t){super();Re(this,_a);Re(this,uu);Re(this,Sa);Re(this,Rr);Re(this,lo);pe(this,uu,t.client),this.mutationId=t.mutationId,pe(this,Rr,t.mutationCache),pe(this,Sa,[]),this.state=t.state||QM(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){L(this,Sa).includes(t)||(L(this,Sa).push(t),this.clearGcTimeout(),L(this,Rr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,Sa,L(this,Sa).filter(r=>r!==t)),this.scheduleGc(),L(this,Rr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){L(this,Sa).length||(this.state.status==="pending"?this.scheduleGc():L(this,Rr).remove(this))}continue(){var t;return((t=L(this,lo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,h,f,g,p,y,x,v,w,b,k,j,N,_,O,T;const r=()=>{Ge(this,_a,$s).call(this,{type:"continue"})},n={client:L(this,uu),meta:this.options.meta,mutationKey:this.options.mutationKey};pe(this,lo,gE({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(P,S)=>{Ge(this,_a,$s).call(this,{type:"failed",failureCount:P,error:S})},onPause:()=>{Ge(this,_a,$s).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,Rr).canRun(this)}));const a=this.state.status==="pending",i=!L(this,lo).canStart();try{if(a)r();else{Ge(this,_a,$s).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=L(this,Rr).config).onMutate)==null?void 0:l.call(o,t,this,n));const S=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));S!==this.state.context&&Ge(this,_a,$s).call(this,{type:"pending",context:S,variables:t,isPaused:i})}const P=await L(this,lo).start();return await((h=(u=L(this,Rr).config).onSuccess)==null?void 0:h.call(u,P,t,this.state.context,this,n)),await((g=(f=this.options).onSuccess)==null?void 0:g.call(f,P,t,this.state.context,n)),await((y=(p=L(this,Rr).config).onSettled)==null?void 0:y.call(p,P,null,this.state.variables,this.state.context,this,n)),await((v=(x=this.options).onSettled)==null?void 0:v.call(x,P,null,t,this.state.context,n)),Ge(this,_a,$s).call(this,{type:"success",data:P}),P}catch(P){try{throw await((b=(w=L(this,Rr).config).onError)==null?void 0:b.call(w,P,t,this.state.context,this,n)),await((j=(k=this.options).onError)==null?void 0:j.call(k,P,t,this.state.context,n)),await((_=(N=L(this,Rr).config).onSettled)==null?void 0:_.call(N,void 0,P,this.state.variables,this.state.context,this,n)),await((T=(O=this.options).onSettled)==null?void 0:T.call(O,void 0,P,t,this.state.context,n)),P}finally{Ge(this,_a,$s).call(this,{type:"error",error:P})}}finally{L(this,Rr).runNext(this)}}},uu=new WeakMap,Sa=new WeakMap,Rr=new WeakMap,lo=new WeakMap,_a=new WeakSet,$s=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),hr.batch(()=>{L(this,Sa).forEach(n=>{n.onMutationUpdate(t)}),L(this,Rr).notify({mutation:this,type:"updated",action:t})})},V2);function QM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xa,ta,hu,K2,YM=(K2=class extends xu{constructor(t={}){super();Re(this,Xa);Re(this,ta);Re(this,hu);this.config=t,pe(this,Xa,new Set),pe(this,ta,new Map),pe(this,hu,0)}build(t,r,n){const a=new GM({client:t,mutationCache:this,mutationId:++Ju(this,hu)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){L(this,Xa).add(t);const r=ph(t);if(typeof r=="string"){const n=L(this,ta).get(r);n?n.push(t):L(this,ta).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(L(this,Xa).delete(t)){const r=ph(t);if(typeof r=="string"){const n=L(this,ta).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&L(this,ta).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=ph(t);if(typeof r=="string"){const n=L(this,ta).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=ph(t);if(typeof r=="string"){const a=(n=L(this,ta).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hr.batch(()=>{L(this,Xa).forEach(t=>{this.notify({type:"removed",mutation:t})}),L(this,Xa).clear(),L(this,ta).clear()})}getAll(){return Array.from(L(this,Xa))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>A1(r,n))}findAll(t={}){return this.getAll().filter(r=>A1(t,r))}notify(t){hr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return hr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Qr))))}},Xa=new WeakMap,ta=new WeakMap,hu=new WeakMap,K2);function ph(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ca,G2,XM=(G2=class extends xu{constructor(t={}){super();Re(this,Ca);this.config=t,pe(this,Ca,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Eb(a,r);let o=this.get(i);return o||(o=new qM({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){L(this,Ca).has(t.queryHash)||(L(this,Ca).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=L(this,Ca).get(t.queryHash);r&&(t.destroy(),r===t&&L(this,Ca).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){hr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return L(this,Ca).get(t)}getAll(){return[...L(this,Ca).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>T1(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>T1(t,n)):r}notify(t){hr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){hr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){hr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ca=new WeakMap,G2),Tt,Js,Zs,Il,zl,ei,Fl,Ul,Q2,JM=(Q2=class{constructor(e={}){Re(this,Tt);Re(this,Js);Re(this,Zs);Re(this,Il);Re(this,zl);Re(this,ei);Re(this,Fl);Re(this,Ul);pe(this,Tt,e.queryCache||new XM),pe(this,Js,e.mutationCache||new YM),pe(this,Zs,e.defaultOptions||{}),pe(this,Il,new Map),pe(this,zl,new Map),pe(this,ei,0)}mount(){Ju(this,ei)._++,L(this,ei)===1&&(pe(this,Fl,Tb.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Tt).onFocus())})),pe(this,Ul,Lf.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Tt).onOnline())})))}unmount(){var e,t;Ju(this,ei)._--,L(this,ei)===0&&((e=L(this,Fl))==null||e.call(this),pe(this,Fl,void 0),(t=L(this,Ul))==null||t.call(this),pe(this,Ul,void 0))}isFetching(e){return L(this,Tt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return L(this,Js).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=L(this,Tt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=L(this,Tt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(gi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return L(this,Tt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=L(this,Tt).get(n.queryHash),i=a==null?void 0:a.state.data,o=AM(t,i);if(o!==void 0)return L(this,Tt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return hr.batch(()=>L(this,Tt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=L(this,Tt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=L(this,Tt);hr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=L(this,Tt);return hr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=hr.batch(()=>L(this,Tt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Qr).catch(Qr)}invalidateQueries(e,t={}){return hr.batch(()=>(L(this,Tt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=hr.batch(()=>L(this,Tt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Qr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Qr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=L(this,Tt).build(this,t);return r.isStaleByTime(gi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Qr).catch(Qr)}fetchInfiniteQuery(e){return e.behavior=z1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Qr).catch(Qr)}ensureInfiniteQueryData(e){return e.behavior=z1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Lf.isOnline()?L(this,Js).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Tt)}getMutationCache(){return L(this,Js)}getDefaultOptions(){return L(this,Zs)}setDefaultOptions(e){pe(this,Zs,e)}setQueryDefaults(e,t){L(this,Il).set(Bd(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...L(this,Il).values()],r={};return t.forEach(n=>{qd(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){L(this,zl).set(Bd(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...L(this,zl).values()],r={};return t.forEach(n=>{qd(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...L(this,Zs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Eb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ob&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...L(this,Zs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){L(this,Tt).clear(),L(this,Js).clear()}},Tt=new WeakMap,Js=new WeakMap,Zs=new WeakMap,Il=new WeakMap,zl=new WeakMap,ei=new WeakMap,Fl=new WeakMap,Ul=new WeakMap,Q2),xE=m.createContext(void 0),Db=e=>{const t=m.useContext(xE);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ZM=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(xE.Provider,{value:e,children:t})),vE=m.createContext(!1),eL=()=>m.useContext(vE);vE.Provider;function tL(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var rL=m.createContext(tL()),nL=()=>m.useContext(rL),aL=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},sL=e=>{m.useEffect(()=>{e.clearReset()},[e])},iL=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||$M(r,[e.error,n])),oL=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},lL=(e,t)=>e.isLoading&&e.isFetching&&!t,cL=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,U1=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function dL(e,t,r){var h,f,g,p,y;const n=eL(),a=nL(),i=Db(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",oL(o),aL(o,a),sL(a);const l=!i.getQueryCache().get(o.queryHash),[c]=m.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(x=>{const v=u?c.subscribe(hr.batchCalls(x)):Qr;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(o)},[o,c]),cL(o,d))throw U1(o,c,a);if(iL({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((p=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||p.call(g,o,d),o.experimental_prefetchInRender&&!No&&lL(d,n)){const x=l?U1(o,c,a):(y=i.getQueryCache().get(o.queryHash))==null?void 0:y.promise;x==null||x.catch(Qr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function fc(e,t){return dL(e,WM)}const bE=m.createContext(void 0);function uL({children:e}){const[t,r]=m.useState(()=>localStorage.getItem("theme")==="dark"?"dark":"light");m.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark")},[t]);const n=()=>{r(a=>a==="light"?"dark":"light")};return s.jsx(bE.Provider,{value:{theme:t,toggleTheme:n},children:e})}function hL(){const e=m.useContext(bE);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(e,t)=>{const r=m.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>m.createElement("svg",{ref:u,...fL,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${gL(e)}`,l].join(" "),...d},[...t.map(([h,f])=>m.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=he("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=he("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=he("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=he("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=he("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=he("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=he("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=he("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=he("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=he("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=he("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=he("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=he("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=he("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=he("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=he("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=he("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=he("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=he("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=he("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=he("Slack",[["rect",{width:"3",height:"8",x:"13",y:"2",rx:"1.5",key:"diqz80"}],["path",{d:"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5",key:"183iwg"}],["rect",{width:"3",height:"8",x:"8",y:"14",rx:"1.5",key:"hqg7r1"}],["path",{d:"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5",key:"76g71w"}],["rect",{width:"8",height:"3",x:"14",y:"13",rx:"1.5",key:"1kmz0a"}],["path",{d:"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5",key:"jc4sz0"}],["rect",{width:"8",height:"3",x:"2",y:"8",rx:"1.5",key:"1omvl4"}],["path",{d:"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5",key:"16f3cl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=he("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=he("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=he("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=he("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_E=m.createContext(void 0);function $L({children:e}){const[t,r]=m.useState([]),n=m.useCallback((i,o,l)=>{const c=Math.random().toString(36).substring(7),d={id:c,type:i,message:o,description:l};r(u=>[...u,d]),setTimeout(()=>{r(u=>u.filter(h=>h.id!==c))},5e3)},[]),a=i=>{r(o=>o.filter(l=>l.id!==i))};return s.jsxs(_E.Provider,{value:{showToast:n},children:[e,s.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(i=>s.jsx(IL,{toast:i,onClose:()=>a(i.id)},i.id))})]})}function IL({toast:e,onClose:t}){const r={success:rx,error:ls,warning:bn,info:wi},n={success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-900 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-900 dark:text-red-100",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-900 dark:text-amber-100",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-900 dark:text-blue-100"},a={success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-amber-600 dark:text-amber-400",info:"text-blue-600 dark:text-blue-400"},i=r[e.type];return s.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border shadow-lg min-w-[320px] max-w-md ${n[e.type]}`,children:[s.jsx(i,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${a[e.type]}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm",children:e.message}),e.description&&s.jsx("p",{className:"text-sm opacity-90 mt-1",children:e.description})]}),s.jsx("button",{onClick:t,className:"flex-shrink-0 hover:opacity-70 transition-opacity","aria-label":"Close",children:s.jsx(at,{className:"w-4 h-4"})})]})}function Er(){const e=m.useContext(_E);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const zL="modulepreload",FL=function(e){return"/"+e},Q1={},gc=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=FL(c),c in Q1)return;Q1[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":zL,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},UL=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>mc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Mb extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class BL extends Mb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Y1 extends Mb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class X1 extends Mb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var lx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(lx||(lx={}));var qL=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class WL{constructor(t,{headers:r={},customFetch:n,region:a=lx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=UL(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return qL(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(y=>{throw new BL(y)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Y1(h);if(!h.ok)throw new X1(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield h.json():g==="application/octet-stream"?p=yield h.blob():g==="text/event-stream"?p=h:g==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof X1||a instanceof Y1?a.context:void 0}}})}}var Xr={},Lb={},ng={},vu={},ag={},sg={},HL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jl=HL();const VL=Jl.fetch,CE=Jl.fetch.bind(Jl),PE=Jl.Headers,KL=Jl.Request,GL=Jl.Response,mc=Object.freeze(Object.defineProperty({__proto__:null,Headers:PE,Request:KL,Response:GL,default:CE,fetch:VL},Symbol.toStringTag,{value:"Module"})),QL=Rv(mc);var ig={};Object.defineProperty(ig,"__esModule",{value:!0});let YL=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ig.default=YL;var EE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sg,"__esModule",{value:!0});const XL=EE(QL),JL=EE(ig);let ZL=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=XL.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,h=null,f=null,g=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const x=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");x&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(h=[],u=null,g=200,p="OK")}catch{i.status===404&&x===""?(g=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,g=200,p="OK"),u&&this.shouldThrowOnError)throw new JL.default(u)}return{error:u,data:h,count:f,status:g,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};sg.default=ZL;var e$=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ag,"__esModule",{value:!0});const t$=e$(sg);let r$=class extends t$.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ag.default=r$;var n$=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vu,"__esModule",{value:!0});const a$=n$(ag);let s$=class extends a$.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};vu.default=s$;var i$=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ng,"__esModule",{value:!0});const Fc=i$(vu);let o$=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Fc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Fc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Fc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Fc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Fc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};ng.default=o$;var OE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lb,"__esModule",{value:!0});const l$=OE(ng),c$=OE(vu);let d$=class TE{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new l$.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new TE(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",d=r);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new c$.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Lb.default=d$;var pc=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.PostgrestError=Xr.PostgrestBuilder=Xr.PostgrestTransformBuilder=Xr.PostgrestFilterBuilder=Xr.PostgrestQueryBuilder=Xr.PostgrestClient=void 0;const AE=pc(Lb);Xr.PostgrestClient=AE.default;const DE=pc(ng);Xr.PostgrestQueryBuilder=DE.default;const RE=pc(vu);Xr.PostgrestFilterBuilder=RE.default;const ME=pc(ag);Xr.PostgrestTransformBuilder=ME.default;const LE=pc(sg);Xr.PostgrestBuilder=LE.default;const $E=pc(ig);Xr.PostgrestError=$E.default;var u$=Xr.default={PostgrestClient:AE.default,PostgrestQueryBuilder:DE.default,PostgrestFilterBuilder:RE.default,PostgrestTransformBuilder:ME.default,PostgrestBuilder:LE.default,PostgrestError:$E.default};const{PostgrestClient:h$,PostgrestQueryBuilder:sse,PostgrestFilterBuilder:ise,PostgrestTransformBuilder:ose,PostgrestBuilder:lse,PostgrestError:cse}=u$;class f${static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const g$="2.15.5",m$=`realtime-js/${g$}`,p$="1.0.0",cx=1e4,y$=1e3,x$=100;var bd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bd||(bd={}));var qt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(qt||(qt={}));var na;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(na||(na={}));var dx;(function(e){e.websocket="websocket"})(dx||(dx={}));var Wi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Wi||(Wi={}));class v${constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class IE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mt||(mt={}));const J1=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=b$(o,e,t,a),i),{})},b$=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?zE(i,o):ux(o)},zE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return N$(t,r)}switch(e){case mt.bool:return w$(t);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return k$(t);case mt.json:case mt.jsonb:return j$(t);case mt.timestamp:return S$(t);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return ux(t);default:return ux(t)}},ux=e=>e,w$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},k$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},j$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},N$=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>zE(t,l))}return e},S$=e=>typeof e=="string"?e.replace(" ","T"):e,FE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ip{constructor(t,r,n={},a=cx){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Z1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Z1||(Z1={}));class wd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wd.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=wd.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wd.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(x=>x.presence_ref),g=h.map(x=>x.presence_ref),p=u.filter(x=>g.indexOf(x.presence_ref)<0),y=h.filter(x=>f.indexOf(x.presence_ref)<0);p.length>0&&(l[d]=p),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(g=>g.presence_ref),f=u.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var eN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(eN||(eN={}));var kd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(kd||(kd={}));var Ka;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ka||(Ka={}));class $b{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ip(this,na.join,this.params,this.timeout),this.rejoinTimer=new IE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(na.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new wd(this),this.broadcastEndpointURL=FE(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[kd.PRESENCE]&&this.bindings[kd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Ka.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Ka.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var p;if(this.socket.setAuth(),g===void 0){t==null||t(Ka.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(p=y==null?void 0:y.length)!==null&&p!==void 0?p:0,v=[];for(let w=0;w<x;w++){const b=y[w],{filter:{event:k,schema:j,table:N,filter:_}}=b,O=g&&g[w];if(O&&O.event===k&&O.schema===j&&O.table===N&&O.filter===_)v.push(Object.assign(Object.assign({},b),{id:O.id}));else{this.unsubscribe(),this.state=qt.errored,t==null||t(Ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Ka.SUBSCRIBED);return}}).receive("error",g=>{this.state=qt.errored,t==null||t(Ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===qt.joined&&t===kd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=qt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(na.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new ip(this,na.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ip(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>x$){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=na;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var p,y,x;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(y=g.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(g=>g.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,y,x,v,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const k=g.id,j=(p=g.filter)===null||p===void 0?void 0:p.event;return k&&((y=r.ids)===null||y===void 0?void 0:y.includes(k))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(w=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return k==="*"||k===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:y,table:x,commit_timestamp:v,type:w,errors:b}=p;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:v,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(p))}g.callback(f,n)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&$b.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(na.close,{},t)}_onError(t){this._on(na.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=J1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=J1(t.columns,t.old_record)),r}}const op=()=>{},yh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_$=[1e3,2e3,5e3,1e4],C$=1e4,P$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E${constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cx,this.transport=null,this.heartbeatIntervalMs=yh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=op,this.ref=0,this.reconnectTimer=null,this.logger=op,this.conn=null,this.sendBuffer=[],this.serializer=new v$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>gc(async()=>{const{default:l}=await Promise.resolve().then(()=>mc);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dx.websocket}`,this.httpEndpoint=FE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=f$.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:p$}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case bd.connecting:return Wi.Connecting;case bd.open:return Wi.Open;case bd.closing:return Wi.Closing;default:return Wi.Closed}}isConnected(){return this.connectionState()===Wi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new $b(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(y$,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},yh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(na.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([P$],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:m$};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(na.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new IE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:cx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:yh.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:op,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>_$[h-1]||C$,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(h,f)=>f(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ib extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class O$ extends Ib{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hx extends Ib{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var T$=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const UE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>mc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},A$=()=>T$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gc(()=>Promise.resolve().then(()=>mc),void 0)).Response:Response}),fx=e=>{if(Array.isArray(e))return e.map(r=>fx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=fx(n)}),t},D$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Mo=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const lp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),R$=(e,t,r)=>Mo(void 0,void 0,void 0,function*(){const n=yield A$();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new O$(lp(a),i,o))}).catch(a=>{t(new hx(lp(a),a))}):t(new hx(lp(e),e))}),M$=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(D$(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function bu(e,t,r,n,a,i){return Mo(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,M$(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>R$(c,l,n))})})}function Ff(e,t,r,n){return Mo(this,void 0,void 0,function*(){return bu(e,"GET",t,r,n)})}function ja(e,t,r,n,a){return Mo(this,void 0,void 0,function*(){return bu(e,"POST",t,n,a,r)})}function gx(e,t,r,n,a){return Mo(this,void 0,void 0,function*(){return bu(e,"PUT",t,n,a,r)})}function L$(e,t,r,n){return Mo(this,void 0,void 0,function*(){return bu(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function BE(e,t,r,n,a){return Mo(this,void 0,void 0,function*(){return bu(e,"DELETE",t,n,a,r)})}var Or=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const $$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class I${constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=UE(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Or(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},tN),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(t=="PUT"?gx:ja)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Or(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Or(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:tN.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield gx(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Wt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Or(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield ja(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ib("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Or(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Or(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Or(this,void 0,void 0,function*(){try{return{data:{path:(yield ja(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Or(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ja(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Or(this,void 0,void 0,function*(){try{const a=yield ja(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}})}download(t,r){return Or(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ff(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Wt(l))return{data:null,error:l};throw l}})}info(t){return Or(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ff(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:fx(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}exists(t){return Or(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield L$(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n)&&n instanceof hx){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Or(this,void 0,void 0,function*(){try{return{data:yield BE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Or(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},$$),r),{prefix:t||""});return{data:yield ja(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wt(a))return{data:null,error:a};throw a}})}listV2(t,r){return Or(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ja(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const z$="2.12.1",F$={"X-Client-Info":`storage-js/${z$}`};var qo=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class U${constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},F$),r),this.fetch=UE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return qo(this,void 0,void 0,function*(){try{return{data:yield Ff(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}getBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield Ff(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return qo(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return qo(this,void 0,void 0,function*(){try{return{data:yield gx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield BE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}}class B$ extends U${constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new I$(this.url,this.headers,t,this.fetch)}}const q$="2.57.4";let rd="";typeof Deno<"u"?rd="deno":typeof document<"u"?rd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rd="react-native":rd="node";const W$={"X-Client-Info":`supabase-js-${rd}/${q$}`},H$={headers:W$},V$={schema:"public"},K$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},G$={};var Q$=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Y$=e=>{let t;return e?t=e:typeof fetch>"u"?t=CE:t=fetch,(...r)=>t(...r)},X$=()=>typeof Headers>"u"?PE:Headers,J$=(e,t,r)=>{const n=Y$(r),a=X$();return(i,o)=>Q$(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var Z$=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function eI(e){return e.endsWith("/")?e:e+"/"}function tI(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Z$(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function rI(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eI(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qE="2.71.1",el=30*1e3,mx=3,cp=mx*el,nI="http://localhost:9999",aI="supabase.auth.token",sI={"X-Client-Info":`gotrue-js/${qE}`},px="X-Supabase-Api-Version",WE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iI=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oI=10*60*1e3;class og extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ze(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lI extends og{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cI(e){return ze(e)&&e.name==="AuthApiError"}class HE extends og{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Pi extends og{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Is extends Pi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dI(e){return ze(e)&&e.name==="AuthSessionMissingError"}class xh extends Pi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vh extends Pi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bh extends Pi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uI(e){return ze(e)&&e.name==="AuthImplicitGrantRedirectError"}class rN extends Pi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yx extends Pi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function dp(e){return ze(e)&&e.name==="AuthRetryableFetchError"}class nN extends Pi{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class xx extends Pi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),aN=` 	
\r=`.split(""),hI=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<aN.length;t+=1)e[aN[t].charCodeAt(0)]=-2;for(let t=0;t<Uf.length;t+=1)e[Uf[t].charCodeAt(0)]=t;return e})();function sN(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Uf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Uf[n]),t.queuedBits-=6}}function VE(e,t,r){const n=hI[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function iN(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{mI(o,n,r)};for(let o=0;o<e.length;o+=1)VE(e.charCodeAt(o),a,i);return t.join("")}function fI(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gI(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}fI(n,t)}}function mI(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function pI(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)VE(e.charCodeAt(a),r,n);return new Uint8Array(t)}function yI(e){const t=[];return gI(e,r=>t.push(r)),new Uint8Array(t)}function xI(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>sN(a,r,n)),sN(null,r,n),t.join("")}function vI(e){return Math.round(Date.now()/1e3)+e}function bI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xn=()=>typeof window<"u"&&typeof document<"u",Ri={tested:!1,writable:!1},KE=()=>{if(!Xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ri.tested)return Ri.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ri.tested=!0,Ri.writable=!0}catch{Ri.tested=!0,Ri.writable=!1}return Ri.writable};function wI(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const GE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>mc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},kI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",tl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Mi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ds=async(e,t)=>{await e.removeItem(t)};class lg{constructor(){this.promise=new lg.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}lg.promiseConstructor=Promise;function up(e){const t=e.split(".");if(t.length!==3)throw new xx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!iI.test(t[n]))throw new xx("JWT not in base64url format");return{header:JSON.parse(iN(t[0])),payload:JSON.parse(iN(t[1])),signature:pI(t[2]),raw:{header:t[0],payload:t[1]}}}async function jI(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function NI(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function SI(e){return("0"+e.toString(16)).substr(-2)}function _I(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,SI).join("")}async function CI(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function PI(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await CI(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wo(e,t,r=!1){const n=_I();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await tl(e,`${t}-code-verifier`,a);const i=await PI(n);return[i,n===i?"plain":"s256"]}const EI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OI(e){const t=e.headers.get(px);if(!t||!t.match(EI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function TI(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function AI(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ho(e){if(!DI.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hp(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oN(e){return JSON.parse(JSON.stringify(e))}var RI=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Fi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MI=[502,503,504];async function lN(e){var t;if(!kI(e))throw new yx(Fi(e),0);if(MI.includes(e.status))throw new yx(Fi(e),e.status);let r;try{r=await e.json()}catch(i){throw new HE(Fi(i),i)}let n;const a=OI(e);if(a&&a.getTime()>=WE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new nN(Fi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Is}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new nN(Fi(r),e.status,r.weak_password.reasons);throw new lI(Fi(r),e.status||500,n)}const LI=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ve(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[px]||(i[px]=WE["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await $I(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function $I(e,t,r,n,a,i){const o=LI(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new yx(Fi(c),0)}if(l.ok||await lN(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await lN(c)}}function Ha(e){var t;let r=null;UI(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vI(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function cN(e){const t=Ha(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Hs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function II(e){return{data:e,error:null}}function zI(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=RI(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function FI(e){return e}function UI(e){return e.access_token&&e.refresh_token&&e.expires_in}const fp=["global","local","others"];var BI=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class qI{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=GE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=fp[0]){if(fp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fp.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hs})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=BI(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zI,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ze(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Hs})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:FI});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);d[`${x}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ze(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ho(t);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Hs})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ho(t);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Hs})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ho(t);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hs})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ho(t.userId);try{const{data:r,error:n}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ho(t.userId),Ho(t.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}function dN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function WI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vo={debug:!!(globalThis&&KE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class QE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class HI extends QE{}async function VI(e,t,r){Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new HI(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Vo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}WI();const KI={url:nI,storageKey:aI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uN(e,t,r){return await r()}const Ko={};class Wd{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wd.nextInstanceID,Wd.nextInstanceID+=1,this.instanceID>0&&Xn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},KI),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qI({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=GE(a.fetch),this.lock=a.lock||uN,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Xn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=VI:this.lock=uN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:KE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dN(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=dN(this.memoryStorage)),Xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Ko[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ko[this.storageKey]=Object.assign(Object.assign({},Ko[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ko[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ko[this.storageKey]=Object.assign(Object.assign({},Ko[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=wI(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Xn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uI(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ze(r)?{error:r}:{error:new HE("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ha}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Wo(this.storage,this.storageKey)),i=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:p},xform:Ha})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ha})}else throw new vh("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cN})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cN})}else throw new vh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new xh}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,d,u,h,f,g;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:x,wallet:v,statement:w,options:b}=t;let k;if(Xn())if(typeof v=="object")k=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))k=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const N=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)p=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),y=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:x,error:v}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:xI(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ha});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new xh}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(ze(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await Mi(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ha});if(await Ds(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(ze(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ha}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xh}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Wo(this.storage,this.storageKey));const{error:h}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new vh("You must provide either an email or phone number.")}catch(l){if(ze(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ha});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Wo(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:II})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Is;const{error:a}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new vh("You must provide either an email or phone number and a type")}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Mi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<cp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Mi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=hp()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Hs}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Is}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Hs})})}catch(r){if(ze(r))return dI(r)&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Is;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Wo(this.storage,this.storageKey));const{data:d,error:u}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Hs});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Is;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=up(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ze(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Is;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Xn())throw new bh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new rN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new rN("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new bh("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const g=f-u;g*1e3<=el&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(ze(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Mi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cI(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=bI(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Wo(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Xn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ze(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await NI(async a=>(a>0&&await jI(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ha})),(a,i)=>{const o=200*Math.pow(2,a);return i&&dp(i)&&Date.now()+o-n<el})}catch(n){if(this._debug(r,"error",n),ze(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Xn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Mi(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Mi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await tl(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:hp()}else if(a&&!a.user&&!a.user){const o=await Mi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Ds(this.storage,this.storageKey+"-user"),await tl(this.storage,this.storageKey,a)):a.user=hp()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<cp;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${cp}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),dp(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Is;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new lg;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Is;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ze(i)){const o={session:null,error:i};return dp(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await tl(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=oN(a);await tl(this.storage,this.storageKey,i)}else{const a=oN(r);await tl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ds(this.storage,this.storageKey),await Ds(this.storage,this.storageKey+"-code-verifier"),await Ds(this.storage,this.storageKey+"-user"),this.userStorage&&await Ds(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),el);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/el);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${el}ms, refresh threshold is ${mx} ticks`),a<=mx&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof QE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Wo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=up(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+oI>a)return n;const{data:i,error:o}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:p}=await this.getSession();if(p||!g.session)return{data:null,error:p};n=g.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=up(n);r!=null&&r.allowExpired||TI(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:a,signature:o},error:null}}const u=AI(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,yI(`${l}.${c}`)))throw new xx("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}Wd.nextInstanceID=0;const GI=Wd;class QI extends GI{constructor(t){super(t)}}var YI=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class XI{constructor(t,r,n){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=rI(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:V$,realtime:G$,auth:Object.assign(Object.assign({},K$),{storageKey:c}),global:H$},u=tI(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=J$(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new h$(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new B$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new WL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return YI(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QI({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new E$(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JI=(e,t,r)=>new XI(e,t,r);function ZI(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ZI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const e7="http://127.0.0.1:54321",t7="sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH",ne=JI(e7,t7),YE=m.createContext(void 0);function r7({children:e}){const[t,r]=m.useState(null),[n,a]=m.useState(null),[i,o]=m.useState(null),[l,c]=m.useState(!0),{showToast:d}=Er(),u=async j=>{try{console.log("Fetching profile for user:",j);const{data:N,error:_}=await ne.from("user_profiles").select("*").eq("id",j).maybeSingle();if(_)throw _;return console.log("Profile fetched successfully:",N),N}catch(N){return console.error("Error fetching profile:",N),null}},h=async(j,N,_)=>{try{const{data:O,error:T}=await ne.from("user_profiles").insert({id:j,email:N,full_name:_||null,role:"read_only",is_active:!0,last_login_at:new Date().toISOString()}).select().single();if(T){if(T.code==="23505")return console.log("Profile already exists, fetching..."),await u(j);throw T}return O}catch(O){return console.error("Error creating profile:",O),null}},f=async j=>{try{await ne.from("user_profiles").update({last_login_at:new Date().toISOString()}).eq("id",j)}catch(N){console.error("Error updating last login:",N)}};m.useEffect(()=>{ne.auth.getSession().then(({data:{session:N}})=>{o(N),r((N==null?void 0:N.user)??null),N!=null&&N.user?u(N.user.id).then(async _=>{var O;if(_)a(_),await f(N.user.id);else{const T=await h(N.user.id,N.user.email||"",(O=N.user.user_metadata)==null?void 0:O.full_name);a(T)}c(!1)}).catch(_=>{console.error("Error in profile flow:",_),c(!1)}):c(!1)});const{data:{subscription:j}}=ne.auth.onAuthStateChange((N,_)=>{o(_),r((_==null?void 0:_.user)??null),_!=null&&_.user?u(_.user.id).then(async O=>{var T;if(O)a(O),await f(_.user.id);else{const P=await h(_.user.id,_.user.email||"",(T=_.user.user_metadata)==null?void 0:T.full_name);a(P)}}).catch(O=>{console.error("Error in profile flow:",O)}):a(null)});return()=>j.unsubscribe()},[]);const g=async(j,N)=>{try{const{data:_,error:O}=await ne.auth.signInWithPassword({email:j,password:N});if(O)return d("error","Login failed: "+O.message),{error:O};if(_.user){const T=await u(_.user.id);if(!(T!=null&&T.is_active))return await ne.auth.signOut(),d("error","Your account has been deactivated"),{error:new og("Account deactivated")};await b("auth.login","User logged in"),d("success","Successfully logged in")}return{error:null}}catch(_){return d("error","An error occurred during login"),{error:_}}},p=async(j,N,_)=>{try{const{data:O,error:T}=await ne.auth.signUp({email:j,password:N,options:{data:{full_name:_}}});return T?(d("error","Sign up failed: "+T.message),{error:T}):(O.user&&(await h(O.user.id,j,_),d("success","Account created successfully")),{error:null})}catch(O){return d("error","An error occurred during sign up"),{error:O}}},y=async()=>{try{await b("auth.logout","User logged out"),await ne.auth.signOut(),r(null),a(null),o(null),d("success","Logged out successfully")}catch{d("error","Error logging out")}},x=async j=>{if(!t)return{error:new Error("Not authenticated")};try{const{error:N}=await ne.from("user_profiles").update(j).eq("id",t.id);if(N)throw N;const _=await u(t.id);return _&&a(_),await b("profile.update","User updated profile","user_profile",t.id),d("success","Profile updated successfully"),{error:null}}catch(N){return d("error","Error updating profile"),{error:N}}},v=j=>(n==null?void 0:n.role)===j&&(n==null?void 0:n.is_active)===!0,w=j=>{if(!(n!=null&&n.is_active))return!1;const N={read_only:1,maintainer:2,admin:3},_=N[n.role],O=N[j];return _>=O},b=async(j,N,_,O,T)=>{if(t)try{await ne.from("user_activity_logs").insert({user_id:t.id,action_type:j,action_description:N,resource_type:_||null,resource_id:O||null,metadata:T||{}})}catch(P){console.error("Error logging activity:",P)}},k={user:t,profile:n,session:i,loading:l,signIn:g,signUp:p,signOut:y,updateProfile:x,hasRole:v,hasRoleLevel:w,logActivity:b};return s.jsx(YE.Provider,{value:k,children:e})}function an(){const e=m.useContext(YE);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hN="popstate";function n7(e={}){function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return vx("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Hd(a)}return s7(t,r,null,e)}function Ct(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pa(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a7(){return Math.random().toString(36).substring(2,10)}function fN(e,t){return{usr:e.state,key:e.key,idx:t}}function vx(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yc(t):t,state:r,key:t&&t.key||n||a7()}}function Hd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function s7(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let x=u(),v=x==null?null:x-d;d=x,c&&c({action:l,location:y.location,delta:v})}function f(x,v){l="PUSH";let w=vx(y.location,x,v);d=u()+1;let b=fN(w,d),k=y.createHref(w);try{o.pushState(b,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(k)}i&&c&&c({action:l,location:y.location,delta:1})}function g(x,v){l="REPLACE";let w=vx(y.location,x,v);d=u();let b=fN(w,d),k=y.createHref(w);o.replaceState(b,"",k),i&&c&&c({action:l,location:y.location,delta:0})}function p(x){return i7(x)}let y={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(hN,h),c=x,()=>{a.removeEventListener(hN,h),c=null}},createHref(x){return t(a,x)},createURL:p,encodeLocation(x){let v=p(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(x){return o.go(x)}};return y}function i7(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Hd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function XE(e,t,r="/"){return o7(e,t,r,!1)}function o7(e,t,r,n){let a=typeof t=="string"?yc(t):t,i=xs(a.pathname||"/",r);if(i==null)return null;let o=JE(e);l7(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=v7(i);l=y7(o[c],d,n)}return l}function JE(e,t=[],r=[],n="",a=!1){let i=(o,l,c=a,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&c)return;Ct(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=cs([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Ct(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),JE(o.children,t,f,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:m7(h,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of ZE(o.path))i(o,l,!0,d)}),t}function ZE(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=ZE(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function l7(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:p7(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var c7=/^:[\w-]+$/,d7=3,u7=2,h7=1,f7=10,g7=-2,gN=e=>e==="*";function m7(e,t){let r=e.split("/"),n=r.length;return r.some(gN)&&(n+=g7),t&&(n+=u7),r.filter(a=>!gN(a)).reduce((a,i)=>a+(c7.test(i)?d7:i===""?h7:f7),n)}function p7(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function y7(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Bf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=Bf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:cs([i,h.pathname]),pathnameBase:j7(cs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=cs([i,h.pathnameBase]))}return o}function Bf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=x7(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[f];return h&&!g?d[u]=void 0:d[u]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function x7(e,t=!1,r=!0){pa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function v7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function xs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function b7(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?yc(e):e;return{pathname:r?r.startsWith("/")?r:w7(r,t):t,search:N7(n),hash:S7(a)}}function w7(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function gp(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k7(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function zb(e){let t=k7(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Fb(e,t,r,n=!1){let a;typeof e=="string"?a=yc(e):(a={...e},Ct(!a.pathname||!a.pathname.includes("?"),gp("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),gp("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),gp("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=b7(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var cs=e=>e.join("/").replace(/\/\/+/g,"/"),j7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),N7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,S7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eO=["POST","PUT","PATCH","DELETE"];new Set(eO);var C7=["GET",...eO];new Set(C7);var xc=m.createContext(null);xc.displayName="DataRouter";var cg=m.createContext(null);cg.displayName="DataRouterState";m.createContext(!1);var tO=m.createContext({isTransitioning:!1});tO.displayName="ViewTransition";var P7=m.createContext(new Map);P7.displayName="Fetchers";var E7=m.createContext(null);E7.displayName="Await";var ya=m.createContext(null);ya.displayName="Navigation";var wu=m.createContext(null);wu.displayName="Location";var xa=m.createContext({outlet:null,matches:[],isDataRoute:!1});xa.displayName="Route";var Ub=m.createContext(null);Ub.displayName="RouteError";function O7(e,{relative:t}={}){Ct(vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=m.useContext(ya),{hash:a,pathname:i,search:o}=ku(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:cs([r,i])),n.createHref({pathname:l,search:o,hash:a})}function vc(){return m.useContext(wu)!=null}function xr(){return Ct(vc(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(wu).location}var rO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nO(e){m.useContext(ya).static||m.useLayoutEffect(e)}function Dt(){let{isDataRoute:e}=m.useContext(xa);return e?q7():T7()}function T7(){Ct(vc(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(xc),{basename:t,navigator:r}=m.useContext(ya),{matches:n}=m.useContext(xa),{pathname:a}=xr(),i=JSON.stringify(zb(n)),o=m.useRef(!1);return nO(()=>{o.current=!0}),m.useCallback((c,d={})=>{if(pa(o.current,rO),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=Fb(c,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:cs([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,a,e])}m.createContext(null);function dg(){let{matches:e}=m.useContext(xa),t=e[e.length-1];return t?t.params:{}}function ku(e,{relative:t}={}){let{matches:r}=m.useContext(xa),{pathname:n}=xr(),a=JSON.stringify(zb(r));return m.useMemo(()=>Fb(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function A7(e,t){return aO(e,t)}function aO(e,t,r,n,a){var w;Ct(vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=m.useContext(ya),{matches:o}=m.useContext(xa),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let b=h&&h.path||"";sO(d,!h||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=xr(),g;if(t){let b=typeof t=="string"?yc(t):t;Ct(u==="/"||((w=b.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),g=b}else g=f;let p=g.pathname||"/",y=p;if(u!=="/"){let b=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=XE(e,{pathname:y});pa(h||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),pa(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=$7(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:cs([u,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:cs([u,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,r,n,a);return t&&v?m.createElement(wu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function D7(){let e=B7(),t=_7(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:i},"ErrorBoundary")," or"," ",m.createElement("code",{style:i},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:a},r):null,o)}var R7=m.createElement(D7,null),M7=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?m.createElement(xa.Provider,{value:this.props.routeContext},m.createElement(Ub.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function L7({routeContext:e,match:t,children:r}){let n=m.useContext(xc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(xa.Provider,{value:e},r)}function $7(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let d=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Ct(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let u=i[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:h,errors:f}=r,g=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||g){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,u,h)=>{let f,g=!1,p=null,y=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||R7,l&&(c<0&&h===0?(sO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):c===h&&(g=!0,y=u.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),v=()=>{let w;return f?w=p:g?w=y:u.route.Component?w=m.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=d,m.createElement(L7,{match:u,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?m.createElement(M7,{location:r.location,revalidation:r.revalidation,component:p,error:f,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:n}):v()},null)}function Bb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I7(e){let t=m.useContext(xc);return Ct(t,Bb(e)),t}function z7(e){let t=m.useContext(cg);return Ct(t,Bb(e)),t}function F7(e){let t=m.useContext(xa);return Ct(t,Bb(e)),t}function qb(e){let t=F7(e),r=t.matches[t.matches.length-1];return Ct(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function U7(){return qb("useRouteId")}function B7(){var n;let e=m.useContext(Ub),t=z7("useRouteError"),r=qb("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function q7(){let{router:e}=I7("useNavigate"),t=qb("useNavigate"),r=m.useRef(!1);return nO(()=>{r.current=!0}),m.useCallback(async(a,i={})=>{pa(r.current,rO),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var mN={};function sO(e,t,r){!t&&!mN[e]&&(mN[e]=!0,pa(!1,r))}m.memo(W7);function W7({routes:e,future:t,state:r,unstable_onError:n}){return aO(e,void 0,r,n,t)}function Wb({to:e,replace:t,state:r,relative:n}){Ct(vc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=m.useContext(ya);pa(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=m.useContext(xa),{pathname:o}=xr(),l=Dt(),c=Fb(e,zb(i),o,n==="path"),d=JSON.stringify(c);return m.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:n})},[l,d,n,t,r]),null}function dt(e){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function H7({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Ct(!vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=m.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof r=="string"&&(r=yc(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=r,g=m.useMemo(()=>{let p=xs(c,o);return p==null?null:{location:{pathname:p,search:d,hash:u,state:h,key:f},navigationType:n}},[o,c,d,u,h,f,n]);return pa(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:m.createElement(ya.Provider,{value:l},m.createElement(wu.Provider,{children:t,value:g}))}function Hb({children:e,location:t}){return A7(bx(e),t)}function bx(e,t=[]){let r=[];return m.Children.forEach(e,(n,a)=>{if(!m.isValidElement(n))return;let i=[...t,a];if(n.type===m.Fragment){r.push.apply(r,bx(n.props.children,i));return}Ct(n.type===dt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=bx(n.props.children,i)),r.push(o)}),r}var nf="get",af="application/x-www-form-urlencoded";function ug(e){return e!=null&&typeof e.tagName=="string"}function V7(e){return ug(e)&&e.tagName.toLowerCase()==="button"}function K7(e){return ug(e)&&e.tagName.toLowerCase()==="form"}function G7(e){return ug(e)&&e.tagName.toLowerCase()==="input"}function Q7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Y7(e,t){return e.button===0&&(!t||t==="_self")&&!Q7(e)}var wh=null;function X7(){if(wh===null)try{new FormData(document.createElement("form"),0),wh=!1}catch{wh=!0}return wh}var J7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mp(e){return e!=null&&!J7.has(e)?(pa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${af}"`),null):e}function Z7(e,t){let r,n,a,i,o;if(K7(e)){let l=e.getAttribute("action");n=l?xs(l,t):null,r=e.getAttribute("method")||nf,a=mp(e.getAttribute("enctype"))||af,i=new FormData(e)}else if(V7(e)||G7(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?xs(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||nf,a=mp(e.getAttribute("formenctype"))||mp(l.getAttribute("enctype"))||af,i=new FormData(l,e),!X7()){let{name:d,type:u,value:h}=e;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(ug(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=nf,n=null,a=af,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function e9(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&xs(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function t9(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function r9(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function n9(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await t9(i,r);return o.links?o.links():[]}return[]}));return o9(n.flat(1).filter(r9).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function pN(e,t,r,n,a,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var u;return r[d].pathname!==c.pathname||((u=r[d].route.path)==null?void 0:u.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{var h;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function a9(e,t,{includeHydrateFallback:r}={}){return s9(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function s9(e){return[...new Set(e)]}function i9(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function o9(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(i9(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function iO(){let e=m.useContext(xc);return Vb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function l9(){let e=m.useContext(cg);return Vb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Kb=m.createContext(void 0);Kb.displayName="FrameworkContext";function oO(){let e=m.useContext(Kb);return Vb(e,"You must render this element inside a <HydratedRouter> element"),e}function c9(e,t){let r=m.useContext(Kb),[n,a]=m.useState(!1),[i,o]=m.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,f=m.useRef(null);m.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=v=>{v.forEach(w=>{o(w.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[e]),m.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let g=()=>{a(!0)},p=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:Uc(l,g),onBlur:Uc(c,p),onMouseEnter:Uc(d,g),onMouseLeave:Uc(u,p),onTouchStart:Uc(h,g)}]:[!1,f,{}]}function Uc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function d9({page:e,...t}){let{router:r}=iO(),n=m.useMemo(()=>XE(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?m.createElement(h9,{page:e,matches:n,...t}):null}function u9(e){let{manifest:t,routeModules:r}=oO(),[n,a]=m.useState([]);return m.useEffect(()=>{let i=!1;return n9(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),n}function h9({page:e,matches:t,...r}){let n=xr(),{manifest:a,routeModules:i}=oO(),{basename:o}=iO(),{loaderData:l,matches:c}=l9(),d=m.useMemo(()=>pN(e,t,c,a,n,"data"),[e,t,c,a,n]),u=m.useMemo(()=>pN(e,t,c,a,n,"assets"),[e,t,c,a,n]),h=m.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let p=new Set,y=!1;if(t.forEach(v=>{var b;let w=a.routes[v.route.id];!w||!w.hasLoader||(!d.some(k=>k.route.id===v.route.id)&&v.route.id in l&&((b=i[v.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?y=!0:p.add(v.route.id))}),p.size===0)return[];let x=e9(e,o,"data");return y&&p.size>0&&x.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[x.pathname+x.search]},[o,l,n,a,d,t,e,i]),f=m.useMemo(()=>a9(u,a),[u,a]),g=u9(u);return m.createElement(m.Fragment,null,h.map(p=>m.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),f.map(p=>m.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),g.map(({key:p,link:y})=>m.createElement("link",{key:p,nonce:r.nonce,...y})))}function f9(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var lO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lO&&(window.__reactRouterVersion="7.9.5")}catch{}function g9({basename:e,children:t,window:r}){let n=m.useRef();n.current==null&&(n.current=n7({window:r,v5Compat:!0}));let a=n.current,[i,o]=m.useState({action:a.action,location:a.location}),l=m.useCallback(c=>{m.startTransition(()=>o(c))},[o]);return m.useLayoutEffect(()=>a.listen(l),[a,l]),m.createElement(H7,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var cO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hg=m.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...f},g){let{basename:p}=m.useContext(ya),y=typeof d=="string"&&cO.test(d),x,v=!1;if(typeof d=="string"&&y&&(x=d,lO))try{let T=new URL(window.location.href),P=d.startsWith("//")?new URL(T.protocol+d):new URL(d),S=xs(P.pathname,p);P.origin===T.origin&&S!=null?d=S+P.search+P.hash:v=!0}catch{pa(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=O7(d,{relative:a}),[b,k,j]=c9(n,f),N=y9(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function _(T){t&&t(T),T.defaultPrevented||N(T)}let O=m.createElement("a",{...f,...j,href:x||w,onClick:v||i?t:_,ref:f9(g,k),target:c,"data-discover":!y&&r==="render"?"true":void 0});return b&&!y?m.createElement(m.Fragment,null,O,m.createElement(d9,{page:w})):O});hg.displayName="Link";var rl=m.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=ku(o,{relative:d.relative}),f=xr(),g=m.useContext(cg),{navigator:p,basename:y}=m.useContext(ya),x=g!=null&&k9(h)&&l===!0,v=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,w=f.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(w=w.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&y&&(b=xs(b,y)||b);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=w===v||!a&&w.startsWith(v)&&w.charAt(k)==="/",N=b!=null&&(b===v||!a&&b.startsWith(v)&&b.charAt(v.length)==="/"),_={isActive:j,isPending:N,isTransitioning:x},O=j?t:void 0,T;typeof n=="function"?T=n(_):T=[n,j?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(_):i;return m.createElement(hg,{...d,"aria-current":O,className:T,ref:u,style:P,to:o,viewTransition:l},typeof c=="function"?c(_):c)});rl.displayName="NavLink";var m9=m.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:o=nf,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...f},g)=>{let p=b9(),y=w9(l,{relative:d}),x=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&cO.test(l),w=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let k=b.nativeEvent.submitter,j=(k==null?void 0:k.getAttribute("formmethod"))||o;p(k||b.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return m.createElement("form",{ref:g,method:x,action:y,onSubmit:n?c:w,...f,"data-discover":!v&&e==="render"?"true":void 0})});m9.displayName="Form";function p9(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dO(e){let t=m.useContext(xc);return Ct(t,p9(e)),t}function y9(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=Dt(),c=xr(),d=ku(e,{relative:i});return m.useCallback(u=>{if(Y7(u,t)){u.preventDefault();let h=r!==void 0?r:Hd(c)===Hd(d);l(e,{replace:h,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,d,r,n,t,e,a,i,o])}var x9=0,v9=()=>`__${String(++x9)}__`;function b9(){let{router:e}=dO("useSubmit"),{basename:t}=m.useContext(ya),r=U7();return m.useCallback(async(n,a={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=Z7(n,t);if(a.navigate===!1){let u=a.fetcherKey||v9();await e.fetch(u,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function w9(e,{relative:t}={}){let{basename:r}=m.useContext(ya),n=m.useContext(xa);Ct(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...ku(e||".",{relative:t})},o=xr();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:cs([r,i.pathname])),Hd(i)}function k9(e,{relative:t}={}){let r=m.useContext(tO);Ct(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dO("useViewTransitionState"),a=ku(e,{relative:t});if(!r.isTransitioning)return!1;let i=xs(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=xs(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bf(a.pathname,o)!=null||Bf(a.pathname,i)!=null}function j9(){const{profile:e,user:t,signOut:r}=an(),n=Dt(),[a,i]=m.useState(!1),o=[{id:"pipelines",label:"Pipelines",icon:ox,path:"/pipelines"},{id:"models",label:"Models",icon:xL,path:"/models"},{id:"destinations",label:"Destinations",icon:kt,path:"/destinations"},{id:"monitoring",label:"Monitoring",icon:Lr,path:"/monitoring"}],l=async()=>{await r(),n("/login")},c=d=>{switch(d){case"admin":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"maintainer":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"read_only":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}};return s.jsxs("div",{className:"w-[72px] bg-[#1a1d24] text-white flex flex-col fixed h-screen left-0 top-0 z-30",children:[s.jsx("div",{className:"p-3 border-b border-gray-800",children:s.jsx(rl,{to:"/pipelines",className:"flex items-center justify-center group",children:s.jsx("div",{className:"p-2 bg-blue-600 rounded-lg group-hover:bg-blue-700 transition-colors",children:s.jsx(ox,{className:"w-6 h-6 text-white"})})})}),s.jsxs("nav",{className:"flex-1 flex flex-col py-4 px-2 gap-1",children:[o.map(d=>{const u=d.icon;return s.jsx(rl,{to:d.path,className:({isActive:h})=>`flex items-center justify-center p-3 rounded-lg transition-all ${h?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,title:d.label,children:s.jsx(u,{className:"w-6 h-6"})},d.id)}),(e==null?void 0:e.role)==="admin"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-px bg-gray-800 my-2 mx-2"}),s.jsx(rl,{to:"/admin",className:({isActive:d})=>`flex items-center justify-center p-3 rounded-lg transition-all ${d?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,title:"Admin Panel",children:s.jsx(Xl,{className:"w-6 h-6"})})]})]}),s.jsxs("div",{className:"border-t border-gray-800 p-2 space-y-1",children:[s.jsx(rl,{to:"/test-rollback",className:"flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all",title:"Test Rollback",children:s.jsx(jL,{className:"w-6 h-6"})}),s.jsx(rl,{to:"/docs",className:"flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all",title:"Help",children:s.jsx(jE,{className:"w-6 h-6"})}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all",title:"User menu",children:s.jsx(sx,{className:"w-6 h-6"})}),a&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),s.jsxs("div",{className:"absolute left-full bottom-0 ml-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(e==null?void 0:e.full_name)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(t==null?void 0:t.email)||"user@example.com"}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded ${c((e==null?void 0:e.role)||"read_only")}`,children:(e==null?void 0:e.role)||"read_only"})})]}),(e==null?void 0:e.role)==="admin"&&s.jsxs("button",{onClick:()=>{n("/admin"),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[s.jsx(Xl,{className:"w-4 h-4"}),"Admin Panel"]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:s.jsxs("button",{onClick:l,className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors flex items-center gap-2",children:[s.jsx(PL,{className:"w-4 h-4"}),"Sign Out"]})})]})]})]})]})]})}const uO={oracle:{url:"/logos/oracle.svg",bgColor:"bg-red-50",darkBgColor:"dark:bg-red-900/20"},postgresql:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},postgres:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},sqlserver:{url:"/logos/sqlserver.svg",bgColor:"bg-gray-50",darkBgColor:"dark:bg-gray-800"},mysql:{url:"/logos/mysql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},mongodb:{url:"/logos/mongodb.svg",bgColor:"bg-green-50",darkBgColor:"dark:bg-green-900/20"},mongo:{url:"/logos/mongodb.svg",bgColor:"bg-green-50",darkBgColor:"dark:bg-green-900/20"},mariadb:{url:"/logos/mariadb.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},db2:{url:"/logos/db2.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},cassandra:{url:"/logos/cassandra.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},redis:{url:"/logos/redis.svg",bgColor:"bg-red-50",darkBgColor:"dark:bg-red-900/20"},elasticsearch:{url:"/logos/elasticsearch.svg",bgColor:"bg-teal-50",darkBgColor:"dark:bg-teal-900/20"},dynamodb:{url:"/logos/dynamodb.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},snowflake:{url:"/logos/snowflake.svg",bgColor:"bg-cyan-50",darkBgColor:"dark:bg-cyan-900/20"},synapse:{url:"/logos/azure.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},bigquery:{url:"/logos/bigquery.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},redshift:{url:"/logos/redshift.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},kafka:{url:"/logos/kafka.svg",bgColor:"bg-gray-50",darkBgColor:"dark:bg-gray-800"},couchbase:{url:"/logos/couchbase.svg",bgColor:"bg-red-50",darkBgColor:"dark:bg-red-900/20"},neo4j:{url:"/logos/neo4j.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},jdbc:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},jdbcsink:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"}};function N9(e){if(!e)return null;const t=e.toLowerCase();for(const[r,n]of Object.entries(uO))if(t.includes(r))return n;return null}function fr({connectorClass:e,sourceType:t,className:r="w-10 h-10"}){let n=null;return t&&(n=uO[t.toLowerCase()]||null),n||(n=N9(e)),n?s.jsx("div",{className:`${r} rounded-lg ${n.bgColor} ${n.darkBgColor} flex items-center justify-center p-2`,children:s.jsx("img",{src:n.url,alt:`${e||"Database"} Logo`,className:"w-full h-full object-contain",onError:a=>{console.error(`Failed to load logo: ${n.url} for connector: ${e}`);const i=a.target;i.style.display="none";const o=i.parentElement;if(o){const l=document.createElement("div");l.className="w-full h-full flex items-center justify-center text-gray-500 dark:text-gray-400",l.innerHTML='<svg class="w-full h-full" fill="currentColor" viewBox="0 0 20 20"><path d="M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"></path><path d="M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"></path><path d="M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"></path></svg>',o.appendChild(l)}}})}):s.jsx("div",{className:`${r} rounded-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center p-2`,children:s.jsxs("svg",{className:"w-full h-full text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),s.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),s.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})})}function S9(){const{theme:e,toggleTheme:t}=hL(),[r,n]=m.useState(""),[a,i]=m.useState([]),[o,l]=m.useState(!1),[c,d]=m.useState(!1),u=m.useRef(null),h=Dt();m.useEffect(()=>{function p(y){u.current&&!u.current.contains(y.target)&&d(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),m.useEffect(()=>{const y=setTimeout(async()=>{if(!r.trim()){i([]),d(!1);return}l(!0);const x=[],v=r.toLowerCase();try{const{data:w}=await ne.from("pipelines").select("id, name").ilike("name",`%${v}%`).limit(5);w&&w.forEach(P=>{x.push({id:P.id,type:"pipeline",title:`Pipeline: ${P.name}`})});const{data:b}=await ne.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","source").ilike("name",`%${v}%`).limit(10),{data:k}=await ne.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","source").ilike("connector_class",`%${v}%`).limit(10),j=new Map;[...b||[],...k||[]].forEach(P=>{j.has(P.id)||(j.set(P.id,P),x.push({id:P.id,type:"source_connector",title:`Source Connector: ${P.pipelines.name}`,subtitle:P.name,pipelineId:P.pipeline_id,connectorClass:P.connector_class,pipelineName:P.pipelines.name}))});const{data:N}=await ne.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","sink").ilike("name",`%${v}%`).limit(10),{data:_}=await ne.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","sink").ilike("connector_class",`%${v}%`).limit(10),O=new Map;[...N||[],..._||[]].forEach(P=>{O.has(P.id)||(O.set(P.id,P),x.push({id:P.id,type:"destination_connector",title:`Destination Connector: ${P.pipelines.name}`,subtitle:P.name,pipelineId:P.pipeline_id,connectorClass:P.connector_class,pipelineName:P.pipelines.name}))});const T=x.slice(0,15);i(T),d(T.length>0)}catch(w){console.error("Search error:",w)}finally{l(!1)}},300);return()=>clearTimeout(y)},[r]);const f=p=>{p.type==="pipeline"?h(`/pipelines/${p.id}`):h(`/pipelines/${p.pipelineId}`),n(""),d(!1)},g=()=>{n(""),i([]),d(!1)};return s.jsxs("header",{className:"h-14 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex items-center px-6 gap-4",children:[s.jsx("div",{className:"flex-1 max-w-2xl",ref:u,children:s.jsxs("div",{className:"relative",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{id:"global-search",name:"globalSearch",type:"text",value:r,onChange:p=>n(p.target.value),onFocus:()=>a.length>0&&d(!0),placeholder:"Search pipelines, connectors...",className:"w-full pl-10 pr-10 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r&&s.jsx("button",{onClick:g,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-4 h-4"})}),c&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-96 overflow-y-auto z-50",children:o?s.jsx("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Searching..."}):a.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No results found"}):s.jsx("div",{className:"py-2",children:a.map(p=>s.jsxs("button",{onClick:()=>f(p),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0 flex items-center gap-3",children:[p.type==="pipeline"?s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center flex-shrink-0",children:s.jsx(ox,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}):p.connectorClass?s.jsx(fr,{connectorClass:p.connectorClass,className:"w-8 h-8 flex-shrink-0"}):s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:s.jsx(kt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:p.pipelineName||p.title}),p.subtitle&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"truncate",children:p.subtitle})]}),p.type!=="pipeline"&&s.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:p.type==="source_connector"?"Source Connector":"Destination Connector"})]})]},`${p.type}-${p.id}`))})})]})}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("button",{onClick:t,className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Toggle theme",children:e==="light"?s.jsx(TL,{className:"w-5 h-5"}):s.jsx(LL,{className:"w-5 h-5"})})})]})}function nd({children:e,requiredRole:t,requireAuth:r=!0}){const{user:n,profile:a,loading:i,hasRoleLevel:o}=an();return i?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx(st,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):r&&!n?s.jsx(Wb,{to:"/login",replace:!0}):t&&!o(t)?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center max-w-md p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You don't have permission to access this page."}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-6",children:["Your role: ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:a==null?void 0:a.role}),s.jsx("br",{}),"Required role: ",s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:t})]}),s.jsx("a",{href:"/pipelines",className:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})}):a!=null&&a.is_active?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center max-w-md p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Account Deactivated"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your account has been deactivated. Please contact an administrator for assistance."})]})})}const _9="http://127.0.0.1:5001";async function fg(e,t={}){const r={...t.headers};t.body!==void 0&&t.body!==null&&(r["Content-Type"]=r["Content-Type"]||"application/json");const n=await fetch(`${_9}${e}`,{headers:r,...t}),a=await n.json().catch(()=>({}));if(!n.ok||a.success===!1){let i=a.error||n.statusText||"Registry request failed";if(Array.isArray(a.details)&&a.details.length>0){console.error("Validation errors:",a.details);const o=a.details.map(l=>`${l.instancePath?`${l.instancePath}: `:""}${l.message||JSON.stringify(l)}`).join("; ");i=`${i}: ${o}`}throw new Error(i)}return a}async function gg(e){const{name:t,...r}=e;return fg(`/api/registry/connectors/${encodeURIComponent(t)}/versions`,{method:"POST",body:JSON.stringify(r)})}async function ju(e,t){return fg(`/api/connectors/${encodeURIComponent(e)}/versions/${t}/activate`,{method:"POST"})}async function Gb(e){return fg(`/api/connectors/${encodeURIComponent(e)}/versions`)}async function bc(e,t){const r=await Gb(e);let n;return t&&t>0&&(n=r.versions.find(a=>a.version===t)),n||(n=r.versions.find(a=>a.is_active)||r.versions[0]),(n==null?void 0:n.config)||null}async function hO(e,t){return fg(`/api/registry/connectors/${encodeURIComponent(e)}/mark-deployed`,{method:"POST",body:JSON.stringify({version:t})})}const C9=Object.freeze(Object.defineProperty({__proto__:null,activateConnectorVersion:ju,createConnectorVersion:gg,getActiveConnectorConfig:bc,getConnectorVersions:Gb,markConnectorDeployed:hO},Symbol.toStringTag,{value:"Module"})),Nu="http://127.0.0.1:5002";async function Su(e,t,r=3){for(let n=0;n<r;n++)try{const a=new AbortController,i=setTimeout(()=>a.abort(),3e4),o=await fetch(e,{...t,signal:a.signal});return clearTimeout(i),o}catch(a){if(n===r-1)throw a;if(a.name==="AbortError")throw new Error("Request timeout after 30 seconds");await new Promise(i=>setTimeout(i,1e3*Math.pow(2,n)))}throw new Error("Retry exhausted")}async function fO(e){const t=await Su(`${Nu}/api/pipelines/${e}/deploy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to deploy pipeline");return r}async function gO(e){const t=await Su(`${Nu}/api/pipelines/${e}/status`,{method:"GET"}),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to get pipeline status");return r}async function P9(e){try{const t=await Su(`${Nu}/api/pipelines/${e}/progress`,{method:"GET"}),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to get pipeline progress");return r.progress||{}}catch(t){return console.error("Error fetching pipeline progress:",t),{}}}async function E9(e,t="24h"){try{const r=await Su(`${Nu}/api/pipelines/${e}/activity?timeRange=${t}`,{method:"GET"}),n=await r.json();if(!r.ok)throw new Error(n.error||"Failed to get pipeline activity");return n.activity||null}catch(r){return console.error("Error fetching pipeline activity:",r),null}}async function wx(e){try{const t=await Su(`${Nu}/api/pipelines/${e}/monitoring`,{method:"GET"}),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to get pipeline monitoring data");return r.monitoring||null}catch(t){return console.error("Error fetching pipeline monitoring:",t),null}}function O9(){const{profile:e,hasRoleLevel:t}=an(),r=t("maintainer"),n=t("maintainer"),a=t("maintainer"),i=(e==null?void 0:e.role)==="admin",o=(e==null?void 0:e.role)==="read_only";return{canCreatePipeline:r,canEditPipeline:n,canDeletePipeline:a,canManageUsers:i,isReadOnly:o}}function mO({isOpen:e,onClose:t,onConfirm:r,title:n="Are you sure you want to delete the Pipeline?",message:a="This action CANNOT be undone. The Pipeline will be permanently deleted from your account. Do you wish to continue?",itemName:i,pipelineId:o,showTopicsOption:l=!0,showDeleteTypeOption:c=!1,pipelineStatus:d=""}){const[u,h]=m.useState(!1),[f,g]=m.useState("soft"),[p,y]=m.useState(24);if(!e)return null;const x=()=>{r(u,f==="permanent",p),t(),h(!1),g("soft"),y(24)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-3xl w-full relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors z-10",children:s.jsx(at,{className:"w-5 h-5"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mn,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3 text-center",children:n}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed text-center max-w-xl mx-auto",children:a}),o&&s.jsxs("div",{className:"mb-6 p-3 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Pipeline ID (for restore)"}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(o),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Copy"})]}),s.jsx("code",{className:"block mt-2 text-sm font-mono text-gray-900 dark:text-gray-100 break-all",children:o})]}),c&&s.jsxs("div",{className:"mb-5",children:[s.jsx("div",{className:"text-base font-bold text-gray-900 dark:text-gray-100 mb-3",children:"How would you like to delete this pipeline?"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col cursor-pointer p-4 border-2 rounded-lg transition-all hover:shadow-md",style:{borderColor:f==="soft"?"rgb(59, 130, 246)":"rgb(229, 231, 235)",backgroundColor:f==="soft"?"rgb(239, 246, 255)":"transparent"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"radio",name:"deleteType",checked:f==="soft",onChange:()=>g("soft"),className:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:ring-2"}),s.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:"Soft Delete (Recommended)"})]}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed pl-6",children:"Keep for restore within retention period"})]}),s.jsxs("label",{className:"flex flex-col cursor-pointer p-4 border-2 rounded-lg transition-all hover:shadow-md",style:{borderColor:f==="permanent"?"rgb(220, 38, 38)":"rgb(229, 231, 235)",backgroundColor:f==="permanent"?"rgb(254, 242, 242)":"transparent"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"radio",name:"deleteType",checked:f==="permanent",onChange:()=>g("permanent"),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-red-500 focus:ring-2"}),s.jsx("span",{className:"text-sm font-bold text-red-900 dark:text-red-100",children:"Permanent Delete"})]}),s.jsx("span",{className:"text-xs text-red-700 dark:text-red-300 leading-relaxed pl-6",children:"Immediately remove. Cannot be undone."})]})]})]}),c&&f==="soft"&&s.jsx("div",{className:"mb-5 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-bold text-blue-900 dark:text-blue-100 block mb-2",children:"Retention Period"}),s.jsx("span",{className:"text-xs text-blue-700 dark:text-blue-300 block mb-3",children:"Keep pipeline available for restore. After this period, it will be permanently deleted."}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",max:"24",value:p,onChange:v=>{const w=parseInt(v.target.value);w>=1&&w<=24&&y(w)},className:"w-full px-4 py-2.5 pr-16 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-base font-semibold border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm font-medium text-gray-500 dark:text-gray-400 pointer-events-none",children:"hours"})]}),s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 block mt-2",children:"1-24 hours (Default: 24)"})]})}),(l||c)&&s.jsx("div",{className:"mb-5 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:v=>h(v.target.checked),className:"mt-0.5 w-4 h-4 text-amber-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-amber-500 focus:ring-2"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 block mb-1",children:"Delete Kafka Topics"}),s.jsx("span",{className:"text-xs text-amber-800 dark:text-amber-200 block leading-relaxed",children:"Permanently delete all data in related Kafka topics. If unchecked, only connectors will be removed."})]})]})}),s.jsxs("div",{className:"flex gap-3 justify-center mt-6",children:[s.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold text-sm rounded-lg border-2 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all",children:"Cancel"}),s.jsx("button",{onClick:x,className:"px-6 py-2.5 bg-red-600 text-white font-semibold text-sm rounded-lg hover:bg-red-700 transition-all border-2 border-red-600 hover:border-red-700 shadow-md hover:shadow-lg",children:f==="permanent"||!c?"Delete Pipeline":"Delete Pipeline (Recoverable)"})]})]})]})})]})}function T9({isOpen:e,onClose:t,onConfirm:r,pipelineName:n,pipelineId:a,timeRemaining:i,deletionTime:o}){if(!e)return null;const l=()=>{r(),t()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:t}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(at,{className:"w-5 h-5"})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:s.jsx(If,{className:"w-6 h-6 text-blue-600 dark:text-blue-500"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Rollback Console"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restore deleted pipeline"})]})]}),s.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pipeline Name"}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:n})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pipeline ID"}),s.jsx("code",{className:"text-xs font-mono text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:a})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Time Remaining"}),s.jsx("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:i})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Permanent Deletion At"}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:new Date(o).toLocaleString()})]})]})}),s.jsx("div",{className:"mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(In,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200 mb-1",children:"Restore Information"}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 leading-relaxed",children:"Restoring this pipeline will reactivate it with status 'draft'. You will need to redeploy the connectors manually from the pipeline detail page. All configuration and metadata will be preserved."})]})]})}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:l,className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors border-2 border-blue-600 hover:border-blue-700 flex items-center gap-2",children:[s.jsx(If,{className:"w-4 h-4"}),"Restore Pipeline"]})]})]})]})})]})}function A9({enabled:e=!0,refetchInterval:t}={}){return fc({queryKey:["alerts"],queryFn:async()=>{const r=await fetch("http://localhost:5002/api/alerts");if(!r.ok)throw new Error("Failed to fetch alerts");return(await r.json()).alerts},enabled:e,refetchInterval:t,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:r=>r,gcTime:5*60*1e3})}function pO(e,{enabled:t=!0,refetchInterval:r=1e4}={}){return fc({queryKey:["pipeline-alerts",e],queryFn:async()=>{const n=await fetch(`http://localhost:5002/api/pipelines/${e}/alerts?resolved=false`);if(!n.ok)throw new Error("Failed to fetch pipeline alerts");return(await n.json()).alerts},enabled:t&&!!e,refetchInterval:r,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:n=>n,gcTime:5*60*1e3})}async function D9(e){const t=await fetch(`http://localhost:5002/api/alerts/${e}/resolve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to resolve alert")}}function R9(e){switch(e){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"warning":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"info":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}}function M9(e){return{CONNECTOR_FAILED:"Connector Failed",TASK_FAILED:"Task Failed",HIGH_LAG:"High Lag",THROUGHPUT_DROP:"Throughput Drop",DLQ_MESSAGES:"DLQ Messages",HIGH_ERROR_RATE:"High Error Rate"}[e]||e}const Ln=e=>e==null?"null":JSON.stringify(e);function ai(e,t=""){if(e==null)return t?{[t]:"null"}:{};if(Array.isArray(e))return e.reduce((n,a,i)=>{const o=t?`${t}[${i}]`:`[${i}]`;return Object.assign(n,ai(a,o)),n},{});if(typeof e=="object")return Object.entries(e).reduce((n,[a,i])=>{const o=t?`${t}.${a}`:a;return Object.assign(n,ai(i,o)),n},{});const r=typeof e=="string"?e:JSON.stringify(e);return t?{[t]:r}:{value:r}}const yN=e=>{if(!e)return null;const t=Array.from(new Set([...Object.keys(e.prevFlat),...Object.keys(e.currFlat)])).sort();return t.length===0?s.jsx("div",{className:"text-gray-500",children:"No differences detected."}):s.jsxs("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono space-y-1",children:[s.jsx("div",{children:"{"}),t.map(r=>{const n=e.prevFlat[r],a=e.currFlat[r];return n!==void 0&&a!==void 0?n===a?s.jsx("div",{className:"text-gray-400",children:`  "${r}": ${Ln(a)}`},`same-${r}`):s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-red-400",children:`- "${r}": ${Ln(n)}`}),s.jsx("div",{className:"text-green-400",children:`+ "${r}": ${Ln(a)}`})]},`diff-${r}`):n!==void 0?s.jsx("div",{className:"text-red-400",children:`- "${r}": ${Ln(n)}`},`removed-${r}`):s.jsx("div",{className:"text-green-400",children:`+ "${r}": ${Ln(a)}`},`added-${r}`)}),s.jsx("div",{children:"}"})]})},L9=e=>{const t=e.diff.currFlat||{},r=e.diff.prevFlat||{},n=Array.from(new Set([...Object.keys(t),...Object.keys(r)])).sort();return n.length===0?s.jsxs("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono",children:[s.jsx("div",{children:"{"}),s.jsx("div",{children:"}"})]}):s.jsxs("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono space-y-1",children:[s.jsx("div",{children:"{"}),n.map(a=>{const i=t[a],o=r[a];return s.jsxs("div",{className:"space-y-0.5",children:[o!==void 0&&i!==void 0&&o!==i&&s.jsx("div",{className:"text-red-400",children:`- "${a}": ${Ln(o)}`}),i!==void 0&&s.jsx("div",{className:"text-green-400",children:`  "${a}": ${Ln(i)}`}),i===void 0&&o!==void 0&&s.jsx("div",{className:"text-red-400",children:`- "${a}": ${Ln(o)}`})]},`badge-${a}`)}),s.jsx("div",{children:"}"})]})},$9=(e,t)=>{const r=ai(e),n=ai(t),a=Array.from(new Set([...Object.keys(r),...Object.keys(n)])).filter(c=>r[c]!==n[c]);if(a.length===0)return{summary:"No changes",details:["No differences detected."]};const i=a.slice(0,3).join(", "),o=a.length>3?`${i} (+${a.length-3} more)`:i,l=a.map(c=>{const d=r[c],u=n[c];return d!==void 0&&u!==void 0?`${c}: ${Ln(d)} -> ${Ln(u)}`:d!==void 0?`${c}: removed (${Ln(d)})`:`${c}: added ${Ln(u)}`});return{summary:o,details:l}};function I9({onCreatePipeline:e}){const t=Dt(),{showToast:r}=Er(),{isReadOnly:n}=O9(),{logActivity:a}=an(),[i,o]=m.useState([]),{data:l=[]}=A9({refetchInterval:!1}),c=m.useMemo(()=>l,[JSON.stringify(l)]),d=m.useMemo(()=>C=>c.filter(ee=>ee.pipeline_id===C).length,[c]),u=C=>c.some(ee=>ee.pipeline_id===C&&ee.severity==="critical"),[h,f]=m.useState(!0),[g,p]=m.useState(!1),[y,x]=m.useState("grid"),[v,w]=m.useState(""),[b,k]=m.useState("all"),[j,N]=m.useState("newest"),[_,O]=m.useState(null),[T,P]=m.useState(!1),[S,M]=m.useState(null),[F,q]=m.useState(null),[z,W]=m.useState(!1),[$,E]=m.useState(null),[U,I]=m.useState(!1),[X,Z]=m.useState(null),[te,K]=m.useState({}),[le,me]=m.useState(!0),[ue,A]=m.useState(null),[D,G]=m.useState("preset"),[ae,B]=m.useState("6h"),[fe,be]=m.useState("interval"),[Te,Ae]=m.useState("4"),[H,oe]=m.useState(["00:00"]),[R,re]=m.useState({isOpen:!1,pipelineId:null,pipelineName:"",isAlreadyDeleted:!1,pipelineStatus:""}),[Y,J]=m.useState({isOpen:!1,pipelineId:null,pipelineName:"",timeRemaining:"",deletionTime:""}),[we,Ce]=m.useState(null);m.useState(24);const Pe=C=>{var ee,ce;return{id:C.id,pipelineId:C.pipeline_id,connectorId:C.connector_id,connectorName:C.connector_name||void 0,connectorType:C.connector_type,registryName:C.registry_name,connectorClass:C.connector_class||void 0,version:C.version,checksum:C.checksum||void 0,stagedConfig:C.staged_config||{},diff:{prevFlat:((ee=C.diff)==null?void 0:ee.prevFlat)||{},currFlat:((ce=C.diff)==null?void 0:ce.currFlat)||{}}}},We=C=>{K(ee=>{const ge=(ee[C.pipelineId]||[]).filter(ke=>ke.connectorId!==C.connectorId);return{...ee,[C.pipelineId]:[...ge,C]}})},Q=(C,ee)=>{K(ce=>{const ke=(ce[C]||[]).filter(Me=>Me.id!==ee);if(ke.length===0){const Me={...ce};return delete Me[C],Me}return{...ce,[C]:ke}})};m.useEffect(()=>{se(!0);const C=setInterval(()=>{se()},6e4);return()=>clearInterval(C)},[]),m.useEffect(()=>{const C=ee=>{const ce=ee.target;T&&!ce.closest(".filter-menu-container")&&P(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[T]);const se=async(C=!1,ee=!1)=>{var ce;if(ee){if(g)return;p(!0)}else C&&f(!0);try{const[ge,ke,Me]=await Promise.all([ne.from("pipelines").select("*").order("created_at",{ascending:!1}),ne.from("pipeline_connectors").select("id, name, type, connector_class, status, pipeline_id, config, last_deployed_version, has_pending_changes, pending_config"),ne.from("pipeline_restore_staging").select("*")]);if(ge.error){r("error","Failed to load pipelines",ge.error.message);return}Me.error?(ce=Me.error.message)!=null&&ce.includes("Could not find the table 'public.pipeline_restore_staging'")?(le&&r("warning","Run latest migrations to enable staged restores"),me(!1)):console.warn("Failed to load restore staging:",Me.error.message):me(!0);const Se=(ke.data||[]).map(De=>{var Ye;const Ze=(Ye=De.config)!=null&&Ye.registry_connector?De.config:null,Ie=Ze!=null&&Ze.registry_version?Number(Ze.registry_version):null,Be=De.last_deployed_version??null;return{...De,registry_meta:Ze,registry_version:Ie,last_deployed_version:De.last_deployed_version??null,has_pending_changes:De.has_pending_changes??!1,pending_config:De.pending_config,pending_update:Ie!==null&&(Be===null&&Ie>0||Be!==Ie)}});let ve={};try{const De=await fetch("http://localhost:5002/api/pipelines/connectors/statuses");De.ok&&(ve=(await De.json()).statuses||{})}catch(De){console.warn("Failed to fetch connector statuses from Kafka Connect",De)}const _e=(ge.data||[]).map(De=>{const Ze=Se.filter(Bt=>Bt.pipeline_id===De.id),Ie=ve[De.id]||{source:null,sink:null};let Be,Ye;if(De.deleted_at){const Bt=new Date(De.deleted_at),Ec=De.backup_retention_hours||24,Uo=new Date(Bt.getTime()+Ec*60*60*1e3);Be=Uo.toISOString();const Tm=new Date,Oc=Uo.getTime()-Tm.getTime();if(Oc<=0)Ye="Expired";else{const Yu=Math.floor(Oc/36e5),Xu=Math.floor(Oc%(1e3*60*60)/(1e3*60));Ye=Yu>0?`${Yu}h ${Xu}m`:`${Xu}m`}}return{...De,source_connector:{...Ze.find(Bt=>Bt.type==="source"),status:Ie.source},sink_connector:{...Ze.find(Bt=>Bt.type==="sink"),status:Ie.sink},events_ingested:Math.floor(Math.random()*1e6),events_loaded:Math.floor(Math.random()*1e6),error_count:De.status==="error"?Math.floor(Math.random()*10):0,last_sync_time:new Date(Date.now()-Math.random()*36e5).toISOString(),deletion_time:Be,time_remaining:Ye}});if(!Me.error){const De={};(Me.data||[]).forEach(Ze=>{const Ie=Pe(Ze);De[Ie.pipelineId]=[...De[Ie.pipelineId]||[],Ie]}),K(De)}o(De=>{if(De.length===0)return _e;let Ze=!1;const Ie=_e.map(Be=>{var cj,dj,uj,hj,fj,gj,mj,pj,yj,xj,vj,bj;const Ye=De.find(Z5=>Z5.id===Be.id);if(!Ye)return Ze=!0,Be;const Bt=((cj=Ye.source_connector)==null?void 0:cj.status)!==((dj=Be.source_connector)==null?void 0:dj.status),Ec=((uj=Ye.sink_connector)==null?void 0:uj.status)!==((hj=Be.sink_connector)==null?void 0:hj.status),Uo=Ye.status!==Be.status,Tm=Ye.deleted_at!==Be.deleted_at,Oc=Ye.name!==Be.name,Yu=((fj=Ye.source_connector)==null?void 0:fj.has_pending_changes)!==((gj=Be.source_connector)==null?void 0:gj.has_pending_changes)||((mj=Ye.sink_connector)==null?void 0:mj.has_pending_changes)!==((pj=Be.sink_connector)==null?void 0:pj.has_pending_changes),Xu=((yj=Ye.source_connector)==null?void 0:yj.pending_update)!==((xj=Be.source_connector)==null?void 0:xj.pending_update)||((vj=Ye.sink_connector)==null?void 0:vj.pending_update)!==((bj=Be.sink_connector)==null?void 0:bj.pending_update);return!Bt&&!Ec&&!Uo&&!Tm&&!Oc&&!Yu&&!Xu?Ye:(Ze=!0,{...Be,events_ingested:Ye.events_ingested,events_loaded:Ye.events_loaded,error_count:Ye.error_count,last_sync_time:Ye.last_sync_time,deletion_time:Ye.deletion_time??Be.deletion_time,time_remaining:Ye.time_remaining??Be.time_remaining})});return Ze?Ie:De})}catch(ge){r("error","An error occurred","Please try again"),console.error(ge)}finally{ee?p(!1):C&&f(!1)}},de=C=>{switch(C){case"running":return s.jsx(ni,{className:"w-4 h-4 text-green-500"});case"paused":return s.jsx(mi,{className:"w-4 h-4 text-yellow-500"});case"ready":return s.jsx($r,{className:"w-4 h-4 text-blue-500"});case"error":return s.jsx(ls,{className:"w-4 h-4 text-red-500"});default:return s.jsx(Fr,{className:"w-4 h-4 text-gray-500"})}},Ee=C=>{var ce,ge;const ee=(ge=(ce=C==null?void 0:C.status)==null?void 0:ce.connector)==null?void 0:ge.state;if(!ee)return"UNKNOWN";switch(ee){case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"FAILED":return"FAILED";default:return ee}},Xe=C=>{switch(C){case"RUNNING":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"PAUSED":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"FAILED":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},Ue=C=>{switch(C){case"RUNNING":return"";case"PAUSED":return"";case"FAILED":return"";default:return""}},Oe=C=>{var ge,ke,Me,Se,ve,_e;if(!C.source_connector&&!C.sink_connector)return C.status;const ee=(Me=(ke=(ge=C.source_connector)==null?void 0:ge.status)==null?void 0:ke.connector)==null?void 0:Me.state,ce=(_e=(ve=(Se=C.sink_connector)==null?void 0:Se.status)==null?void 0:ve.connector)==null?void 0:_e.state;return ee==="FAILED"||ce==="FAILED"?"error":ee==="PAUSED"||ce==="PAUSED"?"paused":ee==="RUNNING"&&ce==="RUNNING"?"running":C.status},on=C=>{switch(C){case"running":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"ready":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"error":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},$e=m.useMemo(()=>i.filter(C=>{var ke,Me;const ee=C.name.toLowerCase().includes(v.toLowerCase())||((ke=C.source_type)==null?void 0:ke.toLowerCase().includes(v.toLowerCase()))||((Me=C.destination_type)==null?void 0:Me.toLowerCase().includes(v.toLowerCase())),ce=!C.destination_type||!C.source_connector||!C.sink_connector;let ge=!0;return b==="all"?ge=!0:b==="draft"?ge=ce||C.status==="draft":ge=!ce&&C.status===b,ee&&ge}).sort((C,ee)=>j==="newest"?new Date(ee.created_at).getTime()-new Date(C.created_at).getTime():j==="oldest"?new Date(C.created_at).getTime()-new Date(ee.created_at).getTime():C.name.localeCompare(ee.name)),[i,v,b,j]),gt=C=>new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ht=C=>!!(C.source_type&&C.destination_type&&C.source_connector&&C.sink_connector)&&(C.status==="draft"||C.status==="ready"),ot=async(C,ee,ce)=>{var ke,Me;if(C.stopPropagation(),O(null),ce==="restore"){const Se=i.find(ve=>ve.id===ee);Se&&await q5(C,Se);return}if(ce==="deploy"){const Se=i.find(ve=>ve.id===ee);if(!Se)return;if(!ht(Se)){r("error","Cannot deploy pipeline","Complete source and destination setup first");return}try{Ce(ee),await fO(ee),await a("pipeline.deploy",`Deployed pipeline: ${Se.name}`,"pipeline",ee),r("success","Pipeline deployed successfully"),await se()}catch(ve){r("error","Failed to deploy pipeline",(ve==null?void 0:ve.message)||"Debezium backend error")}finally{Ce(null)}return}const ge={start:"running",pause:"paused",stop:"ready",restart:"running"};try{const Se=i.find(Ie=>Ie.id===ee);if(!Se){r("error","Pipeline not found");return}const ve=[];(ke=Se.source_connector)!=null&&ke.name&&ve.push({name:Se.source_connector.name,type:"source"}),(Me=Se.sink_connector)!=null&&Me.name&&ve.push({name:Se.sink_connector.name,type:"sink"});const _e={start:"resume",pause:"pause",stop:"pause",restart:"restart"}[ce],De=[];for(const Ie of ve)try{const Be=_e==="resume"?`/api/connectors/${Ie.name}/resume`:_e==="pause"?`/api/connectors/${Ie.name}/pause`:`/api/connectors/${Ie.name}/restart`,Bt=await(await fetch(`http://localhost:5002${Be}`,{method:"POST"})).json();Bt.success||De.push(`${Ie.type}: ${Bt.error||"Unknown error"}`)}catch(Be){De.push(`${Ie.type}: ${Be.message||"Failed to connect"}`)}const{error:Ze}=await ne.from("pipelines").update({status:ge[ce],updated_at:new Date().toISOString()}).eq("id",ee);if(Ze){r("error","Failed to update pipeline status",Ze.message);return}await a(`pipeline.${ce}`,`${ce.charAt(0).toUpperCase()+ce.slice(1)} pipeline: ${Se.name}`,"pipeline",ee),De.length>0?r("warning",`Pipeline ${ce}ed with warnings`,De.join(", ")):r("success",`Pipeline ${ce}ed successfully`),se()}catch(Se){r("error","An error occurred",Se.message)}},Qn=async()=>{if(S)try{await hO(S.connectorName,S.registryVersion),r("success","Connector marked as deployed"),M(null),q(null),await se()}catch(C){r("error","Failed to mark deployed",C instanceof Error?C.message:"")}},jt=(C,ee,ce)=>s.jsxs(s.Fragment,{children:[(ce==null?void 0:ce.has_pending_changes)&&s.jsxs("button",{onClick:ge=>{ge.stopPropagation(),t(`/pipelines/${C.id}?tab=settings&section=${ee}`)},className:`ml-3 inline-flex items-center gap-1 text-xs font-semibold px-2 py-0.5 rounded-full border ${ee==="source"?"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800":"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800"}`,children:[s.jsx(In,{className:"w-3 h-3"}),ee==="source"?"SRC":"SNK"]}),C.status==="running"&&le&&_n(C,ce)]}),_n=(C,ee)=>{if(!ee)return null;const ce=(te[C.id]||[]).find(ke=>ke.connectorId===ee.id);if(!ce)return null;const ge=ce.connectorName?ce:{...ce,connectorName:ee.name||ce.registryName};return s.jsxs("button",{onClick:ke=>H5(ke,ge),className:"ml-3 inline-flex items-center gap-1 text-xs font-semibold text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 px-2 py-0.5 rounded-full border border-purple-200 dark:border-purple-800",children:[s.jsx(DL,{className:"w-3 h-3"}),"New Restore"]})},Hr=()=>S?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>M(null),children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:[S.connectorType==="source"?"Source":"Destination"," Connector"]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:S.connectorName})]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.deployedVersion!==null?`v${S.deployedVersion}  v${S.registryVersion}`:`Baseline not tracked  v${S.registryVersion}`})]}),s.jsxs("div",{className:"p-6 max-h-[50vh] overflow-auto space-y-4",children:[z&&s.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),"Loading diff"]}),!z&&F&&s.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono space-y-0.5",children:yN(F)})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex items-center justify-end gap-3",children:[s.jsx("button",{onClick:()=>{M(null),q(null)},className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Close"}),s.jsx("button",{disabled:z,onClick:Qn,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50",children:"Deploy Update"})]})]})}):null,Cn=()=>$?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:lj,children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Restore History"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:$.pipeline.name})]}),s.jsx("button",{onClick:lj,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-auto",children:U?s.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),"Loading versions"]}):$.rows.length===0?s.jsx("div",{className:"text-center text-gray-500",children:"No registry history found for this pipeline."}):s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-xs uppercase text-gray-500 dark:text-gray-400",children:[s.jsx("th",{className:"py-2",children:"Date"}),s.jsx("th",{children:"Connector"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Version"}),s.jsx("th",{children:"Changes"}),s.jsx("th",{className:"text-right",children:"Action"})]})}),s.jsx("tbody",{children:$.rows.map(C=>s.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-800",children:[s.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-300",children:new Date(C.createdAt).toLocaleString()}),s.jsx("td",{className:"py-2 font-medium text-gray-900 dark:text-gray-100",children:C.connectorName}),s.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-300 capitalize",children:C.connectorType}),s.jsxs("td",{className:"py-2 text-gray-600 dark:text-gray-300",children:["v",C.version]}),s.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-300",children:C.changedSummary}),s.jsx("td",{className:"py-2 text-right",children:s.jsxs("button",{onClick:()=>W5(C),className:"inline-flex items-center gap-1 px-3 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[s.jsx(In,{className:"w-3 h-3"}),"View Changes"]})})]},C.id))})]})})]})}):null,Ts=()=>{if(!X)return null;const{row:C,diff:ee,title:ce,subtitle:ge,connectorName:ke,mode:Me,pipelineId:Se,badgeId:ve,badge:_e}=X,De=Me==="badge"&&_e?L9(_e):yN(ee),Ze=Me==="badge"&&_e?Object.keys(_e.diff.prevFlat).filter(Ie=>_e.diff.prevFlat[Ie]!==_e.diff.currFlat[Ie]).length+Object.keys(_e.diff.currFlat).filter(Ie=>!(Ie in _e.diff.prevFlat)).length:Object.keys((ee==null?void 0:ee.prevFlat)||{}).filter(Ie=>{var Be;return(ee==null?void 0:ee.prevFlat[Ie])!==((Be=ee==null?void 0:ee.currFlat)==null?void 0:Be[Ie])}).length;return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:Di,children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",onClick:Ie=>Ie.stopPropagation(),children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:ce}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:ke}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ge}),Me==="badge"&&s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[Ze," ",Ze===1?"change":"changes"]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Deploying will update connector settings"})]})]}),s.jsx("button",{onClick:Di,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 max-h-[70vh] overflow-auto space-y-4",children:De}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3",children:[Me==="badge"&&Se&&ve&&_e&&s.jsx("button",{onClick:()=>G5(Se,ve),className:"px-4 py-2 rounded-lg text-sm border border-purple-200 dark:border-purple-700 text-purple-700 dark:text-purple-200 hover:bg-purple-50 dark:hover:bg-purple-900/30",children:"Dismiss"}),s.jsx("button",{onClick:Di,className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Close"}),Me==="history"&&C&&s.jsx("button",{onClick:()=>K5(C),className:"px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700",children:"Apply Restore"}),Me==="badge"&&_e&&s.jsx("button",{onClick:()=>V5(_e),className:"px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700",children:"Deploy"})]})]})})},q5=async(C,ee)=>{var ce,ge;C.stopPropagation(),I(!0);try{const ke=[],Me=[ee.source_connector,ee.sink_connector].filter(Se=>{var ve;return!!((ve=Se==null?void 0:Se.registry_meta)!=null&&ve.registry_connector)});for(const Se of Me){const ve=(ce=Se.registry_meta)==null?void 0:ce.registry_connector;if(!ve)continue;const De=[...(await Gb(ve)).versions||[]].sort((Be,Ye)=>Number(Ye.version)-Number(Be.version)).slice(0,10);let Ze=((ge=Se.config)==null?void 0:ge.snapshot_config)||Se.config||{};const Ie=Se.last_deployed_version||Se.registry_version;if(ve&&Ie)try{Ze=await bc(ve,Ie)}catch(Be){console.warn("Failed to fetch current connector config",Be)}for(let Be=0;Be<De.length;Be+=1){const Ye=De[Be],Bt=De[Be+1],{summary:Ec,details:Uo}=$9((Bt==null?void 0:Bt.config)||{},Ye.config||{});ke.push({id:`${ve}-${Ye.version}`,pipelineId:ee.id,connectorId:Se.id,registryName:ve,connectorName:Se.name,connectorType:Se.type,connectorClass:Se.connector_class,version:Ye.version,createdAt:Ye.created_at,changedSummary:Ec,changedDetails:Uo,checksum:Ye.checksum,config:Ye.config,previousConfig:(Bt==null?void 0:Bt.config)||{},currentConfig:Ze})}}ke.sort((Se,ve)=>new Date(ve.createdAt).getTime()-new Date(Se.createdAt).getTime()),E({pipeline:ee,rows:ke.slice(0,10)})}catch(ke){r("error","Failed to load restore history",ke instanceof Error?ke.message:"")}finally{I(!1)}},lj=()=>{E(null)},W5=C=>{const ee=ai(C.previousConfig||{}),ce=ai(C.config||{});Z({row:C,title:"View Changes",subtitle:`v${C.version}  ${new Date(C.createdAt).toLocaleString()}  ${C.connectorType}`,connectorName:C.connectorName,connectorType:C.connectorType,diff:{prevFlat:ee,currFlat:ce},mode:"history"})},H5=(C,ee)=>{if(C.stopPropagation(),!le){r("error","Staged restores unavailable. Please run latest migrations.");return}Z({title:"New Restore",subtitle:`v${ee.version}  ${ee.connectorType}`,connectorName:ee.connectorName||ee.registryName,connectorType:ee.connectorType,diff:ee.diff,mode:"badge",pipelineId:ee.pipelineId,badgeId:ee.id,badge:ee})},Di=()=>Z(null),V5=async C=>{if(!le){r("error","Staged restores unavailable. Please run latest migrations.");return}try{await ju(C.registryName,C.version);const ee={registry_connector:C.registryName,registry_version:C.version,checksum:C.checksum,connector_class:C.connectorClass,snapshot_config:C.stagedConfig},{error:ce}=await ne.from("pipeline_connectors").update({config:ee,last_deployed_version:C.version}).eq("id",C.connectorId);if(ce)throw new Error(`Failed to update connector: ${ce.message}`);await ne.from("pipeline_restore_staging").delete().eq("id",C.id),Q(C.pipelineId,C.id),r("success",`Connector restored to v${C.version}. Refreshing details...`),Di(),await se(),window.dispatchEvent(new CustomEvent("pipeline-updated",{detail:{pipelineId:C.pipelineId}}))}catch(ee){r("error","Deploy failed",ee instanceof Error?ee.message:"")}},K5=async C=>{if(!le){r("error","Staged restores unavailable. Please run latest migrations.");return}const ee=C.currentConfig||{},ce=C.config||{},ge={prevFlat:ai(ee),currFlat:ai(ce)};try{const{data:ke,error:Me}=await ne.from("pipeline_restore_staging").upsert({pipeline_id:C.pipelineId,connector_id:C.connectorId,connector_name:C.connectorName,connector_type:C.connectorType,connector_class:C.connectorClass,registry_name:C.registryName,version:C.version,checksum:C.checksum,staged_config:ce,diff:ge},{onConflict:"pipeline_id,connector_id"}).select().single();if(Me)throw Me;const Se=Pe(ke);We(Se),Di(),r("info","Restore staged. Deploy from pipeline card.")}catch(ke){r("error","Failed to stage restore",ke instanceof Error?ke.message:"")}},G5=async(C,ee)=>{if(!le){Q(C,ee),Di();return}try{await ne.from("pipeline_restore_staging").delete().eq("id",ee)}catch(ce){console.warn("Failed to dismiss staged restore:",ce)}Q(C,ee),Di()},Q5=async(C,ee=!1,ce=24)=>{var ge,ke,Me;if(R.pipelineId){try{const Se=R.pipelineStatus==="draft";if(R.isAlreadyDeleted||Se||ee){if(C){const De=await fetch(`http://127.0.0.1:5002/api/pipelines/${R.pipelineId}/connectors?deleteTopics=true`,{method:"DELETE"}),Ze=await De.json();if(!De.ok||!Ze.success)r("warning","Failed to delete some connectors/topics",Ze.error||"Unknown error");else{const Ie=((ge=Ze.deletedTopics)==null?void 0:ge.length)>0?` ${Ze.deletedTopics.length} topic(s) deleted.`:"";r("info",`Connectors removed.${Ie}`)}}const{error:_e}=await ne.from("pipelines").delete().eq("id",R.pipelineId);_e?r("error","Failed to permanently delete pipeline",_e.message):(await a("pipeline.permanent_delete",`Permanently deleted ${Se?"draft ":""}pipeline: ${R.pipelineName}${C?" (including topics)":""}`,"pipeline",R.pipelineId),r("success",`${Se?"Draft pipeline":"Pipeline"} permanently deleted`),se())}else{const _e=await fetch(`http://127.0.0.1:5002/api/pipelines/${R.pipelineId}/connectors?deleteTopics=${C}`,{method:"DELETE"}),De=await _e.json();if(!_e.ok||!De.success){r("error","Failed to delete connectors",De.error||"Unknown error"),re({isOpen:!1,pipelineId:null,pipelineName:"",isAlreadyDeleted:!1,pipelineStatus:""});return}const{error:Ze}=await ne.from("pipelines").update({deleted_at:new Date().toISOString(),status:"deleted",backup_retention_hours:ce}).eq("id",R.pipelineId);if(Ze)r("error","Failed to delete pipeline",Ze.message);else{if(await a("pipeline.delete",`Deleted pipeline: ${R.pipelineName}${C?" (including topics)":""}`,"pipeline",R.pipelineId),De.errors&&De.errors.length>0)r("warning",`Pipeline deleted with warnings: ${De.errors.map(Ie=>Ie.error).join(", ")}`);else{const Ie=C?` and ${((ke=De.deletedTopics)==null?void 0:ke.length)||0} topic(s)`:"";r("success",`Pipeline marked for deletion. ${((Me=De.deletedConnectors)==null?void 0:Me.length)||0} connector(s)${Ie} removed. Restore available for ${ce} hour${ce!==1?"s":""}.`)}o(Ie=>Ie.map(Be=>Be.id===R.pipelineId?{...Be,status:"deleted",deleted_at:new Date().toISOString()}:Be))}}}catch{r("error","An error occurred")}re({isOpen:!1,pipelineId:null,pipelineName:"",isAlreadyDeleted:!1,pipelineStatus:""})}},Y5=async()=>{if(Y.pipelineId){try{const{data:C,error:ee}=await ne.from("pipelines").select("restore_count").eq("id",Y.pipelineId).single();if(ee){r("error","Failed to fetch pipeline data",ee.message);return}const ge=((C==null?void 0:C.restore_count)||0)+1,{error:ke}=await ne.from("pipelines").update({deleted_at:null,status:"ready",restore_count:ge}).eq("id",Y.pipelineId);if(ke){r("error","Failed to restore pipeline",ke.message);return}try{const Me=await fetch(`http://127.0.0.1:5002/api/pipelines/${Y.pipelineId}/restore`,{method:"POST"});if(!Me.ok){const Se=await Me.json().catch(()=>({error:"Failed to restore connectors"}));throw new Error(Se.error||"Failed to restore connectors")}await a("pipeline.restore",`Restored pipeline: ${Y.pipelineName}`,"pipeline",Y.pipelineId),r("success","Pipeline restored and connectors are being redeployed"),se()}catch(Me){await ne.from("pipelines").update({deleted_at:new Date().toISOString(),status:"deleted"}).eq("id",Y.pipelineId),r("error","Failed to restore connectors",Me.message)}}catch{r("error","An error occurred")}J({isOpen:!1,pipelineId:null,pipelineName:"",timeRemaining:"",deletionTime:""})}},X5=C=>{const ee=C.schedule_config;if(!ee||!ee.type)return"Ingests every 6 Hours";if(ee.type==="preset"){const ce=ee.value||"6h";if(ce==="30m")return"Ingests every 30 Minutes";if(ce==="1h")return"Ingests every 1 Hour";if(ce==="2h")return"Ingests every 2 Hours";if(ce==="3h")return"Ingests every 3 Hours";if(ce==="6h")return"Ingests every 6 Hours";if(ce==="8h")return"Ingests every 8 Hours";if(ce==="12h")return"Ingests every 12 Hours";if(ce==="24h")return"Ingests every 24 Hours"}else if(ee.type==="interval"){const ce=ee.hours||4;return`Ingests every ${ce} Hour${ce>1?"s":""}`}else if(ee.type==="daily"){const ce=ee.times||["00:00"];return ce.length===1?`Ingests daily at ${ce[0]}`:`Ingests daily (${ce.length} times)`}return"Ingests every 6 Hours"};m.useEffect(()=>{if(ue){const C=ue.schedule_config;C?C.type==="preset"?(G("preset"),B(C.value||"6h")):C.type==="interval"?(G("custom"),be("interval"),Ae(String(C.hours||4))):C.type==="daily"&&(G("custom"),be("daily"),oe(C.times||["00:00"])):(G("preset"),B("6h"),be("interval"),Ae("4"),oe(["00:00"]))}},[ue]);const J5=()=>{if(!ue)return null;const C=["30m","1h","2h","3h","6h","8h","12h","24h"],ee=async()=>{let ge;if(D==="preset")ge={type:"preset",value:ae};else if(fe==="interval"){const ke=parseInt(Te);if(isNaN(ke)||ke<1||ke>48){r("error","Invalid interval","Hours must be between 1 and 48");return}ge={type:"interval",hours:ke}}else ge={type:"daily",times:H};try{const{error:ke}=await ne.from("pipelines").update({schedule_config:ge}).eq("id",ue.id);if(ke)throw ke;await a("pipeline.schedule_update",`Updated ingestion schedule for pipeline: ${ue.name}`,"pipeline",ue.id,{schedule_config:ge}),r("success","Schedule updated successfully"),A(null),await se()}catch(ke){r("error","Failed to update schedule",ke instanceof Error?ke.message:"")}},ce=()=>{if(D==="preset"){const ge=ae;if(ge==="30m")return"every 30 Minutes";if(ge==="1h")return"every 1 Hour";if(ge==="2h")return"every 2 Hours";if(ge==="3h")return"every 3 Hours";if(ge==="6h")return"every 6 Hours";if(ge==="8h")return"every 8 Hours";if(ge==="12h")return"every 12 Hours";if(ge==="24h")return"every 24 Hours"}else if(fe==="interval"){const ge=parseInt(Te);return`every ${ge} Hour${ge>1?"s":""}`}else return`at ${H.join(", ")} daily`;return""};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>A(null),children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-xl w-full max-h-[90vh] overflow-hidden",onClick:ge=>ge.stopPropagation(),children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Change the Pipeline Ingestion Schedule"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Define the frequency or time(s) at which the Pipeline must ingest the data from the Source."})]}),s.jsx("button",{onClick:()=>A(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6 max-h-[60vh] overflow-auto",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Scheduled"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"This ingestion schedule applies to all the objects in the Pipeline."}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[C.map(ge=>s.jsx("button",{onClick:()=>{G("preset"),B(ge)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${D==="preset"&&ae===ge?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:ge==="30m"?"30 Mins":ge==="1h"?"1 Hr":ge.replace("h"," Hrs")},ge)),s.jsx("button",{onClick:()=>G("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${D==="custom"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Custom"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-800 pb-4",children:[s.jsxs("button",{onClick:()=>{be("interval"),D!=="custom"&&G("custom")},className:`flex items-center gap-2 px-4 py-2 text-sm font-medium transition-colors ${fe==="interval"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${fe==="interval"?"border-blue-600":"border-gray-300 dark:border-gray-600"}`,children:fe==="interval"&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),"Run at fixed interval"]}),s.jsxs("button",{onClick:()=>{be("daily"),G("custom")},className:`flex items-center gap-2 px-4 py-2 text-sm font-medium transition-colors ${fe==="daily"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[s.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${fe==="daily"?"border-blue-600":"border-gray-300 dark:border-gray-600"}`,children:fe==="daily"&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),"Run daily"]})]}),D==="custom"&&s.jsx("div",{children:fe==="interval"?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours *"}),s.jsx("input",{id:"custom-hours-input",name:"customHours",type:"number",min:"1",max:"48",value:Te,onChange:ge=>Ae(ge.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum 1 hr and Maximum 48 hrs"})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select time(s)"}),s.jsx("div",{className:"space-y-2",children:H.map((ge,ke)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:`daily-time-${ke}`,name:`dailyTime${ke}`,type:"time",value:ge,onChange:Me=>{const Se=[...H];Se[ke]=Me.target.value,oe(Se)},className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),H.length>1&&s.jsx("button",{onClick:()=>oe(H.filter((Me,Se)=>Se!==ke)),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:s.jsx(at,{className:"w-4 h-4"})})]},ke))}),H.length<24&&s.jsx("button",{onClick:()=>oe([...H,"00:00"]),className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ ADD MORE"})]})})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(Fr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["DataTravel will ingest your data ",s.jsx("span",{className:"font-semibold",children:ce()})]})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"CANCEL"}),s.jsx("button",{onClick:ee,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700",children:"UPDATE"})]})]})})};return h?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.length===0?s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl p-12 border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"flex justify-center gap-8 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 rounded-lg bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(kt,{className:"w-12 h-12 text-white"})}),s.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"SOURCE"})]}),s.jsx("div",{className:"flex items-center",children:s.jsx(is,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 rounded-lg bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(kt,{className:"w-12 h-12 text-white"})}),s.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"DESTINATION"})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Move your data from any Source to Destination in Near Real-Time"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Get data in your Destinations in near real-time, easily manage schema drift with Auto Mapping, apply transformations and track progress."})]}),s.jsxs("button",{onClick:e,disabled:n,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",title:n?"Read-only users cannot create pipelines":"",children:[n&&s.jsx(q1,{className:"w-4 h-4"}),s.jsx(pi,{className:"w-5 h-5"}),"Create Pipeline"]})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{id:"pipeline-search",name:"pipelineSearch",type:"text",placeholder:"Search Pipelines",value:v,onChange:C=>w(C.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[s.jsx("button",{onClick:()=>x("grid"),className:`p-2.5 ${y==="grid"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,title:"Grid View",children:s.jsx(_L,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>x("list"),className:`p-2.5 border-l border-gray-300 dark:border-gray-600 ${y==="list"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,title:"List View",children:s.jsx(CL,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"relative filter-menu-container",children:[s.jsxs("button",{onClick:()=>P(!T),className:"inline-flex items-center gap-2 px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300",children:[s.jsx(Rb,{className:"w-4 h-4"}),"FILTERS",b!=="all"&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:"1"})]}),T&&s.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg z-50",children:s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wide",children:"Status"}),s.jsx("div",{className:"space-y-1",children:["all","running","paused","error","ready","draft"].map(C=>s.jsx("button",{onClick:()=>{k(C),P(!1)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${b===C?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]})})]}),s.jsxs("select",{id:"sort-order",name:"sortOrder",value:j,onChange:C=>N(C.target.value),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300",children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"oldest",children:"Oldest First"}),s.jsx("option",{value:"name",children:"Name (A-Z)"})]}),s.jsxs("button",{onClick:e,disabled:n,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:n?"Read-only users cannot create pipelines":"",children:[n&&s.jsx(q1,{className:"w-4 h-4"}),s.jsx(pi,{className:"w-5 h-5"}),"CREATE PIPELINE"]})]})]}),$e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(In,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No pipelines found matching your filters"})]}):y==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$e.map(C=>{var ge,ke,Me,Se;const ee=ht(C),ce=ee||C.status==="draft";return s.jsxs("div",{onClick:()=>{C.status==="draft"&&!C.source_connector?t(`/pipelines/new/source-config?resume=${C.id}`):t(`/pipelines/${C.id}`)},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:border-blue-500 dark:hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 line-clamp-1 mb-1",children:C.name}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created ",gt(C.created_at)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[d(C.id)>0&&s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:ve=>{ve.stopPropagation(),t(`/pipelines/${C.id}?tab=logs`)},className:"p-1 rounded transition-colors hover:bg-red-100 dark:hover:bg-red-900/30 relative",title:`${d(C.id)} unresolved alert(s)`,children:[s.jsx($f,{className:`w-5 h-5 ${u(C.id)?"text-red-600 dark:text-red-400 animate-pulse":"text-yellow-600 dark:text-yellow-400 animate-pulse"}`}),s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:d(C.id)})]})}),s.jsx("button",{onClick:ve=>{if(C.status==="draft"){ve.stopPropagation();return}if(ve.stopPropagation(),d(C.id)===0){r("info","No alerts for this pipeline");return}t(`/pipelines/${C.id}?tab=monitoring`)},className:`p-1 rounded transition-colors ${C.status==="draft"?"opacity-40 cursor-not-allowed":"hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,title:C.status==="draft"?"Alert settings available after starting pipeline":"View Alert Settings",disabled:C.status==="draft",children:s.jsx(ys,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsx("button",{onClick:ve=>{ve.stopPropagation(),se(!1,!0)},className:"p-1 rounded transition-colors hover:bg-gray-100 dark:hover:bg-gray-700",title:"Refresh pipeline",disabled:g,children:s.jsx(la,{className:`w-4 h-4 ${g?"animate-spin":""}`})}),ee&&s.jsxs("button",{onClick:ve=>ot(ve,C.id,"deploy"),className:"inline-flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:we===C.id,children:[s.jsx(zc,{className:"w-4 h-4"}),we===C.id?"Deploying":"Deploy"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:ve=>{ve.stopPropagation(),O(_===C.id?null:C.id)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(nx,{className:"w-5 h-5 text-gray-400"})}),_===C.id&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(null)}),s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20",children:C.deleted_at?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:ve=>{ve.stopPropagation(),O(null),J({isOpen:!0,pipelineId:C.id,pipelineName:C.name,timeRemaining:C.time_remaining||"",deletionTime:C.deletion_time||""})},className:"w-full px-4 py-2 text-left text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center gap-2",children:[s.jsx(If,{className:"w-4 h-4"}),"Restore Pipeline"]}),s.jsxs("button",{onClick:ve=>{ve.stopPropagation(),O(null),re({isOpen:!0,pipelineId:C.id,pipelineName:C.name,isAlreadyDeleted:!0,pipelineStatus:C.status})},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx(mn,{className:"w-4 h-4"}),"Delete Permanent"]})]}):s.jsxs(s.Fragment,{children:[ce?ee?s.jsxs("button",{onClick:ve=>ot(ve,C.id,"deploy"),className:"w-full px-4 py-2 text-left text-sm text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center gap-2",disabled:we===C.id,children:[s.jsx(zc,{className:"w-4 h-4"}),we===C.id?"Deploying":"Deploy Pipeline"]}):s.jsxs("button",{onClick:ve=>{ve.stopPropagation(),O(null),C.source_type?C.destination_type?t(`/wizard/${C.id}/destination`):t(`/wizard/${C.id}/destination`):t(`/pipelines/new/source-config?resume=${C.id}`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(Yl,{className:"w-4 h-4"}),"Complete Setup"]}):s.jsxs(s.Fragment,{children:[Oe(C)!=="running"&&s.jsxs("button",{onClick:ve=>ot(ve,C.id,"start"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(ni,{className:"w-4 h-4"}),Oe(C)==="paused"?"Resume":"Start"]}),Oe(C)==="running"&&s.jsxs("button",{onClick:ve=>ot(ve,C.id,"pause"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(mi,{className:"w-4 h-4"}),"Pause"]}),s.jsxs("button",{onClick:ve=>ot(ve,C.id,"restart"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4"}),"Restart"]}),s.jsxs("button",{onClick:ve=>{ve.stopPropagation(),O(null),A(C)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(So,{className:"w-4 h-4"}),"Change Schedule"]})]}),s.jsxs("button",{onClick:ve=>{ve.stopPropagation(),O(null),re({isOpen:!0,pipelineId:C.id,pipelineName:C.name,isAlreadyDeleted:!1,pipelineStatus:C.status})},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx(ls,{className:"w-4 h-4"}),"Delete Pipeline"]})]})})]})]})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[(C.status==="draft"||C.status==="ready")&&(ee?s.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(zc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[s.jsx("span",{className:"font-medium",children:"Ready to deploy."})," Review your selections and click Deploy to push both connectors to Kafka Connect."]})]})}):s.jsx("div",{className:"mb-3 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(In,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-xs",children:[s.jsx("span",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Setup incomplete: "}),s.jsxs("span",{className:"text-amber-700 dark:text-amber-300",children:[!C.source_type&&"Configure source",C.source_type&&!C.destination_type&&"Configure destination",C.source_type&&C.destination_type&&!C.sink_connector&&"Complete destination setup"]})]})]})})),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Source"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{connectorClass:(ge=C.source_connector)==null?void 0:ge.connector_class,sourceType:C.source_type,className:"w-12 h-12 flex-shrink-0"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((ke=C.source_connector)==null?void 0:ke.name)||C.source_type||"Not configured"}),C.source_connector&&s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Xe(Ee(C.source_connector))}`,children:[s.jsx("span",{children:Ue(Ee(C.source_connector))}),s.jsx("span",{children:Ee(C.source_connector)})]})]})]})]}),s.jsx(is,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Destination"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{connectorClass:(Me=C.sink_connector)==null?void 0:Me.connector_class,sourceType:C.destination_type,className:"w-12 h-12 flex-shrink-0"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((Se=C.sink_connector)==null?void 0:Se.name)||C.destination_type||"Not configured"}),C.sink_connector&&s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Xe(Ee(C.sink_connector))}`,children:[s.jsx("span",{children:Ue(Ee(C.sink_connector))}),s.jsx("span",{children:Ee(C.sink_connector)})]})]})]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("span",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium ${on(Oe(C))}`,children:[de(Oe(C)),Oe(C)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[jt(C,"source",C.source_connector),jt(C,"sink",C.sink_connector)]})]})]},C.id)})}):s.jsx("div",{className:"space-y-4",children:$e.map((C,ee)=>{var ke,Me,Se,ve;const ce=ht(C),ge=ce||C.status==="draft";return s.jsxs("div",{onClick:()=>{C.deleted_at||(C.status==="draft"&&!C.source_connector?t(`/pipelines/new/source-config?resume=${C.id}`):t(`/pipelines/${C.id}`))},className:`bg-white dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-5 transition-all ${C.deleted_at?"opacity-60 cursor-not-allowed":"hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md cursor-pointer"}`,children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:["#",$e.length-ee]}),s.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:C.name}),C.deleted_at&&C.time_remaining&&s.jsxs("div",{className:"ml-3 flex items-center gap-2 px-3 py-1 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-md",children:[s.jsx(mn,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),s.jsxs("span",{className:"text-sm font-semibold text-red-700 dark:text-red-300",children:["Deleted - ",C.time_remaining," remaining"]})]})]}),s.jsx("button",{onClick:_e=>{if(_e.stopPropagation(),d(C.id)===0){r("info","No alerts for this pipeline");return}t(`/pipelines/${C.id}?tab=monitoring`)},className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:"View Alert Settings",children:s.jsx(ys,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsx("button",{onClick:_e=>{_e.stopPropagation(),se(!1,!0)},className:"p-1 rounded transition-colors hover:bg-gray-100 dark:hover:bg-gray-700",title:"Refresh pipeline",disabled:g,children:s.jsx(la,{className:`w-4 h-4 ${g?"animate-spin":""}`})}),ce&&s.jsxs("button",{onClick:_e=>ot(_e,C.id,"deploy"),className:"inline-flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:we===C.id,children:[s.jsx(zc,{className:"w-4 h-4"}),we===C.id?"Deploying":"Deploy"]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-6",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[s.jsx(fr,{connectorClass:(ke=C.source_connector)==null?void 0:ke.connector_class,sourceType:C.source_type,className:"w-12 h-12 flex-shrink-0"}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 dark:text-gray-100 truncate",children:((Me=C.source_connector)==null?void 0:Me.name)||"Source"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[C.source_type,"  ",X5(C)]}),C.source_connector&&s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Xe(Ee(C.source_connector))}`,children:[s.jsx("span",{children:Ue(Ee(C.source_connector))}),s.jsxs("span",{children:["SRC: ",Ee(C.source_connector)]})]})]})]}),jt(C,"source",C.source_connector)]}),s.jsxs("div",{className:"flex items-center justify-center px-4 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600 dark:bg-green-400"}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600 dark:bg-green-400"}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600 dark:bg-green-400"})]}),s.jsx(is,{className:"w-5 h-5 text-gray-400 mx-2"})]}),s.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[s.jsx(fr,{connectorClass:(Se=C.sink_connector)==null?void 0:Se.connector_class,sourceType:C.destination_type,className:"w-12 h-12 flex-shrink-0"}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"text-base font-bold text-gray-900 dark:text-gray-100 truncate",children:((ve=C.sink_connector)==null?void 0:ve.name)||C.destination_type||"Destination"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:C.destination_type}),C.sink_connector&&s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Xe(Ee(C.sink_connector))}`,children:[s.jsx("span",{children:Ue(Ee(C.sink_connector))}),s.jsxs("span",{children:["SINK: ",Ee(C.sink_connector)]})]})]})]}),jt(C,"sink",C.sink_connector)]})]}),s.jsxs("div",{className:"flex items-center gap-4 ml-6 flex-shrink-0",children:[(Oe(C)==="running"||Oe(C)==="paused"||Oe(C)==="error"||Oe(C)==="draft"||Oe(C)==="ready")&&s.jsx("span",{className:`px-4 py-1.5 rounded-md text-xs font-bold uppercase tracking-wider ${Oe(C)==="running"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":Oe(C)==="paused"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":Oe(C)==="error"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:Oe(C)}),d(C.id)>0&&s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:_e=>{_e.stopPropagation(),t(`/pipelines/${C.id}?tab=logs`)},className:"p-2 rounded-full transition-colors hover:bg-red-100 dark:hover:bg-red-900/30 relative",title:`${d(C.id)} unresolved alert(s)`,children:[s.jsx($f,{className:`w-5 h-5 ${u(C.id)?"text-red-600 dark:text-red-400 animate-pulse":"text-yellow-600 dark:text-yellow-400 animate-pulse"}`}),s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:d(C.id)})]})}),s.jsx("button",{onClick:_e=>{_e.stopPropagation(),t(`/pipelines/${C.id}`)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",title:"View Details",children:s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-400 dark:border-gray-500 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500",children:"i"})})}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:_e=>{_e.stopPropagation(),O(_===C.id?null:C.id)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(nx,{className:"w-5 h-5 text-gray-400"})}),_===C.id&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(null)}),s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20",children:C.deleted_at?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:_e=>{_e.stopPropagation(),O(null),J({isOpen:!0,pipelineId:C.id,pipelineName:C.name,timeRemaining:C.time_remaining||"",deletionTime:C.deletion_time||""})},className:"w-full px-4 py-2 text-left text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center gap-2",children:[s.jsx(If,{className:"w-4 h-4"}),"Restore Pipeline"]}),s.jsxs("button",{onClick:_e=>{_e.stopPropagation(),O(null),re({isOpen:!0,pipelineId:C.id,pipelineName:C.name,isAlreadyDeleted:!0,pipelineStatus:C.status})},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx(mn,{className:"w-4 h-4"}),"Delete Permanent"]})]}):s.jsxs(s.Fragment,{children:[ge?ce?s.jsxs("button",{onClick:_e=>ot(_e,C.id,"deploy"),className:"w-full px-4 py-2 text-left text-sm text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center gap-2",disabled:we===C.id,children:[s.jsx(zc,{className:"w-4 h-4"}),we===C.id?"Deploying":"Deploy Pipeline"]}):s.jsxs("button",{onClick:_e=>{_e.stopPropagation(),O(null),C.source_type?C.destination_type?t(`/wizard/${C.id}/destination`):t(`/wizard/${C.id}/destination`):t(`/pipelines/new/source-config?resume=${C.id}`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(Yl,{className:"w-4 h-4"}),"Complete Setup"]}):s.jsxs(s.Fragment,{children:[Oe(C)!=="running"&&s.jsxs("button",{onClick:_e=>ot(_e,C.id,"start"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(ni,{className:"w-4 h-4"}),Oe(C)==="paused"?"Resume":"Start"]}),Oe(C)==="running"&&s.jsxs("button",{onClick:_e=>ot(_e,C.id,"pause"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(mi,{className:"w-4 h-4"}),"Pause"]}),s.jsxs("button",{onClick:_e=>ot(_e,C.id,"restart"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4"}),"Restart"]}),s.jsxs("button",{onClick:_e=>{_e.stopPropagation(),O(null),A(C)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(So,{className:"w-4 h-4"}),"Change Schedule"]})]}),s.jsxs("button",{onClick:_e=>{_e.stopPropagation(),O(null),re({isOpen:!0,pipelineId:C.id,pipelineName:C.name,isAlreadyDeleted:!1,pipelineStatus:C.status})},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx(ls,{className:"w-4 h-4"}),"Delete Pipeline"]})]})})]})]})]})]})]},C.id)})})]}),Hr(),Cn(),Ts(),J5(),s.jsx(mO,{isOpen:R.isOpen,onClose:()=>re({isOpen:!1,pipelineId:null,pipelineName:"",isAlreadyDeleted:!1,pipelineStatus:""}),onConfirm:Q5,title:R.pipelineStatus==="draft"?"Delete Draft Pipeline?":R.isAlreadyDeleted?"Permanently Delete Pipeline?":"Delete Pipeline",message:R.pipelineStatus==="draft"?"This draft pipeline will be permanently deleted. This action CANNOT be undone.":R.isAlreadyDeleted?"This action CANNOT be undone. The pipeline and all its data will be permanently deleted from the database. There will be NO WAY to recover it.":"Choose how you want to delete this pipeline. You can keep it for restore or permanently remove it.",pipelineId:R.pipelineId||void 0,showTopicsOption:R.isAlreadyDeleted||R.pipelineStatus==="draft",showDeleteTypeOption:!R.isAlreadyDeleted&&R.pipelineStatus!=="draft",pipelineStatus:R.pipelineStatus}),s.jsx(T9,{isOpen:Y.isOpen,onClose:()=>J({isOpen:!1,pipelineId:null,pipelineName:"",timeRemaining:"",deletionTime:""}),onConfirm:Y5,pipelineName:Y.pipelineName,pipelineId:Y.pipelineId||"",timeRemaining:Y.timeRemaining,deletionTime:Y.deletionTime})]})}function z9(){const e=Dt(),t=()=>{e("/pipelines/new/source")};return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Pipelines"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Move data between any Source and Destination"}),s.jsx(I9,{onCreatePipeline:t})]})}function F9({children:e,variant:t="default",size:r="sm"}){const n={default:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",success:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",error:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",warning:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",info:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"},a={sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return s.jsx("span",{className:`inline-flex items-center rounded-full font-medium ${n[t]} ${a[r]}`,children:e})}function U9({connectorName:e,connectorType:t,currentConfig:r,pendingConfig:n,onDeploy:a,onDismiss:i,onClose:o}){const l=m.useMemo(()=>{const d=[];return new Set([...Object.keys(r||{}),...Object.keys(n||{})]).forEach(h=>{const f=r==null?void 0:r[h],g=n==null?void 0:n[h];f===void 0&&g!==void 0?d.push({key:h,oldValue:f,newValue:g,type:"added"}):f!==void 0&&g===void 0?d.push({key:h,oldValue:f,newValue:g,type:"removed"}):JSON.stringify(f)!==JSON.stringify(g)&&d.push({key:h,oldValue:f,newValue:g,type:"changed"})}),d},[r,n]),c=()=>{const d=[];new Set(l.map(f=>f.key));const u=new Map(l.map(f=>[f.key,f]));d.push(s.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"{"},"open-brace"));const h=Object.entries(n);return h.forEach(([f,g],p)=>{const y=u.get(f),x=p===h.length-1;y?y.type==="changed"?(d.push(s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20",children:[s.jsx("span",{className:"text-red-600 dark:text-red-400",children:"-  "}),s.jsxs("span",{className:"text-red-700 dark:text-red-300",children:['"',f,'"']}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),s.jsx("span",{className:"text-red-700 dark:text-red-300",children:JSON.stringify(y.oldValue)}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:","})]},`${f}-old`)),d.push(s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"+  "}),s.jsxs("span",{className:"text-green-700 dark:text-green-300",children:['"',f,'"']}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),s.jsx("span",{className:"text-green-700 dark:text-green-300",children:JSON.stringify(g)}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:x?"":","})]},`${f}-new`))):y.type==="added"&&d.push(s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"+  "}),s.jsxs("span",{className:"text-green-700 dark:text-green-300",children:['"',f,'"']}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),s.jsx("span",{className:"text-green-700 dark:text-green-300",children:JSON.stringify(g)}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:x?"":","})]},f)):d.push(s.jsxs("div",{className:"text-gray-700 dark:text-gray-300",children:["   ",s.jsxs("span",{children:['"',f,'"']}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),s.jsx("span",{children:JSON.stringify(g)}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:x?"":","})]},f))}),Object.entries(r).forEach(([f,g])=>{if(!n.hasOwnProperty(f)){const p=u.get(f);(p==null?void 0:p.type)==="removed"&&d.push(s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20",children:[s.jsx("span",{className:"text-red-600 dark:text-red-400",children:"-  "}),s.jsxs("span",{className:"text-red-700 dark:text-red-300",children:['"',f,'"']}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),s.jsx("span",{className:"text-red-700 dark:text-red-300",children:JSON.stringify(g)}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:","})]},`${f}-removed`))}}),d.push(s.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"}"},"close-brace")),d};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:o}),s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col m-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Deploy ",t==="source"?"Source":"Destination"," Configuration"]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e,"  ",l.length," changes"]})]}),s.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No changes detected"}):s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Configuration Changes"}),s.jsx("pre",{className:"text-xs bg-white dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto font-mono",children:c()})]})}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:i,disabled:l.length===0,className:"px-4 py-2 text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Dismiss Changes"}),s.jsx("button",{onClick:a,disabled:l.length===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Deploy"})]})]})]})]})}const B9=m.memo(function({pipelineId:t,pipelineStatus:r,sourceType:n,destinationType:a,onPipelineStatusChange:i,refreshTrigger:o,connectorStatuses:l}){var oe;const[c,d]=m.useState(""),[u,h]=m.useState("all"),[f,g]=m.useState("all"),[p,y]=m.useState(null),[x,v]=m.useState(!1),[w,b]=m.useState(!1),[k,j]=m.useState(null),[N,_]=m.useState(null),[O,T]=m.useState([]),[P,S]=m.useState([]),[M,F]=m.useState(!0),[q,z]=m.useState(new Set),W=m.useRef({}),[$,E]=m.useState(new Set),[U,I]=m.useState({}),[X,Z]=m.useState(new Set);m.useEffect(()=>{var R,re;if(p&&l){const Y=[];(R=l.source)!=null&&R.tasks&&l.source.tasks.forEach(J=>{Y.push({id:`${l.source.name}-${J.id}`,task_number:J.id,status:J.state==="RUNNING"?"running":J.state==="PAUSED"?"paused":"failed",worker_id:J.worker_id||"",lag:"0",throughput:"0",type:"source",connector_name:l.source.name})}),(re=l.sink)!=null&&re.tasks&&l.sink.tasks.forEach(J=>{Y.push({id:`${l.sink.name}-${J.id}`,task_number:J.id,status:J.state==="RUNNING"?"running":J.state==="PAUSED"?"paused":"failed",worker_id:J.worker_id||"",lag:"0",throughput:"0",type:"sink",connector_name:l.sink.name})}),console.log(" Updating selectedTable with fresh tasks:",Y.map(J=>`${J.type}-${J.task_number}:${J.status}`).join(", ")),y(J=>J&&{...J,tasks:Y})}},[l,p==null?void 0:p.id]);const te=R=>{const re=["password","jaas.config","apikey","secret","token","key","username"],Y={};for(const[J,we]of Object.entries(R)){const Ce=J.toLowerCase();re.some(We=>Ce.includes(We))&&typeof we=="string"&&we.length>0?Y[J]="********":Y[J]=we}return Y},K=async R=>{const re=new Set($);if($.has(R))re.delete(R),E(re);else if(re.add(R),E(re),!U[R]){const Y=new Set(X);Y.add(R),Z(Y);try{const we=`http://127.0.0.1:5002/api/pipelines/${t}/tables/${R}/stages`;console.log("Fetching stage data from:",we);const Ce=await fetch(we);if(console.log("Response status:",Ce.status),Ce.ok){const Pe=await Ce.json();console.log("Stage data received:",Pe),Pe.success&&Pe.stages?(console.log("Setting table stages for",R,":",Pe.stages),I(We=>({...We,[R]:Pe.stages}))):console.warn("No stages in response or success=false",Pe)}else console.error("Failed to fetch stage data:",Ce.status,await Ce.text())}catch(J){console.error("Error fetching stage data:",J)}finally{const J=new Set(X);J.delete(R),Z(J)}}},le=async R=>{try{const Y=await(await fetch(`http://localhost:5002/api/connectors/${R}/pause`,{method:"POST"})).json();if(!Y.success)throw new Error(Y.error||"Failed to pause connector");const J=()=>{A(!0),i&&i()};J(),setTimeout(()=>J(),1e3),setTimeout(()=>J(),2e3),setTimeout(()=>J(),3e3)}catch(re){console.error("Failed to pause connector:",re),alert(`Failed to pause connector: ${re.message}`)}},me=async R=>{try{const Y=await(await fetch(`http://localhost:5002/api/connectors/${R}/resume`,{method:"POST"})).json();if(!Y.success)throw new Error(Y.error||"Failed to resume connector");const J=()=>{A(!0),i&&i()};J(),setTimeout(()=>J(),1e3),setTimeout(()=>J(),2e3),setTimeout(()=>J(),3e3)}catch(re){console.error("Failed to resume connector:",re),alert(`Failed to resume connector: ${re.message}`)}},ue=async(R,re)=>{try{const J=await(await fetch(`http://localhost:5002/api/connectors/${R}/tasks/${re}/restart`,{method:"POST"})).json();if(!J.success)throw new Error(J.error||"Failed to restart task");const we=()=>{A(!0),i&&i()};we(),setTimeout(()=>we(),1e3),setTimeout(()=>we(),2e3),setTimeout(()=>we(),3e3)}catch(Y){console.error("Failed to restart task:",Y),alert(`Failed to restart task: ${Y.message}`)}},A=m.useCallback(async(R=!1)=>{var We,Q;R||F(!0),console.log(" Fetching data for pipeline:",t);const[{data:re,error:Y},{data:J,error:we}]=await Promise.all([ne.from("pipeline_connectors").select("*").eq("pipeline_id",t).order("type",{ascending:!0}),ne.from("pipeline_objects").select("*").eq("pipeline_id",t).order("schema_name",{ascending:!0}).order("table_name",{ascending:!0})]);console.log(" Connectors data:",re),console.log(" Connectors error:",Y),console.log(" Tables data:",J),console.log(" Tables error:",we),Y&&console.error("Connectors fetch error:",Y),we&&console.error("Tables fetch error:",we);let Ce=[];re?(console.log(" Enriching connectors, count:",re.length),Ce=await Promise.all(re.map(async se=>{var Xe,Ue;let de=se.config||{};const Ee=(Xe=se.config)==null?void 0:Xe.registry_connector;if(Ee){try{const Oe=await bc(Ee);Oe&&(de=Oe)}catch(Oe){console.warn("Failed to fetch registry config for",Ee,Oe)}de===se.config&&(de=((Ue=se.config)==null?void 0:Ue.snapshot_config)||de)}return{...se,resolved_config:de}})),console.log(" Enriched connectors:",Ce),S(Ce)):console.log(" No connectors data received");let Pe=[];if(l){const se=[];console.log(" ObjectsTab: connectorStatuses.source:",l.source),console.log(" ObjectsTab: connectorStatuses.sink:",l.sink),(We=l.source)!=null&&We.tasks?(console.log(" ObjectsTab: Source tasks found:",l.source.tasks.length),l.source.tasks.forEach(de=>{console.log("   Source task:",de.id,"state:",de.state),se.push({id:`${l.source.name}-${de.id}`,task_number:de.id,status:de.state==="RUNNING"?"running":de.state==="PAUSED"?"paused":"failed",worker_id:de.worker_id||"",lag:"0",throughput:"0",type:"source",connector_name:l.source.name})})):console.log(" ObjectsTab: No source tasks found"),(Q=l.sink)!=null&&Q.tasks?(console.log(" ObjectsTab: Sink tasks found:",l.sink.tasks.length),l.sink.tasks.forEach(de=>{console.log("   Sink task:",de.id,"state:",de.state),se.push({id:`${l.sink.name}-${de.id}`,task_number:de.id,status:de.state==="RUNNING"?"running":de.state==="PAUSED"?"paused":"failed",worker_id:de.worker_id||"",lag:"0",throughput:"0",type:"sink",connector_name:l.sink.name})})):console.log(" ObjectsTab: No sink tasks found"),Pe=se,console.log(" ObjectsTab: Total tasks:",Pe.length),console.log(" ObjectsTab: All tasks:",Pe.map(de=>`${de.type}-${de.task_number}:${de.status}`).join(", "))}if(J&&J.length>0){const se=Ce.find($e=>$e.type==="source"),Ee=((se==null?void 0:se.resolved_config)||(se==null?void 0:se.config)||{})["topic.prefix"]||"topic";let Xe={};const Ue="http://127.0.0.1:5001";if(console.log(" Fetching real-time stats - backendUrl:",Ue,"sourceConnector:",se==null?void 0:se.type),se)try{const $e=se.resolved_config||se.config||{},gt=$e["connector.class"]||"";let ht="postgresql";gt.includes("oracle")?ht="oracle":gt.includes("postgresql")&&(ht="postgresql"),console.log(" Source config keys:",Object.keys($e)),console.log(" Connector class:",gt," connectionType:",ht);let ot=$e["database.hostname"];["pg-debezium","postgres","oracle-xe"].includes(ot)&&(ot="localhost");const jt={connectionType:ht,host:ot,port:parseInt($e["database.port"],10),database:$e["database.dbname"],username:$e["database.user"],password:$e["database.password"],schemaName:$e["database.schema"]||"public"};console.log(" Mapped config:",jt),console.log(" Calling /api/list-tables");const _n=await fetch(`${Ue}/api/list-tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(jt)});if(console.log(" Response status:",_n.status),_n.ok){const Hr=await _n.json();console.log(" Response data:",Hr),Hr.success&&Array.isArray(Hr.tables)?(console.log(" Processing",Hr.tables.length,"tables"),Hr.tables.forEach(Cn=>{const Ts=`${Cn.schema}.${Cn.table}`;Xe[Ts]={rowCount:Cn.rowCount||0,sizeEstimate:Cn.sizeEstimate||"0 B"},console.log(" Table stats:",Ts,"",Xe[Ts])})):console.warn(" Invalid response format:",Hr)}else{const Hr=await _n.text();console.error(" Backend error:",_n.status,Hr)}}catch($e){console.error(" Failed to fetch real-time table stats:",$e)}else console.warn(" Missing backendUrl or sourceConnector:",{backendUrl:Ue,hasSourceConnector:!!se});const Oe=new Set;console.log(" Real-time stats available:",Object.keys(Xe).length,"tables"),console.log(" Tables to map:",J.length);const on=J.map($e=>{const gt=`${$e.schema_name}.${$e.table_name}`,ht=Xe[gt],ot=(ht==null?void 0:ht.rowCount)??0,Qn=(ht==null?void 0:ht.sizeEstimate)??"0 B";console.log(` Mapping table ${gt}: realStats=${!!ht}, row_count=${ot}, size=${Qn}`);const jt=W.current[gt];return jt&&(ot>jt.row_count||Qn!==jt.size_estimate)&&(Oe.add(gt),console.log(`  Increase detected for ${gt}:`,jt,"",{row_count:ot,size_estimate:Qn})),W.current[gt]={row_count:ot,size_estimate:Qn},{id:$e.id,schema_name:$e.schema_name,table_name:$e.table_name,status:"streaming",last_event_timestamp:new Date().toISOString(),row_count:ot,size_estimate:Qn,last_sync_time:new Date().toISOString(),source_topic:`${Ee}.${$e.schema_name}.${$e.table_name}`,partition_count:1,destination_table:`${$e.schema_name}_${$e.table_name}`,snapshot_progress:$e.included?100:0,tasks:Pe}});T(on),z(Oe),Oe.size>0&&setTimeout(()=>{z(new Set)},5e3)}else{const se=Ce.find(Ue=>Ue.type==="source"),de=Ce.find(Ue=>Ue.type==="sink"),Xe=q9(se,de,t).map(Ue=>({...Ue,status:"streaming",tasks:Pe}));T(Xe)}F(!1)},[t]);m.useEffect(()=>{A()},[A]),m.useEffect(()=>{if(r!=="running"&&r!=="paused")return;const R=setInterval(()=>{A(!0)},5e3);return()=>clearInterval(R)},[r,A]);const D=m.useMemo(()=>{var re,Y;if(!l)return[];const R=[];return(re=l.source)!=null&&re.tasks&&l.source.tasks.forEach(J=>{console.log(" Source task state:",J.state,"id:",J.id);const we=J.state==="RUNNING"?"running":J.state==="PAUSED"?"paused":"failed";console.log("   Mapped to:",we),R.push({id:`${l.source.name}-${J.id}`,task_number:J.id,status:we,worker_id:J.worker_id||"",lag:"0",throughput:"0",type:"source",connector_name:l.source.name})}),(Y=l.sink)!=null&&Y.tasks&&l.sink.tasks.forEach(J=>{console.log(" Sink task state:",J.state,"id:",J.id);const we=J.state==="RUNNING"?"running":J.state==="PAUSED"?"paused":"failed";console.log("   Mapped to:",we),R.push({id:`${l.sink.name}-${J.id}`,task_number:J.id,status:we,worker_id:J.worker_id||"",lag:"0",throughput:"0",type:"sink",connector_name:l.sink.name})}),console.log(" INSTANT tasks update from connectorStatuses:",R.map(J=>`${J.type}-${J.task_number}:${J.status}`).join(", ")),console.log(" Full tasks array:",JSON.stringify(R,null,2)),R},[l]),G=m.useMemo(()=>O.map(R=>{const re={...R,tasks:D};if(!re.tasks||re.tasks.length===0)return re;const Y=re.tasks.some(Pe=>Pe.status==="failed"),J=re.tasks.some(Pe=>Pe.status==="paused"),we=re.tasks.every(Pe=>Pe.status==="running");let Ce="paused";return Y?Ce="error":J?Ce="paused":we&&(Ce="streaming"),{...re,status:Ce}}),[O,D]),ae=R=>{switch(R){case"streaming":return s.jsx($r,{className:"w-4 h-4"});case"snapshotting":return s.jsx(la,{className:"w-4 h-4 animate-spin"});case"paused":return s.jsx(Fr,{className:"w-4 h-4"});case"error":return s.jsx(bn,{className:"w-4 h-4"});default:return s.jsx(kt,{className:"w-4 h-4"})}},B=R=>{switch(R){case"streaming":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"snapshotting":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"error":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},fe=R=>new Date(R).toLocaleString(),be=m.useMemo(()=>G.filter(R=>{const re=R.table_name.toLowerCase().includes(c.toLowerCase())||R.schema_name.toLowerCase().includes(c.toLowerCase()),Y=u==="all"||R.status===u,J=f==="all"||R.schema_name===f;return re&&Y&&J}),[G,c,u,f]),Te=m.useMemo(()=>Array.from(new Set(O.map(R=>R.schema_name))),[O]),Ae=m.useMemo(()=>P.filter(R=>R.type==="source"),[P]),H=m.useMemo(()=>P.filter(R=>R.type==="sink"),[P]);return M?s.jsx("div",{className:"p-8 text-gray-600 dark:text-gray-400",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Connectors"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Source Connectors"}),Ae.map(R=>s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-full p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 cursor-pointer transition-colors",onClick:()=>{_(R),b(!0)},children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fr,{connectorClass:R.connector_class,className:"w-14 h-14 flex-shrink-0"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:R.name}),R.has_pending_changes&&s.jsxs("button",{onClick:re=>{re.stopPropagation(),j(R),v(!0)},className:"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 text-xs font-medium rounded-full hover:bg-orange-200 dark:hover:bg-orange-900/40 transition-colors cursor-pointer",children:[s.jsx(K1,{className:"w-3 h-3"}),"Updated"]})]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:R.connector_class.split(".").pop()})]})]})})})},R.id))]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sink Connectors"}),H.map(R=>s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-full p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 cursor-pointer transition-colors",onClick:()=>{_(R),b(!0)},children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fr,{connectorClass:R.connector_class,className:"w-14 h-14 flex-shrink-0"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:R.name}),R.has_pending_changes&&s.jsxs("button",{onClick:re=>{re.stopPropagation(),j(R),v(!0)},className:"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 text-xs font-medium rounded-full hover:bg-orange-200 dark:hover:bg-orange-900/40 transition-colors cursor-pointer",children:[s.jsx(K1,{className:"w-3 h-3"}),"Updated"]})]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:R.connector_class.split(".").pop()})]})]})})})},R.id))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Tables"}),s.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(la,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tables...",value:c,onChange:R=>d(R.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:u,onChange:R=>h(R.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"streaming",children:"Streaming"}),s.jsx("option",{value:"snapshotting",children:"Snapshotting"}),s.jsx("option",{value:"paused",children:"Paused"}),s.jsx("option",{value:"error",children:"Error"})]}),s.jsxs("select",{value:f,onChange:R=>g(R.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Schemas"}),Te.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Table"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Connector"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Event"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rows"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Size"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Destination"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tasks"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:be.map(R=>{var we,Ce,Pe;const re=$.has(R.id),Y=U[R.id]||[],J=X.has(R.id);return s.jsxs(iC.Fragment,{children:[s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:We=>{We.stopPropagation(),K(R.id)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",children:re?s.jsx(ua,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):s.jsx(nn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{onClick:()=>y(R),className:"flex items-center gap-3 cursor-pointer",children:[s.jsx(fr,{connectorClass:(we=Ae[0])==null?void 0:we.connector_class,sourceType:n,className:"w-8 h-8 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:R.table_name}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:R.schema_name})]})]})]})}),s.jsx("td",{className:"px-6 py-4 cursor-pointer",onClick:()=>y(R),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{connectorClass:(Ce=Ae[0])==null?void 0:Ce.connector_class,sourceType:n,className:"w-12 h-12 flex-shrink-0"}),s.jsx("span",{className:"text-2xl text-gray-400 dark:text-gray-500 font-light",children:""}),s.jsx(fr,{connectorClass:(Pe=H[0])==null?void 0:Pe.connector_class,sourceType:a,className:"w-12 h-12 flex-shrink-0"})]})}),s.jsx("td",{className:"px-6 py-4 cursor-pointer",onClick:()=>y(R),children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${B(R.status)}`,children:[ae(R.status),R.status]}),R.status==="snapshotting"&&R.snapshot_progress!==void 0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${R.snapshot_progress}%`}})}),s.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[R.snapshot_progress,"%"]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400 cursor-pointer",onClick:()=>y(R),children:fe(R.last_event_timestamp)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100 cursor-pointer",onClick:()=>y(R),children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{children:R.row_count.toLocaleString()}),q.has(`${R.schema_name}.${R.table_name}`)&&s.jsx(os,{className:"w-4 h-4 text-green-600 dark:text-green-400 animate-bounce"})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400 cursor-pointer",onClick:()=>y(R),children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{children:R.size_estimate}),q.has(`${R.schema_name}.${R.table_name}`)&&s.jsx(os,{className:"w-4 h-4 text-green-600 dark:text-green-400 animate-bounce"})]})}),s.jsxs("td",{className:"px-6 py-4 cursor-pointer",onClick:()=>y(R),children:[s.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-mono",children:R.destination_table}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[R.partition_count," partitions"]})]}),s.jsx("td",{className:"px-6 py-4 cursor-pointer",onClick:()=>y(R),children:R.tasks&&R.tasks.length>0?s.jsx("div",{className:"flex items-center gap-1.5",children:R.tasks.map(We=>s.jsxs("div",{className:`px-2.5 py-1 rounded text-xs font-medium ${We.status==="running"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":We.status==="paused"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,title:`${We.type==="source"?"Source":"Sink"}: ${We.connector_name}
Task ${We.task_number}
Worker: ${We.worker_id}`,children:[We.type==="source"?"SRC":"SINK","-",We.task_number]},We.id))}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No tasks"})})]}),re&&s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50",children:J?s.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-500 dark:text-gray-400",children:[s.jsx(la,{className:"w-5 h-5 animate-spin mr-2"}),"Loading stage details..."]}):Y.length>0?s.jsx("div",{className:"border-2 border-blue-500 dark:border-blue-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Stage"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Started At"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Duration"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"# Input"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"# Output"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"# Failed"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Y.map((We,Q)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 font-medium",children:We.name}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:fe(We.startedAt)}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:We.duration}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:We.input.toLocaleString()}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:We.output.toLocaleString()}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:We.failed.toLocaleString()}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${B(We.status)}`,children:[ae(We.status),We.status]})})]},Q))})]})}):s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No stage details available"})})},`${R.id}-expanded`)]},R.id)})})]})})]}),w&&N&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>b(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col m-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:N.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Current Configuration"})]}),s.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5 text-gray-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("pre",{className:"text-xs bg-gray-50 dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto font-mono",children:JSON.stringify(te(N.resolved_config||N.config),null,2)})}),s.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 dark:border-gray-700",children:s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"})})]})]}),x&&k&&s.jsx(U9,{connectorName:k.name,connectorType:k.type,currentConfig:te(k.config),pendingConfig:te(k.pending_config||{}),onDeploy:async()=>{try{const{error:R}=await ne.from("pipeline_connectors").update({config:k.pending_config,pending_config:null,has_pending_changes:!1,last_deployed_at:new Date().toISOString(),last_deployed_version:k.last_deployed_version?k.last_deployed_version+1:1}).eq("id",k.id);if(R)throw R;v(!1),j(null),A(),window.dispatchEvent(new CustomEvent("pipeline-updated",{detail:{pipelineId:t}}))}catch(R){console.error("Deploy error:",R),alert("Failed to deploy changes")}},onDismiss:async()=>{try{const{error:R}=await ne.from("pipeline_connectors").update({pending_config:null,has_pending_changes:!1}).eq("id",k.id);if(R)throw R;v(!1),j(null),A()}catch(R){console.error("Dismiss error:",R),alert("Failed to dismiss changes")}},onClose:()=>{v(!1),j(null)}}),p&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>y(null)}),s.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50 max-h-[80vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kt,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:[p.schema_name,".",p.table_name]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Table Details"})]})]}),s.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${B(p.tasks&&p.tasks.length>0?p.tasks[0].status:p.status)}`,children:[ae(p.tasks&&p.tasks.length>0?p.tasks[0].status:p.status),p.tasks&&p.tasks.length>0?p.tasks[0].status:p.status]}),p.status==="snapshotting"&&p.snapshot_progress!==void 0&&s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${p.snapshot_progress}%`}})}),s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[p.snapshot_progress,"%"]})]})]}),p.error_message&&s.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(bn,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-red-900 dark:text-red-200",children:"Error"}),s.jsx("p",{className:"text-sm text-red-800 dark:text-red-300 mt-1",children:p.error_message})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Row Count"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:p.row_count.toLocaleString()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Size"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:p.size_estimate})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Partitions"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:p.partition_count})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tasks"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:((oe=p.tasks)==null?void 0:oe.length)||0})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Source Topic"}),s.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 mt-1",children:p.source_topic})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Destination Table"}),s.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 mt-1",children:p.destination_table})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Event"}),s.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:fe(p.last_event_timestamp)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Sync"}),s.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:fe(p.last_sync_time)})]})]}),p.tasks&&p.tasks.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Tasks"}),s.jsx("div",{className:"space-y-2",children:p.tasks.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:`px-2.5 py-1 rounded text-xs font-medium ${R.status==="running"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":R.status==="paused"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:[R.type==="source"?"Source":"Sink"," Task ",R.task_number]}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.worker_id})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Lag:"}),s.jsx("span",{className:"ml-1 font-medium text-gray-900 dark:text-gray-100",children:R.lag})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Throughput:"}),s.jsx("span",{className:"ml-1 font-medium text-gray-900 dark:text-gray-100",children:R.throughput})]})]}),s.jsxs("div",{className:"flex items-center gap-1 border-l border-gray-300 dark:border-gray-700 pl-4",children:[R.status==="paused"?s.jsx("button",{onClick:re=>{re.stopPropagation(),me(R.connector_name)},className:"p-1.5 hover:bg-green-100 dark:hover:bg-green-900/30 rounded transition-colors",title:"Resume Connector",children:s.jsx(ni,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}):s.jsx("button",{onClick:re=>{re.stopPropagation(),le(R.connector_name)},className:"p-1.5 hover:bg-yellow-100 dark:hover:bg-yellow-900/30 rounded transition-colors",title:"Pause Connector",children:s.jsx(mi,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),s.jsx("button",{onClick:re=>{re.stopPropagation(),ue(R.connector_name,R.task_number)},className:"p-1.5 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Restart Task",children:s.jsx(ho,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})})]})]})]},R.id))})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("button",{onClick:()=>alert("Preview data - Under development"),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(ga,{className:"w-4 h-4"}),"Preview Data"]}),s.jsxs("button",{onClick:()=>alert("Re-snapshot - Under development"),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx(la,{className:"w-4 h-4"}),"Re-snapshot"]})]})]})]})]})]})});function q9(e,t,r){const n=(e==null?void 0:e.resolved_config)||(e==null?void 0:e.config)||{},a=(t==null?void 0:t.resolved_config)||(t==null?void 0:t.config)||{},i=n["table.include.list"];let o=[];if(i&&(o=i.split(",").map(c=>c.trim()).filter(Boolean)),o.length===0){const c=a.topics;c&&(o=c.split(",").map(d=>d.trim()).filter(Boolean).map(d=>{const u=d.split(".");return u.length>=3?`${u[1]}.${u[2]}`:d}))}const l=n["topic.prefix"]||"topic";return o.map((c,d)=>{const[u,h]=c.includes(".")?c.split("."):["public",c];return{id:`${r||"config"}-${d}`,schema_name:u,table_name:h,status:"streaming",last_event_timestamp:new Date().toISOString(),row_count:0,size_estimate:"0 B",last_sync_time:new Date().toISOString(),source_topic:`${l}.${u}.${h}`,partition_count:1,destination_table:`${u}_${h}`,snapshot_progress:0,tasks:[]}})}function si({icon:e,label:t,value:r,variant:n="default"}){const a={default:"bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100",success:"bg-green-50 dark:bg-green-900/20 text-green-900 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/20 text-red-900 dark:text-red-100",warning:"bg-amber-50 dark:bg-amber-900/20 text-amber-900 dark:text-amber-100"},i={default:"text-gray-500 dark:text-gray-400",success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-amber-600 dark:text-amber-400"};return s.jsxs("div",{className:`px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-700 ${a[n]}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(e,{className:`w-4 h-4 ${i[n]}`}),s.jsx("span",{className:"text-xs font-medium opacity-75",children:t})]}),s.jsx("div",{className:"text-lg font-bold",children:r})]})}function W9({pipelineId:e}){const{showToast:t}=Er(),[r,n]=m.useState(!0),[a,i]=m.useState([]),[o,l]=m.useState([]),[c,d]=m.useState(!1),[u,h]=m.useState(""),[f,g]=m.useState(!1),[p,y]=m.useState(!1),[x,v]=m.useState(null),[w,b]=m.useState(!1);m.useEffect(()=>{k()},[e]);const k=async()=>{await Promise.all([j(),N()]),n(!1)},j=async()=>{try{const{data:P,error:S}=await ne.from("pipeline_slack_channels").select(`
          id,
          slack_integration_id,
          slack_integrations (
            id,
            channel_name,
            webhook_url,
            description
          )
        `).eq("pipeline_id",e);if(S)throw S;i(P||[])}catch(P){console.error("Failed to load assigned channels:",P)}},N=async()=>{try{const{data:P,error:S}=await ne.from("slack_integrations").select("*").order("channel_name");if(S)throw S;l(P||[])}catch(P){console.error("Failed to load available webhooks:",P),l([])}},_=async()=>{if(!u){t("error","Please select a Slack channel");return}g(!0);try{const{error:P}=await ne.from("pipeline_slack_channels").insert({pipeline_id:e,slack_integration_id:u});if(P){if(P.code==="23505")t("error","This Slack channel is already assigned");else throw P;return}t("success","Slack channel assigned successfully"),d(!1),h(""),j()}catch(P){console.error("Failed to assign channel:",P),t("error","Failed to assign Slack channel")}finally{g(!1)}},O=async()=>{if(x){b(!0);try{const{error:P}=await ne.from("pipeline_slack_channels").delete().eq("id",x.id);if(P)throw P;t("success","Slack channel removed"),y(!1),v(null),j()}catch(P){console.error("Failed to remove channel:",P),t("error","Failed to remove Slack channel")}finally{b(!1)}}},T=()=>{const P=new Set(a.map(S=>S.slack_integration_id));return o.filter(S=>!P.has(S.id))};return r?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(st,{className:"w-6 h-6 animate-spin text-blue-600"})}):s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Slack Channels"]}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.length," channel",a.length!==1?"s":""]})]}),a.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx(Oa,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No Slack channels assigned"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mb-4",children:"Assign Slack channels to receive alerts for this pipeline"}),s.jsxs("button",{onClick:()=>d(!0),disabled:o.length===0,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(pi,{className:"w-4 h-4"}),"Assign Slack Channel"]}),o.length===0&&s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"No Slack webhooks available. Add webhooks in Admin  Alert Settings  Slack Integrations"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden mb-4",children:s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(P=>s.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:s.jsx(Oa,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:P.slack_integrations.channel_name}),P.slack_integrations.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.slack_integrations.description})]})]}),s.jsxs("button",{onClick:()=>{v({id:P.id,name:P.slack_integrations.channel_name}),y(!0)},className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Remove"]})]},P.id))})}),T().length>0&&s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:[s.jsx(pi,{className:"w-4 h-4"}),"Assign Another Channel"]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Assign Slack Channel"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"All alerts for this pipeline will be sent to assigned channels"})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Slack Channel"}),s.jsxs("select",{value:u,onChange:P=>h(P.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"-- Select a channel --"}),T().map(P=>s.jsxs("option",{value:P.id,children:[P.channel_name,P.description&&` - ${P.description}`]},P.id))]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[s.jsx("button",{onClick:()=>{d(!1),h("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:_,disabled:f||!u,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pi,{className:"w-4 h-4"}),"Assign Channel"]})})]})]})}),p&&x&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[s.jsx(mn,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),"Remove Slack Channel"]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["Are you sure you want to remove ",s.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:['"',x.name,'"']})," from this pipeline?"]}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"This channel will no longer receive alerts for this pipeline. This action cannot be undone."})})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[s.jsx("button",{onClick:()=>{y(!1),v(null)},disabled:w,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),s.jsx("button",{onClick:O,disabled:w,className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Removing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"w-4 h-4"}),"Remove Channel"]})})]})]})})]})}function yO(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=yO(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function et(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=yO(e))&&(n&&(n+=" "),n+=t);return n}const H9=Object.freeze(Object.defineProperty({__proto__:null,clsx:et,default:et},Symbol.toStringTag,{value:"Module"}));var V9=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Qb(e){if(typeof e!="string")return!1;var t=V9;return t.includes(e)}var K9=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],G9=new Set(K9);function xO(e){return typeof e!="string"?!1:G9.has(e)}function vO(e){return typeof e=="string"&&e.startsWith("data-")}function Wn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(xO(r)||vO(r))&&(t[r]=e[r]);return t}function mg(e){if(e==null)return null;if(m.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Wn(t)}return typeof e=="object"&&!Array.isArray(e)?Wn(e):null}function yr(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(xO(r)||vO(r)||Qb(r))&&(t[r]=e[r]);return t}function Q9(e){return e==null?null:m.isValidElement(e)?yr(e.props):typeof e=="object"&&!Array.isArray(e)?yr(e):null}var Y9=["children","width","height","viewBox","className","style","title","desc"];function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(null,arguments)}function X9(e,t){if(e==null)return{};var r,n,a=J9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yb=m.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=X9(e,Y9),h=i||{width:n,height:a,x:0,y:0},f=et("recharts-surface",o);return m.createElement("svg",kx({},yr(u),{className:f,width:n,height:a,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),m.createElement("title",null,c),m.createElement("desc",null,d),r)}),Z9=["children","className"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jx.apply(null,arguments)}function ez(e,t){if(e==null)return{};var r,n,a=tz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wn=m.forwardRef((e,t)=>{var{children:r,className:n}=e,a=ez(e,Z9),i=et("recharts-layer",n);return m.createElement("g",jx({className:i},yr(a),{ref:t}),r)}),bO=m.createContext(null),rz=()=>m.useContext(bO);function pt(e){return function(){return e}}const wO=Math.cos,qf=Math.sin,va=Math.sqrt,Wf=Math.PI,pg=2*Wf,Nx=Math.PI,Sx=2*Nx,Ui=1e-6,nz=Sx-Ui;function kO(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function az(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return kO;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class sz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?kO:az(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=a-r,u=o-t,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Ui)if(!(Math.abs(h*c-d*u)>Ui)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-o,p=a-l,y=c*c+d*d,x=g*g+p*p,v=Math.sqrt(y),w=Math.sqrt(f),b=i*Math.tan((Nx-Math.acos((y+f-x)/(2*v*w)))/2),k=b/w,j=b/v;Math.abs(k-1)>Ui&&this._append`L${t+k*u},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*g>u*p)},${this._x1=t+j*c},${this._y1=r+j*d}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),d=t+l,u=r+c,h=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Ui||Math.abs(this._y1-u)>Ui)&&this._append`L${d},${u}`,n&&(f<0&&(f=f%Sx+Sx),f>nz?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:f>Ui&&this._append`A${n},${n},0,${+(f>=Nx)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Xb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new sz(t)}function Jb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jO(e){this._context=e}jO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yg(e){return new jO(e)}function NO(e){return e[0]}function SO(e){return e[1]}function _O(e,t){var r=pt(!0),n=null,a=yg,i=null,o=Xb(l);e=typeof e=="function"?e:e===void 0?NO:pt(e),t=typeof t=="function"?t:t===void 0?SO:pt(t);function l(c){var d,u=(c=Jb(c)).length,h,f=!1,g;for(n==null&&(i=a(g=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(g)return i=null,g+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:pt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:pt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:pt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function kh(e,t,r){var n=null,a=pt(!0),i=null,o=yg,l=null,c=Xb(d);e=typeof e=="function"?e:e===void 0?NO:pt(+e),t=typeof t=="function"?t:pt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?SO:pt(+r);function d(h){var f,g,p,y=(h=Jb(h)).length,x,v=!1,w,b=new Array(y),k=new Array(y);for(i==null&&(l=o(w=c())),f=0;f<=y;++f){if(!(f<y&&a(x=h[f],f,h))===v)if(v=!v)g=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=g;--p)l.point(b[p],k[p]);l.lineEnd(),l.areaEnd()}v&&(b[f]=+e(x,f,h),k[f]=+t(x,f,h),l.point(n?+n(x,f,h):b[f],r?+r(x,f,h):k[f]))}if(w)return l=null,w+""||null}function u(){return _O().defined(a).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:pt(+h),n=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:pt(+h),d):e},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:pt(+h),d):n},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:pt(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:pt(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:pt(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:pt(!!h),d):a},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class CO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function iz(e){return new CO(e,!0)}function oz(e){return new CO(e,!1)}const Zb={draw(e,t){const r=va(t/Wf);e.moveTo(r,0),e.arc(0,0,r,0,pg)}},lz={draw(e,t){const r=va(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},PO=va(1/3),cz=PO*2,dz={draw(e,t){const r=va(t/cz),n=r*PO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},uz={draw(e,t){const r=va(t),n=-r/2;e.rect(n,n,r,r)}},hz=.8908130915292852,EO=qf(Wf/10)/qf(7*Wf/10),fz=qf(pg/10)*EO,gz=-wO(pg/10)*EO,mz={draw(e,t){const r=va(t*hz),n=fz*r,a=gz*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=pg*i/5,l=wO(o),c=qf(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},pp=va(3),pz={draw(e,t){const r=-va(t/(pp*3));e.moveTo(0,r*2),e.lineTo(-pp*r,-r),e.lineTo(pp*r,-r),e.closePath()}},Pn=-.5,En=va(3)/2,_x=1/va(12),yz=(_x/2+1)*3,xz={draw(e,t){const r=va(t/yz),n=r/2,a=r*_x,i=n,o=r*_x+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Pn*n-En*a,En*n+Pn*a),e.lineTo(Pn*i-En*o,En*i+Pn*o),e.lineTo(Pn*l-En*c,En*l+Pn*c),e.lineTo(Pn*n+En*a,Pn*a-En*n),e.lineTo(Pn*i+En*o,Pn*o-En*i),e.lineTo(Pn*l+En*c,Pn*c-En*l),e.closePath()}};function vz(e,t){let r=null,n=Xb(a);e=typeof e=="function"?e:pt(e||Zb),t=typeof t=="function"?t:pt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:pt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:pt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Hf(){}function Vf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function OO(e){this._context=e}OO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bz(e){return new OO(e)}function TO(e){this._context=e}TO.prototype={areaStart:Hf,areaEnd:Hf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wz(e){return new TO(e)}function AO(e){this._context=e}AO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kz(e){return new AO(e)}function DO(e){this._context=e}DO.prototype={areaStart:Hf,areaEnd:Hf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function jz(e){return new DO(e)}function xN(e){return e<0?-1:1}function vN(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(xN(i)+xN(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function bN(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function yp(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function Kf(e){this._context=e}Kf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yp(this,this._t0,bN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yp(this,bN(this,r=vN(this,e,t)),r);break;default:yp(this,this._t0,r=vN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function RO(e){this._context=new MO(e)}(RO.prototype=Object.create(Kf.prototype)).point=function(e,t){Kf.prototype.point.call(this,t,e)};function MO(e){this._context=e}MO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Nz(e){return new Kf(e)}function Sz(e){return new RO(e)}function LO(e){this._context=e}LO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=wN(e),a=wN(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function wN(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function _z(e){return new LO(e)}function xg(e,t){this._context=e,this._t=t}xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Cz(e){return new xg(e,.5)}function Pz(e){return new xg(e,0)}function Ez(e){return new xg(e,1)}function Zl(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Cx(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Oz(e,t){return e[t]}function Tz(e){const t=[];return t.key=e,t}function Az(){var e=pt([]),t=Cx,r=Zl,n=Oz;function a(i){var o=Array.from(e.apply(this,arguments),Tz),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,i)]).data=h;for(l=0,u=Jb(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:pt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:pt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Cx:typeof i=="function"?i:pt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Zl,a):r},a}function Dz(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Zl(e,t)}}function Rz(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Zl(e,t)}}function Mz(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[n][1]||0,f=u[n-1][1]||0,g=(h-f)/2,p=0;p<l;++p){var y=e[t[p]],x=y[n][1]||0,v=y[n-1][1]||0;g+=x-v}c+=h,d+=g*h}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,Zl(e,t)}}var vg={},$O={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})($O);var ew={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(ew);var bg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(bg);var wg={},IO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(IO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IO,r=bg;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],o=a.length;if(o===0)return i;let l=0,c="",d="",u=!1;for(a.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const h=a[l];d?h==="\\"&&l+1<o?(l++,c+=a[l]):h===d?d="":c+=h:u?h==='"'||h==="'"?d=h:h==="]"?(u=!1,i.push(c),c=""):c+=h:h==="["?(u=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=n})(wg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$O,r=ew,n=bg,a=wg;function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,a.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i})(vg);var Lz=vg.get;const kg=Ss(Lz);var zn=e=>e===0?0:e>0?1:-1,kn=e=>typeof e=="number"&&e!=+e,vs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,je=e=>(typeof e=="number"||e instanceof Number)&&!kn(e),Hn=e=>je(e)||typeof e=="string",$z=0,Vd=e=>{var t=++$z;return"".concat(e||"").concat(t)},ki=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(t)&&typeof t!="string")return n;var i;if(vs(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return kn(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},zO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function zt(e,t,r){return je(e)&&je(t)?e+r*(t-e):t}function FO(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):kg(n,t))===r)}var Qt=e=>e===null||typeof e>"u",_u=e=>Qt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Iz(e){return e!=null}function Cu(){}var zz=["type","size","sizeType"];function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Px.apply(null,arguments)}function kN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(r),!0).forEach(function(n){Fz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fz(e,t,r){return(t=Uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uz(e){var t=Bz(e,"string");return typeof t=="symbol"?t:t+""}function Bz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qz(e,t){if(e==null)return{};var r,n,a=Wz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Wz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UO={symbolCircle:Zb,symbolCross:lz,symbolDiamond:dz,symbolSquare:uz,symbolStar:mz,symbolTriangle:pz,symbolWye:xz},Hz=Math.PI/180,Vz=e=>{var t="symbol".concat(_u(e));return UO[t]||Zb},Kz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Hz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Gz=(e,t)=>{UO["symbol".concat(_u(e))]=t},tw=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=qz(e,zz),i=jN(jN({},a),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var f=Vz(o),g=vz().type(f).size(Kz(r,n,o)),p=g();if(p!==null)return p},{className:c,cx:d,cy:u}=i,h=yr(i);return je(d)&&je(u)&&je(r)?m.createElement("path",Px({},h,{className:et("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};tw.registerSymbol=Gz;var BO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,rw=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(m.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Qb(a)&&(n[a]=i=>r[a](r,i))}),n},Qz=(e,t,r)=>n=>(e(t,r,n),null),qO=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];Qb(a)&&typeof i=="function"&&(n||(n={}),n[a]=Qz(i,t,r))}),n};function NN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NN(Object(r),!0).forEach(function(n){Xz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xz(e,t,r){return(t=Jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jz(e){var t=Zz(e,"string");return typeof t=="symbol"?t:t+""}function Zz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yt(e,t){var r=Yz({},e),n=t,a=Object.keys(t),i=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gf.apply(null,arguments)}function SN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function e8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(r),!0).forEach(function(n){t8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t8(e,t,r){return(t=r8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r8(e){var t=n8(e,"string");return typeof t=="symbol"?t:t+""}function n8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tn=32,a8={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function s8(e){var{data:t,iconType:r,inactiveColor:n}=e,a=Tn/2,i=Tn/6,o=Tn/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline"){var d;return m.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:a,x2:Tn,y2:a,className:"recharts-legend-icon"})}if(c==="line")return m.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Tn,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return m.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Tn/8,"h").concat(Tn,"v").concat(Tn*3/4,"h").concat(-Tn,"z"),className:"recharts-legend-icon"});if(m.isValidElement(t.legendIcon)){var u=e8({},t);return delete u.legendIcon,m.cloneElement(t.legendIcon,u)}return m.createElement(tw,{fill:l,cx:a,cy:a,size:Tn,sizeType:"diameter",type:c})}function i8(e){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:Tn,height:Tn},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||a,g=et({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var p=u.inactive?i:u.color,y=f?f(u.value,u,h):u.value;return m.createElement("li",Gf({className:g,style:c,key:"legend-item-".concat(h)},qO(e,u,h)),m.createElement(Yb,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(y," legend icon")},m.createElement(s8,{data:u,iconType:o,inactiveColor:i})),m.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},y))})}var o8=e=>{var t=Yt(e,a8),{payload:r,layout:n,align:a}=t;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return m.createElement("ul",{className:"recharts-default-legend",style:i},m.createElement(i8,Gf({},t,{payload:r})))},WO={},HO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})(HO);var nw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(nw);var VO={},jg={},KO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(KO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KO;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(jg);var GO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(GO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jg,r=GO;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(VO);var QO={},YO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vg;function r(n){return function(a){return t.get(a,n)}}e.property=r})(YO);var XO={},aw={},JO={},sw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(sw);var iw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(iw);var ow={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(ow);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sw,r=iw,n=ow;function a(u,h,f){return typeof f!="function"?a(u,h,()=>{}):i(u,h,function g(p,y,x,v,w,b){const k=f(p,y,x,v,w,b);return k!==void 0?!!k:i(p,y,g,b)},new Map)}function i(u,h,f,g){if(h===u)return!0;switch(typeof h){case"object":return o(u,h,f,g);case"function":return Object.keys(h).length>0?i(u,{...h},f,g):n.eq(u,h);default:return t.isObject(u)?typeof h=="string"?h==="":!0:n.eq(u,h)}}function o(u,h,f,g){if(h==null)return!0;if(Array.isArray(h))return c(u,h,f,g);if(h instanceof Map)return l(u,h,f,g);if(h instanceof Set)return d(u,h,f,g);const p=Object.keys(h);if(u==null)return p.length===0;if(p.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===u;g==null||g.set(h,u);try{for(let y=0;y<p.length;y++){const x=p[y];if(!r.isPrimitive(u)&&!(x in u)||h[x]===void 0&&u[x]!==void 0||h[x]===null&&u[x]!==null||!f(u[x],h[x],x,u,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function l(u,h,f,g){if(h.size===0)return!0;if(!(u instanceof Map))return!1;for(const[p,y]of h.entries()){const x=u.get(p);if(f(x,y,p,u,h,g)===!1)return!1}return!0}function c(u,h,f,g){if(h.length===0)return!0;if(!Array.isArray(u))return!1;const p=new Set;for(let y=0;y<h.length;y++){const x=h[y];let v=!1;for(let w=0;w<u.length;w++){if(p.has(w))continue;const b=u[w];let k=!1;if(f(b,x,y,u,h,g)&&(k=!0),k){p.add(w),v=!0;break}}if(!v)return!1}return!0}function d(u,h,f,g){return h.size===0?!0:u instanceof Set?c([...u],[...h],f,g):!1}e.isMatchWith=a,e.isSetMatch=d})(JO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JO;function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(aw);var ZO={},lw={},e4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(e4);var cw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(cw);var dw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",g="[object Object]",p="[object Error]",y="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",k="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",_="[object Int32Array]",O="[object BigInt64Array]",T="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=O,e.bigUint64ArrayTag=k,e.booleanTag=a,e.dataViewTag=y,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=T,e.float64ArrayTag=P,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=_,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=b,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=v})(dw);var t4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(t4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e4,r=cw,n=dw,a=iw,i=t4;function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,f,g=new Map,p=void 0){const y=p==null?void 0:p(u,h,f,g);if(y!==void 0)return y;if(a.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const x=new Array(u.length);g.set(u,x);for(let v=0;v<u.length;v++)x[v]=l(u[v],v,f,g,p);return Object.hasOwn(u,"index")&&(x.index=u.index),Object.hasOwn(u,"input")&&(x.input=u.input),x}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const x=new RegExp(u.source,u.flags);return x.lastIndex=u.lastIndex,x}if(u instanceof Map){const x=new Map;g.set(u,x);for(const[v,w]of u)x.set(v,l(w,v,f,g,p));return x}if(u instanceof Set){const x=new Set;g.set(u,x);for(const v of u)x.add(l(v,void 0,f,g,p));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const x=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,x);for(let v=0;v<u.length;v++)x[v]=l(u[v],v,f,g,p);return x}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const x=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,x),c(x,u,f,g,p),x}if(typeof File<"u"&&u instanceof File){const x=new File([u],u.name,{type:u.type});return g.set(u,x),c(x,u,f,g,p),x}if(typeof Blob<"u"&&u instanceof Blob){const x=new Blob([u],{type:u.type});return g.set(u,x),c(x,u,f,g,p),x}if(u instanceof Error){const x=new u.constructor;return g.set(u,x),x.message=u.message,x.name=u.name,x.stack=u.stack,x.cause=u.cause,c(x,u,f,g,p),x}if(u instanceof Boolean){const x=new Boolean(u.valueOf());return g.set(u,x),c(x,u,f,g,p),x}if(u instanceof Number){const x=new Number(u.valueOf());return g.set(u,x),c(x,u,f,g,p),x}if(u instanceof String){const x=new String(u.valueOf());return g.set(u,x),c(x,u,f,g,p),x}if(typeof u=="object"&&d(u)){const x=Object.create(Object.getPrototypeOf(u));return g.set(u,x),c(x,u,f,g,p),x}return u}function c(u,h,f=u,g,p){const y=[...Object.keys(h),...t.getSymbols(h)];for(let x=0;x<y.length;x++){const v=y[x],w=Object.getOwnPropertyDescriptor(u,v);(w==null||w.writable)&&(u[v]=l(h[v],v,f,g,p))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(lw);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lw;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(ZO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aw,r=ZO;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(XO);var r4={},n4={},a4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lw,r=dw;function n(a,i){return t.cloneDeepWith(a,(o,l,c,d)=>{const u=i==null?void 0:i(o,l,c,d);if(u!==void 0)return u;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(h,a),h}case r.argumentsTag:{const h={};return t.copyProperties(h,a),h.length=a.length,h[Symbol.iterator]=a[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(a4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a4;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(n4);var s4={},uw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(uw);var i4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cw;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(i4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ew,r=uw,n=i4,a=wg;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i})(s4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aw,r=bg,n=n4,a=vg,i=s4;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(d){const u=a.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(r4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nw,r=YO,n=XO,a=r4;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(QO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HO,r=nw,n=VO,a=QO;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=i})(WO);var l8=WO.uniqBy;const _N=Ss(l8);function o4(e,t,r){return t===!0?_N(e,r):typeof t=="function"?_N(e,t):e}var l4={exports:{}},c4={},d4={exports:{}},u4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=m;function c8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var d8=typeof Object.is=="function"?Object.is:c8,u8=ec.useState,h8=ec.useEffect,f8=ec.useLayoutEffect,g8=ec.useDebugValue;function m8(e,t){var r=t(),n=u8({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return f8(function(){a.value=r,a.getSnapshot=t,xp(a)&&i({inst:a})},[e,r,t]),h8(function(){return xp(a)&&i({inst:a}),e(function(){xp(a)&&i({inst:a})})},[e]),g8(r),r}function xp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!d8(e,r)}catch{return!0}}function p8(e,t){return t()}var y8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p8:m8;u4.useSyncExternalStore=ec.useSyncExternalStore!==void 0?ec.useSyncExternalStore:y8;d4.exports=u4;var x8=d4.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng=m,v8=x8;function b8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var w8=typeof Object.is=="function"?Object.is:b8,k8=v8.useSyncExternalStore,j8=Ng.useRef,N8=Ng.useEffect,S8=Ng.useMemo,_8=Ng.useDebugValue;c4.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=j8(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=S8(function(){function c(g){if(!d){if(d=!0,u=g,g=n(g),a!==void 0&&o.hasValue){var p=o.value;if(a(p,g))return h=p}return h=g}if(p=h,w8(u,g))return p;var y=n(g);return a!==void 0&&a(p,y)?(u=g,p):(u=g,h=y)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,a]);var l=k8(e,i[0],i[1]);return N8(function(){o.hasValue=!0,o.value=l},[l]),_8(l),l};l4.exports=c4;var C8=l4.exports,hw=m.createContext(null),P8=e=>e,$t=()=>{var e=m.useContext(hw);return e?e.store.dispatch:P8},sf=()=>{},E8=()=>sf,O8=(e,t)=>e===t;function Ne(e){var t=m.useContext(hw);return C8.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:E8,t?t.store.getState:sf,t?t.store.getState:sf,t?e:sf,O8)}function T8(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function A8(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function D8(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var CN=e=>Array.isArray(e)?e:[e];function R8(e){const t=Array.isArray(e[0])?e[0]:e;return D8(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function M8(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var L8=class{constructor(e){this.value=e}deref(){return this.value}},$8=typeof WeakRef<"u"?WeakRef:L8,I8=0,PN=1;function jh(){return{s:I8,v:void 0,o:null,p:null}}function h4(e,t={}){let r=jh();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var h;let l=r;const{length:c}=arguments;for(let f=0,g=c;f<g;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const x=y.get(p);x===void 0?(l=jh(),y.set(p,l)):l=x}else{let y=l.p;y===null&&(l.p=y=new Map);const x=y.get(p);x===void 0?(l=jh(),y.set(p,l)):l=x}}const d=l;let u;if(l.s===PN)u=l.v;else if(u=e.apply(null,arguments),i++,n){const f=((h=a==null?void 0:a.deref)==null?void 0:h.call(a))??a;f!=null&&n(f,u)&&(u=f,i!==0&&i--),a=typeof u=="object"&&u!==null||typeof u=="function"?new $8(u):u}return d.s=PN,d.v=u,u}return o.clearCache=()=>{r=jh(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function z8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,l,c={},d=a.pop();typeof d=="object"&&(c=d,d=a.pop()),T8(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:g=h4,argsMemoizeOptions:p=[],devModeChecks:y={}}=u,x=CN(f),v=CN(p),w=R8(a),b=h(function(){return i++,d.apply(null,arguments)},...x),k=g(function(){o++;const N=M8(w,arguments);return l=b.apply(null,N),l},...v);return Object.assign(k,{resultFunc:d,memoizedResultFunc:b,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var V=z8(h4),F8=Object.assign((e,t=V)=>{A8(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>F8}),f4={},g4={},m4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(m4);var p4={},fw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(fw);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fw,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(p4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m4,r=p4,n=wg;function a(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(g=>String(g));const d=(g,p)=>{let y=g;for(let x=0;x<p.length&&y!=null;++x)y=y[p[x]];return y},u=(g,p)=>p==null||g==null?p:typeof g=="object"&&"key"in g?Object.hasOwn(p,g.key)?p[g.key]:d(p,g.path):typeof g=="function"?g(p):Array.isArray(g)?d(p,g):typeof p=="object"?p[g]:p,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return i.map(g=>({original:g,criteria:h.map(p=>u(p,g))})).slice().sort((g,p)=>{for(let y=0;y<h.length;y++){const x=t.compareValues(g.criteria[y],p.criteria[y],l[y]);if(x!==0)return x}return 0}).map(g=>g.original)}e.orderBy=a})(g4);var y4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):a.push(u)}};return o(r,0),a}e.flatten=t})(y4);var gw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uw,r=jg,n=sw,a=ow;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=i})(gw);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g4,r=y4,n=gw;function a(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(f4);var U8=f4.sortBy;const Sg=Ss(U8);var x4=e=>e.legend.settings,B8=e=>e.legend.size,q8=e=>e.legend.payload,W8=V([q8,x4],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Sg(n,r):n});function H8(){return Ne(W8)}var Nh=1;function v4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=m.useState({height:0,left:0,top:0,width:0}),n=m.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Nh||Math.abs(o.left-t.left)>Nh||Math.abs(o.top-t.top)>Nh||Math.abs(o.width-t.width)>Nh)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function dr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var V8=typeof Symbol=="function"&&Symbol.observable||"@@observable",EN=V8,vp=()=>Math.random().toString(36).substring(7).split("").join("."),K8={INIT:`@@redux/INIT${vp()}`,REPLACE:`@@redux/REPLACE${vp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vp()}`},Qf=K8;function mw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function b4(e,t,r){if(typeof e!="function")throw new Error(dr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(dr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(dr(1));return r(b4)(e,t)}let n=e,a=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((x,v)=>{o.set(v,x)}))}function u(){if(c)throw new Error(dr(3));return a}function h(x){if(typeof x!="function")throw new Error(dr(4));if(c)throw new Error(dr(5));let v=!0;d();const w=l++;return o.set(w,x),function(){if(v){if(c)throw new Error(dr(6));v=!1,d(),o.delete(w),i=null}}}function f(x){if(!mw(x))throw new Error(dr(7));if(typeof x.type>"u")throw new Error(dr(8));if(typeof x.type!="string")throw new Error(dr(17));if(c)throw new Error(dr(9));try{c=!0,a=n(a,x)}finally{c=!1}return(i=o).forEach(w=>{w()}),x}function g(x){if(typeof x!="function")throw new Error(dr(10));n=x,f({type:Qf.REPLACE})}function p(){const x=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(dr(11));function w(){const k=v;k.next&&k.next(u())}return w(),{unsubscribe:x(w)}},[EN](){return this}}}return f({type:Qf.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:g,[EN]:p}}function G8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Qf.INIT})>"u")throw new Error(dr(12));if(typeof r(void 0,{type:Qf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dr(13))})}function w4(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{G8(r)}catch(i){a=i}return function(o={},l){if(a)throw a;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],f=r[h],g=o[h],p=f(g,l);if(typeof p>"u")throw l&&l.type,new Error(dr(14));d[h]=p,c=c||p!==g}return c=c||n.length!==Object.keys(o).length,c?d:o}}function Yf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Q8(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(dr(15))};const o={getState:a.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=Yf(...l)(a.dispatch),{...a,dispatch:i}}}function k4(e){return mw(e)&&"type"in e&&typeof e.type=="string"}var j4=Symbol.for("immer-nothing"),ON=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state");function sa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fn=Object,tc=fn.getPrototypeOf,Xf="constructor",_g="prototype",Ex="configurable",Jf="enumerable",of="writable",Kd="value",bs=e=>!!e&&!!e[Ur];function Ma(e){var t;return e?N4(e)||Cg(e)||!!e[ON]||!!((t=e[Xf])!=null&&t[ON])||Pg(e)||Eg(e):!1}var Y8=fn[_g][Xf].toString(),TN=new WeakMap;function N4(e){if(!e||!pw(e))return!1;const t=tc(e);if(t===null||t===fn[_g])return!0;const r=fn.hasOwnProperty.call(t,Xf)&&t[Xf];if(r===Object)return!0;if(!nl(r))return!1;let n=TN.get(r);return n===void 0&&(n=Function.toString.call(r),TN.set(r,n)),n===Y8}function Pu(e,t,r=!0){Eu(e)===0?(r?Reflect.ownKeys(e):fn.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Eu(e){const t=e[Ur];return t?t.type_:Cg(e)?1:Pg(e)?2:Eg(e)?3:0}var AN=(e,t,r=Eu(e))=>r===2?e.has(t):fn[_g].hasOwnProperty.call(e,t),Ox=(e,t,r=Eu(e))=>r===2?e.get(t):e[t],Zf=(e,t,r,n=Eu(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function X8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Cg=Array.isArray,Pg=e=>e instanceof Map,Eg=e=>e instanceof Set,pw=e=>typeof e=="object",nl=e=>typeof e=="function",bp=e=>typeof e=="boolean",Qa=e=>e.copy_||e.base_,yw=e=>e.modified_?e.copy_:e.base_;function Tx(e,t){if(Pg(e))return new Map(e);if(Eg(e))return new Set(e);if(Cg(e))return Array[_g].slice.call(e);const r=N4(e);if(t===!0||t==="class_only"&&!r){const n=fn.getOwnPropertyDescriptors(e);delete n[Ur];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],l=n[o];l[of]===!1&&(l[of]=!0,l[Ex]=!0),(l.get||l.set)&&(n[o]={[Ex]:!0,[of]:!0,[Jf]:l[Jf],[Kd]:e[o]})}return fn.create(tc(e),n)}else{const n=tc(e);if(n!==null&&r)return{...e};const a=fn.create(n);return fn.assign(a,e)}}function xw(e,t=!1){return Og(e)||bs(e)||(Eu(e)>1&&fn.defineProperties(e,{set:Sh,add:Sh,clear:Sh,delete:Sh}),fn.freeze(e),t&&Pu(e,(r,n)=>{xw(n,!0)},!1)),e}function J8(){sa(2)}var Sh={[Kd]:J8};function Og(e){return e===null||!pw(e)?!0:fn.isFrozen(e)}var e0="MapSet",Ax="Patches",S4={};function rc(e){const t=S4[e];return t||sa(0,e),t}var Z8=e=>!!S4[e],Gd,_4=()=>Gd,eF=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Z8(e0)?rc(e0):void 0});function DN(e,t){t&&(e.patchPlugin_=rc(Ax),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Dx(e){Rx(e),e.drafts_.forEach(tF),e.drafts_=null}function Rx(e){e===Gd&&(Gd=e.parent_)}var RN=e=>Gd=eF(Gd,e);function tF(e){const t=e[Ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function MN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Ur].modified_&&(Dx(t),sa(4)),Ma(e)&&(e=LN(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[Ur].base_,e,t)}else e=LN(t,r);return rF(t,e,!0),Dx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==j4?e:void 0}function LN(e,t){if(Og(t))return t;const r=t[Ur];if(!r)return vw(t,e.handledSet_,e);if(!Tg(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);E4(r,e)}return r.copy_}function rF(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xw(t,r)}function C4(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Tg=(e,t)=>e.scope_===t,nF=[];function P4(e,t,r,n){const a=Qa(e),i=e.type_;if(n!==void 0&&Ox(a,n,i)===t){Zf(a,n,r,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Pu(a,(c,d)=>{if(bs(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??nF;for(const l of o)Zf(a,l,r,i)}function aF(e,t,r){e.callbacks_.push(function(a){var l;const i=t;if(!i||!Tg(i,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(i);const o=yw(i);P4(e,i.draft_??i,o,r),E4(i,a)})}function E4(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=t;if(a){const i=a.getPath(e);i&&a.generatePatches_(e,i,t)}C4(e)}}function sF(e,t,r){const{scope_:n}=e;if(bs(r)){const a=r[Ur];Tg(a,n)&&a.callbacks_.push(function(){lf(e);const o=yw(a);P4(e,r,o,t)})}else Ma(r)&&e.callbacks_.push(function(){const i=Qa(e);Ox(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&vw(Ox(e.copy_,t,e.type_),n.handledSet_,n)})}function vw(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||bs(e)||t.has(e)||!Ma(e)||Og(e)||(t.add(e),Pu(e,(n,a)=>{if(bs(a)){const i=a[Ur];if(Tg(i,r)){const o=yw(i);Zf(e,n,o,e.type_),C4(i)}}else Ma(a)&&vw(a,t,r)})),e}function iF(e,t){const r=Cg(e),n={type_:r?1:0,scope_:t?t.scope_:_4(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,i=bw;r&&(a=[n],i=Qd);const{revoke:o,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=o,[l,n]}var bw={get(e,t){if(t===Ur)return e;const r=Qa(e);if(!AN(r,t,e.type_))return oF(e,r,t);const n=r[t];if(e.finalized_||!Ma(n))return n;if(n===wp(e.base_,t)){lf(e);const a=e.type_===1?+t:t,i=Lx(e.scope_,n,e,a);return e.copy_[a]=i}return n},has(e,t){return t in Qa(e)},ownKeys(e){return Reflect.ownKeys(Qa(e))},set(e,t,r){const n=O4(Qa(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=wp(Qa(e),t),i=a==null?void 0:a[Ur];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(X8(r,a)&&(r!==void 0||AN(e.base_,t,e.type_)))return!0;lf(e),Mx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),sF(e,t,r)),!0},deleteProperty(e,t){return lf(e),wp(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Mx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Qa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[of]:!0,[Ex]:e.type_!==1||t!=="length",[Jf]:n[Jf],[Kd]:r[t]}},defineProperty(){sa(11)},getPrototypeOf(e){return tc(e.base_)},setPrototypeOf(){sa(12)}},Qd={};Pu(bw,(e,t)=>{Qd[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});Qd.deleteProperty=function(e,t){return Qd.set.call(this,e,t,void 0)};Qd.set=function(e,t,r){return bw.set.call(this,e[0],t,r,e[0])};function wp(e,t){const r=e[Ur];return(r?Qa(r):e)[t]}function oF(e,t,r){var a;const n=O4(t,r);return n?Kd in n?n[Kd]:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function O4(e,t){if(!(t in e))return;let r=tc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=tc(r)}}function Mx(e){e.modified_||(e.modified_=!0,e.parent_&&Mx(e.parent_))}function lf(e){e.copy_||(e.assigned_=new Map,e.copy_=Tx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lF=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(nl(r)&&!nl(n)){const o=n;n=r;const l=this;return function(d=o,...u){return l.produce(d,h=>n.call(this,h,...u))}}nl(n)||sa(6),a!==void 0&&!nl(a)&&sa(7);let i;if(Ma(r)){const o=RN(this),l=Lx(o,r,void 0);let c=!0;try{i=n(l),c=!1}finally{c?Dx(o):Rx(o)}return DN(o,a),MN(i,o)}else if(!r||!pw(r)){if(i=n(r),i===void 0&&(i=r),i===j4&&(i=void 0),this.autoFreeze_&&xw(i,!0),a){const o=[],l=[];rc(Ax).generateReplacementPatches_(r,i,{patches_:o,inversePatches_:l}),a(o,l)}return i}else sa(1,r)},this.produceWithPatches=(r,n)=>{if(nl(r))return(l,...c)=>this.produceWithPatches(l,d=>r(d,...c));let a,i;return[this.produce(r,n,(l,c)=>{a=l,i=c}),a,i]},bp(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),bp(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),bp(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ma(t)||sa(8),bs(t)&&(t=ha(t));const r=RN(this),n=Lx(r,t,void 0);return n[Ur].isManual_=!0,Rx(r),n}finishDraft(t,r){const n=t&&t[Ur];(!n||!n.isManual_)&&sa(9);const{scope_:a}=n;return DN(a,r),MN(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));const a=rc(Ax).applyPatches_;return bs(t)?a(t,r):this.produce(t,i=>a(i,r))}};function Lx(e,t,r,n){const[a,i]=Pg(t)?rc(e0).proxyMap_(t,r):Eg(t)?rc(e0).proxySet_(t,r):iF(t,r);return((r==null?void 0:r.scope_)??_4()).drafts_.push(a),i.callbacks_=(r==null?void 0:r.callbacks_)??[],i.key_=n,r&&n!==void 0?aF(r,i,n):i.callbacks_.push(function(c){var u;(u=c.mapSetPlugin_)==null||u.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),a}function ha(e){return bs(e)||sa(10,e),T4(e)}function T4(e){if(!Ma(e)||Og(e))return e;const t=e[Ur];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Tx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Tx(e,!0);return Pu(r,(a,i)=>{Zf(r,a,T4(i))},n),t&&(t.finalized_=!1),r}var cF=new lF,A4=cF.produce;function D4(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var dF=D4(),uF=D4,hF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yf:Yf.apply(null,arguments)};function Vn(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(pn(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>k4(n)&&n.type===e,r}var R4=class ad extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ad.prototype)}static get[Symbol.species](){return ad}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ad(...t[0].concat(this)):new ad(...t.concat(this))}};function $N(e){return Ma(e)?A4(e,()=>{}):e}function _h(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function fF(e){return typeof e=="boolean"}var gF=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new R4;return r&&(fF(r)?o.push(dF):o.push(uF(r.extraArgument))),o},M4="RTK_autoBatch",Nt=()=>e=>({payload:e,meta:{[M4]:!0}}),IN=e=>t=>{setTimeout(t,e)},L4=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:IN(10):e.type==="callback"?e.queueNotification:IN(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>a&&u(),f=n.subscribe(h);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){var h;try{return a=!((h=u==null?void 0:u.meta)!=null&&h[M4]),i=!a,i&&(o||(o=!0,c(d))),n.dispatch(u)}finally{a=!0}}})},mF=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new R4(e);return n&&a.push(L4(typeof n=="object"?n:void 0)),a};function pF(e){const t=gF(),{reducer:r=void 0,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(mw(r))c=w4(r);else throw new Error(pn(1));let d;typeof n=="function"?d=n(t):d=t();let u=Yf;a&&(u=hF({trace:!1,...typeof a=="object"&&a}));const h=Q8(...d),f=mF(h);let g=typeof l=="function"?l(f):f();const p=u(...g);return b4(c,o,p)}function $4(e){const t={},r=[];let n;const a={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(pn(28));if(l in t)throw new Error(pn(29));return t[l]=o,a},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function yF(e){return typeof e=="function"}function xF(e,t){let[r,n,a]=$4(t),i;if(yF(e))i=()=>$N(e());else{const l=$N(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[a]),d.reduce((u,h)=>{if(h)if(bs(u)){const g=h(u,c);return g===void 0?u:g}else{if(Ma(u))return A4(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=i,o}var vF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bF=(e=21)=>{let t="",r=e;for(;r--;)t+=vF[Math.random()*64|0];return t},wF=Symbol.for("rtk-slice-createasyncthunk");function kF(e,t){return`${e}/${t}`}function jF({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[wF];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(pn(11));typeof process<"u";const l=(typeof a.reducers=="function"?a.reducers(SF()):a.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(k,j){const N=typeof k=="string"?k:k.type;if(!N)throw new Error(pn(12));if(N in d.sliceCaseReducersByType)throw new Error(pn(13));return d.sliceCaseReducersByType[N]=j,u},addMatcher(k,j){return d.sliceMatchers.push({matcher:k,reducer:j}),u},exposeAction(k,j){return d.actionCreators[k]=j,u},exposeCaseReducer(k,j){return d.sliceCaseReducersByName[k]=j,u}};c.forEach(k=>{const j=l[k],N={reducerName:k,type:kF(i,k),createNotation:typeof a.reducers=="function"};CF(j)?EF(N,j,u,t):_F(N,j,u)});function h(){const[k={},j=[],N=void 0]=typeof a.extraReducers=="function"?$4(a.extraReducers):[a.extraReducers],_={...k,...d.sliceCaseReducersByType};return xF(a.initialState,O=>{for(let T in _)O.addCase(T,_[T]);for(let T of d.sliceMatchers)O.addMatcher(T.matcher,T.reducer);for(let T of j)O.addMatcher(T.matcher,T.reducer);N&&O.addDefaultCase(N)})}const f=k=>k,g=new Map,p=new WeakMap;let y;function x(k,j){return y||(y=h()),y(k,j)}function v(){return y||(y=h()),y.getInitialState()}function w(k,j=!1){function N(O){let T=O[k];return typeof T>"u"&&j&&(T=_h(p,N,v)),T}function _(O=f){const T=_h(g,j,()=>new WeakMap);return _h(T,O,()=>{const P={};for(const[S,M]of Object.entries(a.selectors??{}))P[S]=NF(M,O,()=>_h(p,O,v),j);return P})}return{reducerPath:k,getSelectors:_,get selectors(){return _(N)},selectSlice:N}}const b={name:i,reducer:x,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:v,...w(o),injectInto(k,{reducerPath:j,...N}={}){const _=j??o;return k.inject({reducerPath:_,reducer:x},N),{...b,...w(_,!0)}}};return b}}function NF(e,t,r,n){function a(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var sn=jF();function SF(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function _F({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!PF(n))throw new Error(pn(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Vn(e,o):Vn(e))}function CF(e){return e._reducerDefinitionType==="asyncThunk"}function PF(e){return e._reducerDefinitionType==="reducerWithPrepare"}function EF({type:e,reducerName:t},r,n,a){if(!a)throw new Error(pn(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=a(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:o||Ch,pending:l||Ch,rejected:c||Ch,settled:d||Ch})}function Ch(){}var OF="task",I4="listener",z4="completed",ww="cancelled",TF=`task-${ww}`,AF=`task-${z4}`,$x=`${I4}-${ww}`,DF=`${I4}-${z4}`,Ag=class{constructor(e){Am(this,"name","TaskAbortError");Am(this,"message");this.code=e,this.message=`${OF} ${ww} (reason: ${e})`}},kw=(e,t)=>{if(typeof e!="function")throw new TypeError(pn(32))},t0=()=>{},F4=(e,t=t0)=>(e.catch(t),e),U4=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),fo=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},go=e=>{if(e.aborted){const{reason:t}=e;throw new Ag(t)}};function B4(e,t){let r=t0;return new Promise((n,a)=>{const i=()=>a(new Ag(e.reason));if(e.aborted){i();return}r=U4(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=t0})}var RF=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Ag?"cancelled":"rejected",error:r}}finally{t==null||t()}},r0=e=>t=>F4(B4(e,t).then(r=>(go(e),r))),q4=e=>{const t=r0(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Cl}=Object,zN={},Dg="listenerMiddleware",MF=(e,t)=>{const r=n=>U4(e,()=>fo(n,e.reason));return(n,a)=>{kw(n);const i=new AbortController;r(i);const o=RF(async()=>{go(e),go(i.signal);const l=await n({pause:r0(i.signal),delay:q4(i.signal),signal:i.signal});return go(i.signal),l},()=>fo(i,AF));return a!=null&&a.autoJoin&&t.push(o.catch(t0)),{result:r0(e)(o),cancel(){fo(i,TF)}}}},LF=(e,t)=>{const r=async(n,a)=>{go(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{u(),d()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await B4(t,Promise.race(l));return go(t),c}finally{i()}};return(n,a)=>F4(r(n,a))},W4=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Vn(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(pn(21));return kw(i),{predicate:a,type:t,effect:i}},H4=Cl(e=>{const{type:t,predicate:r,effect:n}=W4(e);return{id:bF(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(pn(22))}}},{withTypes:()=>H4}),FN=(e,t)=>{const{type:r,effect:n,predicate:a}=W4(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Ix=e=>{e.pending.forEach(t=>{fo(t,$x)})},$F=(e,t)=>()=>{for(const r of t.keys())Ix(r);e.clear()},UN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},V4=Cl(Vn(`${Dg}/add`),{withTypes:()=>V4}),IF=Vn(`${Dg}/removeAll`),K4=Cl(Vn(`${Dg}/remove`),{withTypes:()=>K4}),zF=(...e)=>{console.error(`${Dg}/error`,...e)},Ou=(e={})=>{const t=new Map,r=new Map,n=g=>{const p=r.get(g)??0;r.set(g,p+1)},a=g=>{const p=r.get(g)??1;p===1?r.delete(g):r.set(g,p-1)},{extra:i,onError:o=zF}=e;kw(o);const l=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),p=>{g.unsubscribe(),p!=null&&p.cancelActive&&Ix(g)}),c=g=>{const p=FN(t,g)??H4(g);return l(p)};Cl(c,{withTypes:()=>c});const d=g=>{const p=FN(t,g);return p&&(p.unsubscribe(),g.cancelActive&&Ix(p)),!!p};Cl(d,{withTypes:()=>d});const u=async(g,p,y,x)=>{const v=new AbortController,w=LF(c,v.signal),b=[];try{g.pending.add(v),n(g),await Promise.resolve(g.effect(p,Cl({},y,{getOriginalState:x,condition:(k,j)=>w(k,j).then(Boolean),take:w,delay:q4(v.signal),pause:r0(v.signal),extra:i,signal:v.signal,fork:MF(v.signal,b),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((k,j,N)=>{k!==v&&(fo(k,$x),N.delete(k))})},cancel:()=>{fo(v,$x),g.pending.delete(v)},throwIfCancelled:()=>{go(v.signal)}})))}catch(k){k instanceof Ag||UN(o,k,{raisedBy:"effect"})}finally{await Promise.all(b),fo(v,DF),a(g),g.pending.delete(v)}},h=$F(t,r);return{middleware:g=>p=>y=>{if(!k4(y))return p(y);if(V4.match(y))return c(y.payload);if(IF.match(y)){h();return}if(K4.match(y))return d(y.payload);let x=g.getState();const v=()=>{if(x===zN)throw new Error(pn(23));return x};let w;try{if(w=p(y),t.size>0){const b=g.getState(),k=Array.from(t.values());for(const j of k){let N=!1;try{N=j.predicate(y,b,x)}catch(_){N=!1,UN(o,_,{raisedBy:"predicate"})}N&&u(j,y,g,v)}}}finally{x=zN}return w},startListening:c,stopListening:d,clearListeners:h}};function pn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var FF={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},G4=sn({name:"chartLayout",initialState:FF,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:UF,setLayout:BF,setChartSize:qF,setScale:WF}=G4.actions,HF=G4.reducer;function Q4(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){VF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VF(e,t,r){return(t=KF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KF(e){var t=GF(e,"string");return typeof t=="symbol"?t:t+""}function GF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function or(e,t,r){return Qt(e)||Qt(t)?r:Hn(t)?kg(e,t,r):typeof t=="function"?t(e):r}var QF=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&je(e[i]))return yl(yl({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&je(e[o]))return yl(yl({},e),{},{[o]:e[o]+(a||0)})}return e},Ia=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Y4=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,i,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(i=!0),l.coordinate));return a||o.push(t),i||o.push(r),o},X4=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:f,axisType:g}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=a==="category"&&o.bandwidth?o.bandwidth()/p:0;if(y=g==="angleAxis"&&i&&i.length>=2?zn(i[0]-i[1])*2*y:y,h||f){var x=(h||f||[]).map((v,w)=>{var b=n?n.indexOf(v):v;return{coordinate:o(b)+y,value:v,offset:y,index:w}});return x.filter(v=>!kn(v.coordinate))}return c&&d?d.map((v,w)=>({coordinate:o(v)+y,value:v,index:w,offset:y})):o.ticks&&!r&&u!=null?o.ticks(u).map((v,w)=>({coordinate:o(v)+y,value:v,offset:y,index:w})):o.domain().map((v,w)=>({coordinate:o(v)+y,value:n?n[v]:v,index:w,offset:y}))},qN=1e-4,YF=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-qN,i=Math.max(n[0],n[1])+qN,o=e(t[0]),l=e(t[r-1]);(o<a||o>i||l<a||l>i)&&e.domain([t[0],t[r-1]])}},XF=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var l=kn(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},JF=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=kn(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},ZF={sign:XF,expand:Dz,none:Zl,silhouette:Rz,wiggle:Mz,positive:JF},eU=(e,t,r)=>{var n=ZF[r],a=Az().keys(t).value((i,o)=>Number(or(i,o,0))).order(Cx).offset(n);return a(e)};function tU(e){return e==null?void 0:String(e)}function n0(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qt(a[t.dataKey])){var l=FO(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=or(a,Qt(o)?t.dataKey:o);return Qt(c)?null:t.scale(c)}var rU=e=>{var t=e.flat(2).filter(je);return[Math.min(...t),Math.max(...t)]},nU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],aU=(e,t,r)=>{if(e!=null)return nU(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Q4(d,t,r),h=rU(u);return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},WN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nc=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Sg(t,u=>u.coordinate),i=1/0,o=1,l=a.length;o<l;o++){var c=a[o],d=a[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function VN(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return yl(yl({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Rg(e,t){if(e)return String(e);if(typeof t=="string")return t}var sU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},iU=(e,t)=>t==="centric"?e.angle:e.radius,Cs=e=>e.layout.width,Ps=e=>e.layout.height,oU=e=>e.layout.scale,J4=e=>e.layout.margin,Mg=V(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Lg=V(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),lU="data-recharts-item-index",cU="data-recharts-item-data-key",Tu=60;function KN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(r),!0).forEach(function(n){dU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dU(e,t,r){return(t=uU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uU(e){var t=hU(e,"string");return typeof t=="symbol"?t:t+""}function hU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fU=e=>e.brush.height;function gU(e){var t=Lg(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Tu;return r+a}return r},0)}function mU(e){var t=Lg(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Tu;return r+a}return r},0)}function pU(e){var t=Mg(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function yU(e){var t=Mg(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var vr=V([Cs,Ps,J4,fU,gU,mU,pU,yU,x4,B8],(e,t,r,n,a,i,o,l,c,d)=>{var u={left:(r.left||0)+a,right:(r.right||0)+i},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},f=Ph(Ph({},h),u),g=f.bottom;f.bottom+=n,f=QF(f,c,d);var p=e-f.left-f.right,y=t-f.top-f.bottom;return Ph(Ph({brushBottom:g},f),{},{width:Math.max(p,0),height:Math.max(y,0)})}),xU=V(vr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Z4=V(Cs,Ps,(e,t)=>({x:0,y:0,width:e,height:t})),vU=m.createContext(null),br=()=>m.useContext(vU)!=null,$g=e=>e.brush,Ig=V([$g,vr,J4],(e,t,r)=>({height:e.height,x:je(e.x)?e.x:t.left,y:je(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:je(e.width)?e.width:t.width})),eT={},tT={},rT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{d&&u(),y()};let f=null;const g=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},p=()=>{f!==null&&(clearTimeout(f),f=null)},y=()=>{p(),o=void 0,l=null},x=()=>{u()},v=function(...w){if(a!=null&&a.aborted)return;o=this,l=w;const b=f==null;g(),c&&b&&u()};return v.schedule=g,v.cancel=y,v.flush=x,a==null||a.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(rT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT;function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,h=null;const f=t.debounce(function(...y){u=n.apply(this,y),h=null},a,{edges:d}),g=function(...y){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(u=n.apply(this,y),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,y),u)},p=()=>(f.flush(),u);return g.cancel=f.cancel,g.flush=p,g}e.debounce=r})(tT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tT;function r(n,a=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(eT);var bU=eT.throttle;const wU=Ss(bU);var a0=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},nT=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:o}=r,l=vs(n)?e:Number(n),c=vs(a)?t:Number(a);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},kU={width:0,height:0,overflow:"visible"},jU={width:0,overflowX:"visible"},NU={height:0,overflowY:"visible"},SU={},_U=e=>{var{width:t,height:r}=e,n=vs(t),a=vs(r);return n&&a?kU:n?jU:a?NU:SU};function CU(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function xt(e){return Number.isFinite(e)}function La(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zx.apply(null,arguments)}function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aT=m.createContext({width:-1,height:-1});function TU(e){return La(e.width)&&La(e.height)}function sT(e){var{children:t,width:r,height:n}=e,a=m.useMemo(()=>({width:r,height:n}),[r,n]);return TU(a)?m.createElement(aT.Provider,{value:a},t):null}var jw=()=>m.useContext(aT),AU=m.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:g,style:p={}}=e,y=m.useRef(null),x=m.useRef();x.current=g,m.useImperativeHandle(t,()=>y.current);var[v,w]=m.useState({containerWidth:n.width,containerHeight:n.height}),b=m.useCallback((O,T)=>{w(P=>{var S=Math.round(O),M=Math.round(T);return P.containerWidth===S&&P.containerHeight===M?P:{containerWidth:S,containerHeight:M}})},[]);m.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return Cu;var O=M=>{var F,{width:q,height:z}=M[0].contentRect;b(q,z),(F=x.current)===null||F===void 0||F.call(x,q,z)};u>0&&(O=wU(O,u,{trailing:!0,leading:!1}));var T=new ResizeObserver(O),{width:P,height:S}=y.current.getBoundingClientRect();return b(P,S),T.observe(y.current),()=>{T.disconnect()}},[b,u]);var{containerWidth:k,containerHeight:j}=v;a0(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:_}=nT(k,j,{width:a,height:i,aspect:r,maxHeight:c});return a0(N!=null&&N>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,_,a,i,o,l,r),m.createElement("div",{id:h?"".concat(h):void 0,className:et("recharts-responsive-container",f),style:QN(QN({},p),{},{width:a,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:y},m.createElement("div",{style:_U({width:a,height:i})},m.createElement(sT,{width:N,height:_},d)))}),Nw=m.forwardRef((e,t)=>{var r=jw();if(La(r.width)&&La(r.height))return e.children;var{width:n,height:a}=CU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=nT(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return je(i)&&je(o)?m.createElement(sT,{width:i,height:o},e.children):m.createElement(AU,zx({},e,{width:n,height:a,ref:t}))});function iT(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Au=()=>{var e,t=br(),r=Ne(xU),n=Ne(Ig),a=(e=Ne($g))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},DU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},oT=()=>{var e;return(e=Ne(vr))!==null&&e!==void 0?e:DU},Sw=()=>Ne(Cs),_w=()=>Ne(Ps),RU=()=>Ne(e=>e.layout.margin),ut=e=>e.layout.layoutType,wc=()=>Ne(ut),MU=()=>{var e=wc();if(e==="horizontal"||e==="vertical")return e},LU=()=>{var e=wc();return e!==void 0},zg=e=>{var t=$t(),r=br(),{width:n,height:a}=e,i=jw(),o=n,l=a;return i&&(o=i.width>0?i.width:n,l=i.height>0?i.height:a),m.useEffect(()=>{!r&&La(o)&&La(l)&&t(qF({width:o,height:l}))},[t,r,o,l]),null},lT=Symbol.for("immer-nothing"),YN=Symbol.for("immer-draftable"),jn=Symbol.for("immer-state");function ia(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yd=Object.getPrototypeOf;function ac(e){return!!e&&!!e[jn]}function _o(e){var t;return e?cT(e)||Array.isArray(e)||!!e[YN]||!!((t=e.constructor)!=null&&t[YN])||Du(e)||Ug(e):!1}var $U=Object.prototype.constructor.toString(),XN=new WeakMap;function cT(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=XN.get(r);return n===void 0&&(n=Function.toString.call(r),XN.set(r,n)),n===$U}function s0(e,t,r=!0){Fg(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Fg(e){const t=e[jn];return t?t.type_:Array.isArray(e)?1:Du(e)?2:Ug(e)?3:0}function Fx(e,t){return Fg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dT(e,t,r){const n=Fg(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function IU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Du(e){return e instanceof Map}function Ug(e){return e instanceof Set}function Bi(e){return e.copy_||e.base_}function Ux(e,t){if(Du(e))return new Map(e);if(Ug(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cT(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[jn];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Yd(e),n)}else{const n=Yd(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function Cw(e,t=!1){return Bg(e)||ac(e)||!_o(e)||(Fg(e)>1&&Object.defineProperties(e,{set:Eh,add:Eh,clear:Eh,delete:Eh}),Object.freeze(e),t&&Object.values(e).forEach(r=>Cw(r,!0))),e}function zU(){ia(2)}var Eh={value:zU};function Bg(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var FU={};function Co(e){const t=FU[e];return t||ia(0,e),t}var Xd;function uT(){return Xd}function UU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function JN(e,t){t&&(Co("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Bx(e){qx(e),e.drafts_.forEach(BU),e.drafts_=null}function qx(e){e===Xd&&(Xd=e.parent_)}function ZN(e){return Xd=UU(Xd,e)}function BU(e){const t=e[jn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function eS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[jn].modified_&&(Bx(t),ia(4)),_o(e)&&(e=i0(t,e),t.parent_||o0(t,e)),t.patches_&&Co("Patches").generateReplacementPatches_(r[jn].base_,e,t.patches_,t.inversePatches_)):e=i0(t,r,[]),Bx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lT?e:void 0}function i0(e,t,r){if(Bg(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[jn];if(!a)return s0(t,(i,o)=>tS(e,a,t,i,o,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return o0(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let o=i,l=!1;a.type_===3&&(o=new Set(i),i.clear(),l=!0),s0(o,(c,d)=>tS(e,a,i,c,d,r,l),n),o0(e,i,!1),r&&e.patches_&&Co("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function tS(e,t,r,n,a,i,o){if(a==null||typeof a!="object"&&!o)return;const l=Bg(a);if(!(l&&!o)){if(ac(a)){const c=i&&t&&t.type_!==3&&!Fx(t.assigned_,n)?i.concat(n):void 0,d=i0(e,a,c);if(dT(r,n,d),ac(d))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(_o(a)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&l)return;i0(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Du(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&o0(e,a)}}}function o0(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Cw(t,r)}function qU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:uT(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Pw;r&&(a=[n],i=Jd);const{revoke:o,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=o,l}var Pw={get(e,t){if(t===jn)return e;const r=Bi(e);if(!Fx(r,t))return WU(e,r,t);const n=r[t];return e.finalized_||!_o(n)?n:n===kp(e.base_,t)?(jp(e),e.copy_[t]=Hx(n,e)):n},has(e,t){return t in Bi(e)},ownKeys(e){return Reflect.ownKeys(Bi(e))},set(e,t,r){const n=hT(Bi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=kp(Bi(e),t),i=a==null?void 0:a[jn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(IU(r,a)&&(r!==void 0||Fx(e.base_,t)))return!0;jp(e),Wx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return kp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,jp(e),Wx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Bi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ia(11)},getPrototypeOf(e){return Yd(e.base_)},setPrototypeOf(){ia(12)}},Jd={};s0(Pw,(e,t)=>{Jd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jd.deleteProperty=function(e,t){return Jd.set.call(this,e,t,void 0)};Jd.set=function(e,t,r){return Pw.set.call(this,e[0],t,r,e[0])};function kp(e,t){const r=e[jn];return(r?Bi(r):e)[t]}function WU(e,t,r){var a;const n=hT(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function hT(e,t){if(!(t in e))return;let r=Yd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Yd(r)}}function Wx(e){e.modified_||(e.modified_=!0,e.parent_&&Wx(e.parent_))}function jp(e){e.copy_||(e.copy_=Ux(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var HU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&ia(6),n!==void 0&&typeof n!="function"&&ia(7);let a;if(_o(t)){const i=ZN(this),o=Hx(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?Bx(i):qx(i)}return JN(i,n),eS(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===lT&&(a=void 0),this.autoFreeze_&&Cw(a,!0),n){const i=[],o=[];Co("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else ia(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_o(e)||ia(8),ac(e)&&(e=VU(e));const t=ZN(this),r=Hx(e,void 0);return r[jn].isManual_=!0,qx(t),r}finishDraft(e,t){const r=e&&e[jn];(!r||!r.isManual_)&&ia(9);const{scope_:n}=r;return JN(n,t),eS(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Co("Patches").applyPatches_;return ac(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Hx(e,t){const r=Du(e)?Co("MapSet").proxyMap_(e,t):Ug(e)?Co("MapSet").proxySet_(e,t):qU(e,t);return(t?t.scope_:uT()).drafts_.push(r),r}function VU(e){return ac(e)||ia(10,e),fT(e)}function fT(e){if(!_o(e)||Bg(e))return e;const t=e[jn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ux(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ux(e,!0);return s0(r,(a,i)=>{dT(r,a,fT(i))},n),t&&(t.finalized_=!1),r}var KU=new HU;KU.produce;var GU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gT=sn({name:"legend",initialState:GU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ha(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Nt()},removeLegendPayload:{reducer(e,t){var r=ha(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Nt()}}}),{setLegendSize:rS,setLegendSettings:QU,addLegendPayload:YU,replaceLegendPayload:XU,removeLegendPayload:JU}=gT.actions,ZU=gT.reducer,eB=["contextPayload"];function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vx.apply(null,arguments)}function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(n){tB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tB(e,t,r){return(t=rB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rB(e){var t=nB(e,"string");return typeof t=="symbol"?t:t+""}function nB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aB(e,t){if(e==null)return{};var r,n,a=sB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iB(e){return e.value}function oB(e){var{contextPayload:t}=e,r=aB(e,eB),n=o4(t,e.payloadUniqBy,iB),a=sc(sc({},r),{},{payload:n});return m.isValidElement(e.content)?m.cloneElement(e.content,a):typeof e.content=="function"?m.createElement(e.content,a):m.createElement(o8,a)}function lB(e,t,r,n,a,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((n||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((a||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),sc(sc({},d),u)}function cB(e){var t=$t();return m.useEffect(()=>{t(QU(e))},[t,e]),null}function dB(e){var t=$t();return m.useEffect(()=>(t(rS(e)),()=>{t(rS({width:0,height:0}))}),[t,e]),null}function uB(e,t,r,n){return e==="vertical"&&je(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var hB={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function qg(e){var t=Yt(e,hB),r=H8(),n=rz(),a=RU(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,u]=v4([r]),h=Sw(),f=_w();if(h==null||f==null)return null;var g=h-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),p=uB(t.layout,o,i,g),y=c?l:sc(sc({position:"absolute",width:(p==null?void 0:p.width)||i||"auto",height:(p==null?void 0:p.height)||o||"auto"},lB(l,t,a,h,f,d)),l),x=c??n;if(x==null||r==null)return null;var v=m.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:u},m.createElement(cB,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&m.createElement(dB,{width:d.width,height:d.height}),m.createElement(oB,Vx({},t,p,{margin:a,chartWidth:h,chartHeight:f,contextPayload:r})));return Do.createPortal(v,x)}qg.displayName="Legend";function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kx.apply(null,arguments)}function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Np(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){fB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fB(e,t,r){return(t=gB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gB(e){var t=mB(e,"string");return typeof t=="symbol"?t:t+""}function mB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pB(e){return Array.isArray(e)&&Hn(e[0])&&Hn(e[1])?e.join(" ~ "):e}var yB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,g=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?Sg(i,l):i).map((_,O)=>{if(_.type==="none")return null;var T=_.formatter||o||pB,{value:P,name:S}=_,M=P,F=S;if(T){var q=T(P,S,_,O,i);if(Array.isArray(q))[M,F]=q;else if(q!=null)M=q;else return null}var z=Np({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return m.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:z},Hn(F)?m.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Hn(F)?m.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,m.createElement("span",{className:"recharts-tooltip-item-value"},M),m.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return m.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},p=Np({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=Np({margin:0},a),x=!Qt(u),v=x?u:"",w=et("recharts-default-tooltip",c),b=et("recharts-tooltip-label",d);x&&h&&i!==void 0&&i!==null&&(v=h(u,i));var k=f?{role:"status","aria-live":"assertive"}:{};return m.createElement("div",Kx({className:w,style:p},k),m.createElement("p",{className:b,style:y},m.isValidElement(v)?v:"".concat(v)),g())},Bc="recharts-tooltip-wrapper",xB={visibility:"hidden"};function vB(e){var{coordinate:t,translateX:r,translateY:n}=e;return et(Bc,{["".concat(Bc,"-right")]:je(r)&&t&&je(t.x)&&r>=t.x,["".concat(Bc,"-left")]:je(r)&&t&&je(t.x)&&r<t.x,["".concat(Bc,"-bottom")]:je(n)&&t&&je(t.y)&&n>=t.y,["".concat(Bc,"-top")]:je(n)&&t&&je(t.y)&&n<t.y})}function sS(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&je(i[n]))return i[n];var u=r[n]-l-(a>0?a:0),h=r[n]+a;if(t[n])return o[n]?u:h;var f=c[n];if(f==null)return 0;if(o[n]){var g=u,p=f;return g<p?Math.max(h,f):Math.max(u,f)}if(d==null)return 0;var y=h+l,x=f+d;return y>x?Math.max(u,f):Math.max(h,f)}function bB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=sS({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=sS({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=bB({translateX:u,translateY:h,useTranslate3d:l})):d=xB,{cssProperties:d,cssClasses:vB({translateX:u,translateY:h,coordinate:r})}}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){Gx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gx(e,t,r){return(t=kB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kB(e){var t=jB(e,"string");return typeof t=="symbol"?t:t+""}function jB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class NB extends m.PureComponent{constructor(){super(...arguments),Gx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Gx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:f,viewBox:g,wrapperStyle:p,lastBoundingBox:y,innerRef:x,hasPortalFromProps:v}=this.props,{cssClasses:w,cssProperties:b}=wB({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:y.height,width:y.width},useTranslate3d:f,viewBox:g}),k=v?{}:Oh(Oh({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=Oh(Oh({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:x},i)}}var SB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Lo={devToolsEnabled:!1,isSsr:SB()},mT=()=>{var e;return(e=Ne(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qx.apply(null,arguments)}function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){_B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _B(e,t,r){return(t=CB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CB(e){var t=PB(e,"string");return typeof t=="symbol"?t:t+""}function PB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cS={curveBasisClosed:wz,curveBasisOpen:kz,curveBasis:bz,curveBumpX:iz,curveBumpY:oz,curveLinearClosed:jz,curveLinear:yg,curveMonotoneX:Nz,curveMonotoneY:Sz,curveNatural:_z,curveStep:Cz,curveStepAfter:Ez,curveStepBefore:Pz},l0=e=>xt(e.x)&&xt(e.y),dS=e=>e.base!=null&&l0(e.base)&&l0(e),qc=e=>e.x,Wc=e=>e.y,EB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(_u(e));return(r==="curveMonotone"||r==="curveBump")&&t?cS["".concat(r).concat(t==="vertical"?"Y":"X")]:cS[r]||yg},OB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=EB(t,a),l=i?r.filter(l0):r,c;if(Array.isArray(n)){var d=r.map((g,p)=>lS(lS({},g),{},{base:n[p]}));a==="vertical"?c=kh().y(Wc).x1(qc).x0(g=>g.base.x):c=kh().x(qc).y1(Wc).y0(g=>g.base.y);var u=c.defined(dS).curve(o),h=i?d.filter(dS):d;return u(h)}a==="vertical"&&je(n)?c=kh().y(Wc).x1(qc).x0(n):je(n)?c=kh().x(qc).y1(Wc).y0(n):c=_O().x(qc).y(Wc);var f=c.defined(l0).curve(o);return f(l)},jd=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?OB(e):n;return m.createElement("path",Qx({},Wn(e),rw(e),{className:et("recharts-curve",t),d:i===null?void 0:i,ref:a}))},TB=["x","y","top","left","width","height","className"];function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yx.apply(null,arguments)}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){DB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DB(e,t,r){return(t=RB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LB(e,t){if(e==null)return{};var r,n,a=$B(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $B(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IB=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),zB=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:l}=e,c=LB(e,TB),d=AB({x:t,y:r,top:n,left:a,width:i,height:o},c);return!je(t)||!je(r)||!je(i)||!je(o)||!je(n)||!je(a)?null:m.createElement("path",Yx({},yr(d),{className:et("recharts-cross",l),d:IB(t,r,i,o,n,a)}))};function FB(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){UB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UB(e,t,r){return(t=BB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BB(e){var t=qB(e,"string");return typeof t=="symbol"?t:t+""}function qB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),pT=(e,t,r)=>e.map(n=>"".concat(WB(n)," ").concat(t,"ms ").concat(r)).join(","),HB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Zd=(e,t)=>Object.keys(t).reduce((r,n)=>fS(fS({},r),{},{[n]:e(n,t[n])}),{});function gS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(r),!0).forEach(function(n){VB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VB(e,t,r){return(t=KB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=GB(e,"string");return typeof t=="symbol"?t:t+""}function GB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c0=(e,t,r)=>e+(t-e)*r,Xx=e=>{var{from:t,to:r}=e;return t!==r},yT=(e,t,r)=>{var n=Zd((a,i)=>{if(Xx(i)){var[o,l]=e(i.from,i.to,i.velocity);return Vt(Vt({},i),{},{from:o,velocity:l})}return i},t);return r<1?Zd((a,i)=>Xx(i)?Vt(Vt({},i),{},{velocity:c0(i.velocity,n[a].velocity,r),from:c0(i.from,n[a].from,r)}):i,t):yT(e,n,r-1)};function QB(e,t,r,n,a,i){var o,l=n.reduce((f,g)=>Vt(Vt({},f),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>Zd((f,g)=>g.from,l),d=()=>!Object.values(l).filter(Xx).length,u=null,h=f=>{o||(o=f);var g=f-o,p=g/r.dt;l=yT(r,l,p),a(Vt(Vt(Vt({},e),t),c())),o=f,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{var f;(f=u)===null||f===void 0||f()})}function YB(e,t,r,n,a,i,o){var l=null,c=a.reduce((h,f)=>Vt(Vt({},h),{},{[f]:[e[f],t[f]]}),{}),d,u=h=>{d||(d=h);var f=(h-d)/n,g=Zd((y,x)=>c0(...x,r(f)),c);if(i(Vt(Vt(Vt({},e),t),g)),f<1)l=o.setTimeout(u);else{var p=Zd((y,x)=>c0(...x,r(1)),c);i(Vt(Vt(Vt({},e),t),p))}};return()=>(l=o.setTimeout(u),()=>{var h;(h=l)===null||h===void 0||h()})}const XB=(e,t,r,n,a,i)=>{var o=HB(e,t);return r==null?()=>(a(Vt(Vt({},e),t)),()=>{}):r.isStepper===!0?QB(e,t,r,o,a,i):YB(e,t,r,n,o,a,i)};var d0=1e-4,xT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],vT=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),mS=(e,t)=>r=>{var n=xT(e,t);return vT(n,r)},JB=(e,t)=>r=>{var n=xT(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return vT(a,r)},ZB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((a=i[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var o=i[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return r.length===4?r:[0,0,1,1]},eq=(e,t,r,n)=>{var a=mS(e,r),i=mS(t,n),o=JB(e,r),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,h=u,f=0;f<8;++f){var g=a(h)-u,p=o(h);if(Math.abs(g-u)<d0||p<d0)return i(h);h=l(h-g/p)}return i(h)};return c.isStepper=!1,c},pS=function(){return eq(...ZB(...arguments))},tq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*n,h=c+(d-u)*a/1e3,f=c*a/1e3+o;return Math.abs(f-l)<d0&&Math.abs(h)<d0?[l,0]:[f,h]};return i.isStepper=!0,i.dt=a,i},rq=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pS(e);case"spring":return tq();default:if(e.split("(")[0]==="cubic-bezier")return pS(e)}return typeof e=="function"?e:null};function nq(e){var t,r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){a=e.setTimeout(i.bind(null,d),c);return}i(c),a=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class aq{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function sq(){return nq(new aq)}var iq=m.createContext(sq);function oq(e,t){var r=m.useContext(iq);return m.useMemo(()=>t??r(e),[e,t,r])}var lq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yS={t:0},Sp={t:1};function Wg(e){var t=Yt(e,lq),{isActive:r,canBegin:n,duration:a,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=r==="auto"?!Lo.isSsr:r,h=oq(t.animationId,t.animationManager),[f,g]=m.useState(u?yS:Sp),p=m.useRef(null);return m.useEffect(()=>{u||g(Sp)},[u]),m.useEffect(()=>{if(!u||!n)return Cu;var y=XB(yS,Sp,rq(i),a,g,h.getTimeoutController()),x=()=>{p.current=y()};return h.start([c,o,x,a,l]),()=>{h.stop(),p.current&&p.current(),l()}},[u,n,a,i,o,c,l,h]),d(f.t)}function Hg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=m.useRef(Vd(t)),n=m.useRef(e);return n.current!==e&&(r.current=Vd(t),n.current=e),r.current}var cq=["radius"],dq=["radius"];function xS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xS(Object(r),!0).forEach(function(n){uq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uq(e,t,r){return(t=hq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hq(e){var t=fq(e,"string");return typeof t=="symbol"?t:t+""}function fq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(null,arguments)}function bS(e,t){if(e==null)return{};var r,n,a=gq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wS=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(i>0&&a instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=a[h]>i?i:a[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),d+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*u[3])),d+="Z"}else if(i>0&&a===+a&&a>0){var g=Math.min(i,a);d="M ".concat(e,",").concat(t+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+l*g,",").concat(t,`
            L `).concat(e+r-l*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*g,`
            L `).concat(e+r,",").concat(t+n-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-l*g,",").concat(t+n,`
            L `).concat(e+l*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*g," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},kS={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bT=e=>{var t=Yt(e,kS),r=m.useRef(null),[n,a]=m.useState(-1);m.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var W=r.current.getTotalLength();W&&a(W)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:g,isAnimationActive:p,isUpdateAnimationActive:y}=t,x=m.useRef(l),v=m.useRef(c),w=m.useRef(i),b=m.useRef(o),k=m.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),j=Hg(k,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var N=et("recharts-rectangle",u);if(!y){var _=yr(t),O=bS(_,cq);return m.createElement("path",u0({},O,{radius:typeof d=="number"?d:void 0,className:N,d:wS(i,o,l,c,d)}))}var T=x.current,P=v.current,S=w.current,M=b.current,F="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),z=pT(["strokeDasharray"],f,typeof h=="string"?h:kS.animationEasing);return m.createElement(Wg,{animationId:j,key:j,canBegin:n>0,duration:f,easing:h,isActive:y,begin:g},W=>{var $=zt(T,l,W),E=zt(P,c,W),U=zt(S,i,W),I=zt(M,o,W);r.current&&(x.current=$,v.current=E,w.current=U,b.current=I);var X;p?W>0?X={transition:z,strokeDasharray:q}:X={strokeDasharray:F}:X={strokeDasharray:q};var Z=yr(t),te=bS(Z,dq);return m.createElement("path",u0({},te,{radius:typeof d=="number"?d:void 0,className:N,d:wS(U,I,$,E,d),ref:r,style:vS(vS({},X),t.style)}))})};function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(r),!0).forEach(function(n){mq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mq(e,t,r){return(t=pq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pq(e){var t=yq(e,"string");return typeof t=="symbol"?t:t+""}function yq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h0=Math.PI/180,xq=e=>e*180/Math.PI,gr=(e,t,r,n)=>({x:e+Math.cos(-h0*n)*r,y:t+Math.sin(-h0*n)*r}),vq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},bq=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},wq=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=bq({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:xq(c),angleInRadian:c}},kq=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},jq=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},Nq=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=wq({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:d}=kq(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?NS(NS({},t),{},{radius:a,angle:jq(u,t)}):null};function wT(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=gr(t,r,n,a),l=gr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jx.apply(null,arguments)}var Sq=(e,t)=>{var r=zn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Th=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+n,u=Math.asin(l/d)/h0,h=c?a:a+i*u,f=gr(t,r,d,h),g=gr(t,r,n,h),p=c?a-i*u:a,y=gr(t,r,d*Math.cos(u*h0),p);return{center:f,circleTangency:g,lineTangency:y,theta:u}},kT=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,l=Sq(i,o),c=i+l,d=gr(t,r,a,i),u=gr(t,r,a,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=gr(t,r,n,i),g=gr(t,r,n,c);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},_q=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=zn(d-c),{circleTangency:h,lineTangency:f,theta:g}=Th({cx:t,cy:r,radius:a,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:y,theta:x}=Th({cx:t,cy:r,radius:a,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-d):Math.abs(c-d)-g-x;if(v<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):kT({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:d});var w="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(v>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:k,theta:j}=Th({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:_,theta:O}=Th({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),T=l?Math.abs(c-d):Math.abs(c-d)-j-O;if(T<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},Cq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jT=e=>{var t=Yt(e,Cq),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<a||d===u)return null;var f=et("recharts-sector",h),g=i-a,p=ki(o,g,0,!0),y;return p>0&&Math.abs(d-u)<360?y=_q({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(p,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):y=kT({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u}),m.createElement("path",Jx({},yr(t),{className:f,d:y}))};function Pq(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(BO(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:i,outerRadius:o,angle:l}=t,c=gr(n,a,i,l),d=gr(n,a,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return wT(t)}}var NT={},ST={},_T={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fw;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(_T);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_T;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(ST);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gw,r=ST;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-a)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=a,a+=o;return c}e.range=n})(NT);var Eq=NT.range;const CT=Ss(Eq);function yi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Oq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ew(e){let t,r,n;e.length!==2?(t=yi,r=(l,c)=>yi(e(l),c),n=(l,c)=>e(l)-c):(t=e===yi||e===Oq?e:Tq,r=e,n=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=a(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function Tq(){return 0}function PT(e){return e===null?NaN:+e}function*Aq(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Dq=Ew(yi),Ru=Dq.right;Ew(PT).center;class SS extends Map{constructor(t,r=Lq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(_S(this,t))}has(t){return super.has(_S(this,t))}set(t,r){return super.set(Rq(this,t),r)}delete(t){return super.delete(Mq(this,t))}}function _S({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Rq({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Mq({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Lq(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $q(e=yi){if(e===yi)return ET;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ET(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Iq=Math.sqrt(50),zq=Math.sqrt(10),Fq=Math.sqrt(2);function f0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Iq?10:i>=zq?5:i>=Fq?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?f0(e,t,r*2):[l,c,d]}function Zx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?f0(t,e,r):f0(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function ev(e,t,r){return t=+t,e=+e,r=+r,f0(e,t,r)[2]}function tv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?ev(t,e,r):ev(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function CS(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function PS(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function OT(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ET:$q(a);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),g=Math.max(r,Math.floor(t-d*h/c+f)),p=Math.min(n,Math.floor(t+(c-d)*h/c+f));OT(e,t,g,p,a)}const i=e[t];let o=r,l=n;for(Hc(e,r,t),a(e[n],i)>0&&Hc(e,r,n);o<l;){for(Hc(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Hc(e,r,l):(++l,Hc(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Hc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Uq(e,t,r){if(e=Float64Array.from(Aq(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return PS(e);if(t>=1)return CS(e);var n,a=(n-1)*t,i=Math.floor(a),o=CS(OT(e,i).subarray(0,i+1)),l=PS(e.subarray(i+1));return o+(l-o)*(a-i)}}function Bq(e,t,r=PT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function qq(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Gn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Es(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rv=Symbol("implicit");function Ow(){var e=new SS,t=[],r=[],n=rv;function a(i){let o=e.get(i);if(o===void 0){if(n!==rv)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new SS;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Ow(t,r).unknown(n)},Gn.apply(a,arguments),a}function Tw(){var e=Ow().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,g=a<n,p=g?a:n,y=g?n:a;i=(y-p)/Math.max(1,f-c+d*2),l&&(i=Math.floor(i)),p+=(y-p-i*(f-c))*u,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var x=qq(f).map(function(v){return p+i*v});return r(g?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,a]=f,n=+n,a=+a,h()):[n,a]},e.rangeRound=function(f){return[n,a]=f,n=+n,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return Tw(t(),[n,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Gn.apply(h(),arguments)}function TT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return TT(t())},e}function Wq(){return TT(Tw.apply(null,arguments).paddingInner(1))}function Aw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function AT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Mu(){}var eu=.7,g0=1/eu,Pl="\\s*([+-]?\\d+)\\s*",tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hq=/^#([0-9a-f]{3,8})$/,Vq=new RegExp(`^rgb\\(${Pl},${Pl},${Pl}\\)$`),Kq=new RegExp(`^rgb\\(${Ra},${Ra},${Ra}\\)$`),Gq=new RegExp(`^rgba\\(${Pl},${Pl},${Pl},${tu}\\)$`),Qq=new RegExp(`^rgba\\(${Ra},${Ra},${Ra},${tu}\\)$`),Yq=new RegExp(`^hsl\\(${tu},${Ra},${Ra}\\)$`),Xq=new RegExp(`^hsla\\(${tu},${Ra},${Ra},${tu}\\)$`),ES={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Aw(Mu,ru,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:OS,formatHex:OS,formatHex8:Jq,formatHsl:Zq,formatRgb:TS,toString:TS});function OS(){return this.rgb().formatHex()}function Jq(){return this.rgb().formatHex8()}function Zq(){return DT(this).formatHsl()}function TS(){return this.rgb().formatRgb()}function ru(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Hq.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?AS(t):r===3?new Zr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ah(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ah(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vq.exec(e))?new Zr(t[1],t[2],t[3],1):(t=Kq.exec(e))?new Zr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gq.exec(e))?Ah(t[1],t[2],t[3],t[4]):(t=Qq.exec(e))?Ah(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yq.exec(e))?MS(t[1],t[2]/100,t[3]/100,1):(t=Xq.exec(e))?MS(t[1],t[2]/100,t[3]/100,t[4]):ES.hasOwnProperty(e)?AS(ES[e]):e==="transparent"?new Zr(NaN,NaN,NaN,0):null}function AS(e){return new Zr(e>>16&255,e>>8&255,e&255,1)}function Ah(e,t,r,n){return n<=0&&(e=t=r=NaN),new Zr(e,t,r,n)}function eW(e){return e instanceof Mu||(e=ru(e)),e?(e=e.rgb(),new Zr(e.r,e.g,e.b,e.opacity)):new Zr}function nv(e,t,r,n){return arguments.length===1?eW(e):new Zr(e,t,r,n??1)}function Zr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Aw(Zr,nv,AT(Mu,{brighter(e){return e=e==null?g0:Math.pow(g0,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eu:Math.pow(eu,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zr(mo(this.r),mo(this.g),mo(this.b),m0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DS,formatHex:DS,formatHex8:tW,formatRgb:RS,toString:RS}));function DS(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}`}function tW(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}${Qi((isNaN(this.opacity)?1:this.opacity)*255)}`}function RS(){const e=m0(this.opacity);return`${e===1?"rgb(":"rgba("}${mo(this.r)}, ${mo(this.g)}, ${mo(this.b)}${e===1?")":`, ${e})`}`}function m0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qi(e){return e=mo(e),(e<16?"0":"")+e.toString(16)}function MS(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new oa(e,t,r,n)}function DT(e){if(e instanceof oa)return new oa(e.h,e.s,e.l,e.opacity);if(e instanceof Mu||(e=ru(e)),!e)return new oa;if(e instanceof oa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new oa(o,l,c,e.opacity)}function rW(e,t,r,n){return arguments.length===1?DT(e):new oa(e,t,r,n??1)}function oa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Aw(oa,rW,AT(Mu,{brighter(e){return e=e==null?g0:Math.pow(g0,e),new oa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eu:Math.pow(eu,e),new oa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Zr(_p(e>=240?e-240:e+120,a,n),_p(e,a,n),_p(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new oa(LS(this.h),Dh(this.s),Dh(this.l),m0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=m0(this.opacity);return`${e===1?"hsl(":"hsla("}${LS(this.h)}, ${Dh(this.s)*100}%, ${Dh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function LS(e){return e=(e||0)%360,e<0?e+360:e}function Dh(e){return Math.max(0,Math.min(1,e||0))}function _p(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Dw=e=>()=>e;function nW(e,t){return function(r){return e+r*t}}function aW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function sW(e){return(e=+e)==1?RT:function(t,r){return r-t?aW(t,r,e):Dw(isNaN(t)?r:t)}}function RT(e,t){var r=t-e;return r?nW(e,r):Dw(isNaN(e)?t:e)}const $S=function e(t){var r=sW(t);function n(a,i){var o=r((a=nv(a)).r,(i=nv(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=RT(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=e,n}(1);function iW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function oW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=kc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function cW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function p0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function dW(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=kc(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var av=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cp=new RegExp(av.source,"g");function uW(e){return function(){return e}}function hW(e){return function(t){return e(t)+""}}function fW(e,t){var r=av.lastIndex=Cp.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=av.exec(e))&&(a=Cp.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:p0(n,a)})),r=Cp.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?hW(c[0].x):uW(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function kc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Dw(t):(r==="number"?p0:r==="string"?(n=ru(t))?(t=n,$S):fW:t instanceof ru?$S:t instanceof Date?cW:oW(t)?iW:Array.isArray(t)?lW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dW:p0)(e,t)}function Rw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function gW(e,t){t===void 0&&(t=e,e=kc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function mW(e){return function(){return e}}function y0(e){return+e}var IS=[0,1];function Ir(e){return e}function sv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:mW(isNaN(t)?NaN:.5)}function pW(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function yW(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=sv(a,n),i=r(o,i)):(n=sv(n,a),i=r(i,o)),function(l){return i(n(l))}}function xW(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=sv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Ru(e,l,1,n)-1;return i[c](a[c](l))}}function Lu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vg(){var e=IS,t=IS,r=kc,n,a,i,o=Ir,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==Ir&&(o=pW(e[0],e[f-1])),l=f>2?xW:yW,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(a((d||(d=l(t,e.map(n),p0)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,y0),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=Rw,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Ir,u()):o!==Ir},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,g){return n=f,a=g,u()}}function Mw(){return Vg()(Ir,Ir)}function vW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function x0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ic(e){return e=x0(Math.abs(e)),e?e[1]:NaN}function bW(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function wW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var kW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nu(e){if(!(t=kW.exec(e)))throw new Error("invalid format: "+e);var t;return new Lw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nu.prototype=Lw.prototype;function Lw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jW(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var MT;function NW(e,t){var r=x0(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(MT=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+x0(e,Math.max(0,t+i-1))[0]}function zS(e,t){var r=x0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const FS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zS(e*100,t),r:zS,s:NW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function US(e){return e}var BS=Array.prototype.map,qS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SW(e){var t=e.grouping===void 0||e.thousands===void 0?US:bW(BS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?US:wW(BS.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=nu(h);var f=h.fill,g=h.align,p=h.sign,y=h.symbol,x=h.zero,v=h.width,w=h.comma,b=h.precision,k=h.trim,j=h.type;j==="n"?(w=!0,j="g"):FS[j]||(b===void 0&&(b=12),k=!0,j="g"),(x||f==="0"&&g==="=")&&(x=!0,f="0",g="=");var N=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",_=y==="$"?n:/[%p]/.test(j)?o:"",O=FS[j],T=/[defgprs%]/.test(j);b=b===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function P(S){var M=N,F=_,q,z,W;if(j==="c")F=O(S)+F,S="";else{S=+S;var $=S<0||1/S<0;if(S=isNaN(S)?c:O(Math.abs(S),b),k&&(S=jW(S)),$&&+S==0&&p!=="+"&&($=!1),M=($?p==="("?p:l:p==="-"||p==="("?"":p)+M,F=(j==="s"?qS[8+MT/3]:"")+F+($&&p==="("?")":""),T){for(q=-1,z=S.length;++q<z;)if(W=S.charCodeAt(q),48>W||W>57){F=(W===46?a+S.slice(q+1):S.slice(q))+F,S=S.slice(0,q);break}}}w&&!x&&(S=t(S,1/0));var E=M.length+S.length+F.length,U=E<v?new Array(v-E+1).join(f):"";switch(w&&x&&(S=t(U+S,U.length?v-F.length:1/0),U=""),g){case"<":S=M+S+F+U;break;case"=":S=M+U+S+F;break;case"^":S=U.slice(0,E=U.length>>1)+M+S+F+U.slice(E);break;default:S=U+M+S+F;break}return i(S)}return P.toString=function(){return h+""},P}function u(h,f){var g=d((h=nu(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(ic(f)/3)))*3,y=Math.pow(10,-p),x=qS[8+p/3];return function(v){return g(y*v)+x}}return{format:d,formatPrefix:u}}var Rh,$w,LT;_W({thousands:",",grouping:[3],currency:["$",""]});function _W(e){return Rh=SW(e),$w=Rh.format,LT=Rh.formatPrefix,Rh}function CW(e){return Math.max(0,-ic(Math.abs(e)))}function PW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ic(t)/3)))*3-ic(Math.abs(e)))}function EW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ic(t)-ic(e))+1}function $T(e,t,r,n){var a=tv(e,t,r),i;switch(n=nu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=PW(a,o))&&(n.precision=i),LT(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=EW(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=CW(a))&&(n.precision=i-(n.type==="%")*2);break}}return $w(n)}function Ei(e){var t=e.domain;return e.ticks=function(r){var n=t();return Zx(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return $T(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);u-- >0;){if(d=ev(o,l,r),d===c)return n[a]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function IT(){var e=Mw();return e.copy=function(){return Lu(e,IT())},Gn.apply(e,arguments),Ei(e)}function zT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,y0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return zT(e).unknown(t)},e=arguments.length?Array.from(e,y0):[0,1],Ei(r)}function FT(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function WS(e){return Math.log(e)}function HS(e){return Math.exp(e)}function OW(e){return-Math.log(-e)}function TW(e){return-Math.exp(-e)}function AW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function DW(e){return e===10?AW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function RW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function VS(e){return(t,r)=>-e(-t,r)}function Iw(e){const t=e(WS,HS),r=t.domain;let n=10,a,i;function o(){return a=RW(n),i=DW(n),r()[0]<0?(a=VS(a),i=VS(i),e(OW,TW)):e(WS,HS),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=a(d),g=a(u),p,y;const x=l==null?10:+l;let v=[];if(!(n%1)&&g-f<x){if(f=Math.floor(f),g=Math.ceil(g),d>0){for(;f<=g;++f)for(p=1;p<n;++p)if(y=f<0?p/i(-f):p*i(f),!(y<d)){if(y>u)break;v.push(y)}}else for(;f<=g;++f)for(p=n-1;p>=1;--p)if(y=f>0?p/i(-f):p*i(f),!(y<d)){if(y>u)break;v.push(y)}v.length*2<x&&(v=Zx(d,u,x))}else v=Zx(f,g,Math.min(g-f,x)).map(i);return h?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=nu(c)).precision==null&&(c.trim=!0),c=$w(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},t.nice=()=>r(FT(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function UT(){const e=Iw(Vg()).domain([1,10]);return e.copy=()=>Lu(e,UT()).base(e.base()),Gn.apply(e,arguments),e}function KS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function GS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zw(e){var t=1,r=e(KS(t),GS(t));return r.constant=function(n){return arguments.length?e(KS(t=+n),GS(t)):t},Ei(r)}function BT(){var e=zw(Vg());return e.copy=function(){return Lu(e,BT()).constant(e.constant())},Gn.apply(e,arguments)}function QS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function MW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function LW(e){return e<0?-e*e:e*e}function Fw(e){var t=e(Ir,Ir),r=1;function n(){return r===1?e(Ir,Ir):r===.5?e(MW,LW):e(QS(r),QS(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Ei(t)}function Uw(){var e=Fw(Vg());return e.copy=function(){return Lu(e,Uw()).exponent(e.exponent())},Gn.apply(e,arguments),e}function $W(){return Uw.apply(null,arguments).exponent(.5)}function YS(e){return Math.sign(e)*e*e}function IW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qT(){var e=Mw(),t=[0,1],r=!1,n;function a(i){var o=IW(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(YS(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,y0)).map(YS)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return qT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Gn.apply(a,arguments),Ei(a)}function WT(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Bq(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Ru(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(yi),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return WT().domain(e).range(t).unknown(n)},Gn.apply(i,arguments)}function HT(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Ru(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return HT().domain([e,t]).range(a).unknown(i)},Gn.apply(Ei(o),arguments)}function VT(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Ru(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return VT().domain(e).range(t).unknown(r)},Gn.apply(a,arguments)}const Pp=new Date,Ep=new Date;function Xt(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>Xt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Pp.setTime(+i),Ep.setTime(+o),e(Pp),e(Ep),Math.floor(r(Pp,Ep))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const v0=Xt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);v0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):v0);v0.range;const ns=1e3,Fn=ns*60,as=Fn*60,ws=as*24,Bw=ws*7,XS=ws*30,Op=ws*365,Yi=Xt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getUTCSeconds());Yi.range;const qw=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ns)},(e,t)=>{e.setTime(+e+t*Fn)},(e,t)=>(t-e)/Fn,e=>e.getMinutes());qw.range;const Ww=Xt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Fn)},(e,t)=>(t-e)/Fn,e=>e.getUTCMinutes());Ww.range;const Hw=Xt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ns-e.getMinutes()*Fn)},(e,t)=>{e.setTime(+e+t*as)},(e,t)=>(t-e)/as,e=>e.getHours());Hw.range;const Vw=Xt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*as)},(e,t)=>(t-e)/as,e=>e.getUTCHours());Vw.range;const $u=Xt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fn)/ws,e=>e.getDate()-1);$u.range;const Kg=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ws,e=>e.getUTCDate()-1);Kg.range;const KT=Xt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ws,e=>Math.floor(e/ws));KT.range;function $o(e){return Xt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Fn)/Bw)}const Gg=$o(0),b0=$o(1),zW=$o(2),FW=$o(3),oc=$o(4),UW=$o(5),BW=$o(6);Gg.range;b0.range;zW.range;FW.range;oc.range;UW.range;BW.range;function Io(e){return Xt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Bw)}const Qg=Io(0),w0=Io(1),qW=Io(2),WW=Io(3),lc=Io(4),HW=Io(5),VW=Io(6);Qg.range;w0.range;qW.range;WW.range;lc.range;HW.range;VW.range;const Kw=Xt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Kw.range;const Gw=Xt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Gw.range;const ks=Xt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ks.range;const js=Xt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());js.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});js.range;function GT(e,t,r,n,a,i){const o=[[Yi,1,ns],[Yi,5,5*ns],[Yi,15,15*ns],[Yi,30,30*ns],[i,1,Fn],[i,5,5*Fn],[i,15,15*Fn],[i,30,30*Fn],[a,1,as],[a,3,3*as],[a,6,6*as],[a,12,12*as],[n,1,ws],[n,2,2*ws],[r,1,Bw],[t,1,XS],[t,3,3*XS],[e,1,Op]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const g=h&&typeof h.range=="function"?h:c(d,u,h),p=g?g.range(d,+u+1):[];return f?p.reverse():p}function c(d,u,h){const f=Math.abs(u-d)/h,g=Ew(([,,x])=>x).right(o,f);if(g===o.length)return e.every(tv(d/Op,u/Op,h));if(g===0)return v0.every(Math.max(tv(d,u,h),1));const[p,y]=o[f/o[g-1][2]<o[g][2]/f?g-1:g];return p.every(y)}return[l,c]}const[KW,GW]=GT(js,Gw,Qg,KT,Vw,Ww),[QW,YW]=GT(ks,Kw,Gg,$u,Hw,qw);function Tp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ap(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Vc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function XW(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Kc(a),u=Gc(a),h=Kc(i),f=Gc(i),g=Kc(o),p=Gc(o),y=Kc(l),x=Gc(l),v=Kc(c),w=Gc(c),b={a:$,A:E,b:U,B:I,c:null,d:n_,e:n_,f:bH,g:OH,G:AH,H:yH,I:xH,j:vH,L:QT,m:wH,M:kH,p:X,q:Z,Q:i_,s:o_,S:jH,u:NH,U:SH,V:_H,w:CH,W:PH,x:null,X:null,y:EH,Y:TH,Z:DH,"%":s_},k={a:te,A:K,b:le,B:me,c:null,d:a_,e:a_,f:$H,g:KH,G:QH,H:RH,I:MH,j:LH,L:XT,m:IH,M:zH,p:ue,q:A,Q:i_,s:o_,S:FH,u:UH,U:BH,V:qH,w:WH,W:HH,x:null,X:null,y:VH,Y:GH,Z:YH,"%":s_},j={a:P,A:S,b:M,B:F,c:q,d:t_,e:t_,f:fH,g:e_,G:ZS,H:r_,I:r_,j:cH,L:hH,m:lH,M:dH,p:T,q:oH,Q:mH,s:pH,S:uH,u:rH,U:nH,V:aH,w:tH,W:sH,x:z,X:W,y:e_,Y:ZS,Z:iH,"%":gH};b.x=N(r,b),b.X=N(n,b),b.c=N(t,b),k.x=N(r,k),k.X=N(n,k),k.c=N(t,k);function N(D,G){return function(ae){var B=[],fe=-1,be=0,Te=D.length,Ae,H,oe;for(ae instanceof Date||(ae=new Date(+ae));++fe<Te;)D.charCodeAt(fe)===37&&(B.push(D.slice(be,fe)),(H=JS[Ae=D.charAt(++fe)])!=null?Ae=D.charAt(++fe):H=Ae==="e"?" ":"0",(oe=G[Ae])&&(Ae=oe(ae,H)),B.push(Ae),be=fe+1);return B.push(D.slice(be,fe)),B.join("")}}function _(D,G){return function(ae){var B=Vc(1900,void 0,1),fe=O(B,D,ae+="",0),be,Te;if(fe!=ae.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(G&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(be=Ap(Vc(B.y,0,1)),Te=be.getUTCDay(),be=Te>4||Te===0?w0.ceil(be):w0(be),be=Kg.offset(be,(B.V-1)*7),B.y=be.getUTCFullYear(),B.m=be.getUTCMonth(),B.d=be.getUTCDate()+(B.w+6)%7):(be=Tp(Vc(B.y,0,1)),Te=be.getDay(),be=Te>4||Te===0?b0.ceil(be):b0(be),be=$u.offset(be,(B.V-1)*7),B.y=be.getFullYear(),B.m=be.getMonth(),B.d=be.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),Te="Z"in B?Ap(Vc(B.y,0,1)).getUTCDay():Tp(Vc(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(Te+5)%7:B.w+B.U*7-(Te+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,Ap(B)):Tp(B)}}function O(D,G,ae,B){for(var fe=0,be=G.length,Te=ae.length,Ae,H;fe<be;){if(B>=Te)return-1;if(Ae=G.charCodeAt(fe++),Ae===37){if(Ae=G.charAt(fe++),H=j[Ae in JS?G.charAt(fe++):Ae],!H||(B=H(D,ae,B))<0)return-1}else if(Ae!=ae.charCodeAt(B++))return-1}return B}function T(D,G,ae){var B=d.exec(G.slice(ae));return B?(D.p=u.get(B[0].toLowerCase()),ae+B[0].length):-1}function P(D,G,ae){var B=g.exec(G.slice(ae));return B?(D.w=p.get(B[0].toLowerCase()),ae+B[0].length):-1}function S(D,G,ae){var B=h.exec(G.slice(ae));return B?(D.w=f.get(B[0].toLowerCase()),ae+B[0].length):-1}function M(D,G,ae){var B=v.exec(G.slice(ae));return B?(D.m=w.get(B[0].toLowerCase()),ae+B[0].length):-1}function F(D,G,ae){var B=y.exec(G.slice(ae));return B?(D.m=x.get(B[0].toLowerCase()),ae+B[0].length):-1}function q(D,G,ae){return O(D,t,G,ae)}function z(D,G,ae){return O(D,r,G,ae)}function W(D,G,ae){return O(D,n,G,ae)}function $(D){return o[D.getDay()]}function E(D){return i[D.getDay()]}function U(D){return c[D.getMonth()]}function I(D){return l[D.getMonth()]}function X(D){return a[+(D.getHours()>=12)]}function Z(D){return 1+~~(D.getMonth()/3)}function te(D){return o[D.getUTCDay()]}function K(D){return i[D.getUTCDay()]}function le(D){return c[D.getUTCMonth()]}function me(D){return l[D.getUTCMonth()]}function ue(D){return a[+(D.getUTCHours()>=12)]}function A(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var G=N(D+="",b);return G.toString=function(){return D},G},parse:function(D){var G=_(D+="",!1);return G.toString=function(){return D},G},utcFormat:function(D){var G=N(D+="",k);return G.toString=function(){return D},G},utcParse:function(D){var G=_(D+="",!0);return G.toString=function(){return D},G}}}var JS={"-":"",_:" ",0:"0"},lr=/^\s*\d+/,JW=/^%/,ZW=/[\\^$*+?|[\]().{}]/g;function tt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function eH(e){return e.replace(ZW,"\\$&")}function Kc(e){return new RegExp("^(?:"+e.map(eH).join("|")+")","i")}function Gc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function tH(e,t,r){var n=lr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function rH(e,t,r){var n=lr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function nH(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function aH(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function sH(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ZS(e,t,r){var n=lr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function e_(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function iH(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oH(e,t,r){var n=lr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function lH(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function t_(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function cH(e,t,r){var n=lr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function r_(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function dH(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function uH(e,t,r){var n=lr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function hH(e,t,r){var n=lr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function fH(e,t,r){var n=lr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function gH(e,t,r){var n=JW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function mH(e,t,r){var n=lr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function pH(e,t,r){var n=lr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function n_(e,t){return tt(e.getDate(),t,2)}function yH(e,t){return tt(e.getHours(),t,2)}function xH(e,t){return tt(e.getHours()%12||12,t,2)}function vH(e,t){return tt(1+$u.count(ks(e),e),t,3)}function QT(e,t){return tt(e.getMilliseconds(),t,3)}function bH(e,t){return QT(e,t)+"000"}function wH(e,t){return tt(e.getMonth()+1,t,2)}function kH(e,t){return tt(e.getMinutes(),t,2)}function jH(e,t){return tt(e.getSeconds(),t,2)}function NH(e){var t=e.getDay();return t===0?7:t}function SH(e,t){return tt(Gg.count(ks(e)-1,e),t,2)}function YT(e){var t=e.getDay();return t>=4||t===0?oc(e):oc.ceil(e)}function _H(e,t){return e=YT(e),tt(oc.count(ks(e),e)+(ks(e).getDay()===4),t,2)}function CH(e){return e.getDay()}function PH(e,t){return tt(b0.count(ks(e)-1,e),t,2)}function EH(e,t){return tt(e.getFullYear()%100,t,2)}function OH(e,t){return e=YT(e),tt(e.getFullYear()%100,t,2)}function TH(e,t){return tt(e.getFullYear()%1e4,t,4)}function AH(e,t){var r=e.getDay();return e=r>=4||r===0?oc(e):oc.ceil(e),tt(e.getFullYear()%1e4,t,4)}function DH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tt(t/60|0,"0",2)+tt(t%60,"0",2)}function a_(e,t){return tt(e.getUTCDate(),t,2)}function RH(e,t){return tt(e.getUTCHours(),t,2)}function MH(e,t){return tt(e.getUTCHours()%12||12,t,2)}function LH(e,t){return tt(1+Kg.count(js(e),e),t,3)}function XT(e,t){return tt(e.getUTCMilliseconds(),t,3)}function $H(e,t){return XT(e,t)+"000"}function IH(e,t){return tt(e.getUTCMonth()+1,t,2)}function zH(e,t){return tt(e.getUTCMinutes(),t,2)}function FH(e,t){return tt(e.getUTCSeconds(),t,2)}function UH(e){var t=e.getUTCDay();return t===0?7:t}function BH(e,t){return tt(Qg.count(js(e)-1,e),t,2)}function JT(e){var t=e.getUTCDay();return t>=4||t===0?lc(e):lc.ceil(e)}function qH(e,t){return e=JT(e),tt(lc.count(js(e),e)+(js(e).getUTCDay()===4),t,2)}function WH(e){return e.getUTCDay()}function HH(e,t){return tt(w0.count(js(e)-1,e),t,2)}function VH(e,t){return tt(e.getUTCFullYear()%100,t,2)}function KH(e,t){return e=JT(e),tt(e.getUTCFullYear()%100,t,2)}function GH(e,t){return tt(e.getUTCFullYear()%1e4,t,4)}function QH(e,t){var r=e.getUTCDay();return e=r>=4||r===0?lc(e):lc.ceil(e),tt(e.getUTCFullYear()%1e4,t,4)}function YH(){return"+0000"}function s_(){return"%"}function i_(e){return+e}function o_(e){return Math.floor(+e/1e3)}var Go,ZT,eA;XH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XH(e){return Go=XW(e),ZT=Go.format,Go.parse,eA=Go.utcFormat,Go.utcParse,Go}function JH(e){return new Date(e)}function ZH(e){return e instanceof Date?+e:+new Date(+e)}function Qw(e,t,r,n,a,i,o,l,c,d){var u=Mw(),h=u.invert,f=u.domain,g=d(".%L"),p=d(":%S"),y=d("%I:%M"),x=d("%I %p"),v=d("%a %d"),w=d("%b %d"),b=d("%B"),k=d("%Y");function j(N){return(c(N)<N?g:l(N)<N?p:o(N)<N?y:i(N)<N?x:n(N)<N?a(N)<N?v:w:r(N)<N?b:k)(N)}return u.invert=function(N){return new Date(h(N))},u.domain=function(N){return arguments.length?f(Array.from(N,ZH)):f().map(JH)},u.ticks=function(N){var _=f();return e(_[0],_[_.length-1],N??10)},u.tickFormat=function(N,_){return _==null?j:d(_)},u.nice=function(N){var _=f();return(!N||typeof N.range!="function")&&(N=t(_[0],_[_.length-1],N??10)),N?f(FT(_,N)):u},u.copy=function(){return Lu(u,Qw(e,t,r,n,a,i,o,l,c,d))},u}function eV(){return Gn.apply(Qw(QW,YW,ks,Kw,Gg,$u,Hw,qw,Yi,ZT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tV(){return Gn.apply(Qw(KW,GW,js,Gw,Qg,Kg,Vw,Ww,Yi,eA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yg(){var e=0,t=1,r,n,a,i,o=Ir,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-r)*a,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var g,p;return arguments.length?([g,p]=f,o=h(g,p),d):[o(0),o(1)]}}return d.range=u(kc),d.rangeRound=u(Rw),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),n=h(t),a=r===n?0:1/(n-r),d}}function Oi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tA(){var e=Ei(Yg()(Ir));return e.copy=function(){return Oi(e,tA())},Es.apply(e,arguments)}function rA(){var e=Iw(Yg()).domain([1,10]);return e.copy=function(){return Oi(e,rA()).base(e.base())},Es.apply(e,arguments)}function nA(){var e=zw(Yg());return e.copy=function(){return Oi(e,nA()).constant(e.constant())},Es.apply(e,arguments)}function Yw(){var e=Fw(Yg());return e.copy=function(){return Oi(e,Yw()).exponent(e.exponent())},Es.apply(e,arguments)}function rV(){return Yw.apply(null,arguments).exponent(.5)}function aA(){var e=[],t=Ir;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ru(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(yi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Uq(e,i/n))},r.copy=function(){return aA(t).domain(e)},Es.apply(r,arguments)}function Xg(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,d=Ir,u,h=!1,f;function g(y){return isNaN(y=+y)?f:(y=.5+((y=+u(y))-i)*(n*y<n*i?l:c),d(h?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,a=u(e=+e),i=u(t=+t),o=u(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(h=!!y,g):h},g.interpolator=function(y){return arguments.length?(d=y,g):d};function p(y){return function(x){var v,w,b;return arguments.length?([v,w,b]=x,d=gW(y,[v,w,b]),g):[d(0),d(.5),d(1)]}}return g.range=p(kc),g.rangeRound=p(Rw),g.unknown=function(y){return arguments.length?(f=y,g):f},function(y){return u=y,a=y(e),i=y(t),o=y(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,g}}function sA(){var e=Ei(Xg()(Ir));return e.copy=function(){return Oi(e,sA())},Es.apply(e,arguments)}function iA(){var e=Iw(Xg()).domain([.1,1,10]);return e.copy=function(){return Oi(e,iA()).base(e.base())},Es.apply(e,arguments)}function oA(){var e=zw(Xg());return e.copy=function(){return Oi(e,oA()).constant(e.constant())},Es.apply(e,arguments)}function Xw(){var e=Fw(Xg());return e.copy=function(){return Oi(e,Xw()).exponent(e.exponent())},Es.apply(e,arguments)}function nV(){return Xw.apply(null,arguments).exponent(.5)}const sd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Tw,scaleDiverging:sA,scaleDivergingLog:iA,scaleDivergingPow:Xw,scaleDivergingSqrt:nV,scaleDivergingSymlog:oA,scaleIdentity:zT,scaleImplicit:rv,scaleLinear:IT,scaleLog:UT,scaleOrdinal:Ow,scalePoint:Wq,scalePow:Uw,scaleQuantile:WT,scaleQuantize:HT,scaleRadial:qT,scaleSequential:tA,scaleSequentialLog:rA,scaleSequentialPow:Yw,scaleSequentialQuantile:aA,scaleSequentialSqrt:rV,scaleSequentialSymlog:nA,scaleSqrt:$W,scaleSymlog:BT,scaleThreshold:VT,scaleTime:eV,scaleUtc:tV,tickFormat:$T},Symbol.toStringTag,{value:"Module"}));var Ti=e=>e.chartData,aV=V([Ti],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Jg=(e,t,r,n)=>n?aV(e):Ti(e);function ji(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(xt(t)&&xt(r))return!0}return!1}function l_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function lA(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(xt(r))a=r;else if(typeof r=="function")return;if(xt(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(ji(o))return o}}function sV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(ji(n))return l_(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(je(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&WN.test(a)){var c=WN.exec(a);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(je(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&HN.test(i)){var u=HN.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t==null?void 0:t[1];var f=[o,l];if(ji(f))return t==null?f:l_(f,t,r)}}}var jc=1e9,iV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Zw,_t=!0,Kn="[DecimalError] ",po=Kn+"Invalid argument: ",Jw=Kn+"Exponent out of range: ",Nc=Math.floor,qi=Math.pow,oV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,un,ar=1e7,bt=7,cA=9007199254740991,k0=Nc(cA/bt),xe={};xe.absoluteValue=xe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};xe.comparedTo=xe.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};xe.decimalPlaces=xe.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*bt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};xe.dividedBy=xe.div=function(e){return ds(this,new this.constructor(e))};xe.dividedToIntegerBy=xe.idiv=function(e){var t=this,r=t.constructor;return ft(ds(t,new r(e),0,1),r.precision)};xe.equals=xe.eq=function(e){return!this.cmp(e)};xe.exponent=function(){return Ut(this)};xe.greaterThan=xe.gt=function(e){return this.cmp(e)>0};xe.greaterThanOrEqualTo=xe.gte=function(e){return this.cmp(e)>=0};xe.isInteger=xe.isint=function(){return this.e>this.d.length-2};xe.isNegative=xe.isneg=function(){return this.s<0};xe.isPositive=xe.ispos=function(){return this.s>0};xe.isZero=function(){return this.s===0};xe.lessThan=xe.lt=function(e){return this.cmp(e)<0};xe.lessThanOrEqualTo=xe.lte=function(e){return this.cmp(e)<1};xe.logarithm=xe.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(un))throw Error(Kn+"NaN");if(r.s<1)throw Error(Kn+(r.s?"NaN":"-Infinity"));return r.eq(un)?new n(0):(_t=!1,t=ds(au(r,i),au(e,i),i),_t=!0,ft(t,a))};xe.minus=xe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hA(t,e):dA(t,(e.s=-e.s,e))};xe.modulo=xe.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Kn+"NaN");return r.s?(_t=!1,t=ds(r,e,0,1).times(e),_t=!0,r.minus(t)):ft(new n(r),a)};xe.naturalExponential=xe.exp=function(){return uA(this)};xe.naturalLogarithm=xe.ln=function(){return au(this)};xe.negated=xe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};xe.plus=xe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dA(t,e):hA(t,(e.s=-e.s,e))};xe.precision=xe.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(po+e);if(t=Ut(a)+1,n=a.d.length-1,r=n*bt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};xe.squareRoot=xe.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Kn+"NaN")}for(e=Ut(l),_t=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Ta(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Nc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(ds(l,i,o+2)).times(.5),Ta(i.d).slice(0,o)===(t=Ta(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(ft(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return _t=!0,ft(n,r)};xe.times=xe.mul=function(e){var t,r,n,a,i,o,l,c,d,u=this,h=u.constructor,f=u.d,g=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=f.length,d=g.length,c<d&&(i=f,f=g,g=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+g[n]*f[a-n-1]+t,i[a--]=l%ar|0,t=l/ar|0;i[a]=(i[a]+t)%ar|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,_t?ft(e,h.precision):e};xe.toDecimalPlaces=xe.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:($a(e,0,jc),t===void 0?t=n.rounding:$a(t,0,8),ft(r,e+Ut(r)+1,t))};xe.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Po(n,!0):($a(e,0,jc),t===void 0?t=a.rounding:$a(t,0,8),n=ft(new a(n),e+1,t),r=Po(n,!0,e+1)),r};xe.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Po(a):($a(e,0,jc),t===void 0?t=i.rounding:$a(t,0,8),n=ft(new i(a),e+Ut(a)+1,t),r=Po(n.abs(),!1,e+Ut(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};xe.toInteger=xe.toint=function(){var e=this,t=e.constructor;return ft(new t(e),Ut(e)+1,t.rounding)};xe.toNumber=function(){return+this};xe.toPower=xe.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(un);if(l=new c(l),!l.s){if(e.s<1)throw Error(Kn+"Infinity");return l}if(l.eq(un))return l;if(n=c.precision,e.eq(un))return ft(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=cA){for(a=new c(un),t=Math.ceil(n/bt+4),_t=!1;r%2&&(a=a.times(l),d_(a.d,t)),r=Nc(r/2),r!==0;)l=l.times(l),d_(l.d,t);return _t=!0,e.s<0?new c(un).div(a):ft(a,n)}}else if(i<0)throw Error(Kn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,_t=!1,a=e.times(au(l,n+d)),_t=!0,a=uA(a),a.s=i,a};xe.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ut(a),n=Po(a,r<=i.toExpNeg||r>=i.toExpPos)):($a(e,1,jc),t===void 0?t=i.rounding:$a(t,0,8),a=ft(new i(a),e,t),r=Ut(a),n=Po(a,e<=r||r<=i.toExpNeg,e)),n};xe.toSignificantDigits=xe.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):($a(e,1,jc),t===void 0?t=n.rounding:$a(t,0,8)),ft(new n(r),e,t)};xe.toString=xe.valueOf=xe.val=xe.toJSON=xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ut(e),r=e.constructor;return Po(e,t<=r.toExpNeg||t>=r.toExpPos)};function dA(e,t){var r,n,a,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),_t?ft(t,h):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,a=o,l=c.length),o=Math.ceil(h/bt),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/ar|0,c[i]%=ar;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,_t?ft(t,h):t}function $a(e,t,r){if(e!==~~e||e<t||e>r)throw Error(po+e)}function Ta(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=bt-n.length,r&&(i+=Us(r)),i+=n;o=e[t],n=o+"",r=bt-n.length,r&&(i+=Us(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ds=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%ar|0,o=i/ar|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*ar+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,d,u,h,f,g,p,y,x,v,w,b,k,j,N,_,O,T=n.constructor,P=n.s==a.s?1:-1,S=n.d,M=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(Kn+"Division by zero");for(c=n.e-a.e,_=M.length,j=S.length,g=new T(P),p=g.d=[],d=0;M[d]==(S[d]||0);)++d;if(M[d]>(S[d]||0)&&--c,i==null?w=i=T.precision:o?w=i+(Ut(n)-Ut(a))+1:w=i,w<0)return new T(0);if(w=w/bt+2|0,d=0,_==1)for(u=0,M=M[0],w++;(d<j||u)&&w--;d++)b=u*ar+(S[d]||0),p[d]=b/M|0,u=b%M|0;else{for(u=ar/(M[0]+1)|0,u>1&&(M=e(M,u),S=e(S,u),_=M.length,j=S.length),k=_,y=S.slice(0,_),x=y.length;x<_;)y[x++]=0;O=M.slice(),O.unshift(0),N=M[0],M[1]>=ar/2&&++N;do u=0,l=t(M,y,_,x),l<0?(v=y[0],_!=x&&(v=v*ar+(y[1]||0)),u=v/N|0,u>1?(u>=ar&&(u=ar-1),h=e(M,u),f=h.length,x=y.length,l=t(h,y,f,x),l==1&&(u--,r(h,_<f?O:M,f))):(u==0&&(l=u=1),h=M.slice()),f=h.length,f<x&&h.unshift(0),r(y,h,x),l==-1&&(x=y.length,l=t(M,y,_,x),l<1&&(u++,r(y,_<x?O:M,x))),x=y.length):l===0&&(u++,y=[0]),p[d++]=u,l&&y[0]?y[x++]=S[k]||0:(y=[S[k]],x=1);while((k++<j||y[0]!==void 0)&&w--)}return p[0]||p.shift(),g.e=c,ft(g,o?i+Ut(g)+1:i)}}();function uA(e,t){var r,n,a,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(Ut(e)>16)throw Error(Jw+Ut(e));if(!e.s)return new u(un);for(t==null?(_t=!1,l=h):l=t,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(qi(2,d))/Math.LN10*2+5|0,l+=n,r=a=i=new u(un),u.precision=l;;){if(a=ft(a.times(e),l),r=r.times(++c),o=i.plus(ds(a,r,l)),Ta(o.d).slice(0,l)===Ta(i.d).slice(0,l)){for(;d--;)i=ft(i.times(i),l);return u.precision=h,t==null?(_t=!0,ft(i,h)):i}i=o}}function Ut(e){for(var t=e.e*bt,r=e.d[0];r>=10;r/=10)t++;return t}function Dp(e,t,r){if(t>e.LN10.sd())throw _t=!0,r&&(e.precision=r),Error(Kn+"LN10 precision limit exceeded");return ft(new e(e.LN10),t)}function Us(e){for(var t="";e--;)t+="0";return t}function au(e,t){var r,n,a,i,o,l,c,d,u,h=1,f=10,g=e,p=g.d,y=g.constructor,x=y.precision;if(g.s<1)throw Error(Kn+(g.s?"NaN":"-Infinity"));if(g.eq(un))return new y(0);if(t==null?(_t=!1,d=x):d=t,g.eq(10))return t==null&&(_t=!0),Dp(y,d);if(d+=f,y.precision=d,r=Ta(p),n=r.charAt(0),i=Ut(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Ta(g.d),n=r.charAt(0),h++;i=Ut(g),n>1?(g=new y("0."+r),i++):g=new y(n+"."+r.slice(1))}else return c=Dp(y,d+2,x).times(i+""),g=au(new y(n+"."+r.slice(1)),d-f).plus(c),y.precision=x,t==null?(_t=!0,ft(g,x)):g;for(l=o=g=ds(g.minus(un),g.plus(un),d),u=ft(g.times(g),d),a=3;;){if(o=ft(o.times(u),d),c=l.plus(ds(o,new y(a),d)),Ta(c.d).slice(0,d)===Ta(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Dp(y,d+2,x).times(i+""))),l=ds(l,new y(h),d),y.precision=x,t==null?(_t=!0,ft(l,x)):l;l=c,a+=2}}function c_(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Nc(r/bt),e.d=[],n=(r+1)%bt,r<0&&(n+=bt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=bt;n<a;)e.d.push(+t.slice(n,n+=bt));t=t.slice(n),n=bt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),_t&&(e.e>k0||e.e<-k0))throw Error(Jw+r)}else e.s=0,e.e=0,e.d=[0];return e}function ft(e,t,r){var n,a,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=bt,a=t,d=h[u=0];else{if(u=Math.ceil((n+1)/bt),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;n%=bt,a=n-bt+o}if(r!==void 0&&(i=qi(10,o-a-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?d/qi(10,o-a):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=Ut(e),h.length=1,t=t-i-1,h[0]=qi(10,(bt-t%bt)%bt),e.e=Nc(-t/bt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=qi(10,bt-n),h[u]=a>0?(d/qi(10,o-a)%qi(10,a)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==ar&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=ar)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(_t&&(e.e>k0||e.e<-k0))throw Error(Jw+Ut(e));return e}function hA(e,t){var r,n,a,i,o,l,c,d,u,h,f=e.constructor,g=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),_t?ft(t,g):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),a=Math.max(Math.ceil(g/bt),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=h.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=ar-1;--c[i],c[a]+=ar}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,_t?ft(t,g):t):new f(0)}function Po(e,t,r){var n,a=Ut(e),i=Ta(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Us(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Us(-a-1)+i,r&&(n=r-o)>0&&(i+=Us(n))):a>=o?(i+=Us(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Us(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Us(n))),e.s<0?"-"+i:i}function d_(e,t){if(e.length>t)return e.length=t,!0}function fA(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(po+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return c_(o,i.toString())}else if(typeof i!="string")throw Error(po+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,oV.test(i))c_(o,i);else throw Error(po+i)}if(a.prototype=xe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=fA,a.config=a.set=lV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function lV(e){if(!e||typeof e!="object")throw Error(Kn+"Object expected");var t,r,n,a=["precision",1,jc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Nc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(po+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(po+r+": "+n);return this}var Zw=fA(iV);un=new Zw(1);const lt=Zw;var cV=e=>e,gA={"@@functional/placeholder":!0},mA=e=>e===gA,u_=e=>function t(){return arguments.length===0||arguments.length===1&&mA(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},pA=(e,t)=>e===1?t:u_(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==gA).length;return i>=e?t(...n):pA(e-i,u_(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=n.map(u=>mA(u)?l.shift():u);return t(...d,...l)}))}),dV=e=>pA(e.length,e),iv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},uV=dV((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),hV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return cV;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},ov=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function yA(e){var t;return e===0?t=1:t=Math.floor(new lt(e).abs().log(10).toNumber())+1,t}function xA(e,t,r){for(var n=new lt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var vA=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},bA=(e,t,r)=>{if(e.lte(0))return new lt(0);var n=yA(e.toNumber()),a=new lt(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new lt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new lt(c.toNumber()):new lt(Math.ceil(c.toNumber()))},fV=(e,t,r)=>{var n=new lt(1),a=new lt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new lt(10).pow(yA(e)-1),a=new lt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new lt(Math.floor(e)))}else e===0?a=new lt(Math.floor((t-1)/2)):r||(a=new lt(Math.floor(e)));var o=Math.floor((t-1)/2),l=hV(uV(c=>a.add(new lt(c-o).mul(n)).toNumber()),iv);return l(0,t)},wA=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new lt(0),tickMin:new lt(0),tickMax:new lt(0)};var o=bA(new lt(r).sub(t).div(n-1),a,i),l;t<=0&&r>=0?l=new lt(0):(l=new lt(t).add(r).div(2),l=l.sub(new lt(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new lt(r).sub(l).div(o).toNumber()),u=c+d+1;return u>n?wA(t,r,n,a,i+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:o,tickMin:l.sub(new lt(c).mul(o)),tickMax:l.add(new lt(d).mul(o))})},gV=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=vA([r,n]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...iv(0,a-1).map(()=>1/0)]:[...iv(0,a-1).map(()=>-1/0),c];return r>n?ov(d):d}if(l===c)return fV(l,a,i);var{step:u,tickMin:h,tickMax:f}=wA(l,c,o,i,0),g=xA(h,f.add(new lt(.1).mul(u)),u);return r>n?ov(g):g},mV=function(t,r){var[n,a]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=vA([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),d=bA(new lt(l).sub(o).div(c-1),i,0),u=[...xA(new lt(o),new lt(l),d),l];return i===!1&&(u=u.map(h=>Math.round(h))),n>a?ov(u):u},pV=e=>e.rootProps.barCategoryGap,Zg=e=>e.rootProps.stackOffset,kA=e=>e.rootProps.reverseStackOrder,ek=e=>e.options.chartName,tk=e=>e.rootProps.syncId,jA=e=>e.rootProps.syncMethod,rk=e=>e.options.eventEmitter,yV=e=>e.rootProps.baseValue,Gt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Za={allowDecimals:!1,allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category",zIndex:Gt.axis},dn={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,includeHidden:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number",zIndex:Gt.axis},em=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},xV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Za.angleAxisId,includeHidden:!1,name:void 0,reversed:Za.reversed,scale:Za.scale,tick:Za.tick,tickCount:void 0,ticks:void 0,type:Za.type,unit:void 0},vV={allowDataOverflow:dn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:dn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:dn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:dn.scale,tick:dn.tick,tickCount:dn.tickCount,ticks:void 0,type:dn.type,unit:void 0},bV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Za.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Za.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Za.scale,tick:Za.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},wV={allowDataOverflow:dn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:dn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:dn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:dn.scale,tick:dn.tick,tickCount:dn.tickCount,ticks:void 0,type:"category",unit:void 0},nk=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?bV:xV,ak=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?wV:vV,tm=e=>e.polarOptions,sk=V([Cs,Ps,vr],vq),NA=V([tm,sk],(e,t)=>{if(e!=null)return ki(e.innerRadius,t,0)}),SA=V([tm,sk],(e,t)=>{if(e!=null)return ki(e.outerRadius,t,t*.8)}),kV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},_A=V([tm],kV);V([nk,_A],em);var CA=V([sk,NA,SA],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});V([ak,CA],em);var PA=V([ut,tm,NA,SA,Cs,Ps],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:ki(o,a,a/2),cy:ki(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),Jt=(e,t)=>t,rm=(e,t,r)=>r;function ik(e){return e==null?void 0:e.id}function EA(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:n;if(!(d==null||d.length===0)){var u=ik(l);d.forEach((h,f)=>{var g=i==null||a?f:String(or(h,i,null)),p=or(h,l.dataKey,0),y;o.has(g)?y=o.get(g):y={},Object.assign(y,{[u]:p}),o.set(g,y)})}}),Array.from(o.values())}function ok(e){return e.stackId!=null&&e.dataKey!=null}var nm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function am(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function jV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Zt=e=>{var t=ut(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Sc=e=>e.tooltip.settings.axisId;function h_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h_(Object(r),!0).forEach(function(n){NV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NV(e,t,r){return(t=SV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SV(e){var t=_V(e,"string");return typeof t=="symbol"?t:t+""}function _V(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lv=[0,"auto"],tr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},OA=(e,t)=>e.cartesianAxis.xAxis[t],za=(e,t)=>{var r=OA(e,t);return r??tr},rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:lv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Tu},TA=(e,t)=>e.cartesianAxis.yAxis[t],Fa=(e,t)=>{var r=TA(e,t);return r??rr},CV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},lk=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??CV},Wr=(e,t,r)=>{switch(t){case"xAxis":return za(e,r);case"yAxis":return Fa(e,r);case"zAxis":return lk(e,r);case"angleAxis":return nk(e,r);case"radiusAxis":return ak(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},PV=(e,t,r)=>{switch(t){case"xAxis":return za(e,r);case"yAxis":return Fa(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Iu=(e,t,r)=>{switch(t){case"xAxis":return za(e,r);case"yAxis":return Fa(e,r);case"angleAxis":return nk(e,r);case"radiusAxis":return ak(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},AA=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function DA(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var ck=e=>e.graphicalItems.cartesianItems,EV=V([Jt,rm],DA),RA=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),zu=V([ck,Wr,EV],RA,{memoizeOptions:{resultEqualityCheck:am}}),MA=V([zu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(ok)),LA=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),OV=V([zu],LA),$A=e=>e.map(t=>t.data).filter(Boolean).flat(1),TV=V([zu],$A,{memoizeOptions:{resultEqualityCheck:am}}),IA=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},dk=V([TV,Jg],IA),zA=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:or(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:or(a,n)}))):e.map(n=>({value:n})),sm=V([dk,Wr,zu],zA);function FA(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function cf(e){if(Hn(e)||e instanceof Date){var t=Number(e);if(xt(t))return t}}function f_(e){if(Array.isArray(e)){var t=[cf(e[0]),cf(e[1])];return ji(t)?t:void 0}var r=cf(e);if(r!=null)return[r,r]}function Ns(e){return e.map(cf).filter(Iz)}function AV(e,t,r){return!r||typeof t!="number"||kn(t)?[]:r.length?Ns(r.flatMap(n=>{var a=or(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!xt(i)||!xt(o)))return[t-i,t+o]})):[]}var er=e=>{var t=Zt(e),r=Sc(e);return Iu(e,t,r)},Fu=V([er],e=>e==null?void 0:e.dataKey),DV=V([MA,Jg,er],EA),UA=(e,t,r,n)=>{var a={},i=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),a);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=n?[...c].reverse():c,u=d.map(ik);return[l,{stackedData:eU(e,u,r),graphicalItems:d}]}))},cv=V([DV,MA,Zg,kA],UA),BA=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=aU(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},RV=V([Wr],e=>e.allowDataOverflow),uk=e=>{var t;if(e==null||!("domain"in e))return lv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Ns(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:lv},qA=V([Wr],uk),WA=V([qA,RV],lA),MV=V([cv,Ti,Jt,WA],BA,{memoizeOptions:{resultEqualityCheck:nm}}),hk=e=>e.errorBars,LV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>FA(r,n)),N0=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},HA=(e,t,r,n,a)=>{var i,o;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var d,u,h=(d=n[c.id])===null||d===void 0?void 0:d.filter(v=>FA(a,v)),f=or(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),g=AV(l,f,h);if(g.length>=2){var p=Math.min(...g),y=Math.max(...g);(i==null||p<i)&&(i=p),(o==null||y>o)&&(o=y)}var x=f_(f);x!=null&&(i=i==null?x[0]:Math.min(i,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=f_(or(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),xt(i)&&xt(o))return[i,o]},$V=V([dk,Wr,OV,hk,Jt],HA,{memoizeOptions:{resultEqualityCheck:nm}});function IV(e){var{value:t}=e;if(Hn(t)||t instanceof Date)return t}var zV=(e,t,r)=>{var n=e.map(IV).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&zO(n))?CT(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},VA=e=>e.referenceElements.dots,_c=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),FV=V([VA,Jt,rm],_c),KA=e=>e.referenceElements.areas,UV=V([KA,Jt,rm],_c),GA=e=>e.referenceElements.lines,BV=V([GA,Jt,rm],_c),QA=(e,t)=>{var r=Ns(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qV=V(FV,Jt,QA),YA=(e,t)=>{var r=Ns(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},WV=V([UV,Jt],YA);function HV(e){var t;if(e.x!=null)return Ns([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Ns(r)}function VV(e){var t;if(e.y!=null)return Ns([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Ns(r)}var XA=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?HV(n):VV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KV=V([BV,Jt],XA),GV=V(qV,KV,WV,(e,t,r)=>N0(e,r,t)),JA=(e,t,r,n,a,i,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?N0(n,i,a):N0(i,a);return sV(t,d,e.allowDataOverflow)},QV=V([Wr,qA,WA,MV,$V,GV,ut,Jt],JA,{memoizeOptions:{resultEqualityCheck:nm}}),YV=[0,1],ZA=(e,t,r,n,a,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Ia(t,i);if(d&&l==null){var u;return CT(0,(u=r==null?void 0:r.length)!==null&&u!==void 0?u:0)}return c==="category"?zV(n,e,d):a==="expand"?YV:o}},fk=V([Wr,ut,dk,sm,Zg,Jt,QV],ZA),e3=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(_u(i));return l in sd?l:"point"}}},Uu=V([Wr,ut,AA,ek,Jt],e3);function XV(e){if(e!=null){if(e in sd)return sd[e]();var t="scale".concat(_u(e));if(t in sd)return sd[t]()}}function gk(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=XV(t);if(a!=null){var i=a.domain(r).range(n);return YF(i),i}}}var t3=(e,t,r)=>{var n=uk(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&ji(e))return gV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ji(e))return mV(e,t.tickCount,t.allowDecimals)}},mk=V([fk,Iu,Uu],t3),r3=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&ji(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,i),Math.max(o,l)]}return t},JV=V([Wr,fk,mk,Jt],r3),ZV=V(sm,Wr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Ns(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),n3=V(ZV,ut,pV,vr,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!xt(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=ki(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),eK=(e,t)=>{var r=za(e,t);return r==null||typeof r.padding!="string"?0:n3(e,"xAxis",t,r.padding)},tK=(e,t)=>{var r=Fa(e,t);return r==null||typeof r.padding!="string"?0:n3(e,"yAxis",t,r.padding)},rK=V(za,eK,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),nK=V(Fa,tK,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),aK=V([vr,rK,Ig,$g,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),sK=V([vr,ut,nK,Ig,$g,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Bu=(e,t,r,n)=>{var a;switch(t){case"xAxis":return aK(e,r,n);case"yAxis":return sK(e,r,n);case"zAxis":return(a=lk(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return _A(e);case"radiusAxis":return CA(e,r);default:return}},a3=V([Wr,Bu],em),Ni=V([Wr,Uu,JV,a3],gk);V([zu,hk,Jt],LV);function s3(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var im=(e,t)=>t,om=(e,t,r)=>r,iK=V(Mg,im,om,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(s3)),oK=V(Lg,im,om,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(s3)),i3=(e,t)=>({width:e.width,height:t.height}),lK=(e,t)=>{var r=typeof t.width=="number"?t.width:Tu;return{width:r,height:e.height}},cK=V(vr,za,i3),dK=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},uK=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},hK=V(Ps,vr,iK,im,om,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var c=i3(t,l);o==null&&(o=dK(t,n,e));var d=n==="top"&&!a||n==="bottom"&&a;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),fK=V(Cs,vr,oK,im,om,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var c=lK(t,l);o==null&&(o=uK(t,n,e));var d=n==="left"&&!a||n==="right"&&a;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),gK=(e,t)=>{var r=za(e,t);if(r!=null)return hK(e,r.orientation,r.mirror)},mK=V([vr,za,gK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),pK=(e,t)=>{var r=Fa(e,t);if(r!=null)return fK(e,r.orientation,r.mirror)},yK=V([vr,Fa,pK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),xK=V(vr,Fa,(e,t)=>{var r=typeof t.width=="number"?t.width:Tu;return{width:r,height:e.height}}),o3=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,l=Ia(e,n),c=t.map(d=>d.value);if(o&&l&&i==="category"&&a&&zO(c))return c}},pk=V([ut,sm,Wr,Jt],o3),l3=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=Ia(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(l=>l.value)}},yk=V([ut,sm,Iu,Jt],l3),g_=V([ut,PV,Uu,Ni,pk,yk,Bu,mk,Jt],(e,t,r,n,a,i,o,l,c)=>{if(t!=null){var d=Ia(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:n}}}),vK=(e,t,r,n,a,i,o,l,c)=>{if(!(t==null||n==null)){var d=Ia(e,c),{type:u,ticks:h,tickCount:f}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=u==="category"&&n.bandwidth?n.bandwidth()/g:0;p=c==="angleAxis"&&i!=null&&i.length>=2?zn(i[0]-i[1])*2*p:p;var y=h||a;if(y){var x=y.map((v,w)=>{var b=o?o.indexOf(v):v;return{index:w,coordinate:n(b)+p,value:v,offset:p}});return x.filter(v=>xt(v.coordinate))}return d&&l?l.map((v,w)=>({coordinate:n(v)+p,value:v,index:w,offset:p})).filter(v=>xt(v.coordinate)):n.ticks?n.ticks(f).map(v=>({coordinate:n(v)+p,value:v,offset:p})):n.domain().map((v,w)=>({coordinate:n(v)+p,value:o?o[v]:v,index:w,offset:p}))}},c3=V([ut,Iu,Uu,Ni,mk,Bu,pk,yk,Jt],vK),bK=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Ia(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&(n==null?void 0:n.length)>=2?zn(n[0]-n[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:a?a[u]:u,index:h,offset:d}))}},lm=V([ut,Iu,Ni,Bu,pk,yk,Jt],bK),cm=V(Wr,Ni,(e,t)=>{if(!(e==null||t==null))return j0(j0({},e),{},{scale:t})}),wK=V([Wr,Uu,fk,a3],gk);V((e,t,r)=>lk(e,r),wK,(e,t)=>{if(!(e==null||t==null))return j0(j0({},e),{},{scale:t})});var kK=V([ut,Mg,Lg],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),d3=e=>e.options.defaultTooltipEventType,u3=e=>e.options.validateTooltipEventTypes;function h3(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function xk(e,t){var r=d3(e),n=u3(e);return h3(t,r,n)}function jK(e){return Ne(t=>xk(t,e))}var f3=(e,t)=>{var r,n=Number(t);if(!(kn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},NK=e=>e.tooltip.settings,Vs={active:!1,index:null,dataKey:void 0,coordinate:void 0},SK={itemInteraction:{click:Vs,hover:Vs},axisInteraction:{click:Vs,hover:Vs},keyboardInteraction:Vs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},g3=sn({name:"tooltip",initialState:SK,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ha(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Nt()},removeTooltipEntrySettings:{reducer(e,t){var r=ha(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Nt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:_K,replaceTooltipEntrySettings:CK,removeTooltipEntrySettings:PK,setTooltipSettingsState:EK,setActiveMouseOverItemIndex:OK,mouseLeaveItem:use,mouseLeaveChart:m3,setActiveClickItemIndex:hse,setMouseOverAxisIndex:p3,setMouseClickAxisIndex:TK,setSyncInteraction:dv,setKeyboardInteraction:uv}=g3.actions,AK=g3.reducer;function m_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(r),!0).forEach(function(n){DK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DK(e,t,r){return(t=RK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RK(e){var t=MK(e,"string");return typeof t=="symbol"?t:t+""}function MK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LK(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $K(e){return e.index!=null}var y3=(e,t,r,n)=>{if(t==null)return Vs;var a=LK(e,t,r);if(a==null)return Vs;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if($K(a)){if(i)return Mh(Mh({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Mh(Mh({},Vs),{},{coordinate:a.coordinate})};function IK(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function zK(e,t){var r=IK(e),n=t[0],a=t[1];if(r===void 0)return!1;var i=Math.min(n,a),o=Math.max(n,a);return r>=i&&r<=o}function FK(e,t,r){if(r==null||t==null)return!0;var n=or(e,t);return n==null||!ji(r)?!0:zK(n,r)}var vk=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var i=Number(a);if(!xt(i))return a;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||FK(d,r,n)?String(c):null},x3=(e,t,r,n,a,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=a==null?void 0:a[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},v3=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},qu=e=>e.options.tooltipPayloadSearcher,Cc=e=>e.tooltip;function p_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p_(Object(r),!0).forEach(function(n){UK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UK(e,t,r){return(t=BK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BK(e){var t=qK(e,"string");return typeof t=="symbol"?t:t+""}function qK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WK(e,t){return e??t}var b3=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((f,g)=>{var p,{dataDefinedOnItem:y,settings:x}=g,v=WK(y,l),w=Array.isArray(v)?Q4(v,d,u):v,b=(p=x==null?void 0:x.dataKey)!==null&&p!==void 0?p:n,k=x==null?void 0:x.nameKey,j;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?j=FO(w,n,a):j=i(w,t,c,k),Array.isArray(j))j.forEach(_=>{var O=y_(y_({},x),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});f.push(VN({tooltipEntrySettings:O,dataKey:_.dataKey,payload:_.payload,value:or(_.payload,_.dataKey),name:_.name}))});else{var N;f.push(VN({tooltipEntrySettings:x,dataKey:b,payload:j,value:or(j,b),name:(N=or(j,k))!==null&&N!==void 0?N:x==null?void 0:x.name}))}return f},h)}},bk=V([er,ut,AA,ek,Zt],e3),HK=V([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),VK=V([Zt,Sc],DA),Wu=V([HK,er,VK],RA,{memoizeOptions:{resultEqualityCheck:am}}),KK=V([Wu],e=>e.filter(ok)),GK=V([Wu],$A,{memoizeOptions:{resultEqualityCheck:am}}),Pc=V([GK,Ti],IA),QK=V([KK,Ti,er],EA),wk=V([Pc,er,Wu],zA),w3=V([er],uk),YK=V([er],e=>e.allowDataOverflow),k3=V([w3,YK],lA),XK=V([Wu],e=>e.filter(ok)),JK=V([QK,XK,Zg,kA],UA),ZK=V([JK,Ti,Zt,k3],BA),eG=V([Wu],LA),tG=V([Pc,er,eG,hk,Zt],HA,{memoizeOptions:{resultEqualityCheck:nm}}),rG=V([VA,Zt,Sc],_c),nG=V([rG,Zt],QA),aG=V([KA,Zt,Sc],_c),sG=V([aG,Zt],YA),iG=V([GA,Zt,Sc],_c),oG=V([iG,Zt],XA),lG=V([nG,oG,sG],N0),cG=V([er,w3,k3,ZK,tG,lG,ut,Zt],JA),Hu=V([er,ut,Pc,wk,Zg,Zt,cG],ZA),dG=V([Hu,er,bk],t3),uG=V([er,Hu,dG,Zt],r3),j3=e=>{var t=Zt(e),r=Sc(e),n=!1;return Bu(e,t,r,n)},N3=V([er,j3],em),S3=V([er,bk,uG,N3],gk),hG=V([ut,wk,er,Zt],o3),fG=V([ut,wk,er,Zt],l3),gG=(e,t,r,n,a,i,o,l)=>{if(t){var{type:c}=t,d=Ia(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?zn(a[0]-a[1])*2*h:h,d&&o?o.map((f,g)=>({coordinate:n(f)+h,value:f,index:g,offset:h})):n.domain().map((f,g)=>({coordinate:n(f)+h,value:i?i[f]:f,index:g,offset:h}))}}},Os=V([ut,er,bk,S3,j3,hG,fG,Zt],gG),kk=V([d3,u3,NK],(e,t,r)=>h3(r.shared,e,t)),_3=e=>e.tooltip.settings.trigger,jk=e=>e.tooltip.settings.defaultIndex,dm=V([Cc,kk,_3,jk],y3),su=V([dm,Pc,Fu,Hu],vk),C3=V([Os,su],f3),mG=V([dm],e=>{if(e)return e.dataKey}),P3=V([Cc,kk,_3,jk],v3),pG=V([Cs,Ps,ut,vr,Os,jk,P3,qu],x3),yG=V([dm,pG],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),xG=V([dm],e=>e.active),vG=V([P3,su,Ti,Fu,C3,qu,kk],b3),bG=V([vG],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function x_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function v_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(r),!0).forEach(function(n){wG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wG(e,t,r){return(t=kG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kG(e){var t=jG(e,"string");return typeof t=="symbol"?t:t+""}function jG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NG=()=>Ne(er),SG=()=>{var e=NG(),t=Ne(Os),r=Ne(S3);return nc(!e||!r?void 0:v_(v_({},e),{},{scale:r}),t)};function b_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b_(Object(r),!0).forEach(function(n){_G(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _G(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=PG(e,"string");return typeof t=="symbol"?t:t+""}function PG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EG=(e,t,r,n)=>{var a=t.find(i=>i&&i.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},OG=(e,t,r,n)=>{var a=t.find(d=>d&&d.index===r);if(a){if(e==="centric"){var i=a.coordinate,{radius:o}=n;return Qo(Qo(Qo({},n),gr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,{angle:c}=n;return Qo(Qo(Qo({},n),gr(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function TG(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var E3=(e,t,r,n,a)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(zn(u-d)!==zn(h-u)){var g=[];if(zn(h-u)===zn(a[1]-a[0])){f=h;var p=u+a[1]-a[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{f=d;var y=h+a[1]-a[0];g[0]=Math.min(u,(y+u)/2),g[1]=Math.max(u,(y+u)/2)}var x=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>x[0]&&e<=x[1]||e>=g[0]&&e<=g[1]){({index:o}=r[c]);break}}else{var v=Math.min(d,h),w=Math.max(d,h);if(e>(v+u)/2&&e<=(w+u)/2){({index:o}=r[c]);break}}}else if(t){for(var b=0;b<l;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<l-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===l-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:o}=t[b]);break}}return o},O3=()=>Ne(ek),Nk=(e,t)=>t,T3=(e,t,r)=>r,Sk=(e,t,r,n)=>n,AG=V(Os,e=>Sg(e,t=>t.coordinate)),_k=V([Cc,Nk,T3,Sk],y3),Ck=V([_k,Pc,Fu,Hu],vk),DG=(e,t,r)=>{if(t!=null){var n=Cc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},A3=V([Cc,Nk,T3,Sk],v3),S0=V([Cs,Ps,ut,vr,Os,Sk,A3,qu],x3),RG=V([_k,S0],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),D3=V([Os,Ck],f3),MG=V([A3,Ck,Ti,Fu,D3,qu,Nk],b3),LG=V([_k,Ck],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),$G=(e,t,r,n,a,i,o)=>{if(!(!e||!r||!n||!a)&&TG(e,o)){var l=sU(e,t),c=E3(l,i,a,r,n),d=EG(t,a,c,e);return{activeIndex:String(c),activeCoordinate:d}}},IG=(e,t,r,n,a,i,o)=>{if(!(!e||!n||!a||!i||!r)){var l=Nq(e,r);if(l){var c=iU(l,t),d=E3(c,o,i,n,a),u=OG(t,i,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},zG=(e,t,r,n,a,i,o,l)=>{if(!(!e||!t||!n||!a||!i))return t==="horizontal"||t==="vertical"?$G(e,t,n,a,i,o,l):IG(e,t,r,n,a,i,o)},FG=V(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),UG=V(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Gt)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:jV}});function w_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(r),!0).forEach(function(n){BG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BG(e,t,r){return(t=qG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qG(e){var t=WG(e,"string");return typeof t=="symbol"?t:t+""}function WG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HG={},VG={zIndexMap:Object.values(Gt).reduce((e,t)=>k_(k_({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),HG)},KG=new Set(Object.values(Gt));function GG(e){return KG.has(e)}var R3=sn({name:"zIndex",initialState:VG,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Nt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!GG(r)&&delete e.zIndexMap[r])},prepare:Nt()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:Nt()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Nt()}}}),{registerZIndexPortal:QG,unregisterZIndexPortal:YG,registerZIndexPortalId:XG,unregisterZIndexPortalId:JG}=R3.actions,ZG=R3.reducer;function ba(e){var{zIndex:t,children:r}=e,n=LU(),a=n&&t!==void 0&&t!==0,i=br(),o=$t();m.useLayoutEffect(()=>a?(o(QG({zIndex:t})),()=>{o(YG({zIndex:t}))}):Cu,[o,t,a]);var l=Ne(d=>FG(d,t,i));if(!a)return r;if(!l)return null;var c=document.getElementById(l);return c?Do.createPortal(r,c):null}function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hv.apply(null,arguments)}function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(n){eQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eQ(e,t,r){return(t=tQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e){var t=rQ(e,"string");return typeof t=="symbol"?t:t+""}function rQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nQ(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return m.isValidElement(t)?m.cloneElement(t,n):m.createElement(r,n)}function aQ(e){var t,{coordinate:r,payload:n,index:a,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,h=r,f=n,g=a;if(!c||!h||u!=="ScatterChart"&&d!=="axis")return null;var p,y,x;if(u==="ScatterChart")p=h,y=zB,x=Gt.cursorLine;else if(u==="BarChart")p=FB(l,h,i,o),y=bT,x=Gt.cursorRectangle;else if(l==="radial"&&BO(h)){var{cx:v,cy:w,radius:b,startAngle:k,endAngle:j}=wT(h);p={cx:v,cy:w,startAngle:k,endAngle:j,innerRadius:b,outerRadius:b},y=jT,x=Gt.cursorLine}else p={points:Pq(l,h,i)},y=jd,x=Gt.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,_=Lh(Lh(Lh(Lh({stroke:"#ccc",pointerEvents:"none"},i),p),mg(c)),{},{payload:f,payloadIndex:g,className:et("recharts-tooltip-cursor",N)});return m.createElement(ba,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:x},m.createElement(nQ,{cursor:c,cursorComp:y,cursorProps:_}))}function sQ(e){var t=SG(),r=oT(),n=wc(),a=O3();return t==null||r==null||n==null||a==null?null:m.createElement(aQ,hv({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var M3=m.createContext(null),iQ=()=>m.useContext(M3),L3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,h||c,f),p=r?r+d:d;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],g]:c._events[p].push(g):(c._events[p]=g,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,g=h.length,p=new Array(g);f<g;f++)p[f]=h[f].fn;return p},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,g,p){var y=r?r+d:d;if(!this._events[y])return!1;var x=this._events[y],v=arguments.length,w,b;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,h),!0;case 4:return x.fn.call(x.context,u,h,f),!0;case 5:return x.fn.call(x.context,u,h,f,g),!0;case 6:return x.fn.call(x.context,u,h,f,g,p),!0}for(b=1,w=new Array(v-1);b<v;b++)w[b-1]=arguments[b];x.fn.apply(x.context,w)}else{var k=x.length,j;for(b=0;b<k;b++)switch(x[b].once&&this.removeListener(d,x[b].fn,void 0,!0),v){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,u);break;case 3:x[b].fn.call(x[b].context,u,h);break;case 4:x[b].fn.call(x[b].context,u,h,f);break;default:if(!w)for(j=1,w=new Array(v-1);j<v;j++)w[j-1]=arguments[j];x[b].fn.apply(x[b].context,w)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var g=r?r+d:d;if(!this._events[g])return this;if(!u)return o(this,g),this;var p=this._events[g];if(p.fn)p.fn===u&&(!f||p.once)&&(!h||p.context===h)&&o(this,g);else{for(var y=0,x=[],v=p.length;y<v;y++)(p[y].fn!==u||f&&!p[y].once||h&&p[y].context!==h)&&x.push(p[y]);x.length?this._events[g]=x.length===1?x[0]:x:o(this,g)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(L3);var oQ=L3.exports;const lQ=Ss(oQ);var iu=new lQ,fv="recharts.syncEvent.tooltip",N_="recharts.syncEvent.brush";function $3(e,t){if(t){var r=Number.parseInt(t,10);if(!kn(r))return e==null?void 0:e[r]}}var cQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},I3=sn({name:"options",initialState:cQ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dQ=I3.reducer,{createEventEmitter:uQ}=I3.actions;function hQ(e){return e.tooltip.syncInteraction}var fQ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},z3=sn({name:"chartData",initialState:fQ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:S_,setDataStartEndIndexes:gQ,setComputedData:fse}=z3.actions,mQ=z3.reducer,pQ=["x","y"];function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(n){yQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yQ(e,t,r){return(t=xQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQ(e){var t=vQ(e,"string");return typeof t=="symbol"?t:t+""}function vQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bQ(e,t){if(e==null)return{};var r,n,a=wQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kQ(){var e=Ne(tk),t=Ne(rk),r=$t(),n=Ne(jA),a=Ne(Os),i=wc(),o=Au(),l=Ne(c=>c.rootProps.className);m.useEffect(()=>{if(e==null)return Cu;var c=(d,u,h)=>{if(t!==h&&e===d){if(n==="index"){var f;if(o&&u!==null&&u!==void 0&&(f=u.payload)!==null&&f!==void 0&&f.coordinate&&u.payload.sourceViewBox){var g=u.payload.coordinate,{x:p,y}=g,x=bQ(g,pQ),{x:v,y:w,width:b,height:k}=u.payload.sourceViewBox,j=Yo(Yo({},x),{},{x:o.x+(b?(p-v)/b:0)*o.width,y:o.y+(k?(y-w)/k:0)*o.height});r(Yo(Yo({},u),{},{payload:Yo(Yo({},u.payload),{},{coordinate:j})}))}else r(u);return}if(a!=null){var N;if(typeof n=="function"){var _={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},O=n(a,_);N=a[O]}else n==="value"&&(N=a.find(W=>String(W.value)===u.payload.label));var{coordinate:T}=u.payload;if(N==null||u.payload.active===!1||T==null||o==null){r(dv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:P,y:S}=T,M=Math.min(P,o.x+o.width),F=Math.min(S,o.y+o.height),q={x:i==="horizontal"?N.coordinate:M,y:i==="horizontal"?F:N.coordinate},z=dv({active:u.payload.active,coordinate:q,dataKey:u.payload.dataKey,index:String(N.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox});r(z)}}};return iu.on(fv,c),()=>{iu.off(fv,c)}},[l,r,t,e,n,a,i,o])}function jQ(){var e=Ne(tk),t=Ne(rk),r=$t();m.useEffect(()=>{if(e==null)return Cu;var n=(a,i,o)=>{t!==o&&e===a&&r(gQ(i))};return iu.on(N_,n),()=>{iu.off(N_,n)}},[r,t,e])}function NQ(){var e=$t();m.useEffect(()=>{e(uQ())},[e]),kQ(),jQ()}function SQ(e,t,r,n,a,i){var o=Ne(g=>DG(g,e,t)),l=Ne(rk),c=Ne(tk),d=Ne(jA),u=Ne(hQ),h=u==null?void 0:u.active,f=Au();m.useEffect(()=>{if(!h&&c!=null&&l!=null){var g=dv({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:f});iu.emit(fv,c,g,l)}},[h,r,o,a,n,l,c,d,i,f])}function C_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(r),!0).forEach(function(n){_Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Q(e,t,r){return(t=CQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CQ(e){var t=PQ(e,"string");return typeof t=="symbol"?t:t+""}function PQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EQ(e){return e.dataKey}function OQ(e,t){return m.isValidElement(e)?m.cloneElement(e,t):typeof e=="function"?m.createElement(e,t):m.createElement(yB,t)}var E_=[],TQ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Lo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Pk(e){var t,r,n=Yt(e,TQ),{active:a,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:h,payloadUniqBy:f,position:g,reverseDirection:p,useTranslate3d:y,wrapperStyle:x,cursor:v,shared:w,trigger:b,defaultIndex:k,portal:j,axisId:N}=n,_=$t(),O=typeof k=="number"?String(k):k;m.useEffect(()=>{_(EK({shared:w,trigger:b,axisId:N,active:a,defaultIndex:O}))},[_,w,b,N,a,O]);var T=Au(),P=mT(),S=jK(w),{activeIndex:M,isActive:F}=(t=Ne(ue=>LG(ue,S,b,O)))!==null&&t!==void 0?t:{},q=Ne(ue=>MG(ue,S,b,O)),z=Ne(ue=>D3(ue,S,b,O)),W=Ne(ue=>RG(ue,S,b,O)),$=q,E=iQ(),U=(r=a??F)!==null&&r!==void 0?r:!1,[I,X]=v4([$,U]),Z=S==="axis"?z:void 0;SQ(S,b,W,Z,M,U);var te=j??E;if(te==null||T==null||S==null)return null;var K=$??E_;U||(K=E_),d&&K.length&&(K=o4(K.filter(ue=>ue.value!=null&&(ue.hide!==!0||n.includeHidden)),f,EQ));var le=K.length>0,me=m.createElement(NB,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:u,active:U,coordinate:W,hasPayload:le,offset:h,position:g,reverseDirection:p,useTranslate3d:y,viewBox:T,wrapperStyle:x,lastBoundingBox:I,innerRef:X,hasPortalFromProps:!!j},OQ(c,P_(P_({},n),{},{payload:K,label:Z,active:U,activeIndex:M,coordinate:W,accessibilityLayer:P})));return m.createElement(m.Fragment,null,Do.createPortal(me,te),U&&m.createElement(sQ,{cursor:v,tooltipEventType:S,coordinate:W,payload:K,index:M}))}function AQ(e,t,r){return(t=DQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DQ(e){var t=RQ(e,"string");return typeof t=="symbol"?t:t+""}function RQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MQ{constructor(t){AQ(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function O_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O_(Object(r),!0).forEach(function(n){$Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Q(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=zQ(e,"string");return typeof t=="symbol"?t:t+""}function zQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FQ={cacheSize:2e3,enableCache:!0},F3=LQ({},FQ),T_=new MQ(F3.cacheSize),UQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},A_="recharts_measurement_span";function BQ(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(l)}var D_=(e,t)=>{try{var r=document.getElementById(A_);r||(r=document.createElement("span"),r.setAttribute("id",A_),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,UQ,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Nd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lo.isSsr)return{width:0,height:0};if(!F3.enableCache)return D_(t,r);var n=BQ(t,r),a=T_.get(n);if(a)return a;var i=D_(t,r);return T_.set(n,i),i},R_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,WQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,U3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HQ=Object.keys(U3),xl="NaN";function VQ(e,t){return e*U3[t]}class Gr{static parse(t){var r,[,n,a]=(r=WQ.exec(t))!==null&&r!==void 0?r:[];return new Gr(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,kn(t)&&(this.unit=""),r!==""&&!qQ.test(r)&&(this.num=NaN,this.unit=""),HQ.includes(r)&&(this.num=VQ(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Gr(NaN,""):new Gr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Gr(NaN,""):new Gr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Gr(NaN,""):new Gr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Gr(NaN,""):new Gr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return kn(this.num)}}function B3(e){if(e.includes(xl))return xl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=R_.exec(t))!==null&&r!==void 0?r:[],o=Gr.parse(n??""),l=Gr.parse(i??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return xl;t=t.replace(R_,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,f]=(d=M_.exec(t))!==null&&d!==void 0?d:[],g=Gr.parse(u??""),p=Gr.parse(f??""),y=h==="+"?g.add(p):g.subtract(p);if(y.isNaN())return xl;t=t.replace(M_,y.toString())}return t}var L_=/\(([^()]*)\)/;function KQ(e){for(var t=e,r;(r=L_.exec(t))!=null;){var[,n]=r;t=t.replace(L_,B3(n))}return t}function GQ(e){var t=e.replace(/\s+/g,"");return t=KQ(t),t=B3(t),t}function QQ(e){try{return GQ(e)}catch{return xl}}function Rp(e){var t=QQ(e.slice(5,-1));return t===xl?"":t}var YQ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],XQ=["dx","dy","angle","className","breakAll"];function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gv.apply(null,arguments)}function $_(e,t){if(e==null)return{};var r,n,a=JQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var q3=/[ \f\n\r\t\v\u2028\u2029]+/,W3=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Qt(t)||(r?a=t.toString().split(""):a=t.toString().split(q3));var i=a.map(l=>({word:l,width:Nd(l,n).width})),o=r?0:Nd("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function ZQ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var H3=(e,t,r,n)=>e.reduce((a,i)=>{var{word:o,width:l}=i,c=a[a.length-1];if(c&&l!=null&&(t==null||n||c.width+l+r<Number(t)))c.words.push(o),c.width+=l+r;else{var d={words:[o],width:l};a.push(d)}return a},[]),V3=e=>e.reduce((t,r)=>t.width>r.width?t:r),eY="",I_=(e,t,r,n,a,i,o,l)=>{var c=e.slice(0,t),d=W3({breakAll:r,style:n,children:c+eY});if(!d)return[!1,[]];var u=H3(d.wordsWithComputedWidth,i,o,l),h=u.length>a||V3(u).width>Number(i);return[h,u]},tY=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=je(i),u=String(o),h=H3(t,n,r,a);if(!d||a)return h;var f=h.length>i||V3(h).width>Number(n);if(!f)return h;for(var g=0,p=u.length-1,y=0,x;g<=p&&y<=u.length-1;){var v=Math.floor((g+p)/2),w=v-1,[b,k]=I_(u,w,c,l,i,n,r,a),[j]=I_(u,v,c,l,i,n,r,a);if(!b&&!j&&(g=v+1),b&&j&&(p=v-1),!b&&j){x=k;break}y++}return x||h},z_=e=>{var t=Qt(e)?[]:e.toString().split(q3);return[{words:t,width:void 0}]},rY=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!Lo.isSsr){var l,c,d=W3({breakAll:i,children:n,style:a});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return z_(n);return tY({breakAll:i,children:n,maxLines:o,style:a},l,c,t,!!r)}return z_(n)},K3="#808080",nY={angle:0,breakAll:!1,capHeight:"0.71em",fill:K3,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Ek=m.forwardRef((e,t)=>{var r=Yt(e,nY),{x:n,y:a,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=r,h=$_(r,YQ),f=m.useMemo(()=>rY({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:g,dy:p,angle:y,className:x,breakAll:v}=h,w=$_(h,XQ);if(!Hn(n)||!Hn(a)||f.length===0)return null;var b=Number(n)+(je(g)?g:0),k=Number(a)+(je(p)?p:0);if(!xt(b)||!xt(k))return null;var j;switch(u){case"start":j=Rp("calc(".concat(o,")"));break;case"middle":j=Rp("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:j=Rp("calc(".concat(f.length-1," * -").concat(i,")"));break}var N=[];if(c){var _=f[0].width,{width:O}=h;N.push("scale(".concat(je(O)&&je(_)?O/_:1,")"))}return y&&N.push("rotate(".concat(y,", ").concat(b,", ").concat(k,")")),N.length&&(w.transform=N.join(" ")),m.createElement("text",gv({},yr(w),{ref:t,x:b,y:k,className:et("recharts-text",x),textAnchor:d,fill:l.includes("url")?K3:l}),f.map((T,P)=>{var S=T.words.join(v?"":" ");return m.createElement("tspan",{x:b,dy:P===0?j:i,key:"".concat(S,"-").concat(P)},S)}))});Ek.displayName="Text";var aY=["labelRef"];function sY(e,t){if(e==null)return{};var r,n,a=iY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function iY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F_(Object(r),!0).forEach(function(n){oY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oY(e,t,r){return(t=lY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return typeof t=="symbol"?t:t+""}function cY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},es.apply(null,arguments)}var G3=m.createContext(null),Q3=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:o,children:l}=e,c=m.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:o}),[t,r,n,a,i,o]);return m.createElement(G3.Provider,{value:c},l)},Y3=()=>{var e=m.useContext(G3),t=Au();return e||iT(t)},dY=m.createContext(null),uY=()=>{var e=m.useContext(dY),t=Ne(PA);return e||t},hY=e=>{var{value:t,formatter:r}=e,n=Qt(e.children)?t:e.children;return typeof r=="function"?r(n):n},Ok=e=>e!=null&&typeof e=="function",fY=(e,t)=>{var r=zn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gY=(e,t,r,n,a)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:f,clockWise:g}=a,p=(d+u)/2,y=fY(h,f),x=y>=0?1:-1,v,w;switch(t){case"insideStart":v=h+x*i,w=g;break;case"insideEnd":v=f-x*i,w=!g;break;case"end":v=f+x*i,w=g;break;default:throw new Error("Unsupported position ".concat(t))}w=y<=0?w:!w;var b=gr(l,c,p,v),k=gr(l,c,p,v+(w?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(w?0:1,`,
    `).concat(k.x,",").concat(k.y),N=Qt(e.id)?Vd("recharts-radial-line-"):e.id;return m.createElement("text",es({},n,{dominantBaseline:"central",className:et("recharts-radial-bar-label",o)}),m.createElement("defs",null,m.createElement("path",{id:N,d:j})),m.createElement("textPath",{xlinkHref:"#".concat(N)},r))},mY=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(r==="outside"){var{x:u,y:h}=gr(n,a,o+t,d);return{x:u,y:h,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:g,y:p}=gr(n,a,f,d);return{x:g,y:p,textAnchor:"middle",verticalAnchor:"middle"}},mv=e=>"cx"in e&&je(e.cx),pY=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!mv(r)&&(i=r);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,h=o,f=o+(c-d)/2,g=(h+f)/2,p=(c+d)/2,y=h+c/2,x=u>=0?1:-1,v=x*n,w=x>0?"end":"start",b=x>0?"start":"end",k=c>=0?1:-1,j=k*n,N=k>0?"end":"start",_=k>0?"start":"end";if(a==="top"){var O={x:h+c/2,y:l-v,textAnchor:"middle",verticalAnchor:w};return Mt(Mt({},O),i?{height:Math.max(l-i.y,0),width:c}:{})}if(a==="bottom"){var T={x:f+d/2,y:l+u+v,textAnchor:"middle",verticalAnchor:b};return Mt(Mt({},T),i?{height:Math.max(i.y+i.height-(l+u),0),width:d}:{})}if(a==="left"){var P={x:g-j,y:l+u/2,textAnchor:N,verticalAnchor:"middle"};return Mt(Mt({},P),i?{width:Math.max(P.x-i.x,0),height:u}:{})}if(a==="right"){var S={x:g+p+j,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return Mt(Mt({},S),i?{width:Math.max(i.x+i.width-S.x,0),height:u}:{})}var M=i?{width:p,height:u}:{};return a==="insideLeft"?Mt({x:g+j,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},M):a==="insideRight"?Mt({x:g+p-j,y:l+u/2,textAnchor:N,verticalAnchor:"middle"},M):a==="insideTop"?Mt({x:h+c/2,y:l+v,textAnchor:"middle",verticalAnchor:b},M):a==="insideBottom"?Mt({x:f+d/2,y:l+u-v,textAnchor:"middle",verticalAnchor:w},M):a==="insideTopLeft"?Mt({x:h+j,y:l+v,textAnchor:_,verticalAnchor:b},M):a==="insideTopRight"?Mt({x:h+c-j,y:l+v,textAnchor:N,verticalAnchor:b},M):a==="insideBottomLeft"?Mt({x:f+j,y:l+u-v,textAnchor:_,verticalAnchor:w},M):a==="insideBottomRight"?Mt({x:f+d-j,y:l+u-v,textAnchor:N,verticalAnchor:w},M):a&&typeof a=="object"&&(je(a.x)||vs(a.x))&&(je(a.y)||vs(a.y))?Mt({x:o+ki(a.x,p),y:l+ki(a.y,u),textAnchor:"end",verticalAnchor:"end"},M):Mt({x:y,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},M)},yY={angle:0,offset:5,zIndex:Gt.label,position:"middle",textBreakAll:!1};function Bs(e){var t=Yt(e,yY),{viewBox:r,position:n,value:a,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=uY(),h=Y3(),f=n==="center"?h:u??h,g,p,y;if(r==null?g=f:mv(r)?g=r:g=iT(r),!g||Qt(a)&&Qt(i)&&!m.isValidElement(o)&&typeof o!="function")return null;var x=Mt(Mt({},t),{},{viewBox:g});if(m.isValidElement(o)){var v=sY(x,aY);return m.cloneElement(o,v)}if(typeof o=="function"){if(p=m.createElement(o,x),m.isValidElement(p))return p}else p=hY(t);var w=yr(t);if(mv(g)){if(n==="insideStart"||n==="insideEnd"||n==="end")return gY(t,n,p,w,g);y=mY(g,t.offset,t.position)}else y=pY(t,g);return m.createElement(ba,{zIndex:t.zIndex},m.createElement(Ek,es({ref:d,className:et("recharts-label",l)},w,y,{textAnchor:ZQ(w.textAnchor)?w.textAnchor:y.textAnchor,breakAll:c}),p))}Bs.displayName="Label";var xY=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?m.createElement(Bs,es({key:"label-implicit"},n)):Hn(e)?m.createElement(Bs,es({key:"label-implicit",value:e},n)):m.isValidElement(e)?e.type===Bs?m.cloneElement(e,Mt({key:"label-implicit"},n)):m.createElement(Bs,es({key:"label-implicit",content:e},n)):Ok(e)?m.createElement(Bs,es({key:"label-implicit",content:e},n)):e&&typeof e=="object"?m.createElement(Bs,es({},e,{key:"label-implicit"},n)):null};function X3(e){var{label:t,labelRef:r}=e,n=Y3();return xY(t,n,r)||null}var J3={},Z3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Z3);var eD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(eD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z3,r=eD,n=jg;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(J3);var vY=J3.last;const bY=Ss(vY);var wY=["valueAccessor"],kY=["dataKey","clockWise","id","textBreakAll","zIndex"];function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(null,arguments)}function U_(e,t){if(e==null)return{};var r,n,a=jY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var NY=e=>Array.isArray(e.value)?bY(e.value):e.value,tD=m.createContext(void 0),rD=tD.Provider,nD=m.createContext(void 0);nD.Provider;function SY(){return m.useContext(tD)}function _Y(){return m.useContext(nD)}function df(e){var{valueAccessor:t=NY}=e,r=U_(e,wY),{dataKey:n,clockWise:a,id:i,textBreakAll:o,zIndex:l}=r,c=U_(r,kY),d=SY(),u=_Y(),h=d||u;return!h||!h.length?null:m.createElement(ba,{zIndex:l??Gt.label},m.createElement(wn,{className:"recharts-label-list"},h.map((f,g)=>{var p,y=Qt(n)?t(f,g):or(f&&f.payload,n),x=Qt(i)?{}:{id:"".concat(i,"-").concat(g)};return m.createElement(Bs,_0({key:"label-".concat(g)},yr(f),c,x,{fill:(p=r.fill)!==null&&p!==void 0?p:f.fill,parentViewBox:f.parentViewBox,value:y,textBreakAll:o,viewBox:f.viewBox,index:g,zIndex:0}))})))}df.displayName="LabelList";function aD(e){var{label:t}=e;return t?t===!0?m.createElement(df,{key:"labelList-implicit"}):m.isValidElement(t)||Ok(t)?m.createElement(df,{key:"labelList-implicit",content:t}):typeof t=="object"?m.createElement(df,_0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pv.apply(null,arguments)}var sD=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=et("recharts-dot",a);return je(t)&&je(r)&&je(n)?m.createElement("circle",pv({},Wn(e),rw(e),{className:i,cx:t,cy:r,r:n})):null},CY={radiusAxis:{},angleAxis:{}},PY=sn({name:"polarAxis",initialState:CY,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),EY=PY.reducer,Tk=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,iD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(iD);var OY=iD.isPlainObject;const TY=Ss(OY);function B_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B_(Object(r),!0).forEach(function(n){AY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AY(e,t,r){return(t=DY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DY(e){var t=RY(e,"string");return typeof t=="symbol"?t:t+""}function RY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C0.apply(null,arguments)}var W_=(e,t,r,n,a)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+a),o+="L ".concat(e+r-i/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},MY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LY=e=>{var t=Yt(e,MY),{x:r,y:n,upperWidth:a,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:h}=t,f=m.useRef(null),[g,p]=m.useState(-1),y=m.useRef(a),x=m.useRef(i),v=m.useRef(o),w=m.useRef(r),b=m.useRef(n),k=Hg(e,"trapezoid-");if(m.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var q=f.current.getTotalLength();q&&p(q)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||o!==+o||a===0&&i===0||o===0)return null;var j=et("recharts-trapezoid",l);if(!h)return m.createElement("g",null,m.createElement("path",C0({},yr(t),{className:j,d:W_(r,n,a,i,o)})));var N=y.current,_=x.current,O=v.current,T=w.current,P=b.current,S="0px ".concat(g===-1?1:g,"px"),M="".concat(g,"px 0px"),F=pT(["strokeDasharray"],d,c);return m.createElement(Wg,{animationId:k,key:k,canBegin:g>0,duration:d,easing:c,isActive:h,begin:u},q=>{var z=zt(N,a,q),W=zt(_,i,q),$=zt(O,o,q),E=zt(T,r,q),U=zt(P,n,q);f.current&&(y.current=z,x.current=W,v.current=$,w.current=E,b.current=U);var I=q>0?{transition:F,strokeDasharray:M}:{strokeDasharray:S};return m.createElement("path",C0({},yr(t),{className:j,d:W_(E,U,z,W,$),ref:f,style:q_(q_({},I),t.style)}))})},$Y=["option","shapeType","propTransformer","activeClassName"];function IY(e,t){if(e==null)return{};var r,n,a=zY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(r),!0).forEach(function(n){FY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t,r){return(t=UY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=BY(e,"string");return typeof t=="symbol"?t:t+""}function BY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qY(e,t){return P0(P0({},t),e)}function WY(e,t){return e==="symbols"}function V_(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return m.createElement(bT,r);case"trapezoid":return m.createElement(LY,r);case"sector":return m.createElement(jT,r);case"symbols":if(WY(t))return m.createElement(tw,r);break;case"curve":return m.createElement(jd,r);default:return null}}function HY(e){return m.isValidElement(e)?e.props:e}function VY(e){var{option:t,shapeType:r,propTransformer:n=qY,activeClassName:a="recharts-active-shape"}=e,i=IY(e,$Y),o;if(m.isValidElement(t))o=m.cloneElement(t,P0(P0({},i),HY(t)));else if(typeof t=="function")o=t(i);else if(TY(t)&&typeof t!="boolean"){var l=n(t,i);o=m.createElement(V_,{shapeType:r,elementProps:l})}else{var c=i;o=m.createElement(V_,{shapeType:r,elementProps:c})}return i.isActive?m.createElement(wn,{className:a},o):o}function oD(e){var{tooltipEntrySettings:t}=e,r=$t(),n=br(),a=m.useRef(null);return m.useLayoutEffect(()=>{n||(a.current===null?r(_K(t)):a.current!==t&&r(CK({prev:a.current,next:t})),a.current=t)},[t,r,n]),m.useLayoutEffect(()=>()=>{a.current&&(r(PK(a.current)),a.current=null)},[r]),null}function lD(e){var{legendPayload:t}=e,r=$t(),n=br(),a=m.useRef(null);return m.useLayoutEffect(()=>{n||(a.current===null?r(YU(t)):a.current!==t&&r(XU({prev:a.current,next:t})),a.current=t)},[r,n,t]),m.useLayoutEffect(()=>()=>{a.current&&(r(JU(a.current)),a.current=null)},[r]),null}var Mp,KY=()=>{var[e]=m.useState(()=>Vd("uid-"));return e},GY=(Mp=xR.useId)!==null&&Mp!==void 0?Mp:KY;function cD(e,t){var r=GY();return t||(e?"".concat(e,"-").concat(r):r)}var QY=m.createContext(void 0),dD=e=>{var{id:t,type:r,children:n}=e,a=cD("recharts-".concat(r),t);return m.createElement(QY.Provider,{value:a},n(a))},YY={cartesianItems:[],polarItems:[]},uD=sn({name:"graphicalItems",initialState:YY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ha(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Nt()},removeCartesianGraphicalItem:{reducer(e,t){var r=ha(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Nt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nt()},removePolarGraphicalItem:{reducer(e,t){var r=ha(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Nt()}}}),{addCartesianGraphicalItem:XY,replaceCartesianGraphicalItem:JY,removeCartesianGraphicalItem:ZY,addPolarGraphicalItem:gse,removePolarGraphicalItem:mse}=uD.actions,eX=uD.reducer,tX=e=>{var t=$t(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(XY(e)):r.current!==e&&t(JY({prev:r.current,next:e})),r.current=e},[t,e]),m.useLayoutEffect(()=>()=>{r.current&&(t(ZY(r.current)),r.current=null)},[t]),null},hD=m.memo(tX),rX=["points"];function K_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K_(Object(r),!0).forEach(function(n){nX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nX(e,t,r){return(t=aX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aX(e){var t=sX(e,"string");return typeof t=="symbol"?t:t+""}function sX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E0.apply(null,arguments)}function iX(e,t){if(e==null)return{};var r,n,a=oX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lX(e){var{option:t,dotProps:r,className:n}=e;if(m.isValidElement(t))return m.cloneElement(t,r);if(typeof t=="function")return t(r);var a=et(n,typeof t!="boolean"?t.className:""),i=r??{},o=iX(i,rX);return m.createElement(sD,E0({},o,{className:a}))}function cX(e,t){return e==null?!1:t?!0:e.length===1}function fD(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Gt.scatter}=e;if(!cX(t,r))return null;var u=Tk(r),h=Q9(r),f=t.map((p,y)=>{var x,v,w=Lp(Lp(Lp({r:3},o),h),{},{index:y,cx:(x=p.x)!==null&&x!==void 0?x:void 0,cy:(v=p.y)!==null&&v!==void 0?v:void 0,dataKey:i,value:p.value,payload:p.payload,points:t});return m.createElement(lX,{key:"dot-".concat(y),option:r,dotProps:w,className:a})}),g={};return l&&c!=null&&(g.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),m.createElement(ba,{zIndex:d},m.createElement(wn,E0({className:n},g),f))}function G_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(r),!0).forEach(function(n){dX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dX(e,t,r){return(t=uX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uX(e){var t=hX(e,"string");return typeof t=="symbol"?t:t+""}function hX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fX={xAxis:{},yAxis:{},zAxis:{}},gD=sn({name:"cartesianAxis",initialState:fX,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Nt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Nt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Nt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=Q_(Q_({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:gX,replaceXAxis:mX,removeXAxis:pX,addYAxis:yX,replaceYAxis:xX,removeYAxis:vX,addZAxis:pse,replaceZAxis:yse,removeZAxis:xse,updateYAxisWidth:bX}=gD.actions,wX=gD.reducer,kX=V([vr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),jX=V([kX,Cs,Ps],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),um=()=>Ne(jX),NX=()=>Ne(bG);function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){SX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SX(e,t,r){return(t=_X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _X(e){var t=CX(e,"string");return typeof t=="symbol"?t:t+""}function CX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PX=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i,clipPath:o}=e;if(a===!1||t.x==null||t.y==null)return null;var l={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=$p($p($p({},l),mg(a)),rw(a)),d;return m.isValidElement(a)?d=m.cloneElement(a,c):typeof a=="function"?d=a(c):d=m.createElement(sD,c),m.createElement(wn,{className:"recharts-active-dot",clipPath:o},d)};function yv(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,clipPath:i,zIndex:o=Gt.activeDot}=e,l=Ne(su),c=NX();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return Qt(d)?null:m.createElement(ba,{zIndex:o},m.createElement(PX,{point:d,childIndex:Number(l),mainColor:r,dataKey:a,activeDot:n,clipPath:i}))}var EX={},OX=sn({name:"errorBars",initialState:EX,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),TX=OX.reducer,AX=["children"];function DX(e,t){if(e==null)return{};var r,n,a=RX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MX={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},LX=m.createContext(MX);function $X(e){var{children:t}=e,r=DX(e,AX);return m.createElement(LX.Provider,{value:r},t)}function Ak(e,t){var r,n,a=Ne(d=>za(d,e)),i=Ne(d=>Fa(d,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:tr.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:rr.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function mD(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=um(),{needClipX:i,needClipY:o,needClip:l}=Ak(t,r);if(!l||!a)return null;var{x:c,y:d,width:u,height:h}=a;return m.createElement("clipPath",{id:"clipPath-".concat(n)},m.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var IX={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=m;function zX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FX=typeof Object.is=="function"?Object.is:zX,UX=Vu.useSyncExternalStore,BX=Vu.useRef,qX=Vu.useEffect,WX=Vu.useMemo,HX=Vu.useDebugValue;IX.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=BX(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=WX(function(){function c(g){if(!d){if(d=!0,u=g,g=n(g),a!==void 0&&o.hasValue){var p=o.value;if(a(p,g))return h=p}return h=g}if(p=h,FX(u,g))return p;var y=n(g);return a!==void 0&&a(p,y)?(u=g,p):(u=g,h=y)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,a]);var l=UX(e,i[0],i[1]);return qX(function(){o.hasValue=!0,o.value=l},[l]),HX(l),l};function VX(e){e()}function KX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){VX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var X_={notify(){},get:()=>[]};function GX(e,t){let r,n=X_,a=0,i=!1;function o(y){u();const x=n.subscribe(y);let v=!1;return()=>{v||(v=!0,x(),h())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function d(){return i}function u(){a++,r||(r=e.subscribe(c),n=KX())}function h(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=X_)}function f(){i||(i=!0,u())}function g(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:g,getListeners:()=>n};return p}var QX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YX=QX(),XX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JX=XX(),ZX=()=>YX||JX?m.useLayoutEffect:m.useEffect,eJ=ZX();function J_(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function tJ(e,t){if(J_(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!J_(e[r[a]],t[r[a]]))return!1;return!0}var Ip=Symbol.for("react-redux-context"),zp=typeof globalThis<"u"?globalThis:{};function rJ(){if(!m.createContext)return{};const e=zp[Ip]??(zp[Ip]=new Map);let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var nJ=rJ();function aJ(e){const{children:t,context:r,serverState:n,store:a}=e,i=m.useMemo(()=>{const c=GX(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=m.useMemo(()=>a.getState(),[a]);eJ(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||nJ;return m.createElement(l.Provider,{value:i},t)}var sJ=aJ,iJ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function oJ(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function hm(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(iJ.has(n)){if(e[n]==null&&t[n]==null)continue;if(!tJ(e[n],t[n]))return!1}else if(!oJ(e[n],t[n]))return!1;return!0}var lJ=e=>{var{chartData:t}=e,r=$t(),n=br();return m.useEffect(()=>n?()=>{}:(r(S_(t)),()=>{r(S_(void 0))}),[t,r,n]),null},Z_={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},cJ=sn({name:"brush",initialState:Z_,reducers:{setBrushSettings(e,t){return t.payload==null?Z_:t.payload}}}),dJ=cJ.reducer;function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(n){pD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pD(e,t,r){return(t=uJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uJ(e){var t=hJ(e,"string");return typeof t=="symbol"?t:t+""}function hJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fJ=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return{x:Math.min(r,a),y:Math.min(n,i),width:Math.abs(a-r),height:Math.abs(i-n)}},gJ=e=>{var{x1:t,y1:r,x2:n,y2:a}=e;return fJ({x:t,y:r},{x:n,y:a})};class fm{static create(t){return new fm(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}pD(fm,"EPS",1e-4);var mJ=e=>{var t=Object.keys(e).reduce((r,n)=>$h($h({},r),{},{[n]:fm.create(e[n])}),{});return $h($h({},t),{},{apply(r){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(i=>{var[o,l]=i;return[o,t[o].apply(l,{bandAware:n,position:a})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function pJ(e){return(e%180+180)%180}var yJ=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=pJ(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},xJ={dots:[],areas:[],lines:[]},yD=sn({name:"referenceElements",initialState:xJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ha(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ha(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ha(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:vse,removeDot:bse,addArea:wse,removeArea:kse,addLine:vJ,removeLine:bJ}=yD.actions,wJ=yD.reducer,xD=m.createContext(void 0),kJ=e=>{var{children:t}=e,[r]=m.useState("".concat(Vd("recharts"),"-clip")),n=um();if(n==null)return null;var{x:a,y:i,width:o,height:l}=n;return m.createElement(xD.Provider,{value:r},m.createElement("defs",null,m.createElement("clipPath",{id:r},m.createElement("rect",{x:a,y:i,height:l,width:o}))),t)},jJ=()=>m.useContext(xD);function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){NJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NJ(e,t,r){return(t=SJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SJ(e){var t=_J(e,"string");return typeof t=="symbol"?t:t+""}function _J(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O0.apply(null,arguments)}var CJ=(e,t)=>{var r;if(m.isValidElement(e))r=m.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{if(!xt(t.x1)||!xt(t.y1)||!xt(t.x2)||!xt(t.y2))return null;r=m.createElement("line",O0({},t,{className:"recharts-reference-line-line"}))}return r},PJ=(e,t,r,n,a,i)=>{var{x:o,width:l}=i,c=a.y.apply(e,{position:r});if(kn(c)||t==="discard"&&!a.y.isInRange(c))return null;var d=[{x:o+l,y:c},{x:o,y:c}];return n==="left"?d.reverse():d},EJ=(e,t,r,n,a,i)=>{var{y:o,height:l}=i,c=a.x.apply(e,{position:r});if(kn(c)||t==="discard"&&!a.x.isInRange(c))return null;var d=[{x:c,y:o+l},{x:c,y:o}];return n==="top"?d.reverse():d},OJ=(e,t,r,n)=>{var a=e.map(i=>n.apply(i,{position:r}));return t==="discard"&&a.some(i=>!n.isInRange(i))?null:a},TJ=(e,t,r,n,a,i)=>{var{x:o,y:l,segment:c,ifOverflow:d}=i,u=Hn(o),h=Hn(l);return h?PJ(l,d,r,a,e,t):u?EJ(o,d,r,n,e,t):c!=null&&c.length===2?OJ(c,d,r,e):null};function AJ(e){var t=$t();return m.useEffect(()=>(t(vJ(e)),()=>{t(bJ(e))})),null}function DJ(e){var{xAxisId:t,yAxisId:r,shape:n,className:a,ifOverflow:i}=e,o=br(),l=jJ(),c=Ne(N=>za(N,t)),d=Ne(N=>Fa(N,r)),u=Ne(N=>Ni(N,"xAxis",t,o)),h=Ne(N=>Ni(N,"yAxis",r,o)),f=Au();if(!l||!f||c==null||d==null||u==null||h==null)return null;var g=mJ({x:u,y:h}),p=TJ(g,f,e.position,c.orientation,d.orientation,e);if(!p)return null;var[{x:y,y:x},{x:v,y:w}]=p,b=i==="hidden"?"url(#".concat(l,")"):void 0,k=r2(r2({clipPath:b},yr(e)),{},{x1:y,y1:x,x2:v,y2:w}),j=gJ({x1:y,y1:x,x2:v,y2:w});return m.createElement(ba,{zIndex:e.zIndex},m.createElement(wn,{className:et("recharts-reference-line",a)},CJ(n,k),m.createElement(Q3,O0({},j,{lowerWidth:j.width,upperWidth:j.width}),m.createElement(X3,{label:e.label}),e.children)))}var RJ={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Gt.line};function vD(e){var t=Yt(e,RJ);return m.createElement(m.Fragment,null,m.createElement(AJ,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),m.createElement(DJ,t))}vD.displayName="ReferenceLine";function bD(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function MJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return yJ(n,r)}function LJ(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:l}=e;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function T0(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function $J(e,t){return bD(e,t+1)}function IJ(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:bD(n,d)};var y=c,x,v=()=>(x===void 0&&(x=r(p,y)),x),w=p.coordinate,b=c===0||T0(e,w,v,u,l);b||(c=0,u=o,d+=1),b&&(u=w+e*(v()/2+a),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(n){zJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zJ(e,t,r){return(t=FJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FJ(e){var t=UJ(e,"string");return typeof t=="symbol"?t:t+""}function UJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(f){var g=i[f],p,y=()=>(p===void 0&&(p=r(g,f)),p);if(f===o-1){var x=e*(g.coordinate+e*y()/2-c);i[f]=g=Sr(Sr({},g),{},{tickCoord:x>0?g.coordinate-x*e:g.coordinate})}else i[f]=g=Sr(Sr({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var v=T0(e,g.tickCoord,y,l,c);v&&(c=g.tickCoord-e*(y()/2+a),i[f]=Sr(Sr({},g),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return i}function qJ(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=n[l-1],h=r(u,l-1),f=e*(u.coordinate+e*h/2-d);if(o[l-1]=u=Sr(Sr({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate}),u.tickCoord!=null){var g=T0(e,u.tickCoord,()=>h,c,d);g&&(d=u.tickCoord-e*(h/2+a),o[l-1]=Sr(Sr({},u),{},{isShow:!0}))}}for(var p=i?l-1:l,y=function(w){var b=o[w],k,j=()=>(k===void 0&&(k=r(b,w)),k);if(w===0){var N=e*(b.coordinate-e*j()/2-c);o[w]=b=Sr(Sr({},b),{},{tickCoord:N<0?b.coordinate-N*e:b.coordinate})}else o[w]=b=Sr(Sr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=T0(e,b.tickCoord,j,c,d);_&&(c=b.tickCoord+e*(j()/2+a),o[w]=Sr(Sr({},b),{},{isShow:!0}))}},x=0;x<p;x++)y(x);return o}function Dk(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!a||!a.length||!n)return[];if(je(c)||Lo.isSsr){var f;return(f=$J(a,je(c)?c:0))!==null&&f!==void 0?f:[]}var g=[],p=l==="top"||l==="bottom"?"width":"height",y=u&&p==="width"?Nd(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=(b,k)=>{var j=typeof d=="function"?d(b.value,k):b.value;return p==="width"?MJ(Nd(j,{fontSize:t,letterSpacing:r}),y,h):Nd(j,{fontSize:t,letterSpacing:r})[p]},v=a.length>=2?zn(a[1].coordinate-a[0].coordinate):1,w=LJ(i,v,p);return c==="equidistantPreserveStart"?IJ(v,w,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?g=qJ(v,w,x,a,o,c==="preserveStartEnd"):g=BJ(v,w,x,a,o),g.filter(b=>b.isShow))}var WJ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+i,d=o+c+l+(r?n:0);return Math.round(d)}return 0},HJ=["axisLine","width","height","className","hide","ticks","axisType"];function VJ(e,t){if(e==null)return{};var r,n,a=KJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eo.apply(null,arguments)}function a2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(r),!0).forEach(function(n){GJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GJ(e,t,r){return(t=QJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var us={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Gt.axis};function XJ(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=It(It(It({},c),Wn(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=It(It({},d),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var h=+(i==="left"&&!o||i==="right"&&o);d=It(It({},d),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+a})}return m.createElement("line",Eo({},d,{className:et("recharts-cartesian-axis-line",kg(l,"className"))}))}function JJ(e,t,r,n,a,i,o,l,c){var d,u,h,f,g,p,y=l?-1:1,x=e.tickSize||o,v=je(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,f=r+ +!l*a,h=f-y*x,p=h-y*c,g=v;break;case"left":h=f=e.coordinate,u=t+ +!l*n,d=u-y*x,g=d-y*c,p=v;break;case"right":h=f=e.coordinate,u=t+ +l*n,d=u+y*x,g=d+y*c,p=v;break;default:d=u=e.coordinate,f=r+ +l*a,h=f+y*x,p=h+y*c,g=v;break}return{line:{x1:d,y1:h,x2:u,y2:f},tick:{x:g,y:p}}}function ZJ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function eZ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function tZ(e){var{option:t,tickProps:r,value:n}=e,a,i=et(r.className,"recharts-cartesian-axis-tick-value");if(m.isValidElement(t))a=m.cloneElement(t,It(It({},r),{},{className:i}));else if(typeof t=="function")a=t(It(It({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=et(o,t==null?void 0:t.className)),a=m.createElement(Ek,Eo({},r,{className:o}),n)}return a}var rZ=m.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:h,x:f,y:g,width:p,height:y,tickSize:x,tickMargin:v,fontSize:w,letterSpacing:b,getTicksConfig:k,events:j,axisType:N}=e,_=Dk(It(It({},k),{},{ticks:r}),w,b),O=ZJ(u,h),T=eZ(u,h),P=Wn(k),S=mg(n),M={};typeof a=="object"&&(M=a);var F=It(It({},P),{},{fill:"none"},M),q=_.map($=>It({entry:$},JJ($,f,g,p,y,u,x,h,v))),z=q.map($=>{var{entry:E,line:U}=$;return m.createElement(wn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},a&&m.createElement("line",Eo({},F,U,{className:et("recharts-cartesian-axis-tick-line",kg(a,"className"))})))}),W=q.map(($,E)=>{var{entry:U,tick:I}=$,X=It(It(It(It({textAnchor:O,verticalAnchor:T},P),{},{stroke:"none",fill:i},S),I),{},{index:E,payload:U,visibleTicksCount:_.length,tickFormatter:o,padding:c},d);return m.createElement(wn,Eo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},qO(j,U,E)),n&&m.createElement(tZ,{option:n,tickProps:X,value:"".concat(typeof o=="function"?o(U.value,E):U.value).concat(l||"")}))});return m.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},W.length>0&&m.createElement(ba,{zIndex:Gt.label},m.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},W)),z.length>0&&m.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},z))}),nZ=m.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:o,ticks:l,axisType:c}=e,d=VJ(e,HJ),[u,h]=m.useState(""),[f,g]=m.useState(""),p=m.useRef(null);m.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var x;return WJ({ticks:p.current,label:(x=e.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=m.useCallback(x=>{if(x){var v=x.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=v;var w=v[0];if(w){var b=window.getComputedStyle(w),k=b.fontSize,j=b.letterSpacing;(k!==u||j!==f)&&(h(k),g(j))}}},[u,f]);return o||n!=null&&n<=0||a!=null&&a<=0?null:m.createElement(ba,{zIndex:e.zIndex},m.createElement(wn,{className:et("recharts-cartesian-axis",i)},m.createElement(XJ,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Wn(e)}),m.createElement(rZ,{ref:y,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),m.createElement(Q3,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},m.createElement(X3,{label:e.label,labelRef:e.labelRef}),e.children)))}),Rk=m.forwardRef((e,t)=>{var r=Yt(e,us);return m.createElement(nZ,Eo({},r,{ref:t}))});Rk.displayName="CartesianAxis";var aZ=["x1","y1","x2","y2","key"],sZ=["offset"],iZ=["xAxisId","yAxisId"],oZ=["xAxisId","yAxisId"];function s2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(r),!0).forEach(function(n){lZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lZ(e,t,r){return(t=cZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cZ(e){var t=dZ(e,"string");return typeof t=="symbol"?t:t+""}function dZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}function A0(e,t){if(e==null)return{};var r,n,a=uZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hZ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:l}=e;return m.createElement("rect",{x:n,y:a,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function wD(e){var{option:t,lineItemProps:r}=e,n;if(m.isValidElement(t))n=m.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:i,y1:o,x2:l,y2:c,key:d}=r,u=A0(r,aZ),h=(a=Wn(u))!==null&&a!==void 0?a:{},f=A0(h,sZ);n=m.createElement("line",Xi({},f,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return n}function fZ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var i=A0(e,iZ),o=a.map((l,c)=>{var d=Cr(Cr({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return m.createElement(wD,{key:"line-".concat(c),option:n,lineItemProps:d})});return m.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function gZ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var i=A0(e,oZ),o=a.map((l,c)=>{var d=Cr(Cr({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return m.createElement(wD,{option:n,lineItemProps:d,key:"line-".concat(c)})});return m.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function mZ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(h=>Math.round(h+a-a)).sort((h,f)=>h-f);a!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var g=!d[f+1],p=g?a+o-h:d[f+1]-h;if(p<=0)return null;var y=f%t.length;return m.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:p,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function pZ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+a-a)).sort((h,f)=>h-f);a!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var g=!d[f+1],p=g?a+o-h:d[f+1]-h;if(p<=0)return null;var y=f%r.length;return m.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:p,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var yZ=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return Y4(Dk(Cr(Cr(Cr({},us),r),{},{ticks:X4(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},xZ=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return Y4(Dk(Cr(Cr(Cr({},us),r),{},{ticks:X4(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},vZ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Gt.grid};function gm(e){var t=Sw(),r=_w(),n=oT(),a=Cr(Cr({},Yt(e,vZ)),{},{x:je(e.x)?e.x:n.left,y:je(e.y)?e.y:n.top,width:je(e.width)?e.width:n.width,height:je(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:g}=a,p=br(),y=Ne(T=>g_(T,"xAxis",i,p)),x=Ne(T=>g_(T,"yAxis",o,p));if(!La(d)||!La(u)||!je(l)||!je(c))return null;var v=a.verticalCoordinatesGenerator||yZ,w=a.horizontalCoordinatesGenerator||xZ,{horizontalPoints:b,verticalPoints:k}=a;if((!b||!b.length)&&typeof w=="function"){var j=f&&f.length,N=w({yAxis:x?Cr(Cr({},x),{},{ticks:j?f:x.ticks}):void 0,width:t??d,height:r??u,offset:n},j?!0:h);a0(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(b=N)}if((!k||!k.length)&&typeof v=="function"){var _=g&&g.length,O=v({xAxis:y?Cr(Cr({},y),{},{ticks:_?g:y.ticks}):void 0,width:t??d,height:r??u,offset:n},_?!0:h);a0(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(k=O)}return m.createElement(ba,{zIndex:a.zIndex},m.createElement("g",{className:"recharts-cartesian-grid"},m.createElement(hZ,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),m.createElement(mZ,Xi({},a,{horizontalPoints:b})),m.createElement(pZ,Xi({},a,{verticalPoints:k})),m.createElement(fZ,Xi({},a,{offset:n,horizontalPoints:b,xAxis:y,yAxis:x})),m.createElement(gZ,Xi({},a,{offset:n,verticalPoints:k,xAxis:y,yAxis:x}))))}gm.displayName="CartesianGrid";var kD=(e,t,r,n)=>cm(e,"xAxis",t,n),jD=(e,t,r,n)=>lm(e,"xAxis",t,n),ND=(e,t,r,n)=>cm(e,"yAxis",r,n),SD=(e,t,r,n)=>lm(e,"yAxis",r,n),bZ=V([ut,kD,ND,jD,SD],(e,t,r,n,a)=>Ia(e,"xAxis")?nc(t,n,!1):nc(r,a,!1)),wZ=(e,t,r,n,a)=>a;function kZ(e){return e.type==="line"}var jZ=V([ck,wZ],(e,t)=>e.filter(kZ).find(r=>r.id===t)),NZ=V([ut,kD,ND,jD,SD,jZ,bZ,Jg],(e,t,r,n,a,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:h,data:f}=i,g;if(f!=null&&f.length>0?g=f:g=c==null?void 0:c.slice(d,u+1),g!=null)return WZ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:h,bandSize:o,displayedData:g})}});function _D(e){var t=mg(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,o=Number(a),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=n),{r:o,strokeWidth:l}}return{r,strokeWidth:n}}var SZ=["id"],_Z=["type","layout","connectNulls","needClip","shape"],CZ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ou.apply(null,arguments)}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(n){PZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PZ(e,t,r){return(t=EZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EZ(e){var t=OZ(e,"string");return typeof t=="symbol"?t:t+""}function OZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mk(e,t){if(e==null)return{};var r,n,a=TZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AZ=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Rg(r,t),payload:e}]},DZ=m.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Rg(o,t),hide:l,type:d,color:n,unit:c}};return m.createElement(oD,{tooltipEntrySettings:u})}),CD=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function RZ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var MZ=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return CD(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,d=0;c<r.length;d+=r[c],++c)if(d+r[c]>i){l=[...r.slice(0,c),i-d];break}var u=l.length%2===0?[0,o]:[o];return[...RZ(r,a),...l,...u].map(h=>"".concat(h,"px")).join(", ")};function LZ(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n,l=Mk(n,SZ),c=Wn(l);return m.createElement(fD,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:c,needClip:o,clipPathId:t})}function $Z(e){var{showLabels:t,children:r,points:n}=e,a=m.useMemo(()=>n==null?void 0:n.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Pa(Pa({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return m.createElement(rD,{value:t?a:void 0},r)}function o2(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,h=Mk(i,_Z),f=Pa(Pa({},yr(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return m.createElement(m.Fragment,null,(n==null?void 0:n.length)>1&&m.createElement(VY,ou({shapeType:"curve",option:u},f,{pathRef:r})),m.createElement(LZ,{points:n,clipPathId:t,props:i}))}function IZ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function zZ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,animateNewValues:f,width:g,height:p,onAnimationEnd:y,onAnimationStart:x}=r,v=a.current,w=Hg(o,"recharts-line-"),b=m.useRef(w),[k,j]=m.useState(!1),N=!k,_=m.useCallback(()=>{typeof y=="function"&&y(),j(!1)},[y]),O=m.useCallback(()=>{typeof x=="function"&&x(),j(!0)},[x]),T=IZ(n.current),P=m.useRef(0);b.current!==w&&(P.current=i.current,b.current=w);var S=P.current;return m.createElement($Z,{points:o,showLabels:N},r.children,m.createElement(Wg,{animationId:w,begin:d,duration:u,isActive:c,easing:h,onAnimationEnd:_,onAnimationStart:O,key:w},M=>{var F=zt(S,T+S,M),q=Math.min(F,T),z;if(c)if(l){var W="".concat(l).split(/[,\s]+/gim).map(U=>parseFloat(U));z=MZ(q,T,W)}else z=CD(T,q);else z=l==null?void 0:String(l);if(M>0&&T>0&&(a.current=o,i.current=Math.max(i.current,q)),v){var $=v.length/o.length,E=M===1?o:o.map((U,I)=>{var X=Math.floor(I*$);if(v[X]){var Z=v[X];return Pa(Pa({},U),{},{x:zt(Z.x,U.x,M),y:zt(Z.y,U.y,M)})}return f?Pa(Pa({},U),{},{x:zt(g*2,U.x,M),y:zt(p/2,U.y,M)}):Pa(Pa({},U),{},{x:U.x,y:U.y})});return a.current=E,m.createElement(o2,{props:r,points:E,clipPathId:t,pathRef:n,strokeDasharray:z})}return m.createElement(o2,{props:r,points:o,clipPathId:t,pathRef:n,strokeDasharray:z})}),m.createElement(aD,{label:r.label}))}function FZ(e){var{clipPathId:t,props:r}=e,n=m.useRef(null),a=m.useRef(0),i=m.useRef(null);return m.createElement(zZ,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var UZ=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:or(e.payload,t)}};class BZ extends m.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:o,top:l,left:c,width:d,height:u,id:h,needClip:f,zIndex:g}=this.props;if(t)return null;var p=et("recharts-line",a),y=h,{r:x,strokeWidth:v}=_D(r),w=Tk(r),b=x*2+v,k=f?"url(#clipPath-".concat(w?"":"dots-").concat(y,")"):void 0;return m.createElement(ba,{zIndex:g},m.createElement(wn,{className:p},f&&m.createElement("defs",null,m.createElement(mD,{clipPathId:y,xAxisId:i,yAxisId:o}),!w&&m.createElement("clipPath",{id:"clipPath-dots-".concat(y)},m.createElement("rect",{x:c-b/2,y:l-b/2,width:d+b,height:u+b}))),m.createElement($X,{xAxisId:i,yAxisId:o,data:n,dataPointFormatter:UZ,errorBarOffset:0},m.createElement(FZ,{props:this.props,clipPathId:y}))),m.createElement(yv,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var PD={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Gt.line,type:"linear"};function qZ(e){var t=Yt(e,PD),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:h,legendType:f,xAxisId:g,yAxisId:p,id:y}=t,x=Mk(t,CZ),{needClip:v}=Ak(g,p),w=um(),b=wc(),k=br(),j=Ne(P=>NZ(P,g,p,k,y));if(b!=="horizontal"&&b!=="vertical"||j==null||w==null)return null;var{height:N,width:_,x:O,y:T}=w;return m.createElement(BZ,ou({},x,{id:y,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:h,legendType:f,xAxisId:g,yAxisId:p,points:j,layout:b,height:N,width:_,left:O,top:T,needClip:v}))}function WZ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var h=or(d,o);if(t==="horizontal"){var f=n0({axis:r,ticks:a,bandSize:l,entry:d,index:u}),g=Qt(h)?null:n.scale(h);return{x:f,y:g,value:h,payload:d}}var p=Qt(h)?null:r.scale(h),y=n0({axis:n,ticks:i,bandSize:l,entry:d,index:u});return p==null||y==null?null:{x:p,y,value:h,payload:d}}).filter(Boolean)}function HZ(e){var t=Yt(e,PD),r=br();return m.createElement(dD,{id:t.id,type:"line"},n=>m.createElement(m.Fragment,null,m.createElement(lD,{legendPayload:AZ(t)}),m.createElement(DZ,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),m.createElement(hD,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),m.createElement(qZ,ou({},t,{id:n}))))}var Lk=m.memo(HZ,hm);Lk.displayName="Line";var ED=(e,t,r,n)=>cm(e,"xAxis",t,n),OD=(e,t,r,n)=>lm(e,"xAxis",t,n),TD=(e,t,r,n)=>cm(e,"yAxis",r,n),AD=(e,t,r,n)=>lm(e,"yAxis",r,n),VZ=V([ut,ED,TD,OD,AD],(e,t,r,n,a)=>Ia(e,"xAxis")?nc(t,n,!1):nc(r,a,!1)),KZ=(e,t,r,n,a)=>a,DD=V([ck,KZ],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),GZ=(e,t,r,n,a)=>{var i,o=DD(e,t,r,n,a);if(o!=null){var l=ut(e),c=Ia(l,"xAxis"),d;if(c?d=cv(e,"yAxis",r,n):d=cv(e,"xAxis",t,n),d!=null){var{stackId:u}=o,h=ik(o);if(!(u==null||h==null)){var f=(i=d[u])===null||i===void 0?void 0:i.stackedData;return f==null?void 0:f.find(g=>g.key===h)}}}},QZ=V([ut,ED,TD,OD,AD,GZ,Jg,VZ,DD,yV],(e,t,r,n,a,i,o,l,c,d)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:f}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null)){var{data:g}=c,p;if(g&&g.length>0?p=g:p=u==null?void 0:u.slice(h,f+1),p!=null)return gee({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:h,areaSettings:c,stackedData:i,displayedData:p,chartBaseValue:d,bandSize:l})}}),YZ=["id"],XZ=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}function RD(e,t){if(e==null)return{};var r,n,a=JZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function l2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(r),!0).forEach(function(n){ZZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZZ(e,t,r){return(t=eee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eee(e){var t=tee(e,"string");return typeof t=="symbol"?t:t+""}function tee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0(e,t){return e&&e!=="none"?e:t}var ree=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:D0(n,a),value:Rg(r,t),payload:e}]},nee=m.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Rg(o,t),hide:l,type:d,color:D0(n,i),unit:c}};return m.createElement(oD,{tooltipEntrySettings:u})});function aee(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:i,dataKey:o}=n,l=Wn(n);return m.createElement(fD,{points:r,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:a,clipPathId:t})}function see(e){var{showLabels:t,children:r,points:n}=e,a=n.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return vl(vl({},c),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return m.createElement(rD,{value:t?a:void 0},r)}function c2(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:i}=e,{layout:o,type:l,stroke:c,connectNulls:d,isRange:u}=i,{id:h}=i,f=RD(i,YZ),g=Wn(f),p=yr(f);return m.createElement(m.Fragment,null,(t==null?void 0:t.length)>1&&m.createElement(wn,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},m.createElement(jd,yo({},p,{id:h,points:t,connectNulls:d,type:l,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),c!=="none"&&m.createElement(jd,yo({},g,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),c!=="none"&&u&&m.createElement(jd,yo({},g,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:r}))),m.createElement(aee,{points:t,props:f,clipPathId:a}))}function iee(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,i=n[0].y,o=n[n.length-1].y;if(!xt(i)||!xt(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.x||0));return je(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),je(c)?m.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function oee(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,i=n[0].x,o=n[n.length-1].x;if(!xt(i)||!xt(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.y||0));return je(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),je(c)?m.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function lee(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:i}=e;return r==="vertical"?m.createElement(iee,{alpha:t,points:n,baseLine:a,strokeWidth:i}):m.createElement(oee,{alpha:t,points:n,baseLine:a,strokeWidth:i})}function cee(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:f,onAnimationEnd:g}=n,p=m.useMemo(()=>({points:o,baseLine:l}),[o,l]),y=Hg(p,"recharts-area-"),x=MU(),[v,w]=m.useState(!1),b=!v,k=m.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),j=m.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);if(x==null)return null;var N=a.current,_=i.current;return m.createElement(see,{showLabels:b,points:o},n.children,m.createElement(Wg,{animationId:y,begin:d,duration:u,isActive:c,easing:h,onAnimationEnd:k,onAnimationStart:j,key:y},O=>{if(N){var T=N.length/o.length,P=O===1?o:o.map((M,F)=>{var q=Math.floor(F*T);if(N[q]){var z=N[q];return vl(vl({},M),{},{x:zt(z.x,M.x,O),y:zt(z.y,M.y,O)})}return M}),S;return je(l)?S=zt(_,l,O):Qt(l)||kn(l)?S=zt(_,0,O):S=l.map((M,F)=>{var q=Math.floor(F*T);if(Array.isArray(_)&&_[q]){var z=_[q];return vl(vl({},M),{},{x:zt(z.x,M.x,O),y:zt(z.y,M.y,O)})}return M}),O>0&&(a.current=P,i.current=S),m.createElement(c2,{points:P,baseLine:S,needClip:t,clipPathId:r,props:n})}return O>0&&(a.current=o,i.current=l),m.createElement(wn,null,c&&m.createElement("defs",null,m.createElement("clipPath",{id:"animationClipPath-".concat(r)},m.createElement(lee,{alpha:O,points:o,baseLine:l,layout:x,strokeWidth:n.strokeWidth}))),m.createElement(wn,{clipPath:"url(#animationClipPath-".concat(r,")")},m.createElement(c2,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n})))}),m.createElement(aD,{label:n.label}))}function dee(e){var{needClip:t,clipPathId:r,props:n}=e,a=m.useRef(null),i=m.useRef();return m.createElement(cee,{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:i})}class uee extends m.PureComponent{render(){var{hide:t,dot:r,points:n,className:a,top:i,left:o,needClip:l,xAxisId:c,yAxisId:d,width:u,height:h,id:f,baseLine:g,zIndex:p}=this.props;if(t)return null;var y=et("recharts-area",a),x=f,{r:v,strokeWidth:w}=_D(r),b=Tk(r),k=v*2+w,j=l?"url(#clipPath-".concat(b?"":"dots-").concat(x,")"):void 0;return m.createElement(ba,{zIndex:p},m.createElement(wn,{className:y},l&&m.createElement("defs",null,m.createElement(mD,{clipPathId:x,xAxisId:c,yAxisId:d}),!b&&m.createElement("clipPath",{id:"clipPath-dots-".concat(x)},m.createElement("rect",{x:o-k/2,y:i-k/2,width:u+k,height:h+k}))),m.createElement(dee,{needClip:l,clipPathId:x,props:this.props})),m.createElement(yv,{points:n,mainColor:D0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}),this.props.isRange&&Array.isArray(g)&&m.createElement(yv,{points:g,mainColor:D0(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}))}}var MD={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Gt.area};function hee(e){var t,r=Yt(e,MD),{activeDot:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:f,legendType:g,stroke:p,xAxisId:y,yAxisId:x}=r,v=RD(r,XZ),w=wc(),b=O3(),{needClip:k}=Ak(y,x),j=br(),{points:N,isRange:_,baseLine:O}=(t=Ne(q=>QZ(q,y,x,j,e.id)))!==null&&t!==void 0?t:{},T=um();if(w!=="horizontal"&&w!=="vertical"||T==null||b!=="AreaChart"&&b!=="ComposedChart")return null;var{height:P,width:S,x:M,y:F}=T;return!N||!N.length?null:m.createElement(uee,yo({},v,{activeDot:n,animationBegin:a,animationDuration:i,animationEasing:o,baseLine:O,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:P,hide:h,layout:w,isAnimationActive:f==="auto"?!Lo.isSsr:f,isRange:_,legendType:g,needClip:k,points:N,stroke:p,width:S,left:M,top:F,xAxisId:y,yAxisId:x}))}var fee=(e,t,r,n,a)=>{var i=r??t;if(je(i))return i;var o=e==="horizontal"?a:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function gee(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:a,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:f,bandSize:g}=e,p=a&&a.length,y=fee(i,o,r,l,c),x=i==="horizontal",v=!1,w=d.map((k,j)=>{var N;p?N=a[u+j]:(N=or(k,n),Array.isArray(N)?v=!0:N=[y,N]);var _=N[1]==null||p&&!t&&or(k,n)==null;return x?{x:n0({axis:l,ticks:h,bandSize:g,entry:k,index:j}),y:_?null:c.scale(N[1]),value:N,payload:k}:{x:_?null:l.scale(N[1]),y:n0({axis:c,ticks:f,bandSize:g,entry:k,index:j}),value:N,payload:k}}),b;return p||v?b=w.map(k=>{var j=Array.isArray(k.value)?k.value[0]:null;return x?{x:k.x,y:j!=null&&k.y!=null?c.scale(j):null,payload:k.payload}:{x:j!=null?l.scale(j):null,y:k.y,payload:k.payload}}):b=x?c.scale(y):l.scale(y),{points:w,baseLine:b,isRange:v}}function mee(e){var t=Yt(e,MD),r=br();return m.createElement(dD,{id:t.id,type:"area"},n=>m.createElement(m.Fragment,null,m.createElement(lD,{legendPayload:ree(t)}),m.createElement(nee,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),m.createElement(hD,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:tU(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),m.createElement(hee,yo({},t,{id:n}))))}var LD=m.memo(mee,hm);LD.displayName="Area";var pee=["domain","range"],yee=["domain","range"];function d2(e,t){if(e==null)return{};var r,n,a=xee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function u2(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function $D(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=d2(e,pee),{domain:i,range:o}=t,l=d2(t,yee);return!u2(r,i)||!u2(n,o)?!1:hm(a,l)}var vee=["dangerouslySetInnerHTML","ticks"],bee=["id"];function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xv.apply(null,arguments)}function h2(e,t){if(e==null)return{};var r,n,a=wee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kee(e){var t=$t(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(gX(e)):r.current!==e&&t(mX({prev:r.current,next:e})),r.current=e},[e,t]),m.useLayoutEffect(()=>()=>{r.current&&(t(pX(r.current)),r.current=null)},[t]),null}var jee=e=>{var{xAxisId:t,className:r}=e,n=Ne(Z4),a=br(),i="xAxis",o=Ne(g=>Ni(g,i,t,a)),l=Ne(g=>c3(g,i,t,a)),c=Ne(g=>cK(g,t)),d=Ne(g=>mK(g,t)),u=Ne(g=>OA(g,t));if(c==null||d==null||u==null)return null;var h=h2(e,vee),f=h2(u,bee);return m.createElement(Rk,xv({},h,f,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:et("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l,axisType:i}))},Nee={allowDataOverflow:tr.allowDataOverflow,allowDecimals:tr.allowDecimals,allowDuplicatedCategory:tr.allowDuplicatedCategory,angle:tr.angle,axisLine:us.axisLine,height:tr.height,hide:!1,includeHidden:tr.includeHidden,interval:tr.interval,minTickGap:tr.minTickGap,mirror:tr.mirror,orientation:tr.orientation,padding:tr.padding,reversed:tr.reversed,scale:tr.scale,tick:tr.tick,tickCount:tr.tickCount,tickLine:us.tickLine,tickSize:us.tickSize,type:tr.type,xAxisId:0},See=e=>{var t=Yt(e,Nee);return m.createElement(m.Fragment,null,m.createElement(kee,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),m.createElement(jee,t))},mm=m.memo(See,$D);mm.displayName="XAxis";var _ee=["dangerouslySetInnerHTML","ticks"],Cee=["id"];function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(null,arguments)}function f2(e,t){if(e==null)return{};var r,n,a=Pee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Pee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Eee(e){var t=$t(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(yX(e)):r.current!==e&&t(xX({prev:r.current,next:e})),r.current=e},[e,t]),m.useLayoutEffect(()=>()=>{r.current&&(t(vX(r.current)),r.current=null)},[t]),null}var Oee=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=m.useRef(null),o=m.useRef(null),l=Ne(Z4),c=br(),d=$t(),u="yAxis",h=Ne(w=>Ni(w,u,t,c)),f=Ne(w=>xK(w,t)),g=Ne(w=>yK(w,t)),p=Ne(w=>c3(w,u,t,c)),y=Ne(w=>TA(w,t));if(m.useLayoutEffect(()=>{if(!(n!=="auto"||!f||Ok(a)||m.isValidElement(a)||y==null)){var w=i.current;if(w){var b=w.getCalculatedWidth();Math.round(f.width)!==Math.round(b)&&d(bX({id:t,width:b}))}}},[p,f,d,a,t,n,y]),f==null||g==null||y==null)return null;var x=f2(e,_ee),v=f2(y,Cee);return m.createElement(Rk,vv({},x,v,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:et("recharts-".concat(u," ").concat(u),r),viewBox:l,ticks:p,axisType:u}))},Tee={allowDataOverflow:rr.allowDataOverflow,allowDecimals:rr.allowDecimals,allowDuplicatedCategory:rr.allowDuplicatedCategory,angle:rr.angle,axisLine:us.axisLine,hide:!1,includeHidden:rr.includeHidden,interval:rr.interval,minTickGap:rr.minTickGap,mirror:rr.mirror,orientation:rr.orientation,padding:rr.padding,reversed:rr.reversed,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,tickLine:us.tickLine,tickSize:us.tickSize,type:rr.type,width:rr.width,yAxisId:0},Aee=e=>{var t=Yt(e,Tee);return m.createElement(m.Fragment,null,m.createElement(Eee,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),m.createElement(Oee,t))},pm=m.memo(Aee,$D);pm.displayName="YAxis";var Dee=(e,t)=>t,$k=V([Dee,ut,PA,Zt,N3,Os,AG,vr],zG),Ik=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ID=Vn("mouseClick"),zD=Ou();zD.startListening({actionCreator:ID,effect:(e,t)=>{var r=e.payload,n=$k(t.getState(),Ik(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(TK({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bv=Vn("mouseMove"),FD=Ou(),Ih=null;FD.startListening({actionCreator:bv,effect:(e,t)=>{var r=e.payload;Ih!==null&&cancelAnimationFrame(Ih);var n=Ik(r);Ih=requestAnimationFrame(()=>{var a=t.getState(),i=xk(a,a.tooltip.settings.shared);if(i==="axis"){var o=$k(a,n);(o==null?void 0:o.activeIndex)!=null?t.dispatch(p3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(m3())}Ih=null})}});var g2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},UD=sn({name:"rootProps",initialState:g2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:g2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Ree=UD.reducer,{updateOptions:Mee}=UD.actions,Lee=sn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),$ee=Lee.reducer,BD=Vn("keyDown"),qD=Vn("focus"),zk=Ou();zk.startListening({actionCreator:BD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=vk(a,Pc(r),Fu(r),Hu(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=Os(r);if(i==="Enter"){var d=S0(r,"axis","hover",String(a.index));t.dispatch(uv({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var u=kK(r),h=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,g=l+f*h;if(!(c==null||g>=c.length||g<0)){var p=S0(r,"axis","hover",String(g));t.dispatch(uv({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}}});zk.startListening({actionCreator:qD,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=S0(r,"axis","hover",String(i));t.dispatch(uv({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var On=Vn("externalEvent"),WD=Ou(),Fp=new Map;WD.startListening({actionCreator:On,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,i=Fp.get(a);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:yG(l),activeDataKey:mG(l),activeIndex:su(l),activeLabel:C3(l),activeTooltipIndex:su(l),isTooltipActive:xG(l)};r(c,n)}finally{Fp.delete(a)}});Fp.set(a,o)}}});var Iee=V([Cc],e=>e.tooltipItemPayloads),zee=V([Iee,qu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),HD=Vn("touchMove"),VD=Ou();VD.startListening({actionCreator:HD,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=xk(n,n.tooltip.settings.shared);if(a==="axis"){var i=$k(n,Ik({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(p3({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(lU),u=(o=c.getAttribute(cU))!==null&&o!==void 0?o:void 0,h=zee(t.getState(),d,u);t.dispatch(OK({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}}});var Fee=w4({brush:dJ,cartesianAxis:wX,chartData:mQ,errorBars:TX,graphicalItems:eX,layout:HF,legend:ZU,options:dQ,polarAxis:EY,polarOptions:$ee,referenceElements:wJ,rootProps:Ree,tooltip:AK,zIndex:ZG}),Uee=function(t){return pF({reducer:Fee,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([zD.middleware,FD.middleware,zk.middleware,WD.middleware,VD.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(L4({type:"raf"}))},devTools:Lo.devToolsEnabled})};function Bee(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=br(),i=m.useRef(null);if(a)return r;i.current==null&&(i.current=Uee(t));var o=hw;return m.createElement(sJ,{context:o,store:i.current},r)}function qee(e){var{layout:t,margin:r}=e,n=$t(),a=br();return m.useEffect(()=>{a||(n(BF(t)),n(UF(r)))},[n,a,t,r]),null}var Wee=m.memo(qee,hm);function Hee(e){var t=$t();return m.useEffect(()=>{t(Mee(e))},[t,e]),null}function m2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",a=cD("".concat(n).concat(t)),i=$t();return m.useLayoutEffect(()=>(i(XG({zIndex:t,elementId:a,isPanorama:r})),()=>{i(JG({zIndex:t,isPanorama:r}))}),[i,t,a,r]),m.createElement("g",{id:a})}function p2(e){var{children:t,isPanorama:r}=e,n=Ne(UG);if(!n||n.length===0)return t;var a=n.filter(o=>o<0),i=n.filter(o=>o>0);return m.createElement(m.Fragment,null,a.map(o=>m.createElement(m2,{key:o,zIndex:o,isPanorama:r})),t,i.map(o=>m.createElement(m2,{key:o,zIndex:o,isPanorama:r})))}var Vee=["children"];function Kee(e,t){if(e==null)return{};var r,n,a=Gee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Gee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(null,arguments)}var Qee={width:"100%",height:"100%",display:"block"},Yee=m.forwardRef((e,t)=>{var r=Sw(),n=_w(),a=mT();if(!La(r)||!La(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=a?0:void 0,typeof o.role=="string"?u=o.role:u=a?"application":void 0),m.createElement(Yb,R0({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:n,style:Qee,ref:t}),i)}),Xee=e=>{var{children:t}=e,r=Ne(Ig);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return m.createElement(Yb,{width:n,height:a,x:o,y:i},t)},y2=m.forwardRef((e,t)=>{var{children:r}=e,n=Kee(e,Vee),a=br();return a?m.createElement(Xee,null,m.createElement(p2,{isPanorama:!0},r)):m.createElement(Yee,R0({ref:t},n),m.createElement(p2,{isPanorama:!1},r))});function Jee(){var e=$t(),[t,r]=m.useState(null),n=Ne(oU);return m.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;xt(i)&&i!==n&&e(WF(i))}},[t,e,n]),r}function x2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x2(Object(r),!0).forEach(function(n){ete(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ete(e,t,r){return(t=tte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tte(e){var t=rte(e,"string");return typeof t=="symbol"?t:t+""}function rte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oo.apply(null,arguments)}var nte=()=>(NQ(),null);function M0(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ate=m.forwardRef((e,t)=>{var r,n,a=m.useRef(null),[i,o]=m.useState({containerWidth:M0((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:M0((n=e.style)===null||n===void 0?void 0:n.height)}),l=m.useCallback((d,u)=>{o(h=>{var f=Math.round(d),g=Math.round(u);return h.containerWidth===f&&h.containerHeight===g?h:{containerWidth:f,containerHeight:g}})},[]),c=m.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:h}=d.getBoundingClientRect();l(u,h);var f=p=>{var{width:y,height:x}=p[0].contentRect;l(y,x)},g=new ResizeObserver(f);g.observe(d),a.current=g}},[t,l]);return m.useEffect(()=>()=>{var d=a.current;d!=null&&d.disconnect()},[l]),m.createElement(m.Fragment,null,m.createElement(zg,{width:i.containerWidth,height:i.containerHeight}),m.createElement("div",Oo({ref:c},e)))}),ste=m.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=m.useState({containerWidth:M0(r),containerHeight:M0(n)}),o=m.useCallback((c,d)=>{i(u=>{var h=Math.round(c),f=Math.round(d);return u.containerWidth===h&&u.containerHeight===f?u:{containerWidth:h,containerHeight:f}})},[]),l=m.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return m.createElement(m.Fragment,null,m.createElement(zg,{width:a.containerWidth,height:a.containerHeight}),m.createElement("div",Oo({ref:l},e)))}),ite=m.forwardRef((e,t)=>{var{width:r,height:n}=e;return m.createElement(m.Fragment,null,m.createElement(zg,{width:r,height:n}),m.createElement("div",Oo({ref:t},e)))}),ote=m.forwardRef((e,t)=>{var{width:r,height:n}=e;return vs(r)||vs(n)?m.createElement(ste,Oo({},e,{ref:t})):m.createElement(ite,Oo({},e,{ref:t}))});function lte(e){return e===!0?ate:ote}var cte=m.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:g,onTouchMove:p,onTouchStart:y,style:x,width:v,responsive:w,dispatchTouchEvents:b=!0}=e,k=m.useRef(null),j=$t(),[N,_]=m.useState(null),[O,T]=m.useState(null),P=Jee(),S=jw(),M=(S==null?void 0:S.width)>0?S.width:v,F=(S==null?void 0:S.height)>0?S.height:a,q=m.useCallback(D=>{P(D),typeof t=="function"&&t(D),_(D),T(D),D!=null&&(k.current=D)},[P,t,_,T]),z=m.useCallback(D=>{j(ID(D)),j(On({handler:i,reactEvent:D}))},[j,i]),W=m.useCallback(D=>{j(bv(D)),j(On({handler:d,reactEvent:D}))},[j,d]),$=m.useCallback(D=>{j(m3()),j(On({handler:u,reactEvent:D}))},[j,u]),E=m.useCallback(D=>{j(bv(D)),j(On({handler:h,reactEvent:D}))},[j,h]),U=m.useCallback(()=>{j(qD())},[j]),I=m.useCallback(D=>{j(BD(D.key))},[j]),X=m.useCallback(D=>{j(On({handler:o,reactEvent:D}))},[j,o]),Z=m.useCallback(D=>{j(On({handler:l,reactEvent:D}))},[j,l]),te=m.useCallback(D=>{j(On({handler:c,reactEvent:D}))},[j,c]),K=m.useCallback(D=>{j(On({handler:f,reactEvent:D}))},[j,f]),le=m.useCallback(D=>{j(On({handler:y,reactEvent:D}))},[j,y]),me=m.useCallback(D=>{b&&j(HD(D)),j(On({handler:p,reactEvent:D}))},[j,b,p]),ue=m.useCallback(D=>{j(On({handler:g,reactEvent:D}))},[j,g]),A=lte(w);return m.createElement(M3.Provider,{value:N},m.createElement(bO.Provider,{value:O},m.createElement(A,{width:M??(x==null?void 0:x.width),height:F??(x==null?void 0:x.height),className:et("recharts-wrapper",n),style:Zee({position:"relative",cursor:"default",width:M,height:F},x),onClick:z,onContextMenu:X,onDoubleClick:Z,onFocus:U,onKeyDown:I,onMouseDown:te,onMouseEnter:W,onMouseLeave:$,onMouseMove:E,onMouseUp:K,onTouchEnd:ue,onTouchMove:me,onTouchStart:le,ref:q},m.createElement(nte,null),r)))}),dte=["width","height","responsive","children","className","style","compact","title","desc"];function ute(e,t){if(e==null)return{};var r,n,a=hte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fte=m.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,h=ute(e,dte),f=Wn(h);return c?m.createElement(m.Fragment,null,m.createElement(zg,{width:r,height:n}),m.createElement(y2,{otherAttributes:f,title:d,desc:u},i)):m.createElement(cte,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},m.createElement(y2,{otherAttributes:f,title:d,desc:u,ref:t},m.createElement(kJ,null,i)))});function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}var gte={top:5,right:5,bottom:5,left:5},mte={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:gte,reverseStackOrder:!1,syncMethod:"index",responsive:!1},KD=m.forwardRef(function(t,r){var n,a=Yt(t.categoricalChartProps,mte),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return m.createElement(Bee,{preloadedState:{options:u},reduxStoreName:(n=d.id)!==null&&n!==void 0?n:i},m.createElement(lJ,{chartData:d.data}),m.createElement(Wee,{layout:a.layout,margin:a.margin}),m.createElement(Hee,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),m.createElement(fte,wv({},a,{ref:r})))}),pte=["axis"],GD=m.forwardRef((e,t)=>m.createElement(KD,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pte,tooltipPayloadSearcher:$3,categoricalChartProps:e,ref:t})),yte=["axis"],xte=m.forwardRef((e,t)=>m.createElement(KD,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yte,tooltipPayloadSearcher:$3,categoricalChartProps:e,ref:t}));function QD({data:e,title:t="Throughput (records/sec)",color:r="#3b82f6",height:n,onViewDetails:a}){const i=e.filter(f=>f&&typeof f.timestamp=="number"&&typeof f.value=="number"&&!isNaN(f.timestamp)&&!isNaN(f.value)&&isFinite(f.timestamp)&&isFinite(f.value)),o=i.map(f=>{const g=new Date(f.timestamp).toLocaleTimeString(),p=Number(f.value.toFixed(2));return isNaN(p)||!isFinite(p)?null:{time:g,value:p}}).filter(f=>f!==null),l=i.map(f=>f.value),c=l.length>0?(l.reduce((f,g)=>f+g,0)/l.length).toFixed(2):"0",d=l.length>0?Math.max(...l).toFixed(2):"0",u=l.length>0?l[l.length-1].toFixed(2):"0",h=o.length>0&&o.every(f=>!isNaN(f.value)&&isFinite(f.value));return s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 flex flex-col",style:n?{height:`${n}px`}:{height:"100%"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(os,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:["Current: ",s.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:u})]}),s.jsxs("span",{children:["Avg: ",s.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:c})]}),s.jsxs("span",{children:["Max: ",s.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:d})]})]})]})]}),a&&s.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),h?s.jsx("div",{className:"flex-1 min-h-0",children:s.jsx(Nw,{width:"100%",height:"100%",children:s.jsxs(GD,{data:o,children:[s.jsx(gm,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),s.jsx(mm,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"12px"}}),s.jsx(pm,{stroke:"#9ca3af",style:{fontSize:"12px"},label:{value:"rec/s",angle:-90,position:"insideLeft",style:{fill:"#9ca3af"}}}),s.jsx(Pk,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f9fafb"},labelStyle:{color:"#9ca3af"}}),s.jsx(qg,{}),s.jsx(Lk,{type:"monotone",dataKey:"value",stroke:r,strokeWidth:2,dot:!1,name:"Throughput",animationDuration:300})]})})}):s.jsx("div",{className:"flex items-center justify-center flex-1 text-gray-500 dark:text-gray-400",children:"No data available"})]})}function YD({data:e,title:t="Latency (milliseconds)",height:r,onViewDetails:n}){const a=e.map(u=>({time:new Date(u.timestamp).toLocaleTimeString(),value:u.value!=null?Number(u.value.toFixed(2)):0})),i=e.filter(u=>u.value!=null).map(u=>u.value),o=i.length>0?(i.reduce((u,h)=>u+h,0)/i.length).toFixed(2):"0",l=i.length>0?Math.max(...i).toFixed(2):"0",c=i.length>0?Math.min(...i).toFixed(2):"0",d=i.length>0?i[i.length-1].toFixed(2):"0";return s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 flex flex-col",style:r?{height:`${r}px`}:{height:"100%"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(Fr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:["Current: ",s.jsxs("strong",{className:"text-gray-900 dark:text-gray-100",children:[d,"ms"]})]}),s.jsxs("span",{children:["Avg: ",s.jsxs("strong",{className:"text-gray-900 dark:text-gray-100",children:[o,"ms"]})]}),s.jsxs("span",{children:["Min/Max: ",s.jsxs("strong",{className:"text-gray-900 dark:text-gray-100",children:[c,"/",l,"ms"]})]})]})]})]}),n&&s.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-3 py-2 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),a.length===0?s.jsx("div",{className:"flex items-center justify-center flex-1 text-gray-500 dark:text-gray-400",children:"No data available"}):s.jsx("div",{className:"flex-1 min-h-0",children:s.jsx(Nw,{width:"100%",height:"100%",children:s.jsxs(GD,{data:a,children:[s.jsx(gm,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),s.jsx(mm,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"12px"}}),s.jsx(pm,{stroke:"#9ca3af",style:{fontSize:"12px"},label:{value:"ms",angle:-90,position:"insideLeft",style:{fill:"#9ca3af"}}}),s.jsx(Pk,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f9fafb"},labelStyle:{color:"#9ca3af"}}),s.jsx(qg,{}),s.jsx(Lk,{type:"monotone",dataKey:"value",stroke:"#a855f7",strokeWidth:2,dot:!1,name:"Latency",animationDuration:300})]})})})]})}var XD={exports:{}},Ku={},kv={exports:{}};(function(e,t){(function(r,n){n(t)})(xn,function(r){function n(A){return function(G,ae,B,fe,be,Te,Ae){return A(G,ae,Ae)}}function a(A){return function(G,ae,B,fe){if(!G||!ae||typeof G!="object"||typeof ae!="object")return A(G,ae,B,fe);var be=fe.get(G),Te=fe.get(ae);if(be&&Te)return be===ae&&Te===G;fe.set(G,ae),fe.set(ae,G);var Ae=A(G,ae,B,fe);return fe.delete(G),fe.delete(ae),Ae}}function i(A,D){var G={};for(var ae in A)G[ae]=A[ae];for(var ae in D)G[ae]=D[ae];return G}function o(A){return A.constructor===Object||A.constructor==null}function l(A){return typeof A.then=="function"}function c(A,D){return A===D||A!==A&&D!==D}var d="[object Arguments]",u="[object Boolean]",h="[object Date]",f="[object RegExp]",g="[object Map]",p="[object Number]",y="[object Object]",x="[object Set]",v="[object String]",w=Object.prototype.toString;function b(A){var D=A.areArraysEqual,G=A.areDatesEqual,ae=A.areMapsEqual,B=A.areObjectsEqual,fe=A.areRegExpsEqual,be=A.areSetsEqual,Te=A.createIsNestedEqual,Ae=Te(H);function H(oe,R,re){if(oe===R)return!0;if(!oe||!R||typeof oe!="object"||typeof R!="object")return oe!==oe&&R!==R;if(o(oe)&&o(R))return B(oe,R,Ae,re);var Y=Array.isArray(oe),J=Array.isArray(R);if(Y||J)return Y===J&&D(oe,R,Ae,re);var we=w.call(oe);return we!==w.call(R)?!1:we===h?G(oe,R,Ae,re):we===f?fe(oe,R,Ae,re):we===g?ae(oe,R,Ae,re):we===x?be(oe,R,Ae,re):we===y||we===d?l(oe)||l(R)?!1:B(oe,R,Ae,re):we===u||we===p||we===v?c(oe.valueOf(),R.valueOf()):!1}return H}function k(A,D,G,ae){var B=A.length;if(D.length!==B)return!1;for(;B-- >0;)if(!G(A[B],D[B],B,B,A,D,ae))return!1;return!0}var j=a(k);function N(A,D){return c(A.valueOf(),D.valueOf())}function _(A,D,G,ae){var B=A.size===D.size;if(!B)return!1;if(!A.size)return!0;var fe={},be=0;return A.forEach(function(Te,Ae){if(B){var H=!1,oe=0;D.forEach(function(R,re){!H&&!fe[oe]&&(H=G(Ae,re,be,oe,A,D,ae)&&G(Te,R,Ae,re,A,D,ae))&&(fe[oe]=!0),oe++}),be++,B=H}}),B}var O=a(_),T="_owner",P=Object.prototype.hasOwnProperty;function S(A,D,G,ae){var B=Object.keys(A),fe=B.length;if(Object.keys(D).length!==fe)return!1;for(var be;fe-- >0;){if(be=B[fe],be===T){var Te=!!A.$$typeof,Ae=!!D.$$typeof;if((Te||Ae)&&Te!==Ae)return!1}if(!P.call(D,be)||!G(A[be],D[be],be,be,A,D,ae))return!1}return!0}var M=a(S);function F(A,D){return A.source===D.source&&A.flags===D.flags}function q(A,D,G,ae){var B=A.size===D.size;if(!B)return!1;if(!A.size)return!0;var fe={};return A.forEach(function(be,Te){if(B){var Ae=!1,H=0;D.forEach(function(oe,R){!Ae&&!fe[H]&&(Ae=G(be,oe,Te,R,A,D,ae))&&(fe[H]=!0),H++}),B=Ae}}),B}var z=a(q),W=Object.freeze({areArraysEqual:k,areDatesEqual:N,areMapsEqual:_,areObjectsEqual:S,areRegExpsEqual:F,areSetsEqual:q,createIsNestedEqual:n}),$=Object.freeze({areArraysEqual:j,areDatesEqual:N,areMapsEqual:O,areObjectsEqual:M,areRegExpsEqual:F,areSetsEqual:z,createIsNestedEqual:n}),E=b(W);function U(A,D){return E(A,D,void 0)}var I=b(i(W,{createIsNestedEqual:function(){return c}}));function X(A,D){return I(A,D,void 0)}var Z=b($);function te(A,D){return Z(A,D,new WeakMap)}var K=b(i($,{createIsNestedEqual:function(){return c}}));function le(A,D){return K(A,D,new WeakMap)}function me(A){return b(i(W,A(W)))}function ue(A){var D=b(i($,A($)));return function(G,ae,B){return B===void 0&&(B=new WeakMap),D(G,ae,B)}}r.circularDeepEqual=te,r.circularShallowEqual=le,r.createCustomCircularEqual=ue,r.createCustomEqual=me,r.deepEqual=U,r.sameValueZeroEqual=c,r.shallowEqual=X,Object.defineProperty(r,"__esModule",{value:!0})})})(kv,kv.exports);var Fk=kv.exports;const ym=Rv(H9);var He={},vte=function(t,r,n){return t===r?!0:t.className===r.className&&n(t.style,r.style)&&t.width===r.width&&t.autoSize===r.autoSize&&t.cols===r.cols&&t.draggableCancel===r.draggableCancel&&t.draggableHandle===r.draggableHandle&&n(t.verticalCompact,r.verticalCompact)&&n(t.compactType,r.compactType)&&n(t.layout,r.layout)&&n(t.margin,r.margin)&&n(t.containerPadding,r.containerPadding)&&t.rowHeight===r.rowHeight&&t.maxRows===r.maxRows&&t.isBounded===r.isBounded&&t.isDraggable===r.isDraggable&&t.isResizable===r.isResizable&&t.allowOverlap===r.allowOverlap&&t.preventCollision===r.preventCollision&&t.useCSSTransforms===r.useCSSTransforms&&t.transformScale===r.transformScale&&t.isDroppable===r.isDroppable&&n(t.resizeHandles,r.resizeHandles)&&n(t.resizeHandle,r.resizeHandle)&&t.onLayoutChange===r.onLayoutChange&&t.onDragStart===r.onDragStart&&t.onDrag===r.onDrag&&t.onDragStop===r.onDragStop&&t.onResizeStart===r.onResizeStart&&t.onResize===r.onResize&&t.onResizeStop===r.onResizeStop&&t.onDrop===r.onDrop&&n(t.droppingItem,r.droppingItem)&&n(t.innerRef,r.innerRef)};Object.defineProperty(He,"__esModule",{value:!0});He.bottom=Uk;He.childrenEqual=kte;He.cloneLayout=JD;He.cloneLayoutItem=xo;He.collides=xm;He.compact=e5;He.compactItem=t5;He.compactType=Lte;He.correctBounds=r5;He.fastPositionEqual=jte;He.fastRGLPropsEqual=void 0;He.getAllCollisions=n5;He.getFirstCollision=Ji;He.getLayoutItem=Bk;He.getStatics=qk;He.modifyLayout=ZD;He.moveElement=od;He.moveElementAwayFromCollision=Nv;He.noop=void 0;He.perc=Ste;He.resizeItemInDirection=Tte;He.setTopLeft=Dte;He.setTransform=Ate;He.sortLayoutItems=Qk;He.sortLayoutItemsByColRow=l5;He.sortLayoutItemsByRowCol=o5;He.synchronizeLayoutWithChildren=Rte;He.validateLayout=Mte;He.withLayoutItem=wte;var v2=Fk,id=bte(m);function bte(e){return e&&e.__esModule?e:{default:e}}function Uk(e){let t=0,r;for(let n=0,a=e.length;n<a;n++)r=e[n].y+e[n].h,r>t&&(t=r);return t}function JD(e){const t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=xo(e[r]);return t}function ZD(e,t){const r=Array(e.length);for(let n=0,a=e.length;n<a;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function wte(e,t,r){let n=Bk(e,t);return n?(n=r(xo(n)),e=ZD(e,n),[e,n]):[e,null]}function xo(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function kte(e,t){return(0,v2.deepEqual)(id.default.Children.map(e,r=>r==null?void 0:r.key),id.default.Children.map(t,r=>r==null?void 0:r.key))&&(0,v2.deepEqual)(id.default.Children.map(e,r=>r==null?void 0:r.props["data-grid"]),id.default.Children.map(t,r=>r==null?void 0:r.props["data-grid"]))}He.fastRGLPropsEqual=vte;function jte(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function xm(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function e5(e,t,r,n){const a=qk(e),i=Qk(e,t),o=Array(e.length);for(let l=0,c=i.length;l<c;l++){let d=xo(i[l]);d.static||(d=t5(a,d,t,r,i,n),a.push(d)),o[e.indexOf(i[l])]=d,d.moved=!1}return o}const Nte={x:"w",y:"h"};function jv(e,t,r,n){const a=Nte[n];t[n]+=1;const i=e.map(o=>o.i).indexOf(t.i);for(let o=i+1;o<e.length;o++){const l=e[o];if(!l.static){if(l.y>t.y+t.h)break;xm(t,l)&&jv(e,l,r+t[a],n)}}t[n]=r}function t5(e,t,r,n,a,i){const o=r==="vertical",l=r==="horizontal";if(o)for(t.y=Math.min(Uk(e),t.y);t.y>0&&!Ji(e,t);)t.y--;else if(l)for(;t.x>0&&!Ji(e,t);)t.x--;let c;for(;(c=Ji(e,t))&&!(r===null&&i);)if(l?jv(a,t,c.x+c.w,"x"):jv(a,t,c.y+c.h,"y"),l&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!Ji(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function r5(e,t){const r=qk(e);for(let n=0,a=e.length;n<a;n++){const i=e[n];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),!i.static)r.push(i);else for(;Ji(r,i);)i.y++}return e}function Bk(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function Ji(e,t){for(let r=0,n=e.length;r<n;r++)if(xm(e[r],t))return e[r]}function n5(e,t){return e.filter(r=>xm(r,t))}function qk(e){return e.filter(t=>t.static)}function od(e,t,r,n,a,i,o,l,c){if(t.static&&t.isDraggable!==!0||t.y===n&&t.x===r)return e;`${t.i}${String(r)}${String(n)}${t.x}${t.y}`;const d=t.x,u=t.y;typeof r=="number"&&(t.x=r),typeof n=="number"&&(t.y=n),t.moved=!0;let h=Qk(e,o);(o==="vertical"&&typeof n=="number"?u>=n:o==="horizontal"&&typeof r=="number"?d>=r:!1)&&(h=h.reverse());const g=n5(h,t),p=g.length>0;if(p&&c)return JD(e);if(p&&i)return`${t.i}`,t.x=d,t.y=u,t.moved=!1,e;for(let y=0,x=g.length;y<x;y++){const v=g[y];`${t.i}${t.x}${t.y}${v.i}${v.x}${v.y}`,!v.moved&&(v.static?e=Nv(e,v,t,a,o):e=Nv(e,t,v,a,o))}return e}function Nv(e,t,r,n,a,i){const o=a==="horizontal",l=a==="vertical",c=t.static;if(n){n=!1;const h={x:o?Math.max(t.x-r.w,0):r.x,y:l?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},f=Ji(e,h),g=f&&f.y+f.h>t.y,p=f&&t.x+t.w>f.x;if(f){if(g&&l)return od(e,r,void 0,t.y+1,n,c,a);if(g&&a==null)return t.y=r.y,r.y=r.y+r.h,e;if(p&&o)return od(e,t,r.x,void 0,n,c,a)}else return`${r.i}${h.x}${h.y}`,od(e,r,o?h.x:void 0,l?h.y:void 0,n,c,a)}const d=o?r.x+1:void 0,u=l?r.y+1:void 0;return d==null&&u==null?e:od(e,r,o?r.x+1:void 0,l?r.y+1:void 0,n,c,a)}function Ste(e){return e*100+"%"}const a5=(e,t,r,n)=>e+r>n?t:r,s5=(e,t,r)=>e<0?t:r,i5=e=>Math.max(0,e),Wk=e=>Math.max(0,e),Hk=(e,t,r)=>{let{left:n,height:a,width:i}=t;const o=e.top-(a-e.height);return{left:n,width:i,height:s5(o,e.height,a),top:Wk(o)}},Vk=(e,t,r)=>{let{top:n,left:a,height:i,width:o}=t;return{top:n,height:i,width:a5(e.left,e.width,o,r),left:i5(a)}},Kk=(e,t,r)=>{let{top:n,height:a,width:i}=t;const o=e.left-(i-e.width);return{height:a,width:o<0?e.width:a5(e.left,e.width,i,r),top:Wk(n),left:i5(o)}},Gk=(e,t,r)=>{let{top:n,left:a,height:i,width:o}=t;return{width:o,left:a,height:s5(n,e.height,i),top:Wk(n)}},_te=function(){return Hk(arguments.length<=0?void 0:arguments[0],Vk(...arguments))},Cte=function(){return Hk(arguments.length<=0?void 0:arguments[0],Kk(...arguments))},Pte=function(){return Gk(arguments.length<=0?void 0:arguments[0],Vk(...arguments))},Ete=function(){return Gk(arguments.length<=0?void 0:arguments[0],Kk(...arguments))},Ote={n:Hk,ne:_te,e:Vk,se:Pte,s:Gk,sw:Ete,w:Kk,nw:Cte};function Tte(e,t,r,n){const a=Ote[e];return a?a(t,{...t,...r},n):r}function Ate(e){let{top:t,left:r,width:n,height:a}=e;const i=`translate(${r}px,${t}px)`;return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:`${n}px`,height:`${a}px`,position:"absolute"}}function Dte(e){let{top:t,left:r,width:n,height:a}=e;return{top:`${t}px`,left:`${r}px`,width:`${n}px`,height:`${a}px`,position:"absolute"}}function Qk(e,t){return t==="horizontal"?l5(e):t==="vertical"?o5(e):e}function o5(e){return e.slice(0).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function l5(e){return e.slice(0).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function Rte(e,t,r,n,a){e=e||[];const i=[];id.default.Children.forEach(t,l=>{if((l==null?void 0:l.key)==null)return;const c=Bk(e,String(l.key)),d=l.props["data-grid"];c&&d==null?i.push(xo(c)):d?i.push(xo({...d,i:l.key})):i.push(xo({w:1,h:1,x:0,y:Uk(i),i:String(l.key)}))});const o=r5(i,{cols:r});return a?o:e5(o,n,r)}function Mte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let n=0,a=e.length;n<a;n++){const i=e[n];for(let o=0;o<r.length;o++){const l=r[o],c=i[l];if(typeof c!="number"||Number.isNaN(c))throw new Error(`ReactGridLayout: ${t}[${n}].${l} must be a number! Received: ${c} (${typeof c})`)}if(typeof i.i<"u"&&typeof i.i!="string")throw new Error(`ReactGridLayout: ${t}[${n}].i must be a string! Received: ${i.i} (${typeof i.i})`)}}function Lte(e){const{verticalCompact:t,compactType:r}=e||{};return t===!1?null:r}const $te=()=>{};He.noop=$te;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.calcGridColWidth=vm;Ua.calcGridItemPosition=Ite;Ua.calcGridItemWHPx=Sv;Ua.calcWH=Fte;Ua.calcXY=zte;Ua.clamp=Zi;function vm(e){const{margin:t,containerPadding:r,containerWidth:n,cols:a}=e;return(n-t[0]*(a-1)-r[0]*2)/a}function Sv(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function Ite(e,t,r,n,a,i){const{margin:o,containerPadding:l,rowHeight:c}=e,d=vm(e),u={};return i&&i.resizing?(u.width=Math.round(i.resizing.width),u.height=Math.round(i.resizing.height)):(u.width=Sv(n,d,o[0]),u.height=Sv(a,c,o[1])),i&&i.dragging?(u.top=Math.round(i.dragging.top),u.left=Math.round(i.dragging.left)):i&&i.resizing&&typeof i.resizing.top=="number"&&typeof i.resizing.left=="number"?(u.top=Math.round(i.resizing.top),u.left=Math.round(i.resizing.left)):(u.top=Math.round((c+o[1])*r+l[1]),u.left=Math.round((d+o[0])*t+l[0])),u}function zte(e,t,r,n,a){const{margin:i,containerPadding:o,cols:l,rowHeight:c,maxRows:d}=e,u=vm(e);let h=Math.round((r-o[0])/(u+i[0])),f=Math.round((t-o[1])/(c+i[1]));return h=Zi(h,0,l-n),f=Zi(f,0,d-a),{x:h,y:f}}function Fte(e,t,r,n,a,i){const{margin:o,maxRows:l,cols:c,rowHeight:d}=e,u=vm(e);let h=Math.round((t+o[0])/(u+o[0])),f=Math.round((r+o[1])/(d+o[1])),g=Zi(h,0,c-n),p=Zi(f,0,l-a);return["sw","w","nw"].indexOf(i)!==-1&&(g=Zi(h,0,c)),["nw","n","ne"].indexOf(i)!==-1&&(p=Zi(f,0,l)),{w:g,h:p}}function Zi(e,t,r){return Math.max(Math.min(e,r),t)}var bm={},c5={exports:{}},Ute="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Bte=Ute,qte=Bte;function d5(){}function u5(){}u5.resetWarningCache=d5;var Wte=function(){function e(n,a,i,o,l,c){if(c!==qte){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:u5,resetWarningCache:d5};return r.PropTypes=r,r};c5.exports=Wte();var Ai=c5.exports,wm={exports:{}},h5={},Rt={},Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.dontSetMe=Qte;Ba.findInArray=Hte;Ba.int=Gte;Ba.isFunction=Vte;Ba.isNum=Kte;function Hte(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function Vte(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Kte(e){return typeof e=="number"&&!isNaN(e)}function Gte(e){return parseInt(e,10)}function Qte(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.browserPrefixToKey=g5;zo.browserPrefixToStyle=Yte;zo.default=void 0;zo.getPrefix=f5;const Up=["Moz","Webkit","O","ms"];function f5(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let a=0;a<Up.length;a++)if(g5(e,Up[a])in t)return Up[a];return""}function g5(e,t){return t?`${t}${Xte(e)}`:e}function Yte(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function Xte(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}zo.default=f5();Object.defineProperty(Rt,"__esModule",{value:!0});Rt.addClassName=y5;Rt.addEvent=Zte;Rt.addUserSelectStyles=dre;Rt.createCSSTransform=ire;Rt.createSVGTransform=ore;Rt.getTouch=lre;Rt.getTouchIdentifier=cre;Rt.getTranslation=Yk;Rt.innerHeight=nre;Rt.innerWidth=are;Rt.matchesSelector=p5;Rt.matchesSelectorAndParentsTo=Jte;Rt.offsetXYFromParent=sre;Rt.outerHeight=tre;Rt.outerWidth=rre;Rt.removeClassName=x5;Rt.removeEvent=ere;Rt.scheduleRemoveUserSelectStyles=ure;var yn=Ba,b2=m5(zo);function m5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(m5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,l,c={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return c;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,c)}for(const d in a)d!=="default"&&{}.hasOwnProperty.call(a,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,d))&&(l.get||l.set)?o(c,d,l):c[d]=a[d]);return c})(e,t)}let zh="";function p5(e,t){return zh||(zh=(0,yn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,yn.isFunction)(e[r])})),(0,yn.isFunction)(e[zh])?e[zh](t):!1}function Jte(e,t,r){let n=e;do{if(p5(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function Zte(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function ere(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function tre(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,yn.int)(r.borderTopWidth),t+=(0,yn.int)(r.borderBottomWidth),t}function rre(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,yn.int)(r.borderLeftWidth),t+=(0,yn.int)(r.borderRightWidth),t}function nre(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,yn.int)(r.paddingTop),t-=(0,yn.int)(r.paddingBottom),t}function are(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,yn.int)(r.paddingLeft),t-=(0,yn.int)(r.paddingRight),t}function sre(e,t,r){const a=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-a.left)/r,o=(e.clientY+t.scrollTop-a.top)/r;return{x:i,y:o}}function ire(e,t){const r=Yk(e,t,"px");return{[(0,b2.browserPrefixToKey)("transform",b2.default)]:r}}function ore(e,t){return Yk(e,t,"")}function Yk(e,t,r){let{x:n,y:a}=e,i=`translate(${n}${r},${a}${r})`;if(t){const o=`${typeof t.x=="string"?t.x:t.x+r}`,l=`${typeof t.y=="string"?t.y:t.y+r}`;i=`translate(${o}, ${l})`+i}return i}function lre(e,t){return e.targetTouches&&(0,yn.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,yn.findInArray)(e.changedTouches,r=>t===r.identifier)}function cre(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function dre(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&y5(e.body,"react-draggable-transparent-selection")}function ure(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{w2(e)}):w2(e)}function w2(e){if(e)try{if(e.body&&x5(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function y5(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function x5(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.canDragX=gre;qa.canDragY=mre;qa.createCoreData=yre;qa.createDraggableData=xre;qa.getBoundPosition=hre;qa.getControlPosition=pre;qa.snapToGrid=fre;var ln=Ba,bl=Rt;function hre(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:vre(n);const a=Xk(e);if(typeof n=="string"){const{ownerDocument:i}=a,o=i.defaultView;let l;if(n==="parent"?l=a.parentNode:l=a.getRootNode().querySelector(n),!(l instanceof o.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const c=l,d=o.getComputedStyle(a),u=o.getComputedStyle(c);n={left:-a.offsetLeft+(0,ln.int)(u.paddingLeft)+(0,ln.int)(d.marginLeft),top:-a.offsetTop+(0,ln.int)(u.paddingTop)+(0,ln.int)(d.marginTop),right:(0,bl.innerWidth)(c)-(0,bl.outerWidth)(a)-a.offsetLeft+(0,ln.int)(u.paddingRight)-(0,ln.int)(d.marginRight),bottom:(0,bl.innerHeight)(c)-(0,bl.outerHeight)(a)-a.offsetTop+(0,ln.int)(u.paddingBottom)-(0,ln.int)(d.marginBottom)}}return(0,ln.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,ln.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,ln.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,ln.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function fre(e,t,r){const n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]}function gre(e){return e.props.axis==="both"||e.props.axis==="x"}function mre(e){return e.props.axis==="both"||e.props.axis==="y"}function pre(e,t,r){const n=typeof t=="number"?(0,bl.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const a=Xk(r),i=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,bl.offsetXYFromParent)(n||e,i,r.props.scale)}function yre(e,t,r){const n=!(0,ln.isNum)(e.lastX),a=Xk(e);return n?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:a,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function xre(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function vre(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Xk(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var km={},jm={};Object.defineProperty(jm,"__esModule",{value:!0});jm.default=bre;function bre(){}Object.defineProperty(km,"__esModule",{value:!0});km.default=void 0;var Bp=v5(m),Tr=Jk(Ai),wre=Jk(Do),jr=Rt,Rs=qa,qp=Ba,Qc=Jk(jm);function Jk(e){return e&&e.__esModule?e:{default:e}}function v5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(v5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,l,c={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return c;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,c)}for(const d in a)d!=="default"&&{}.hasOwnProperty.call(a,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,d))&&(l.get||l.set)?o(c,d,l):c[d]=a[d]);return c})(e,t)}function Ar(e,t,r){return(t=kre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kre(e){var t=jre(e,"string");return typeof t=="symbol"?t:t+""}function jre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Jn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ms=Jn.mouse,Nm=class extends Bp.Component{constructor(){super(...arguments),Ar(this,"dragging",!1),Ar(this,"lastX",NaN),Ar(this,"lastY",NaN),Ar(this,"touchIdentifier",null),Ar(this,"mounted",!1),Ar(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,jr.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,jr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const a=(0,jr.getTouchIdentifier)(t);this.touchIdentifier=a;const i=(0,Rs.getControlPosition)(t,a,this);if(i==null)return;const{x:o,y:l}=i,c=(0,Rs.createCoreData)(this,o,l);(0,Qc.default)("DraggableCore: handleDragStart: %j",c),(0,Qc.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,jr.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=l,(0,jr.addEvent)(n,Ms.move,this.handleDrag),(0,jr.addEvent)(n,Ms.stop,this.handleDragStop))}),Ar(this,"handleDrag",t=>{const r=(0,Rs.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:a}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX,c=a-this.lastY;if([l,c]=(0,Rs.snapToGrid)(this.props.grid,l,c),!l&&!c)return;n=this.lastX+l,a=this.lastY+c}const i=(0,Rs.createCoreData)(this,n,a);if((0,Qc.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(t,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=n,this.lastY=a}),Ar(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,Rs.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:a}=r;if(Array.isArray(this.props.grid)){let c=n-this.lastX||0,d=a-this.lastY||0;[c,d]=(0,Rs.snapToGrid)(this.props.grid,c,d),n=this.lastX+c,a=this.lastY+d}const i=(0,Rs.createCoreData)(this,n,a);if(this.props.onStop(t,i)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,jr.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,Qc.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,Qc.default)("DraggableCore: Removing handlers"),(0,jr.removeEvent)(l.ownerDocument,Ms.move,this.handleDrag),(0,jr.removeEvent)(l.ownerDocument,Ms.stop,this.handleDragStop))}),Ar(this,"onMouseDown",t=>(Ms=Jn.mouse,this.handleDragStart(t))),Ar(this,"onMouseUp",t=>(Ms=Jn.mouse,this.handleDragStop(t))),Ar(this,"onTouchStart",t=>(Ms=Jn.touch,this.handleDragStart(t))),Ar(this,"onTouchEnd",t=>(Ms=Jn.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,jr.addEvent)(t,Jn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,jr.removeEvent)(r,Jn.mouse.move,this.handleDrag),(0,jr.removeEvent)(r,Jn.touch.move,this.handleDrag),(0,jr.removeEvent)(r,Jn.mouse.stop,this.handleDragStop),(0,jr.removeEvent)(r,Jn.touch.stop,this.handleDragStop),(0,jr.removeEvent)(t,Jn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,jr.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:wre.default.findDOMNode(this)}render(){return Bp.cloneElement(Bp.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};km.default=Nm;Ar(Nm,"displayName","DraggableCore");Ar(Nm,"propTypes",{allowAnyClick:Tr.default.bool,allowMobileScroll:Tr.default.bool,children:Tr.default.node.isRequired,disabled:Tr.default.bool,enableUserSelectHack:Tr.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Tr.default.arrayOf(Tr.default.number),handle:Tr.default.string,cancel:Tr.default.string,nodeRef:Tr.default.object,onStart:Tr.default.func,onDrag:Tr.default.func,onStop:Tr.default.func,onMouseDown:Tr.default.func,scale:Tr.default.number,className:qp.dontSetMe,style:qp.dontSetMe,transform:qp.dontSetMe});Ar(Nm,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=h(m),r=u(Ai),n=u(Do),a=ym,i=Rt,o=qa,l=Ba,c=u(km),d=u(jm);function u(v){return v&&v.__esModule?v:{default:v}}function h(v,w){if(typeof WeakMap=="function")var b=new WeakMap,k=new WeakMap;return(h=function(j,N){if(!N&&j&&j.__esModule)return j;var _,O,T={__proto__:null,default:j};if(j===null||typeof j!="object"&&typeof j!="function")return T;if(_=N?k:b){if(_.has(j))return _.get(j);_.set(j,T)}for(const P in j)P!=="default"&&{}.hasOwnProperty.call(j,P)&&((O=(_=Object.defineProperty)&&Object.getOwnPropertyDescriptor(j,P))&&(O.get||O.set)?_(T,P,O):T[P]=j[P]);return T})(v,w)}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var w=1;w<arguments.length;w++){var b=arguments[w];for(var k in b)({}).hasOwnProperty.call(b,k)&&(v[k]=b[k])}return v},f.apply(null,arguments)}function g(v,w,b){return(w=p(w))in v?Object.defineProperty(v,w,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[w]=b,v}function p(v){var w=y(v,"string");return typeof w=="symbol"?w:w+""}function y(v,w){if(typeof v!="object"||!v)return v;var b=v[Symbol.toPrimitive];if(b!==void 0){var k=b.call(v,w||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(v)}class x extends t.Component{static getDerivedStateFromProps(w,b){let{position:k}=w,{prevPropsPosition:j}=b;return k&&(!j||k.x!==j.x||k.y!==j.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:j}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(w){super(w),g(this,"onDragStart",(b,k)=>{if((0,d.default)("Draggable: onDragStart: %j",k),this.props.onStart(b,(0,o.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(b,k)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",k);const j=(0,o.createDraggableData)(this,k),N={x:j.x,y:j.y,slackX:0,slackY:0};if(this.props.bounds){const{x:O,y:T}=N;N.x+=this.state.slackX,N.y+=this.state.slackY;const[P,S]=(0,o.getBoundPosition)(this,N.x,N.y);N.x=P,N.y=S,N.slackX=this.state.slackX+(O-N.x),N.slackY=this.state.slackY+(T-N.y),j.x=N.x,j.y=N.y,j.deltaX=N.x-this.state.x,j.deltaY=N.y-this.state.y}if(this.props.onDrag(b,j)===!1)return!1;this.setState(N)}),g(this,"onDragStop",(b,k)=>{if(!this.state.dragging||this.props.onStop(b,(0,o.createDraggableData)(this,k))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",k);const N={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:O,y:T}=this.props.position;N.x=O,N.y=T}this.setState(N)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,b;return((b=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:b.current)??n.default.findDOMNode(this)}render(){const{axis:w,bounds:b,children:k,defaultPosition:j,defaultClassName:N,defaultClassNameDragging:_,defaultClassNameDragged:O,position:T,positionOffset:P,scale:S,...M}=this.props;let F={},q=null;const W=!!!T||this.state.dragging,$=T||j,E={x:(0,o.canDragX)(this)&&W?this.state.x:$.x,y:(0,o.canDragY)(this)&&W?this.state.y:$.y};this.state.isElementSVG?q=(0,i.createSVGTransform)(E,P):F=(0,i.createCSSTransform)(E,P);const U=(0,a.clsx)(k.props.className||"",N,{[_]:this.state.dragging,[O]:this.state.dragged});return t.createElement(c.default,f({},M,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(k),{className:U,style:{...k.props.style,...F},transform:q}))}}e.default=x,g(x,"displayName","Draggable"),g(x,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),g(x,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(h5);const{default:b5,DraggableCore:Nre}=h5;wm.exports=b5;wm.exports.default=b5;wm.exports.DraggableCore=Nre;var w5=wm.exports,Sm={exports:{}},Gu={},Zk={};Zk.__esModule=!0;Zk.cloneElement=Ore;var Sre=_re(m);function _re(e){return e&&e.__esModule?e:{default:e}}function k2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k2(Object(r),!0).forEach(function(n){Cre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cre(e,t,r){return t=Pre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pre(e){var t=Ere(e,"string");return typeof t=="symbol"?t:String(t)}function Ere(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ore(e,t){return t.style&&e.props.style&&(t.style=j2(j2({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),Sre.default.cloneElement(e,t)}var Qu={};Qu.__esModule=!0;Qu.resizableProps=void 0;var Fe=Tre(Ai);function Tre(e){return e&&e.__esModule?e:{default:e}}var Are={axis:Fe.default.oneOf(["both","x","y","none"]),className:Fe.default.string,children:Fe.default.element.isRequired,draggableOpts:Fe.default.shape({allowAnyClick:Fe.default.bool,cancel:Fe.default.string,children:Fe.default.node,disabled:Fe.default.bool,enableUserSelectHack:Fe.default.bool,offsetParent:Fe.default.node,grid:Fe.default.arrayOf(Fe.default.number),handle:Fe.default.string,nodeRef:Fe.default.object,onStart:Fe.default.func,onDrag:Fe.default.func,onStop:Fe.default.func,onMouseDown:Fe.default.func,scale:Fe.default.number}),height:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(a.axis==="both"||a.axis==="y"){var i;return(i=Fe.default.number).isRequired.apply(i,r)}return Fe.default.number.apply(Fe.default,r)},handle:Fe.default.oneOfType([Fe.default.node,Fe.default.func]),handleSize:Fe.default.arrayOf(Fe.default.number),lockAspectRatio:Fe.default.bool,maxConstraints:Fe.default.arrayOf(Fe.default.number),minConstraints:Fe.default.arrayOf(Fe.default.number),onResizeStop:Fe.default.func,onResizeStart:Fe.default.func,onResize:Fe.default.func,resizeHandles:Fe.default.arrayOf(Fe.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Fe.default.number,width:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(a.axis==="both"||a.axis==="x"){var i;return(i=Fe.default.number).isRequired.apply(i,r)}return Fe.default.number.apply(Fe.default,r)}};Qu.resizableProps=Are;Gu.__esModule=!0;Gu.default=void 0;var Yc=$re(m),Dre=w5,Rre=Zk,Mre=Qu,Lre=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function k5(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(k5=function(a){return a?r:t})(e)}function $re(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=k5(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(this,arguments)}function Ire(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){zre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zre(e,t,r){return t=Fre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fre(e){var t=Ure(e,"string");return typeof t=="symbol"?t:String(t)}function Ure(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bre(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Cv(e,t)}function Cv(e,t){return Cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Cv(e,t)}var ej=function(e){Bre(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(a,i){var o=this.props,l=o.minConstraints,c=o.maxConstraints,d=o.lockAspectRatio;if(!l&&!c&&!d)return[a,i];if(d){var u=this.props.width/this.props.height,h=a-this.props.width,f=i-this.props.height;Math.abs(h)>Math.abs(f*u)?i=a/u:a=i*u}var g=a,p=i,y=this.slack||[0,0],x=y[0],v=y[1];return a+=x,i+=v,l&&(a=Math.max(l[0],a),i=Math.max(l[1],i)),c&&(a=Math.min(c[0],a),i=Math.min(c[1],i)),this.slack=[x+(g-a),v+(p-i)],[a,i]},r.resizeHandler=function(a,i){var o=this;return function(l,c){var d=c.node,u=c.deltaX,h=c.deltaY;a==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",g=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!g)){var p=i[0],y=i[i.length-1],x=d.getBoundingClientRect();if(o.lastHandleRect!=null){if(y==="w"){var v=x.left-o.lastHandleRect.left;u+=v}if(p==="n"){var w=x.top-o.lastHandleRect.top;h+=w}}o.lastHandleRect=x,y==="w"&&(u=-u),p==="n"&&(h=-h);var b=o.props.width+(f?u/o.props.transformScale:0),k=o.props.height+(g?h/o.props.transformScale:0),j=o.runConstraints(b,k);b=j[0],k=j[1];var N=b!==o.props.width||k!==o.props.height,_=typeof o.props[a]=="function"?o.props[a]:null,O=a==="onResize"&&!N;_&&!O&&(l.persist==null||l.persist(),_(l,{node:d,size:{width:b,height:k},handle:i})),a==="onResizeStop"&&o.resetData()}}},r.renderResizeHandle=function(a,i){var o=this.props.handle;if(!o)return Yc.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+a,ref:i});if(typeof o=="function")return o(a,i);var l=typeof o.type=="string",c=Wp({ref:i},l?{}:{handleAxis:a});return Yc.cloneElement(o,c)},r.render=function(){var a=this,i=this.props,o=i.children,l=i.className,c=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var d=i.resizeHandles;i.transformScale;var u=Ire(i,Lre);return(0,Rre.cloneElement)(o,Wp(Wp({},u),{},{className:(l?l+" ":"")+"react-resizable",children:[].concat(o.props.children,d.map(function(h){var f,g=(f=a.handleRefs[h])!=null?f:a.handleRefs[h]=Yc.createRef();return Yc.createElement(Dre.DraggableCore,_v({},c,{nodeRef:g,key:"resizableHandle-"+h,onStop:a.resizeHandler("onResizeStop",h),onStart:a.resizeHandler("onResizeStart",h),onDrag:a.resizeHandler("onResize",h)}),a.renderResizeHandle(h,g))}))}))},t}(Yc.Component);Gu.default=ej;ej.propTypes=Mre.resizableProps;ej.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var _m={};_m.__esModule=!0;_m.default=void 0;var Hp=Kre(m),qre=j5(Ai),Wre=j5(Gu),Hre=Qu,Vre=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function j5(e){return e&&e.__esModule?e:{default:e}}function N5(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(N5=function(a){return a?r:t})(e)}function Kre(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=N5(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pv.apply(this,arguments)}function S2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(r),!0).forEach(function(n){Gre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gre(e,t,r){return t=Qre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qre(e){var t=Yre(e,"string");return typeof t=="symbol"?t:String(t)}function Yre(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xre(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Jre(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ev(e,t)}function Ev(e,t){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ev(e,t)}var S5=function(e){Jre(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(l,c){var d=c.size;n.props.onResize?(l.persist==null||l.persist(),n.setState(d,function(){return n.props.onResize&&n.props.onResize(l,c)})):n.setState(d)},n}t.getDerivedStateFromProps=function(a,i){return i.propsWidth!==a.width||i.propsHeight!==a.height?{width:a.width,height:a.height,propsWidth:a.width,propsHeight:a.height}:null};var r=t.prototype;return r.render=function(){var a=this.props,i=a.handle,o=a.handleSize;a.onResize;var l=a.onResizeStart,c=a.onResizeStop,d=a.draggableOpts,u=a.minConstraints,h=a.maxConstraints,f=a.lockAspectRatio,g=a.axis;a.width,a.height;var p=a.resizeHandles,y=a.style,x=a.transformScale,v=Xre(a,Vre);return Hp.createElement(Wre.default,{axis:g,draggableOpts:d,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:h,minConstraints:u,onResizeStart:l,onResize:this.onResize,onResizeStop:c,resizeHandles:p,transformScale:x,width:this.state.width},Hp.createElement("div",Pv({},v,{style:L0(L0({},y),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(Hp.Component);_m.default=S5;S5.propTypes=L0(L0({},Hre.resizableProps),{},{children:qre.default.element});Sm.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};Sm.exports.Resizable=Gu.default;Sm.exports.ResizableBox=_m.default;var Zre=Sm.exports,hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.resizeHandleType=hs.resizeHandleAxesType=hs.default=void 0;var qe=_5(Ai),ene=_5(m);function _5(e){return e&&e.__esModule?e:{default:e}}const tne=hs.resizeHandleAxesType=qe.default.arrayOf(qe.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),rne=hs.resizeHandleType=qe.default.oneOfType([qe.default.node,qe.default.func]);hs.default={className:qe.default.string,style:qe.default.object,width:qe.default.number,autoSize:qe.default.bool,cols:qe.default.number,draggableCancel:qe.default.string,draggableHandle:qe.default.string,verticalCompact:function(e){e.verticalCompact},compactType:qe.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&He.validateLayout(t,"layout")},margin:qe.default.arrayOf(qe.default.number),containerPadding:qe.default.arrayOf(qe.default.number),rowHeight:qe.default.number,maxRows:qe.default.number,isBounded:qe.default.bool,isDraggable:qe.default.bool,isResizable:qe.default.bool,allowOverlap:qe.default.bool,preventCollision:qe.default.bool,useCSSTransforms:qe.default.bool,transformScale:qe.default.number,isDroppable:qe.default.bool,resizeHandles:tne,resizeHandle:rne,onLayoutChange:qe.default.func,onDragStart:qe.default.func,onDrag:qe.default.func,onDragStop:qe.default.func,onResizeStart:qe.default.func,onResize:qe.default.func,onResizeStop:qe.default.func,onDrop:qe.default.func,droppingItem:qe.default.shape({i:qe.default.string.isRequired,w:qe.default.number.isRequired,h:qe.default.number.isRequired}),children:function(e,t){const r=e[t],n={};ene.default.Children.forEach(r,function(a){if((a==null?void 0:a.key)!=null){if(n[a.key])throw new Error('Duplicate child key "'+a.key+'" found! This will cause problems in ReactGridLayout.');n[a.key]=!0}})},innerRef:qe.default.any};Object.defineProperty(bm,"__esModule",{value:!0});bm.default=void 0;var Xo=tj(m),_2=Do,rt=tj(Ai),nne=w5,ane=Zre,Jo=He,cr=Ua,C2=hs,sne=tj(ym);function tj(e){return e&&e.__esModule?e:{default:e}}function Na(e,t,r){return(t=ine(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ine(e){var t=one(e,"string");return typeof t=="symbol"?t:t+""}function one(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class rj extends Xo.default.Component{constructor(){super(...arguments),Na(this,"state",{resizing:null,dragging:null,className:""}),Na(this,"elementRef",Xo.default.createRef()),Na(this,"onDragStart",(t,r)=>{let{node:n}=r;const{onDragStart:a,transformScale:i}=this.props;if(!a)return;const o={top:0,left:0},{offsetParent:l}=n;if(!l)return;const c=l.getBoundingClientRect(),d=n.getBoundingClientRect(),u=d.left/i,h=c.left/i,f=d.top/i,g=c.top/i;o.left=u-h+l.scrollLeft,o.top=f-g+l.scrollTop,this.setState({dragging:o});const{x:p,y}=(0,cr.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return a.call(this,this.props.i,p,y,{e:t,node:n,newPosition:o})}),Na(this,"onDrag",(t,r,n)=>{let{node:a,deltaX:i,deltaY:o}=r;const{onDrag:l}=this.props;if(!l)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let c=this.state.dragging.top+o,d=this.state.dragging.left+i;const{isBounded:u,i:h,w:f,h:g,containerWidth:p}=this.props,y=this.getPositionParams();if(u){const{offsetParent:b}=a;if(b){const{margin:k,rowHeight:j}=this.props,N=b.clientHeight-(0,cr.calcGridItemWHPx)(g,j,k[1]);c=(0,cr.clamp)(c,0,N);const _=(0,cr.calcGridColWidth)(y),O=p-(0,cr.calcGridItemWHPx)(f,_,k[0]);d=(0,cr.clamp)(d,0,O)}}const x={top:c,left:d};n?this.setState({dragging:x}):(0,_2.flushSync)(()=>{this.setState({dragging:x})});const{x:v,y:w}=(0,cr.calcXY)(y,c,d,f,g);return l.call(this,h,v,w,{e:t,node:a,newPosition:x})}),Na(this,"onDragStop",(t,r)=>{let{node:n}=r;const{onDragStop:a}=this.props;if(!a)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:i,h:o,i:l}=this.props,{left:c,top:d}=this.state.dragging,u={top:d,left:c};this.setState({dragging:null});const{x:h,y:f}=(0,cr.calcXY)(this.getPositionParams(),d,c,i,o);return a.call(this,l,h,f,{e:t,node:n,newPosition:u})}),Na(this,"onResizeStop",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStop")),Na(this,"onResizeStart",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStart")),Na(this,"onResize",(t,r,n)=>this.onResizeHandler(t,r,n,"onResize"))}shouldComponentUpdate(t,r){if(this.props.children!==t.children||this.props.droppingPosition!==t.droppingPosition)return!0;const n=(0,cr.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),a=(0,cr.calcGridItemPosition)(this.getPositionParams(t),t.x,t.y,t.w,t.h,r);return!(0,Jo.fastPositionEqual)(n,a)||this.props.useCSSTransforms!==t.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(t){this.moveDroppingItem(t)}moveDroppingItem(t){const{droppingPosition:r}=this.props;if(!r)return;const n=this.elementRef.current;if(!n)return;const a=t.droppingPosition||{left:0,top:0},{dragging:i}=this.state,o=i&&r.left!==a.left||r.top!==a.top;if(!i)this.onDragStart(r.e,{node:n,deltaX:r.left,deltaY:r.top});else if(o){const l=r.left-i.left,c=r.top-i.top;this.onDrag(r.e,{node:n,deltaX:l,deltaY:c},!0)}}getPositionParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:t.cols,containerPadding:t.containerPadding,containerWidth:t.containerWidth,margin:t.margin,maxRows:t.maxRows,rowHeight:t.rowHeight}}createStyle(t){const{usePercentages:r,containerWidth:n,useCSSTransforms:a}=this.props;let i;return a?i=(0,Jo.setTransform)(t):(i=(0,Jo.setTopLeft)(t),r&&(i.left=(0,Jo.perc)(t.left/n),i.width=(0,Jo.perc)(t.width/n))),i}mixinDraggable(t,r){return Xo.default.createElement(nne.DraggableCore,{disabled:!r,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(t,r){return(n,a)=>r(n,a,t)}mixinResizable(t,r,n){const{cols:a,minW:i,minH:o,maxW:l,maxH:c,transformScale:d,resizeHandles:u,resizeHandle:h}=this.props,f=this.getPositionParams(),g=(0,cr.calcGridItemPosition)(f,0,0,a,0).width,p=(0,cr.calcGridItemPosition)(f,0,0,i,o),y=(0,cr.calcGridItemPosition)(f,0,0,l,c),x=[p.width,p.height],v=[Math.min(y.width,g),Math.min(y.height,1/0)];return Xo.default.createElement(ane.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:r.width,height:r.height,minConstraints:x,maxConstraints:v,onResizeStop:this.curryResizeHandler(r,this.onResizeStop),onResizeStart:this.curryResizeHandler(r,this.onResizeStart),onResize:this.curryResizeHandler(r,this.onResize),transformScale:d,resizeHandles:u,handle:h},t)}onResizeHandler(t,r,n,a){let{node:i,size:o,handle:l}=r;const c=this.props[a];if(!c)return;const{x:d,y:u,i:h,maxH:f,minH:g,containerWidth:p}=this.props,{minW:y,maxW:x}=this.props;let v=o;i&&(v=(0,Jo.resizeItemInDirection)(l,n,o,p),(0,_2.flushSync)(()=>{this.setState({resizing:a==="onResizeStop"?null:v})}));let{w,h:b}=(0,cr.calcWH)(this.getPositionParams(),v.width,v.height,d,u,l);w=(0,cr.clamp)(w,Math.max(y,1),x),b=(0,cr.clamp)(b,g,f),c.call(this,h,w,b,{e:t,node:i,size:v,handle:l})}render(){const{x:t,y:r,w:n,h:a,isDraggable:i,isResizable:o,droppingPosition:l,useCSSTransforms:c}=this.props,d=(0,cr.calcGridItemPosition)(this.getPositionParams(),t,r,n,a,this.state),u=Xo.default.Children.only(this.props.children);let h=Xo.default.cloneElement(u,{ref:this.elementRef,className:(0,sne.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":i,"react-draggable-dragging":!!this.state.dragging,dropping:!!l,cssTransforms:c}),style:{...this.props.style,...u.props.style,...this.createStyle(d)}});return h=this.mixinResizable(h,d,o),h=this.mixinDraggable(h,i),h}}bm.default=rj;Na(rj,"propTypes",{children:rt.default.element,cols:rt.default.number.isRequired,containerWidth:rt.default.number.isRequired,rowHeight:rt.default.number.isRequired,margin:rt.default.array.isRequired,maxRows:rt.default.number.isRequired,containerPadding:rt.default.array.isRequired,x:rt.default.number.isRequired,y:rt.default.number.isRequired,w:rt.default.number.isRequired,h:rt.default.number.isRequired,minW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minWidth not Number");if(r>e.w||r>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxWidth not Number");if(r<e.w||r<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minHeight not Number");if(r>e.h||r>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxHeight not Number");if(r<e.h||r<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:rt.default.string.isRequired,resizeHandles:C2.resizeHandleAxesType,resizeHandle:C2.resizeHandleType,onDragStop:rt.default.func,onDragStart:rt.default.func,onDrag:rt.default.func,onResizeStop:rt.default.func,onResizeStart:rt.default.func,onResize:rt.default.func,isDraggable:rt.default.bool.isRequired,isResizable:rt.default.bool.isRequired,isBounded:rt.default.bool.isRequired,static:rt.default.bool,useCSSTransforms:rt.default.bool.isRequired,transformScale:rt.default.number,className:rt.default.string,handle:rt.default.string,cancel:rt.default.string,droppingPosition:rt.default.shape({e:rt.default.object.isRequired,left:rt.default.number.isRequired,top:rt.default.number.isRequired})});Na(rj,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(Ku,"__esModule",{value:!0});Ku.default=void 0;var Li=C5(m),Vp=Fk,lne=nj(ym),Le=He,cne=Ua,P2=nj(bm),dne=nj(hs);function nj(e){return e&&e.__esModule?e:{default:e}}function C5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(C5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,l,c={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return c;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,c)}for(const d in a)d!=="default"&&{}.hasOwnProperty.call(a,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,d))&&(l.get||l.set)?o(c,d,l):c[d]=a[d]);return c})(e,t)}function Nr(e,t,r){return(t=une(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function une(e){var t=hne(e,"string");return typeof t=="symbol"?t:t+""}function hne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const E2="react-grid-layout";let P5=!1;try{P5=/firefox/i.test(navigator.userAgent)}catch{}class Cm extends Li.Component{constructor(){super(...arguments),Nr(this,"state",{activeDrag:null,layout:(0,Le.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Le.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Nr(this,"dragEnterCounter",0),Nr(this,"onDragStart",(t,r,n,a)=>{let{e:i,node:o}=a;const{layout:l}=this.state,c=(0,Le.getLayoutItem)(l,t);if(!c)return;const d={w:c.w,h:c.h,x:c.x,y:c.y,placeholder:!0,i:t};return this.setState({oldDragItem:(0,Le.cloneLayoutItem)(c),oldLayout:l,activeDrag:d}),this.props.onDragStart(l,c,c,null,i,o)}),Nr(this,"onDrag",(t,r,n,a)=>{let{e:i,node:o}=a;const{oldDragItem:l}=this.state;let{layout:c}=this.state;const{cols:d,allowOverlap:u,preventCollision:h}=this.props,f=(0,Le.getLayoutItem)(c,t);if(!f)return;const g={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:t};c=(0,Le.moveElement)(c,f,r,n,!0,h,(0,Le.compactType)(this.props),d,u),this.props.onDrag(c,l,f,g,i,o),this.setState({layout:u?c:(0,Le.compact)(c,(0,Le.compactType)(this.props),d),activeDrag:g})}),Nr(this,"onDragStop",(t,r,n,a)=>{let{e:i,node:o}=a;if(!this.state.activeDrag)return;const{oldDragItem:l}=this.state;let{layout:c}=this.state;const{cols:d,preventCollision:u,allowOverlap:h}=this.props,f=(0,Le.getLayoutItem)(c,t);if(!f)return;c=(0,Le.moveElement)(c,f,r,n,!0,u,(0,Le.compactType)(this.props),d,h);const p=h?c:(0,Le.compact)(c,(0,Le.compactType)(this.props),d);this.props.onDragStop(p,l,f,null,i,o);const{oldLayout:y}=this.state;this.setState({activeDrag:null,layout:p,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,y)}),Nr(this,"onResizeStart",(t,r,n,a)=>{let{e:i,node:o}=a;const{layout:l}=this.state,c=(0,Le.getLayoutItem)(l,t);c&&(this.setState({oldResizeItem:(0,Le.cloneLayoutItem)(c),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(l,c,c,null,i,o))}),Nr(this,"onResize",(t,r,n,a)=>{let{e:i,node:o,size:l,handle:c}=a;const{oldResizeItem:d}=this.state,{layout:u}=this.state,{cols:h,preventCollision:f,allowOverlap:g}=this.props;let p=!1,y,x,v;const[w,b]=(0,Le.withLayoutItem)(u,t,j=>{let N;return x=j.x,v=j.y,["sw","w","nw","n","ne"].indexOf(c)!==-1&&(["sw","nw","w"].indexOf(c)!==-1&&(x=j.x+(j.w-r),r=j.x!==x&&x<0?j.w:r,x=x<0?0:x),["ne","n","nw"].indexOf(c)!==-1&&(v=j.y+(j.h-n),n=j.y!==v&&v<0?j.h:n,v=v<0?0:v),p=!0),f&&!g&&(N=(0,Le.getAllCollisions)(u,{...j,w:r,h:n,x,y:v}).filter(O=>O.i!==j.i).length>0,N&&(v=j.y,n=j.h,x=j.x,r=j.w,p=!1)),j.w=r,j.h=n,j});if(!b)return;y=w,p&&(y=(0,Le.moveElement)(w,b,x,v,!0,this.props.preventCollision,(0,Le.compactType)(this.props),h,g));const k={w:b.w,h:b.h,x:b.x,y:b.y,static:!0,i:t};this.props.onResize(y,d,b,k,i,o),this.setState({layout:g?y:(0,Le.compact)(y,(0,Le.compactType)(this.props),h),activeDrag:k})}),Nr(this,"onResizeStop",(t,r,n,a)=>{let{e:i,node:o}=a;const{layout:l,oldResizeItem:c}=this.state,{cols:d,allowOverlap:u}=this.props,h=(0,Le.getLayoutItem)(l,t),f=u?l:(0,Le.compact)(l,(0,Le.compactType)(this.props),d);this.props.onResizeStop(f,c,h,null,i,o);const{oldLayout:g}=this.state;this.setState({activeDrag:null,layout:f,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(f,g)}),Nr(this,"onDragOver",t=>{var w;if(t.preventDefault(),t.stopPropagation(),P5&&!((w=t.nativeEvent.target)!=null&&w.classList.contains(E2)))return!1;const{droppingItem:r,onDropDragOver:n,margin:a,cols:i,rowHeight:o,maxRows:l,width:c,containerPadding:d,transformScale:u}=this.props,h=n==null?void 0:n(t);if(h===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const f={...r,...h},{layout:g}=this.state,p=t.currentTarget.getBoundingClientRect(),y=t.clientX-p.left,x=t.clientY-p.top,v={left:y/u,top:x/u,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:b,top:k}=this.state.droppingPosition;(b!=y||k!=x)&&this.setState({droppingPosition:v})}}else{const b={cols:i,margin:a,maxRows:l,rowHeight:o,containerWidth:c,containerPadding:d||a},k=(0,cne.calcXY)(b,x,y,f.w,f.h);this.setState({droppingDOMNode:Li.createElement("div",{key:f.i}),droppingPosition:v,layout:[...g,{...f,x:k.x,y:k.y,static:!1,isDraggable:!0}]})}}),Nr(this,"removeDroppingPlaceholder",()=>{const{droppingItem:t,cols:r}=this.props,{layout:n}=this.state,a=(0,Le.compact)(n.filter(i=>i.i!==t.i),(0,Le.compactType)(this.props),r,this.props.allowOverlap);this.setState({layout:a,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Nr(this,"onDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Nr(this,"onDragEnter",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter++}),Nr(this,"onDrop",t=>{t.preventDefault(),t.stopPropagation();const{droppingItem:r}=this.props,{layout:n}=this.state,a=n.find(i=>i.i===r.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,a,t)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(t,r){let n;return r.activeDrag?null:(!(0,Vp.deepEqual)(t.layout,r.propsLayout)||t.compactType!==r.compactType?n=t.layout:(0,Le.childrenEqual)(t.children,r.children)||(n=r.layout),n?{layout:(0,Le.synchronizeLayoutWithChildren)(n,t.children,t.cols,(0,Le.compactType)(t),t.allowOverlap),compactType:t.compactType,children:t.children,propsLayout:t.layout}:null)}shouldComponentUpdate(t,r){return this.props.children!==t.children||!(0,Le.fastRGLPropsEqual)(this.props,t,Vp.deepEqual)||this.state.activeDrag!==r.activeDrag||this.state.mounted!==r.mounted||this.state.droppingPosition!==r.droppingPosition}componentDidUpdate(t,r){if(!this.state.activeDrag){const n=this.state.layout,a=r.layout;this.onLayoutMaybeChanged(n,a)}}containerHeight(){if(!this.props.autoSize)return;const t=(0,Le.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return t*this.props.rowHeight+(t-1)*this.props.margin[1]+r*2+"px"}onLayoutMaybeChanged(t,r){r||(r=this.state.layout),(0,Vp.deepEqual)(r,t)||this.props.onLayoutChange(t)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:r,cols:n,margin:a,containerPadding:i,rowHeight:o,maxRows:l,useCSSTransforms:c,transformScale:d}=this.props;return Li.createElement(P2.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:r,cols:n,margin:a,containerPadding:i||a,maxRows:l,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:c,transformScale:d},Li.createElement("div",null))}processGridItem(t,r){if(!t||!t.key)return;const n=(0,Le.getLayoutItem)(this.state.layout,String(t.key));if(!n)return null;const{width:a,cols:i,margin:o,containerPadding:l,rowHeight:c,maxRows:d,isDraggable:u,isResizable:h,isBounded:f,useCSSTransforms:g,transformScale:p,draggableCancel:y,draggableHandle:x,resizeHandles:v,resizeHandle:w}=this.props,{mounted:b,droppingPosition:k}=this.state,j=typeof n.isDraggable=="boolean"?n.isDraggable:!n.static&&u,N=typeof n.isResizable=="boolean"?n.isResizable:!n.static&&h,_=n.resizeHandles||v,O=j&&f&&n.isBounded!==!1;return Li.createElement(P2.default,{containerWidth:a,cols:i,margin:o,containerPadding:l||o,maxRows:d,rowHeight:c,cancel:y,handle:x,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:j,isResizable:N,isBounded:O,useCSSTransforms:g&&b,usePercentages:!b,transformScale:p,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:r?k:void 0,resizeHandles:_,resizeHandle:w},t)}render(){const{className:t,style:r,isDroppable:n,innerRef:a}=this.props,i=(0,lne.default)(E2,t),o={height:this.containerHeight(),...r};return Li.createElement("div",{ref:a,className:i,style:o,onDrop:n?this.onDrop:Le.noop,onDragLeave:n?this.onDragLeave:Le.noop,onDragEnter:n?this.onDragEnter:Le.noop,onDragOver:n?this.onDragOver:Le.noop},Li.Children.map(this.props.children,l=>this.processGridItem(l)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}Ku.default=Cm;Nr(Cm,"displayName","ReactGridLayout");Nr(Cm,"propTypes",dne.default);Nr(Cm,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Le.noop,onDragStart:Le.noop,onDrag:Le.noop,onDragStop:Le.noop,onResizeStart:Le.noop,onResize:Le.noop,onResizeStop:Le.noop,onDrop:Le.noop,onDropDragOver:Le.noop});var Pm={},Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.findOrGenerateResponsiveLayout=mne;Fo.getBreakpointFromWidth=fne;Fo.getColsFromBreakpoint=gne;Fo.sortBreakpoints=aj;var Fh=He;function fne(e,t){const r=aj(e);let n=r[0];for(let a=1,i=r.length;a<i;a++){const o=r[a];t>e[o]&&(n=o)}return n}function gne(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function mne(e,t,r,n,a,i){if(e[r])return(0,Fh.cloneLayout)(e[r]);let o=e[n];const l=aj(t),c=l.slice(l.indexOf(r));for(let d=0,u=c.length;d<u;d++){const h=c[d];if(e[h]){o=e[h];break}}return o=(0,Fh.cloneLayout)(o||[]),(0,Fh.compact)((0,Fh.correctBounds)(o,{cols:a}),i,a)}function aj(e){return Object.keys(e).sort(function(r,n){return e[r]-e[n]})}Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;var O2=O5(m),Vr=E5(Ai),Kp=Fk,El=He,$i=Fo,pne=E5(Ku);function E5(e){return e&&e.__esModule?e:{default:e}}function O5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(O5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,l,c={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return c;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,c)}for(const d in a)d!=="default"&&{}.hasOwnProperty.call(a,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,d))&&(l.get||l.set)?o(c,d,l):c[d]=a[d]);return c})(e,t)}function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ov.apply(null,arguments)}function $0(e,t,r){return(t=yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yne(e){var t=xne(e,"string");return typeof t=="symbol"?t:t+""}function xne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const T2=e=>Object.prototype.toString.call(e);function Uh(e,t){return e==null?null:Array.isArray(e)?e:e[t]}class sj extends O2.Component{constructor(){super(...arguments),$0(this,"state",this.generateInitialState()),$0(this,"onLayoutChange",t=>{this.props.onLayoutChange(t,{...this.props.layouts,[this.state.breakpoint]:t})})}generateInitialState(){const{width:t,breakpoints:r,layouts:n,cols:a}=this.props,i=(0,$i.getBreakpointFromWidth)(r,t),o=(0,$i.getColsFromBreakpoint)(i,a),l=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,$i.findOrGenerateResponsiveLayout)(n,r,i,i,o,l),breakpoint:i,cols:o}}static getDerivedStateFromProps(t,r){if(!(0,Kp.deepEqual)(t.layouts,r.layouts)){const{breakpoint:n,cols:a}=r;return{layout:(0,$i.findOrGenerateResponsiveLayout)(t.layouts,t.breakpoints,n,n,a,t.compactType),layouts:t.layouts}}return null}componentDidUpdate(t){(this.props.width!=t.width||this.props.breakpoint!==t.breakpoint||!(0,Kp.deepEqual)(this.props.breakpoints,t.breakpoints)||!(0,Kp.deepEqual)(this.props.cols,t.cols))&&this.onWidthChange(t)}onWidthChange(t){const{breakpoints:r,cols:n,layouts:a,compactType:i}=this.props,o=this.props.breakpoint||(0,$i.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),l=this.state.breakpoint,c=(0,$i.getColsFromBreakpoint)(o,n),d={...a};if(l!==o||t.breakpoints!==r||t.cols!==n){l in d||(d[l]=(0,El.cloneLayout)(this.state.layout));let f=(0,$i.findOrGenerateResponsiveLayout)(d,r,o,l,c,i);f=(0,El.synchronizeLayoutWithChildren)(f,this.props.children,c,i,this.props.allowOverlap),d[o]=f,this.props.onBreakpointChange(o,c),this.props.onLayoutChange(f,d),this.setState({breakpoint:o,layout:f,cols:c})}const u=Uh(this.props.margin,o),h=Uh(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,u,c,h)}render(){const{breakpoint:t,breakpoints:r,cols:n,layouts:a,margin:i,containerPadding:o,onBreakpointChange:l,onLayoutChange:c,onWidthChange:d,...u}=this.props;return O2.createElement(pne.default,Ov({},u,{margin:Uh(i,this.state.breakpoint),containerPadding:Uh(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}Pm.default=sj;$0(sj,"propTypes",{breakpoint:Vr.default.string,breakpoints:Vr.default.object,allowOverlap:Vr.default.bool,cols:Vr.default.object,margin:Vr.default.oneOfType([Vr.default.array,Vr.default.object]),containerPadding:Vr.default.oneOfType([Vr.default.array,Vr.default.object]),layouts(e,t){if(T2(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+T2(e[t]));Object.keys(e[t]).forEach(r=>{if(!(r in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,El.validateLayout)(e.layouts[r],"layouts."+r)})},width:Vr.default.number.isRequired,onBreakpointChange:Vr.default.func,onLayoutChange:Vr.default.func,onWidthChange:Vr.default.func});$0(sj,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:El.noop,onLayoutChange:El.noop,onWidthChange:El.noop});var ij={},T5=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(a,i){return a[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),a=this.__entries__[n];return a&&a[1]},t.prototype.set=function(r,n){var a=e(this.__entries__,r);~a?this.__entries__[a][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,a=e(n,r);~a&&n.splice(a,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var a=0,i=this.__entries__;a<i.length;a++){var o=i[a];r.call(n,o[1],o[0])}},t}()}(),Tv=typeof window<"u"&&typeof document<"u"&&window.document===document,I0=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),vne=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(I0):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),bne=2;function wne(e,t){var r=!1,n=!1,a=0;function i(){r&&(r=!1,e()),n&&l()}function o(){vne(i)}function l(){var c=Date.now();if(r){if(c-a<bne)return;n=!0}else r=!0,n=!1,setTimeout(o,t);a=c}return l}var kne=20,jne=["top","right","bottom","left","width","height","size","weight"],Nne=typeof MutationObserver<"u",Sne=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=wne(this.refresh.bind(this),kne)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Tv||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nne?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Tv||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,a=jne.some(function(i){return!!~n.indexOf(i)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),A5=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},cc=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||I0},D5=Em(0,0,0,0);function z0(e){return parseFloat(e)||0}function A2(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,a){var i=e["border-"+a+"-width"];return n+z0(i)},0)}function _ne(e){for(var t=["top","right","bottom","left"],r={},n=0,a=t;n<a.length;n++){var i=a[n],o=e["padding-"+i];r[i]=z0(o)}return r}function Cne(e){var t=e.getBBox();return Em(0,0,t.width,t.height)}function Pne(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return D5;var n=cc(e).getComputedStyle(e),a=_ne(n),i=a.left+a.right,o=a.top+a.bottom,l=z0(n.width),c=z0(n.height);if(n.boxSizing==="border-box"&&(Math.round(l+i)!==t&&(l-=A2(n,"left","right")+i),Math.round(c+o)!==r&&(c-=A2(n,"top","bottom")+o)),!One(e)){var d=Math.round(l+i)-t,u=Math.round(c+o)-r;Math.abs(d)!==1&&(l-=d),Math.abs(u)!==1&&(c-=u)}return Em(a.left,a.top,l,c)}var Ene=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof cc(e).SVGGraphicsElement}:function(e){return e instanceof cc(e).SVGElement&&typeof e.getBBox=="function"}}();function One(e){return e===cc(e).document.documentElement}function Tne(e){return Tv?Ene(e)?Cne(e):Pne(e):D5}function Ane(e){var t=e.x,r=e.y,n=e.width,a=e.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(i.prototype);return A5(o,{x:t,y:r,width:n,height:a,top:r,right:t+n,bottom:a+r,left:t}),o}function Em(e,t,r,n){return{x:e,y:t,width:r,height:n}}var Dne=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Em(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Tne(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Rne=function(){function e(t,r){var n=Ane(r);A5(this,{target:t,contentRect:n})}return e}(),Mne=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new T5,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof cc(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new Dne(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof cc(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Rne(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),R5=typeof WeakMap<"u"?new WeakMap:new T5,M5=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Sne.getInstance(),n=new Mne(t,r,this);R5.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){M5.prototype[e]=function(){var t;return(t=R5.get(this))[e].apply(t,arguments)}});var Lne=function(){return typeof I0.ResizeObserver<"u"?I0.ResizeObserver:M5}();const $ne=Object.freeze(Object.defineProperty({__proto__:null,default:Lne},Symbol.toStringTag,{value:"Module"})),Ine=Rv($ne);Object.defineProperty(ij,"__esModule",{value:!0});ij.default=Hne;var Bh=L5(m),zne=oj(Ai),Fne=oj(Ine),Une=oj(ym);function oj(e){return e&&e.__esModule?e:{default:e}}function L5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(L5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,l,c={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return c;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,c)}for(const d in a)d!=="default"&&{}.hasOwnProperty.call(a,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,d))&&(l.get||l.set)?o(c,d,l):c[d]=a[d]);return c})(e,t)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Av.apply(null,arguments)}function Zo(e,t,r){return(t=Bne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bne(e){var t=qne(e,"string");return typeof t=="symbol"?t:t+""}function qne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Wne="react-grid-layout";function Hne(e){var t;return t=class extends Bh.Component{constructor(){super(...arguments),Zo(this,"state",{width:1280}),Zo(this,"elementRef",Bh.createRef()),Zo(this,"mounted",!1),Zo(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new Fne.default(a=>{if(this.elementRef.current instanceof HTMLElement){const o=a[0].contentRect.width;this.setState({width:o})}});const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.observe(n)}componentWillUnmount(){this.mounted=!1;const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.unobserve(n),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:n,...a}=this.props;return n&&!this.mounted?Bh.createElement("div",{className:(0,Une.default)(this.props.className,Wne),style:this.props.style,ref:this.elementRef}):Bh.createElement(e,Av({innerRef:this.elementRef},a,this.state))}},Zo(t,"defaultProps",{measureBeforeMount:!1}),Zo(t,"propTypes",{measureBeforeMount:zne.default.bool}),t}(function(e){e.exports=Ku.default,e.exports.utils=He,e.exports.calculateUtils=Ua,e.exports.Responsive=Pm.default,e.exports.Responsive.utils=Fo,e.exports.WidthProvider=ij.default})(XD);var D2=XD.exports;const Vne=D2.WidthProvider(D2.Responsive);function Kne({refreshTrigger:e,refreshInterval:t=6e4,isActive:r=!1}){var X,Z,te,K,le,me,ue;const{id:n}=dg(),[a,i]=m.useState(null),[o,l]=m.useState(!0),[c,d]=m.useState(null),[u,h]=m.useState(!0),[f,g]=m.useState(null),[p,y]=m.useState([0,0,0,0,0,0,0,0,0,0]),[x,v]=m.useState([]),[w,b]=m.useState([]),k=A=>A.map((D,G)=>({i:D,x:G%2*6,y:Math.floor(G/2)*4,w:6,h:4,minW:4,minH:3})),j=async A=>{if(n)try{await fetch(`http://localhost:5001/api/monitoring-layout/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",layout:A})}),console.log(" Saved layout preferences")}catch(D){console.error("Failed to save layout:",D)}},N=A=>{b(A),j(A)};m.useEffect(()=>{if(x.length===0)return;const A=w.map(G=>G.i),D=x.filter(G=>!A.includes(G));if(D.length>0){const G=D.map((B,fe)=>({i:B,x:(w.length+fe)%2*6,y:Math.floor((w.length+fe)/2)*4,w:6,h:4,minW:4,minH:3})),ae=[...w,...G];b(ae),j(ae)}},[x]),m.useEffect(()=>{if(!(c!=null&&c.throughputMetrics)||c.throughputMetrics.length===0)return;const A=c.throughputMetrics[0];if(A&&A.value){const D=A.value.match(/(\d+)/);if(D){const G=parseInt(D[1],10);y(ae=>{const B=[...ae.slice(-9),G],fe=Math.max(...B);return fe===0?B.map(()=>0):B.map(be=>Math.round(be/fe*100))})}}},[c==null?void 0:c.throughputMetrics]),m.useEffect(()=>{(async()=>{if(n){l(!0);try{const{data:D,error:G}=await ne.from("alert_preferences").select(`
            *,
            user_profiles!created_by(full_name)
          `).eq("pipeline_id",n).maybeSingle();if(G)throw G;i(D)}catch(D){console.error("Error fetching alert preferences:",D),i(null)}finally{l(!1)}}})()},[n]),m.useEffect(()=>{(async()=>{var D,G;if(n)try{const B=await(await fetch(`http://localhost:5001/api/monitoring-panels/${n}?userId=default`)).json();if(B.success&&((D=B.panels)!=null&&D.panels)){const fe=B.panels.panels;v(fe),console.log(" Loaded panel preferences:",fe);try{const Te=await(await fetch(`http://localhost:5001/api/monitoring-layout/${n}?userId=default`)).json();if(Te.success&&((G=Te.layout)!=null&&G.layout))b(Te.layout.layout),console.log(" Loaded layout preferences");else{const Ae=k(fe);b(Ae),console.log(" Generated default layout")}}catch{console.log("No saved layout, generating default");const Te=k(fe);b(Te)}}}catch(ae){console.error("Failed to load panel preferences:",ae)}})()},[n]),m.useEffect(()=>{(async()=>{if(!n){console.log(" No pipeline ID");return}console.log(" Fetching monitoring data for pipeline:",n),h(!0);try{const D=await wx(n);console.log(" Monitoring data:",D),d(D)}catch(D){console.error(" Error fetching monitoring data:",D),d(null)}finally{h(!1)}})()},[n,e]),m.useEffect(()=>{if(!r||!n)return;const A=async()=>{try{const G=await wx(n);d(G)}catch(G){console.error(" Error auto-refreshing monitoring data:",G)}},D=setInterval(()=>{A()},t);return()=>clearInterval(D)},[n,r,t]);const _=(c==null?void 0:c.lagMetrics)||[],O=(c==null?void 0:c.throughputMetrics)||[],T=(c==null?void 0:c.slowTables)||[],P=(c==null?void 0:c.connectorTasks)||[],S=(c==null?void 0:c.state)||{status:"Unknown",errorRate:"0%",commitRate:"0/s",queueUsage:"0%"},M=A=>{if(!A)return 0;const D=A.match(/(\d+)/);if(!D)return 0;const G=parseInt(D[1],10);if(G===0)return 0;const B=Math.min(Math.max(G/1e3*100,20),100);return Math.round(B)},F={sourceToKafka:M((X=c==null?void 0:c.flowMetrics)==null?void 0:X.sourceToKafka),kafkaToSink:M((Z=c==null?void 0:c.flowMetrics)==null?void 0:Z.kafkaToSink),sinkToDestination:M((te=c==null?void 0:c.flowMetrics)==null?void 0:te.sinkToDestination)},q=A=>({"P50 Lag":"50% of records have lower lag. Shows typical performance.","P95 Lag":"95% of records have lower lag. Detects performance outliers.","P99 Lag":"99% of records have lower lag. Captures worst-case scenarios.","Avg Lag":"Average lag across all records in the pipeline."})[A]||"";if(u)return s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(st,{className:"w-8 h-8 text-blue-600 animate-spin"}),s.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading monitoring data..."})]});const z=c!=null&&c.throughputMetrics&&c.throughputMetrics.length>0?c.throughputMetrics.map((A,D)=>{var B,fe;const G=(fe=(B=c.throughputMetrics[D])==null?void 0:B.value)==null?void 0:fe.match(/(\d+)/),ae=G?parseFloat(G[1]):0;return{timestamp:Date.now()-(c.throughputMetrics.length-D-1)*5e3,value:isNaN(ae)?0:ae}}).filter(A=>!isNaN(A.timestamp)&&!isNaN(A.value)):[],W=z.length>0&&z.every(A=>!isNaN(A.timestamp)&&!isNaN(A.value)),$=c!=null&&c.lagMetrics&&c.lagMetrics.length>0?c.lagMetrics.map((A,D)=>{let G=0;if(A.value){const ae=A.value.match(/([\d.]+)(ms|s|m)?/);if(ae){const B=parseFloat(ae[1]),fe=ae[2]||"ms";fe==="s"?G=B*1e3:fe==="m"?G=B*6e4:G=B}}return{timestamp:Date.now()-(c.lagMetrics.length-D-1)*5e3,value:isNaN(G)?0:G}}).filter(A=>!isNaN(A.timestamp)&&!isNaN(A.value)):[],E=$.length>0&&$.every(A=>!isNaN(A.timestamp)&&!isNaN(A.value)),U=async A=>{var D;if(n)try{const fe=(((D=(await(await fetch(`http://localhost:5001/api/monitoring-panels/${n}?userId=default`)).json()).panels)==null?void 0:D.panels)||[]).filter(Te=>Te!==A);await fetch(`http://localhost:5001/api/monitoring-panels/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",panels:fe})});const be=w.filter(Te=>Te.i!==A);b(be),j(be),v(fe),console.log(` Panel "${A}" removed from Pipeline Details`)}catch(G){console.error("Failed to remove panel:",G)}},I=A=>{const G={throughput:c&&W&&z.length>0?s.jsx(QD,{data:z,title:"Source Throughput",color:"#3b82f6",height:300}):null,latency:c&&E&&$.length>0?s.jsx(YD,{data:$,title:"Source Latency",height:300}):null}[A];return G?s.jsxs("div",{className:"relative h-full",style:{pointerEvents:"auto",minHeight:"320px"},children:[s.jsx("button",{onClick:ae=>{ae.stopPropagation(),ae.preventDefault(),console.log("Remove button clicked for panel:",A),U(A)},className:"absolute top-2 right-2 z-[9999] p-1.5 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition-colors shadow-lg cursor-pointer",title:"Remove from Details",style:{pointerEvents:"auto"},children:s.jsx(at,{className:"w-4 h-4"})}),G]},A):null};return s.jsxs("div",{className:"space-y-6",children:[x.length>0&&w.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Dashboard Panels"}),s.jsx(Vne,{className:"layout",layouts:{lg:w},breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:80,onLayoutChange:A=>N(A),isDraggable:!0,isResizable:!0,compactType:"vertical",preventCollision:!1,children:x.map(A=>I(A)).filter(Boolean)})]}),x.includes("pipeline-state")&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>U("pipeline-state"),className:"absolute top-4 right-4 z-10 p-1.5 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition-colors",title:"Remove from Details",children:s.jsx(at,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pipeline State"})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx(si,{label:"State",value:S.status,icon:zf,variant:S.status==="Streaming"?"success":"default"}),s.jsx(si,{label:"Error Rate",value:S.errorRate,icon:bn,variant:parseFloat(S.errorRate)<1?"success":"default"}),s.jsx(si,{label:"Commit Rate",value:S.commitRate,icon:kt,variant:"default"}),s.jsx(si,{label:"Queue Usage",value:S.queueUsage,icon:Lr,variant:"default"})]})]})]}),x.includes("end-to-end-latency")&&_.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>U("end-to-end-latency"),className:"absolute top-4 right-4 z-10 p-1.5 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition-colors",title:"Remove from Details",children:s.jsx(at,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"End-to-End Latency"})}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:_.map(A=>s.jsxs("div",{className:"relative",onMouseEnter:()=>g(A.label),onMouseLeave:()=>g(null),children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-150 cursor-help",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.label}),s.jsx(wi,{className:"w-3.5 h-3.5 text-gray-400 dark:text-gray-500"})]}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A.value}),A.change&&s.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${A.trend==="down"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[A.trend==="down"?s.jsx(SE,{className:"w-3 h-3"}):s.jsx(os,{className:"w-3 h-3"}),A.change]})]})]}),f===A.label&&s.jsxs("div",{className:"absolute z-50 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2.5 bg-gradient-to-br from-gray-900 to-gray-800 dark:from-gray-700 dark:to-gray-600 text-white text-xs rounded-lg shadow-xl max-w-[200px] animate-in fade-in slide-in-from-bottom-2 duration-200",children:[s.jsx("div",{className:"font-semibold mb-1 text-blue-300",children:A.label}),s.jsx("div",{className:"text-gray-200 dark:text-gray-300 leading-relaxed",children:q(A.label)}),s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:s.jsx("div",{className:"border-[5px] border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})]},A.label))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Throughput"})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"space-y-4",children:O.map(A=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:A.label}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:A.value})]},A.label))}),s.jsx("div",{className:"mt-6 h-32 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg flex items-end justify-around p-4",children:p.map((A,D)=>s.jsx("div",{className:"w-6 bg-gradient-to-t from-blue-600 to-blue-400 dark:from-blue-500 dark:to-blue-300 rounded-t transition-all duration-700 ease-in-out animate-pulse-subtle",style:{height:`${A}%`,animationDelay:`${D*100}ms`}},D))})]})]}),x.includes("records-flow")&&(c==null?void 0:c.flowMetrics)&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>U("records-flow"),className:"absolute top-4 right-4 z-10 p-1.5 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition-colors",title:"Remove from Details",children:s.jsx(at,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Records Flow"})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Source  Kafka"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:((K=c==null?void 0:c.flowMetrics)==null?void 0:K.sourceToKafka)||"0 rec/s"})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500 ease-out relative",style:{width:`${F.sourceToKafka}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kafka  Sink"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:((le=c==null?void 0:c.flowMetrics)==null?void 0:le.kafkaToSink)||"0 rec/s"})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500 ease-out relative",style:{width:`${F.kafkaToSink}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.3s"}})})})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sink  Destination"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:((me=c==null?void 0:c.flowMetrics)==null?void 0:me.sinkToDestination)||"0 rec/s"})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-500 ease-out relative",style:{width:`${F.sinkToDestination}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.6s"}})})})]})})]})})]})]})]}),x.includes("top-slow-tables")&&T.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>U("top-slow-tables"),className:"absolute top-4 right-4 z-10 p-1.5 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition-colors",title:"Remove from Details",children:s.jsx(at,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Top Slow Tables"}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Table"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Lag"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Records"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:T.map(A=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:A.table}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:A.lag}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:A.records}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":A.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:A.status})})]},A.table))})]})})]})]}),x.includes("connector-task-health")&&P.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>U("connector-task-health"),className:"absolute top-4 right-4 z-10 p-1.5 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition-colors",title:"Remove from Details",children:s.jsx(at,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:["Connector Task Health Map",s.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",P.length," ",P.length===1?"task":"tasks",")"]})]}),s.jsx("div",{className:"grid grid-cols-5 lg:grid-cols-8 xl:grid-cols-10 gap-3",children:P.map(A=>s.jsxs("div",{className:`p-3 rounded-lg border ${A.status==="healthy"?"border-green-500 bg-green-50 dark:bg-green-900/20":A.status==="warning"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate",children:A.id}),s.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ml-1 ${A.status==="healthy"?"bg-green-500":A.status==="warning"?"bg-yellow-500":"bg-red-500"}`})]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:"Lag:"}),s.jsx("span",{className:"font-medium truncate ml-1",children:A.lag})]}),s.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:"Rate:"}),s.jsx("span",{className:"font-medium truncate ml-1",children:A.records})]})]})]},A.id))})]})]}),n&&s.jsx(W9,{pipelineId:n}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[s.jsx(ys,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Defined Alarms"]}),s.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded",children:"Read Only"})]}),o?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx(st,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading alarms..."})]}):a?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Defined by:"}),s.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-gray-100",children:((ue=a.user_profiles)==null?void 0:ue.full_name)||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Last updated:"}),s.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-gray-100",children:new Date(a.updated_at).toLocaleDateString()})]})]})}),s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Alert Type"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Slack"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Dashboard"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[{key:"pipeline_connectivity",label:"Pipeline Connectivity"},{key:"pipeline_job_failures",label:"Pipeline Job Failures"},{key:"source_event_types",label:"Source Event Types"},{key:"failed_events_summary",label:"Failed Events Summary"},{key:"webhooks",label:"Webhooks"},{key:"pipeline_loading_status",label:"Pipeline Loading Status"},{key:"source_side_events",label:"Source Side Events"},{key:"data_spike_alert",label:"Data Spike Alert"}].map(A=>{const D=a[`${A.key}_slack`],G=a[`${A.key}_dashboard`];return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:A.label}),s.jsx("td",{className:"px-6 py-4 text-center",children:D?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs",children:[s.jsx(OL,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Enabled"})]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("td",{className:"px-6 py-4 text-center",children:G?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs",children:[s.jsx(NE,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Enabled"})]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})})]},A.key)})})]})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx(ys,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No alarms defined for this pipeline"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Configure alarms in Alert Preferences to receive notifications"})]})]})]})}const R2=[{id:"1",key:"order-12345",topic:"oracle.SALES.ORDERS",partition:2,offset:1523456,timestamp:"2024-11-12T10:30:15Z",errorReason:'Schema validation failed: missing required field "customer_id"'},{id:"2",key:"customer-98765",topic:"oracle.SALES.CUSTOMERS",partition:1,offset:892341,timestamp:"2024-11-12T09:15:30Z",errorReason:"Data type mismatch: expected INTEGER, got VARCHAR"}];function Gne({pipelineId:e,pipelineStatus:t,activeView:r,searchQuery:n,severityFilter:a}){const[i,o]=m.useState(null),[l,c]=m.useState([]),[d,u]=m.useState([]),[h,f]=m.useState(!1),[g,p]=m.useState({}),y=Db(),{data:x=[]}=pO(e,{refetchInterval:1e4}),v=async(_=!1)=>{_||f(!0);const O="http://127.0.0.1:5002";try{const T=await fetch(`${O}/api/pipelines/${e}/logs`);if(T.ok){const P=await T.json();P.success&&Array.isArray(P.logs)&&c(P.logs)}}catch(T){console.error("Failed to fetch logs:",T)}finally{_||f(!1)}},w=async(_=!1)=>{const O="http://127.0.0.1:5002";try{const T=await fetch(`${O}/api/pipelines/${e}/state-changes`);if(T.ok){const P=await T.json();P.success&&Array.isArray(P.stateChanges)&&u(P.stateChanges)}}catch(T){console.error("Failed to fetch state changes:",T)}};m.useEffect(()=>{v(),w()},[e]),m.useEffect(()=>{if(t==="stopped"||t==="deleted")return;const _=setInterval(()=>{v(!0),w(!0)},5e3);return()=>clearInterval(_)},[t,e]);const b=_=>{switch(_){case"error":return s.jsx(In,{className:"w-5 h-5 text-red-500"});case"warn":return s.jsx(bn,{className:"w-5 h-5 text-yellow-500"});case"info":return s.jsx(wi,{className:"w-5 h-5 text-blue-500"});default:return s.jsx(wi,{className:"w-5 h-5 text-gray-500"})}},k=_=>{switch(_){case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"warn":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";default:return"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-700"}},j=_=>new Date(_).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),N=l.filter(_=>{const O=_.message.toLowerCase().includes(n.toLowerCase()),T=a==="all"||_.severity===a;return O&&T});return s.jsxs("div",{className:"space-y-6",children:[r==="logs"&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"space-y-3",children:N.map(_=>s.jsx("div",{onClick:()=>o(_),className:`border rounded-lg p-4 cursor-pointer hover:shadow-md transition-all ${k(_.severity)}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[b(_.severity),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 uppercase",children:_.severity}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:j(_.timestamp)})]}),s.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:_.message}),_.workerId&&s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Worker: ",_.workerId]}),_.context&&s.jsxs("button",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2 hover:underline flex items-center gap-1",children:["View context",s.jsx(nn,{className:"w-3 h-3"})]})]})]})},_.id))})}),r==="timeline"&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"State Changes"}),s.jsx("div",{className:"relative",children:d.map((_,O)=>s.jsxs("div",{className:"relative pb-8 last:pb-0",children:[O<d.length-1&&s.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-700"}),s.jsxs("div",{className:"relative flex items-start gap-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:s.jsx($r,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded",children:_.from}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded",children:_.to})]}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:j(_.timestamp)})]}),s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[_.task&&s.jsxs("span",{className:"font-medium",children:[_.task,"  "]}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Worker: ",_.workerId]})]})]})]})]},_.id))})]}),r==="dlq"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(bn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:[s.jsx("p",{className:"font-medium mb-1",children:"Dead Letter Queue"}),s.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:"Records that failed processing are stored here. Review and retry as needed."})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Key"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Topic"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Partition/Offset"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Timestamp"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:R2.map(_=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:_.key})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.topic})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[_.partition," / ",_.offset]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:j(_.timestamp)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Retry"})})]},_.id))})]})}),R2.length>0&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry All"}),s.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[s.jsx(rg,{className:"w-4 h-4"}),"Download DLQ Records"]})]})]}),r==="alerts"&&s.jsx("div",{className:"space-y-4",children:x.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-12 text-center",children:[s.jsx($r,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Alerts"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This pipeline has no unresolved alerts. The monitoring system is actively checking for issues."})]}):s.jsx("div",{className:"space-y-3",children:x.map(_=>s.jsxs("div",{className:`bg-white dark:bg-gray-800 border rounded-lg p-4 ${_.severity==="critical"?"border-red-300 dark:border-red-700":_.severity==="warning"?"border-yellow-300 dark:border-yellow-700":"border-blue-300 dark:border-blue-700"}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx($f,{className:`w-5 h-5 ${_.severity==="critical"?"text-red-600 dark:text-red-400":_.severity==="warning"?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}`}),s.jsx("span",{className:`px-2.5 py-0.5 rounded text-xs font-semibold ${R9(_.severity)}`,children:_.severity.toUpperCase()}),s.jsx("span",{className:"px-2.5 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:M9(_.alert_type)}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(_.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:_.message}),_.metadata&&Object.keys(_.metadata).length>0&&s.jsxs("details",{className:"text-xs text-gray-600 dark:text-gray-400",children:[s.jsx("summary",{className:"cursor-pointer hover:text-gray-900 dark:hover:text-gray-200",children:"View Details"}),s.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:JSON.stringify(_.metadata,null,2)})]})]}),s.jsxs("button",{onClick:async()=>{try{p(O=>{const T={...O};return delete T[_.id],T}),await D9(_.id),y.invalidateQueries({queryKey:["pipeline-alerts",e]}),y.invalidateQueries({queryKey:["alerts"]}),y.invalidateQueries({queryKey:["alert-stats"]})}catch(O){console.error("Failed to resolve alert:",O),p(T=>({...T,[_.id]:O.message||"Failed to resolve alert"}))}},className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors flex items-center gap-1.5",title:"Mark as resolved",children:[s.jsx($r,{className:"w-4 h-4"}),"Resolve"]})]}),g[_.id]&&s.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2",children:[s.jsx(In,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:g[_.id]})}),s.jsx("button",{onClick:()=>p(O=>{const T={...O};return delete T[_.id],T}),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:s.jsx(at,{className:"w-4 h-4"})})]})]},_.id))})}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>o(null)}),s.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Log Details"}),s.jsx("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Message"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:i.message})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Timestamp"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:j(i.timestamp)})]}),i.context&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Context"}),s.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg text-xs text-gray-900 dark:text-gray-100 overflow-auto",children:JSON.stringify(i.context,null,2)})]})]})]})]})]})}function Qne({config:e,onChange:t}){const[r,n]=m.useState(new Set(["connection"])),[a,i]=m.useState(e),[o,l]=m.useState(!1),[c,d]=m.useState(null),u=[{id:"connection",title:"Connection & Basic Settings",description:"Database connection and connector identification",parameters:[{key:"database.hostname",label:"Database Hostname",type:"text",defaultValue:"localhost",description:"Oracle database server hostname or IP"},{key:"database.port",label:"Database Port",type:"number",defaultValue:1521,description:"Oracle listener port"},{key:"database.user",label:"Database User",type:"text",defaultValue:"DEBEZIUM",description:"Oracle user with LogMiner privileges"},{key:"database.password",label:"Database Password",type:"password",defaultValue:"",description:"Database password"},{key:"database.dbname",label:"Database Name (SID/Service)",type:"text",defaultValue:"ORCL",description:"Oracle SID or Service Name"},{key:"database.server.name",label:"Database Server Name",type:"text",defaultValue:"oracle-server",description:"Logical name for this database server"},{key:"database.server.id",label:"Database Server ID",type:"text",defaultValue:"1001",description:"Unique numeric ID for this server"},{key:"topic.prefix",label:"Topic Prefix",type:"text",defaultValue:"oracle",description:"Kafka topic prefix (topics will be prefix.schema.table)"},{key:"tasks.max",label:"Max Tasks",type:"number",defaultValue:1,description:"Number of parallel connector tasks"},{key:"database.connection.adapter",label:"Connection Adapter",type:"select",defaultValue:"logminer",options:[{value:"logminer",label:"LogMiner"},{value:"xstream",label:"XStream"}],description:"Oracle CDC adapter to use"}]},{id:"log-mining",title:"Log Mining / Redo Management",description:"Configure Oracle LogMiner and redo log processing",parameters:[{key:"log.mining.strategy",label:"Log Mining Strategy",type:"select",defaultValue:"online_catalog",options:[{value:"online_catalog",label:"Online Catalog"},{value:"redo_log_catalog",label:"Redo Log Catalog"}],description:"Strategy for extracting LogMiner data"},{key:"log.mining.archive.log.only.mode",label:"Archive Log Only Mode",type:"boolean",defaultValue:!1,description:"Force using only archive logs (true when online redo is not accessible)"},{key:"log.mining.sleep.time.default",label:"Sleep Time Default (ms)",type:"number",defaultValue:1e3,description:"Default polling interval for log mining"},{key:"log.mining.sleep.time.min",label:"Sleep Time Min (ms)",type:"number",defaultValue:0,description:"Minimum polling interval"},{key:"log.mining.sleep.time.max",label:"Sleep Time Max (ms)",type:"number",defaultValue:3e3,description:"Maximum polling interval"},{key:"log.mining.batch.size.default",label:"Batch Size Default",type:"number",defaultValue:2e4,description:"Default number of redo records per batch"},{key:"log.mining.batch.size.min",label:"Batch Size Min",type:"number",defaultValue:1e3,description:"Minimum number of redo records per batch"},{key:"log.mining.batch.size.max",label:"Batch Size Max",type:"number",defaultValue:1e5,description:"Maximum number of redo records per batch"},{key:"log.mining.archive.log.only",label:"Archive Log Only",type:"boolean",defaultValue:!1,description:"Use only archived redo logs"},{key:"log.mining.archive.log.hours",label:"Archive Log Hours",type:"number",defaultValue:24,description:"Hours of archive logs to query"},{key:"log.mining.archive.destination.name",label:"Archive Destination Name",type:"text",defaultValue:"",description:"Oracle archive destination (e.g., LOG_ARCHIVE_DEST_1)"},{key:"log.mining.archive.log.minimum.hours",label:"Archive Log Minimum Hours",type:"number",defaultValue:4,description:"Minimum hours to retain archive logs"},{key:"log.mining.continuous.mine",label:"Continuous Mine",type:"boolean",defaultValue:!0,description:"Keep LogMiner session open continuously"},{key:"log.mining.session.max.ms",label:"Session Max (ms)",type:"number",defaultValue:0,description:"Max duration for LogMiner session (0 = unlimited)"},{key:"log.mining.query.timeout.ms",label:"Query Timeout (ms)",type:"number",defaultValue:18e4,description:"Timeout for LogMiner queries"},{key:"oracle.dictionary.mode",label:"Dictionary Mode",type:"select",defaultValue:"auto",options:[{value:"auto",label:"Auto"},{value:"redo_log",label:"Redo Log"},{value:"online_catalog",label:"Online Catalog"}],description:"Source of dictionary information"}]},{id:"snapshot",title:"Snapshot / Initial Load",description:"Configure initial snapshot behavior",parameters:[{key:"snapshot.mode",label:"Snapshot Mode",type:"select",defaultValue:"initial",options:[{value:"initial",label:"Initial (snapshot + streaming)"},{value:"schema_only",label:"Schema Only (no data)"},{value:"initial_only",label:"Initial Only (snapshot only)"},{value:"never",label:"Never (streaming only)"}],description:"How to perform initial snapshot"},{key:"snapshot.lock.timeout.ms",label:"Lock Timeout (ms)",type:"number",defaultValue:1e4,description:"Timeout for acquiring table locks during snapshot"},{key:"snapshot.max.threads",label:"Max Threads",type:"number",defaultValue:1,description:"Number of parallel snapshot threads"},{key:"snapshot.fetch.size",label:"Fetch Size",type:"number",defaultValue:2e3,description:"JDBC fetch batch size for snapshot"},{key:"snapshot.delay.ms",label:"Snapshot Delay (ms)",type:"number",defaultValue:0,description:"Delay before starting snapshot"}]},{id:"filtering",title:"Filtering",description:"Filter which tables and columns to capture",parameters:[{key:"table.include.list",label:"Table Include List",type:"textarea",defaultValue:"",description:"Comma-separated list of tables to include (e.g., SCHEMA.TABLE, SCHEMA.*)"},{key:"table.exclude.list",label:"Table Exclude List",type:"textarea",defaultValue:"",description:"Comma-separated list of tables to exclude"},{key:"column.exclude.list",label:"Column Exclude List",type:"textarea",defaultValue:"",description:"Columns to exclude from events"},{key:"database.include.list",label:"Database Include List",type:"text",defaultValue:"",description:"Filter by database/schema names"},{key:"database.exclude.list",label:"Database Exclude List",type:"text",defaultValue:"",description:"Exclude specific databases/schemas"}]},{id:"data-transformation",title:"Data Transformation & Metadata",description:"Configure data type handling and metadata",parameters:[{key:"decimal.handling.mode",label:"Decimal Handling",type:"select",defaultValue:"precise",options:[{value:"precise",label:"Precise (BigDecimal)"},{value:"double",label:"Double"},{value:"string",label:"String"}],description:"How to represent decimal values"},{key:"binary.handling.mode",label:"Binary Handling",type:"select",defaultValue:"bytes",options:[{value:"bytes",label:"Bytes"},{value:"base64",label:"Base64"},{value:"hex",label:"Hex"}],description:"How to represent binary data"},{key:"time.precision.mode",label:"Time Precision Mode",type:"select",defaultValue:"adaptive",options:[{value:"adaptive",label:"Adaptive"},{value:"connect",label:"Connect"}],description:"Time/timestamp precision handling"},{key:"event.processing.failure.handling.mode",label:"Event Failure Handling",type:"select",defaultValue:"fail",options:[{value:"fail",label:"Fail"},{value:"warn",label:"Warn"},{value:"ignore",label:"Ignore"}],description:"How to handle event processing failures"},{key:"tombstones.on.delete",label:"Tombstones on Delete",type:"boolean",defaultValue:!0,description:"Emit tombstone messages for delete events"}]},{id:"performance",title:"Performance & Resource Usage",description:"Tune performance and resource consumption",parameters:[{key:"max.queue.size",label:"Max Queue Size",type:"number",defaultValue:8192,description:"Queue size for buffering events"},{key:"max.batch.size",label:"Max Batch Size",type:"number",defaultValue:2048,description:"Max records per batch sent to Kafka"},{key:"poll.interval.ms",label:"Poll Interval (ms)",type:"number",defaultValue:1e3,description:"Connector polling interval"},{key:"producer.override.compression.type",label:"Kafka Compression",type:"select",defaultValue:"snappy",options:[{value:"none",label:"None"},{value:"gzip",label:"GZIP"},{value:"snappy",label:"Snappy"},{value:"lz4",label:"LZ4"},{value:"zstd",label:"ZSTD"}],description:"Kafka producer compression type"},{key:"producer.override.max.request.size",label:"Max Request Size (bytes)",type:"number",defaultValue:1048576,description:"Maximum size of producer request"},{key:"offset.flush.interval.ms",label:"Offset Flush Interval (ms)",type:"number",defaultValue:6e4,description:"Frequency of offset commits"}]},{id:"security",title:"Security",description:"SSL and encryption settings",parameters:[{key:"database.ssl.mode",label:"SSL Mode",type:"select",defaultValue:"disabled",options:[{value:"disabled",label:"Disabled"},{value:"required",label:"Required"},{value:"verify-ca",label:"Verify CA"},{value:"verify-full",label:"Verify Full"}],description:"SSL connection mode"},{key:"database.ssl.keystore",label:"SSL Keystore Path",type:"text",defaultValue:"",description:"Path to SSL keystore file"},{key:"database.ssl.truststore",label:"SSL Truststore Path",type:"text",defaultValue:"",description:"Path to SSL truststore file"},{key:"database.password.encryption.key",label:"Password Encryption Key",type:"text",defaultValue:"",description:"Key for encrypting stored passwords"}]},{id:"heartbeat",title:"Heartbeat / Monitoring",description:"Configure heartbeat and monitoring",parameters:[{key:"heartbeat.interval.ms",label:"Heartbeat Interval (ms)",type:"number",defaultValue:0,description:"Frequency of heartbeat events (0 = disabled)"},{key:"heartbeat.action.query",label:"Heartbeat Action Query",type:"textarea",defaultValue:"",description:"Custom SQL query for heartbeat monitoring"},{key:"signal.data.collection",label:"Signal Data Collection",type:"text",defaultValue:"",description:"Table for outbox-style signaling"},{key:"provide.transaction.metadata",label:"Provide Transaction Metadata",type:"boolean",defaultValue:!1,description:"Include transaction metadata in events"},{key:"include.schema.changes",label:"Include Schema Changes",type:"boolean",defaultValue:!1,description:"Include DDL changes in events"}]},{id:"key-value-converters",title:"Key/Value Converters",description:"Configure Kafka message key and value serialization",parameters:[{key:"key.converter",label:"Key Converter",type:"select",defaultValue:"org.apache.kafka.connect.json.JsonConverter",options:[{value:"org.apache.kafka.connect.json.JsonConverter",label:"JSON Converter"},{value:"io.confluent.connect.avro.AvroConverter",label:"Avro Converter"},{value:"org.apache.kafka.connect.storage.StringConverter",label:"String Converter"}],description:"Converter class for message keys"},{key:"key.converter.schemas.enable",label:"Key Converter Schemas Enable",type:"boolean",defaultValue:!0,description:"Include schema in key (for JSON converter)"},{key:"value.converter",label:"Value Converter",type:"select",defaultValue:"org.apache.kafka.connect.json.JsonConverter",options:[{value:"org.apache.kafka.connect.json.JsonConverter",label:"JSON Converter"},{value:"io.confluent.connect.avro.AvroConverter",label:"Avro Converter"},{value:"org.apache.kafka.connect.storage.StringConverter",label:"String Converter"}],description:"Converter class for message values"},{key:"value.converter.schemas.enable",label:"Value Converter Schemas Enable",type:"boolean",defaultValue:!0,description:"Include schema in value (for JSON converter)"},{key:"message.key.columns",label:"Message Key Columns",type:"textarea",defaultValue:"",description:"Override message key columns (format: SCHEMA.TABLE:COL1,COL2;...)"}]},{id:"kafka-schema-history",title:"Kafka Schema History",description:"Configure Kafka topic for schema history storage",parameters:[{key:"schema.history.internal",label:"Schema History Internal",type:"select",defaultValue:"io.debezium.storage.kafka.history.KafkaSchemaHistory",options:[{value:"io.debezium.storage.kafka.history.KafkaSchemaHistory",label:"Kafka Schema History"},{value:"io.debezium.storage.file.history.FileSchemaHistory",label:"File Schema History"}],description:"Schema history storage implementation"},{key:"schema.history.internal.kafka.bootstrap.servers",label:"Kafka Bootstrap Servers",type:"text",defaultValue:"localhost:9092",description:"Kafka brokers for schema history (comma-separated)"},{key:"schema.history.internal.kafka.topic",label:"Schema History Topic",type:"text",defaultValue:"schema-changes.connector",description:"Kafka topic name for storing schema history"},{key:"schema.history.internal.skip.unparseable.ddl",label:"Skip Unparseable DDL",type:"boolean",defaultValue:!0,description:"Skip DDL statements that cannot be parsed"},{key:"schema.history.internal.store.only.captured.tables.ddl",label:"Store Only Captured Tables DDL",type:"boolean",defaultValue:!0,description:"Store DDL only for captured tables"}]},{id:"kafka-sasl-security",title:"Kafka SASL Security",description:"Configure SASL authentication for Kafka (optional)",parameters:[{key:"schema.history.internal.producer.security.protocol",label:"Producer Security Protocol",type:"select",defaultValue:"PLAINTEXT",options:[{value:"PLAINTEXT",label:"PLAINTEXT"},{value:"SASL_PLAINTEXT",label:"SASL_PLAINTEXT"},{value:"SASL_SSL",label:"SASL_SSL"},{value:"SSL",label:"SSL"}],description:"Security protocol for Kafka producer"},{key:"schema.history.internal.producer.sasl.mechanism",label:"Producer SASL Mechanism",type:"select",defaultValue:"PLAIN",options:[{value:"PLAIN",label:"PLAIN"},{value:"SCRAM-SHA-256",label:"SCRAM-SHA-256"},{value:"SCRAM-SHA-512",label:"SCRAM-SHA-512"}],description:"SASL mechanism for producer"},{key:"schema.history.internal.producer.sasl.jaas.config",label:"Producer SASL JAAS Config",type:"textarea",defaultValue:"",description:'JAAS config string for producer (e.g., org.apache.kafka.common.security.plain.PlainLoginModule required username="user" password="pass";)'},{key:"schema.history.internal.consumer.security.protocol",label:"Consumer Security Protocol",type:"select",defaultValue:"PLAINTEXT",options:[{value:"PLAINTEXT",label:"PLAINTEXT"},{value:"SASL_PLAINTEXT",label:"SASL_PLAINTEXT"},{value:"SASL_SSL",label:"SASL_SSL"},{value:"SSL",label:"SSL"}],description:"Security protocol for Kafka consumer"},{key:"schema.history.internal.consumer.sasl.mechanism",label:"Consumer SASL Mechanism",type:"select",defaultValue:"PLAIN",options:[{value:"PLAIN",label:"PLAIN"},{value:"SCRAM-SHA-256",label:"SCRAM-SHA-256"},{value:"SCRAM-SHA-512",label:"SCRAM-SHA-512"}],description:"SASL mechanism for consumer"},{key:"schema.history.internal.consumer.sasl.jaas.config",label:"Consumer SASL JAAS Config",type:"textarea",defaultValue:"",description:"JAAS config string for consumer"}]}],h=x=>{const v=new Set(r);v.has(x)?v.delete(x):v.add(x),n(v)},f=(x,v)=>{const w={...a,[x]:v};i(w),t(w)},g=x=>{d(x),l(!0)},p=()=>{if(!c)return;const v=(a["table.include.list"]||"").split(",").map(w=>w.trim()).filter(Boolean).filter(w=>w!==c);f("table.include.list",v.join(",")),l(!1),d(null)},y=x=>{var w;const v=a[x.key]??x.defaultValue;switch(x.type){case"boolean":return s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:b=>f(x.key,b.target.checked),className:"mt-1 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:x.label}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]})]});case"select":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x.label}),s.jsx("select",{value:v,onChange:b=>f(x.key,b.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:(w=x.options)==null?void 0:w.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]});case"textarea":if(x.key==="table.include.list"){const b=(v||"").split(",").map(k=>k.trim()).filter(Boolean);return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x.label}),b.length>0?s.jsx("div",{className:"space-y-2 mb-2",children:b.map((k,j)=>s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:k}),s.jsx("button",{onClick:()=>g(k),className:"p-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove table",children:s.jsx(mn,{className:"w-4 h-4"})})]},j))}):null,s.jsx("textarea",{value:v,onChange:k=>f(x.key,k.target.value),rows:3,placeholder:"SCHEMA.TABLE1,SCHEMA.TABLE2,...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono text-sm"}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]})}return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x.label}),s.jsx("textarea",{value:v,onChange:b=>f(x.key,b.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono text-sm"}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]});case"number":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x.label}),s.jsx("input",{type:"number",value:v,onChange:b=>f(x.key,Number(b.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]});case"password":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x.label}),s.jsx("input",{type:"password",value:v,onChange:b=>f(x.key,b.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]});default:return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:x.label}),s.jsx("input",{type:"text",value:v,onChange:b=>f(x.key,b.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),x.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x.description})]})}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4",children:u.map(x=>{const v=r.has(x.id);return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>h(x.id),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-between",children:[s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:x.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:x.description})]}),v?s.jsx(ua,{className:"w-5 h-5 text-gray-500"}):s.jsx(nn,{className:"w-5 h-5 text-gray-500"})]}),v&&s.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 space-y-4",children:x.parameters.map(w=>s.jsx("div",{children:y(w)},w.key))})]},x.id)})}),o&&c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>l(!1)}),s.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:s.jsx(bn,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Remove Table from Pipeline"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["You are about to remove ",s.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-gray-100",children:c})," from the source configuration."]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[s.jsx(bn,{className:"w-4 h-4"}),"Impact on Sink/Destination"]}),s.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"Data from this table will no longer be replicated"}),s.jsx("li",{children:"Existing data in the destination will remain unchanged"}),s.jsx("li",{children:"The destination table will not be dropped automatically"}),s.jsx("li",{children:"You may need to manually clean up the destination table if required"})]})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Are you sure you want to proceed?"})]})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"}),s.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Remove Table"})]})]})})]})]})}function Yne({config:e,onChange:t}){const[r,n]=m.useState(!1),a=(l,c)=>{t({...e,[l]:c})},i=(l,c=!1)=>{if(typeof l=="boolean")return l;if(typeof l=="string"){const d=l.toLowerCase();if(d==="true")return!0;if(d==="false")return!1}return c},o=(l,c)=>{if(typeof l=="number"&&!Number.isNaN(l))return l;if(typeof l=="string"){const d=parseInt(l,10);if(!Number.isNaN(d))return d}return c};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hostname"}),s.jsx("input",{type:"text",value:e["database.hostname"]||"",onChange:l=>a("database.hostname",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"localhost"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port"}),s.jsx("input",{type:"number",value:o(e["database.port"],5432),onChange:l=>a("database.port",parseInt(l.target.value,10)||5432),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Database Name"}),s.jsx("input",{type:"text",value:e["database.dbname"]||"",onChange:l=>a("database.dbname",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"postgres"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),s.jsx("input",{type:"text",value:e["database.user"]||"",onChange:l=>a("database.user",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"postgres"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:r?"text":"password",value:e["database.password"]||"",onChange:l=>a("database.password",l.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:""}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Connection Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Database Schema"}),s.jsx("input",{type:"text",value:e["database.schema"]||"public",onChange:l=>a("database.schema",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"public"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Database Server ID"}),s.jsx("input",{type:"text",value:e["database.server.id"]||"",onChange:l=>a("database.server.id",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"8106"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e.use_ssl),onChange:l=>a("use_ssl",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Use SSL"})]})}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e.ssh_tunnel),onChange:l=>a("ssh_tunnel",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"SSH Tunnel"})]})})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"CDC Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Topic Prefix"}),s.jsx("input",{type:"text",value:e["topic.prefix"]||"",onChange:l=>a("topic.prefix",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"denizim"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Prefix for Kafka topics"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Database Server Name"}),s.jsx("input",{type:"text",value:e["database.server.name"]||"",onChange:l=>a("database.server.name",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"denizim_res_20251123"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Logical name for database server"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plugin Name"}),s.jsxs("select",{value:e["plugin.name"]||"pgoutput",onChange:l=>a("plugin.name",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"pgoutput",children:"pgoutput"}),s.jsx("option",{value:"wal2json",children:"wal2json"}),s.jsx("option",{value:"decoderbufs",children:"decoderbufs"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Logical decoding plugin for PostgreSQL"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Publication Name"}),s.jsx("input",{type:"text",value:e["publication.name"]||"dbz_publication",onChange:l=>a("publication.name",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"dbz_publication"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"PostgreSQL publication for CDC"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slot Name"}),s.jsx("input",{type:"text",value:e["slot.name"]||"debezium",onChange:l=>a("slot.name",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"debezium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Replication slot name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Snapshot Mode"}),s.jsxs("select",{value:e["snapshot.mode"]||"initial",onChange:l=>a("snapshot.mode",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"initial",children:"Initial"}),s.jsx("option",{value:"always",children:"Always"}),s.jsx("option",{value:"never",children:"Never"}),s.jsx("option",{value:"exported",children:"Exported"}),s.jsx("option",{value:"custom",children:"Custom"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Controls when initial snapshot is taken"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Table Include List"}),s.jsx("input",{type:"text",value:e["table.include.list"]||"",onChange:l=>a("table.include.list",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"public.customers,public.orders"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Comma-separated list of tables to include"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e["slot.drop.on.stop"]),onChange:l=>a("slot.drop.on.stop",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Drop slot on connector stop"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Automatically drop replication slot when connector stops"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e["include.schema.changes"]),onChange:l=>a("include.schema.changes",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include schema changes"})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e["tombstones.on.delete"]),onChange:l=>a("tombstones.on.delete",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tombstones on delete"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Emit tombstone events for deletions"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Decimal Handling Mode"}),s.jsxs("select",{value:e["decimal.handling.mode"]||"precise",onChange:l=>a("decimal.handling.mode",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"precise",children:"Precise"}),s.jsx("option",{value:"double",children:"Double"}),s.jsx("option",{value:"string",children:"String"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How to handle decimal values"})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Connector Settings"}),s.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tasks Max"}),s.jsx("input",{type:"number",value:o(e["tasks.max"],1),onChange:l=>a("tasks.max",parseInt(l.target.value,10)||1),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum number of tasks for this connector"})]})})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Error Handling"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Error Tolerance"}),s.jsxs("select",{value:e["errors.tolerance"]||"none",onChange:l=>a("errors.tolerance",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"none",children:"None"}),s.jsx("option",{value:"all",children:"All"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Error tolerance level"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e["errors.log.enable"]),onChange:l=>a("errors.log.enable",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable error logging"})]})}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:i(e["errors.log.include.messages"]),onChange:l=>a("errors.log.include.messages",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include error messages in logs"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dead Letter Queue Topic"}),s.jsx("input",{type:"text",value:e["errors.deadletterqueue.topic.name"]||"",onChange:l=>a("errors.deadletterqueue.topic.name",l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"denizim-source-dlq"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Topic name for failed records"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"DLQ Replication Factor"}),s.jsx("input",{type:"number",value:o(e["errors.deadletterqueue.topic.replication.factor"],1),onChange:l=>a("errors.deadletterqueue.topic.replication.factor",parseInt(l.target.value,10)||1),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2 mt-8",children:[s.jsx("input",{type:"checkbox",checked:i(e["errors.deadletterqueue.context.headers.enable"]),onChange:l=>a("errors.deadletterqueue.context.headers.enable",l.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable DLQ context headers"})]})})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Advanced Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Queue Size"}),s.jsx("input",{type:"number",value:o(e["max.queue.size"],8192),onChange:l=>a("max.queue.size",parseInt(l.target.value,10)||8192),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Batch Size"}),s.jsx("input",{type:"number",value:o(e["max.batch.size"],2048),onChange:l=>a("max.batch.size",parseInt(l.target.value,10)||2048),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]})]})]})}function Xne({config:e,onChange:t}){const[r,n]=m.useState(!1),a=(i,o)=>{t({...e,[i]:o})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hostname"}),s.jsx("input",{type:"text",value:e["database.hostname"]||"",onChange:i=>a("database.hostname",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"localhost"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port"}),s.jsx("input",{type:"number",value:e["database.port"]||3306,onChange:i=>a("database.port",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),s.jsx("input",{type:"text",value:e["database.user"]||"",onChange:i=>a("database.user",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"root"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:r?"text":"password",value:e["database.password"]||"",onChange:i=>a("database.password",i.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:""}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Binlog Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Server ID"}),s.jsx("input",{type:"number",value:e["database.server.id"]||184054,onChange:i=>a("database.server.id",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"184054"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Unique identifier for this database server"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Snapshot Mode"}),s.jsxs("select",{value:e["snapshot.mode"]||"initial",onChange:i=>a("snapshot.mode",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"initial",children:"Initial"}),s.jsx("option",{value:"when_needed",children:"When Needed"}),s.jsx("option",{value:"never",children:"Never"}),s.jsx("option",{value:"schema_only",children:"Schema Only"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Controls how the connector snapshots existing data"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Binlog Offset Storage"}),s.jsx("input",{type:"text",value:e["offset.storage"]||"kafka",onChange:i=>a("offset.storage",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"kafka"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:e["include.schema.changes"]||!0,onChange:i=>a("include.schema.changes",i.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include schema changes"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Capture DDL changes in addition to DML"})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Advanced Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Queue Size"}),s.jsx("input",{type:"number",value:e["max.queue.size"]||8192,onChange:i=>a("max.queue.size",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Batch Size"}),s.jsx("input",{type:"number",value:e["max.batch.size"]||2048,onChange:i=>a("max.batch.size",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:e["tombstones.on.delete"]||!0,onChange:i=>a("tombstones.on.delete",i.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Send tombstone events on delete"})]})})]})]})}const M2="jdbc:postgresql://",Jne=e=>{if(!e||typeof e!="string"||!e.startsWith(M2))return null;const t=e.slice(M2.length),[r="",n=""]=t.split("/",2),[a="",i=""]=n.split("?",2),[o,l]=r.split(":",2),c=l?Number(l):void 0,d=new URLSearchParams(i),u=d.get("currentSchema")||d.get("current_schema")||d.get("search_path")||void 0;return{host:(o==null?void 0:o.trim())||void 0,port:Number.isNaN(c)?void 0:c,database:a?decodeURIComponent(a):void 0,schema:u||void 0}};function Zne({config:e,onChange:t}){const[r,n]=m.useState(new Set(["connection"])),[a,i]=m.useState(e),o=a["connection.url"];m.useEffect(()=>{const h=Jne(o);h&&i(f=>{const g={};h.host&&f.host!==h.host&&(g.host=h.host);const p=typeof f.port=="string"?Number(f.port):f.port;if(h.port&&p!==h.port&&(g.port=h.port),h.database&&f.database!==h.database&&(g.database=h.database),h.schema&&f.schema!==h.schema&&(g.schema=h.schema),Object.keys(g).length===0)return f;const y={...f,...g};return t(y),y})},[o,t]);const l=[{id:"connection",title:"Connection Settings",description:"Database connection configuration",parameters:[{key:"connection.url",label:"Connection URL",type:"text",defaultValue:"jdbc:postgresql://127.0.0.1:5432/LOCALDN",description:"JDBC connection URL"},{key:"host",label:"Host",type:"text",defaultValue:"127.0.0.1",description:"Hostname or IP of the PostgreSQL sink"},{key:"port",label:"Port",type:"number",defaultValue:5432,description:"Database port (default 5432)"},{key:"database",label:"Database",type:"text",defaultValue:"LOCALDN",description:"Target database name"},{key:"schema",label:"Schema",type:"text",defaultValue:"public",description:"Default schema for table creation"},{key:"connection.username",label:"Username",type:"text",defaultValue:"debezium",description:"Database username"},{key:"connection.password",label:"Password",type:"password",defaultValue:"debezium",description:"Database password"},{key:"connection.pool.size",label:"Connection Pool Size",type:"number",defaultValue:5,description:"Maximum number of database connections in the pool"}]},{id:"insert-mode",title:"Insert Mode & Behavior",description:"Configure how data is inserted into destination",parameters:[{key:"insert.mode",label:"Insert Mode",type:"select",defaultValue:"upsert",options:[{value:"insert",label:"Insert"},{value:"upsert",label:"Upsert"},{value:"update",label:"Update"}],description:"How to handle incoming records"},{key:"delete.enabled",label:"Handle Deletes",type:"boolean",defaultValue:!0,description:"Process delete events from source"},{key:"pk.mode",label:"Primary Key Mode",type:"select",defaultValue:"record_key",options:[{value:"none",label:"None"},{value:"record_key",label:"Record Key"},{value:"record_value",label:"Record Value"},{value:"kafka",label:"Kafka"}],description:"How to determine primary keys for upsert/delete"},{key:"pk.fields",label:"Primary Key Fields",type:"text",defaultValue:"id",description:"Comma-separated list of PK fields (required for upsert/delete)"},{key:"delete.handling.mode",label:"Delete Handling Mode",type:"select",defaultValue:"rewrite",options:[{value:"rewrite",label:"Rewrite (physical delete)"},{value:"none",label:"None (ignore deletes)"}],description:"How to handle delete events (tombstones)"}]},{id:"table-naming",title:"Table & Column Mapping",description:"Configure table and column name handling",parameters:[{key:"table.name.format",label:"Table Name Format",type:"text",defaultValue:"${topic}",description:"Format string for table names (e.g., public.${topic})"},{key:"sanitize.table.names",label:"Sanitize Table Names",type:"boolean",defaultValue:!0,description:"Convert to lowercase and replace special chars"},{key:"sanitize.field.names",label:"Sanitize Field Names",type:"boolean",defaultValue:!0,description:"Convert column names to lowercase"},{key:"quote.sql.identifiers",label:"Quote SQL Identifiers",type:"select",defaultValue:"never",options:[{value:"always",label:"Always"},{value:"never",label:"Never"}],description:"Quote table/column names for case-sensitive objects"},{key:"fields.whitelist",label:"Fields Whitelist",type:"text",defaultValue:"",description:"Comma-separated list of columns to include (empty = all)"},{key:"fields.blacklist",label:"Fields Blacklist",type:"text",defaultValue:"",description:"Comma-separated list of columns to exclude"}]},{id:"performance",title:"Batch & Performance",description:"Tune destination connector performance",parameters:[{key:"batch.size",label:"Batch Size",type:"number",defaultValue:500,description:"Records per batch commit (300-1000 for Postgres)"},{key:"insert.batch.max.rows",label:"Insert Batch Max Rows",type:"number",defaultValue:1e3,description:"Max rows in single INSERT statement"},{key:"max.retries",label:"Max Retries",type:"number",defaultValue:10,description:"Retry count for deadlock/connection errors"},{key:"retry.backoff.ms",label:"Retry Backoff (ms)",type:"number",defaultValue:3e3,description:"Delay between retry attempts"},{key:"tasks.max",label:"Max Tasks",type:"number",defaultValue:1,description:"Number of parallel sink tasks"}]},{id:"schema-evolution",title:"Schema Evolution & Data Types",description:"Auto-create tables and handle data type conversions",parameters:[{key:"auto.create",label:"Auto Create Tables",type:"boolean",defaultValue:!0,description:"Automatically create tables if they don't exist"},{key:"auto.evolve",label:"Auto Evolve Schema",type:"boolean",defaultValue:!0,description:"Automatically add new columns"},{key:"validate.non.null",label:"Validate Non-Null",type:"boolean",defaultValue:!1,description:"Check table existence when auto.create=false"},{key:"schema.evolution",label:"Schema Evolution",type:"select",defaultValue:"basic",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"}],description:"Schema evolution strategy"},{key:"decimal.handling.mode",label:"Decimal Handling",type:"select",defaultValue:"precise",options:[{value:"precise",label:"Precise (BigDecimal)"},{value:"string",label:"String"},{value:"double",label:"Double"}],description:"How to handle DECIMAL/NUMERIC columns in Postgres"},{key:"numeric.mapping",label:"Numeric Mapping",type:"select",defaultValue:"best_fit",options:[{value:"best_fit",label:"Best Fit"},{value:"best_fit_eager_double",label:"Best Fit Eager Double"},{value:"precision_only",label:"Precision Only"}],description:"JDBC to Postgres numeric type mapping"},{key:"time.precision.mode",label:"Time Precision Mode",type:"select",defaultValue:"adaptive",options:[{value:"connect",label:"Connect"},{value:"adaptive",label:"Adaptive (microsecond support)"}],description:"Timestamp precision handling"},{key:"debezium.format.value.schemas.enable",label:"Debezium Value Schemas",type:"boolean",defaultValue:!0,description:"Enable Debezium-specific value schema processing"}]},{id:"kafka-consumer",title:"Kafka Consumer & Topics",description:"Configure Kafka consumer behavior and topic subscriptions",parameters:[{key:"topics",label:"Topics",type:"text",defaultValue:"",description:"Comma-separated list of Kafka topics to consume (e.g., denizim.public.customers)"},{key:"consumer.override.auto.offset.reset",label:"Auto Offset Reset",type:"select",defaultValue:"earliest",options:[{value:"earliest",label:"Earliest"},{value:"latest",label:"Latest"},{value:"none",label:"None"}],description:"What to do when no initial offset exists"}]},{id:"transforms",title:"Topic Routing & Transforms",description:"Configure Single Message Transforms (SMT) for topic routing",parameters:[{key:"transforms",label:"Transform List",type:"text",defaultValue:"",description:"Comma-separated list of transform aliases (e.g., route)"},{key:"transforms.route.type",label:"Route Transform Type",type:"text",defaultValue:"org.apache.kafka.connect.transforms.RegexRouter",description:"SMT class for routing (typically RegexRouter)"},{key:"transforms.route.regex",label:"Route Regex Pattern",type:"text",defaultValue:"([^.]+)\\.([^.]+)\\.(.*)",description:"Regex pattern to match topic names (e.g., ([^.]+)\\.([^.]+)\\.(.*))"},{key:"transforms.route.replacement",label:"Route Replacement",type:"text",defaultValue:"$1_$2_$3",description:"Replacement pattern for table names (e.g., $1_$2_$3)"}]},{id:"retry-dlq",title:"Error Handling & DLQ",description:"Configure retry logic and dead letter queue",parameters:[{key:"errors.tolerance",label:"Error Tolerance",type:"select",defaultValue:"none",options:[{value:"none",label:"None (fail immediately)"},{value:"all",label:"All (send to DLQ)"}],description:"How to handle errors"},{key:"errors.deadletterqueue.topic.name",label:"DLQ Topic Name",type:"text",defaultValue:"dlq-sink-errors",description:"Dead letter queue topic name"},{key:"errors.deadletterqueue.topic.replication.factor",label:"DLQ Replication Factor",type:"number",defaultValue:1,description:"Replication factor for DLQ topic"},{key:"errors.deadletterqueue.context.headers.enable",label:"DLQ Context Headers",type:"boolean",defaultValue:!0,description:"Include error context in DLQ headers"},{key:"errors.log.enable",label:"Log Errors",type:"boolean",defaultValue:!0,description:"Log error messages to console"},{key:"errors.log.include.messages",label:"Log Error Messages",type:"boolean",defaultValue:!0,description:"Include full error messages in logs"},{key:"errors.retry.timeout",label:"Retry Timeout (ms)",type:"number",defaultValue:0,description:"Max time to retry failed operations (0 = disabled)"},{key:"errors.retry.delay.max.ms",label:"Max Retry Delay (ms)",type:"number",defaultValue:6e4,description:"Maximum delay between retries"}]}],c=h=>{const f=new Set(r);f.has(h)?f.delete(h):f.add(h),n(f)},d=(h,f)=>{const g={...a,[h]:f};i(g),t(g)},u=h=>{var g;const f=a[h.key]??h.defaultValue;switch(h.type){case"boolean":const p=typeof f=="string"?f==="true":!!f;return s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:y=>d(h.key,y.target.checked),className:"mt-1 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h.label}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]})]});case"select":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),s.jsx("select",{value:f,onChange:y=>d(h.key,y.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:(g=h.options)==null?void 0:g.map(y=>s.jsx("option",{value:y.value,children:y.label},y.value))}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});case"textarea":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),s.jsx("textarea",{value:f,onChange:y=>d(h.key,y.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono text-sm"}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});case"number":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),s.jsx("input",{type:"number",value:f,onChange:y=>d(h.key,Number(y.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});case"password":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),s.jsx("input",{type:"password",value:f,onChange:y=>d(h.key,y.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});default:return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),s.jsx("input",{type:"text",value:f,onChange:y=>d(h.key,y.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]})}};return s.jsx("div",{className:"space-y-4",children:l.map(h=>{const f=r.has(h.id);return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>c(h.id),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-between",children:[s.jsxs("div",{className:"text-left",children:[s.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:h.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:h.description})]}),f?s.jsx(ua,{className:"w-5 h-5 text-gray-500"}):s.jsx(nn,{className:"w-5 h-5 text-gray-500"})]}),f&&s.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 space-y-4",children:h.parameters.map(g=>s.jsx("div",{children:u(g)},g.key))})]},h.id)})})}function eae({pipeline:e,onUpdate:t}){var $,E,U,I,X,Z;const{showToast:r}=Er(),{user:n,logActivity:a}=an(),[i,o]=m.useState(new Set),l=te=>{var K,le;return(te==null?void 0:te.resolved_config)||((K=te==null?void 0:te.registry_meta)==null?void 0:K.snapshot_config)||((le=te==null?void 0:te.config)==null?void 0:le.snapshot_config)||(te==null?void 0:te.config)||{}},c=te=>Object.keys(te).reduce((K,le)=>(["checksum","connector_class","snapshot_config","registry_version","registry_connector","resolved_config"].includes(le)||(le==="connection.password"?K[le]="********":K[le]=te[le]),K),{}),[d,u]=m.useState(l(e.source_connector)),[h,f]=m.useState(l(e.sink_connector)),[g,p]=m.useState(l(e.source_connector)),[y,x]=m.useState(l(e.sink_connector)),[v,w]=m.useState(!1),[b,k]=m.useState([]),[j,N]=m.useState(!1),_=m.useMemo(()=>rae(b,d),[b,d]);m.useEffect(()=>{const te=l(e.source_connector);u(te),p(te)},[e.source_connector]),m.useEffect(()=>{const te=l(e.sink_connector);f(te),x(te)},[e.sink_connector]),m.useEffect(()=>{(async()=>{if(!e.id)return;N(!0);const{data:K,error:le}=await ne.from("pipeline_objects").select("id, schema_name, table_name, included, stats").eq("pipeline_id",e.id).order("schema_name",{ascending:!0}).order("table_name",{ascending:!0});k(!le&&K?K:[]),N(!1)})()},[e.id]);const O=!L2(d,g),T=!L2(h,y),P=O||T,S=te=>{const K=new Set(i);K.has(te)?K.delete(te):K.add(te),o(K)},M=te=>{try{return new Date(te).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return te}},F=(te,K)=>{const le=[],me=new Set([...Object.keys(te),...Object.keys(K)]);for(const ue of me){const A=te[ue],D=K[ue];JSON.stringify(A)!==JSON.stringify(D)&&le.push({field:ue,old_value:A,new_value:D})}return le},q=()=>{const te=[{label:"Database Host",key:"database.hostname"},{label:"Database Port",key:"database.port"},{label:"Database User",key:"database.user"},{label:"Database Password",key:"database.password",mask:!0},{label:"Database Name",key:"database.dbname"},{label:"Publication Key",key:"publication.name"},{label:"Replication Slot",key:"slot.name"},{label:"Enable log monitoring",key:"errors.log.enable",type:"boolean"},{label:"Use SSH",key:"ssh_tunnel",type:"boolean"},{label:"Use SSL",key:"use_ssl",type:"boolean"}];return s.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3",children:te.map(K=>{let le=d[K.key];return K.mask&&le?le="********":K.type==="boolean"&&(le=le===!0||le==="true"?"Yes":"No"),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.label}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:le!=null&&le!==""?String(le):"Not set"})]},K.key)})})},z=()=>{const te=[{label:"Account URL",key:"connection.url"},{label:"Warehouse",key:"warehouse"},{label:"Database Name",key:"database"},{label:"Database User",key:"connection.username"},{label:"Database Password",key:"connection.password",mask:!0},{label:"Authentication type",key:"authenticator"},{label:"Always quote table names",key:"quote.sql.identifiers"}];return s.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3",children:te.map(K=>{let le=h[K.key];return K.mask&&le&&(le="********"),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:K.label}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:le!=null&&le!==""?String(le):"Not set"})]},K.key)})})},W=async()=>{var te,K;w(!0);try{const le=[],me={pipeline_name:e.name,connectors:[]};if((te=e.source_connector)!=null&&te.id&&O){const{error:ue}=await ne.from("pipeline_connectors").update({pending_config:c(d),has_pending_changes:!0,pending_config_updated_by:n==null?void 0:n.id,pending_config_updated_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e.source_connector.id);if(ue)throw ue;le.push("source");const A=F(g,d);me.connectors.push({type:"source",name:e.source_connector.name,connector_class:e.source_connector.connector_class,changes:A})}if((K=e.sink_connector)!=null&&K.id&&T){const{error:ue}=await ne.from("pipeline_connectors").update({pending_config:c(h),has_pending_changes:!0,pending_config_updated_by:n==null?void 0:n.id,pending_config_updated_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e.sink_connector.id);if(ue)throw ue;le.push("destination");const A=F(y,h);me.connectors.push({type:"sink",name:e.sink_connector.name,connector_class:e.sink_connector.connector_class,changes:A})}if(le.length>0){const ue={};me.connectors.forEach(A=>{A.changes.forEach(D=>{const G=`${A.type}.${D.field}`;ue[G]={old:D.old_value,new:D.new_value}})}),await a("pipeline.update",`Updated ${le.join(" and ")} settings for pipeline: ${e.name}`,"pipeline",e.id,{...me,changes:ue})}p(d),x(h),r("success","Settings saved successfully!","Changes are pending deployment"),t&&t()}catch(le){console.error("Error saving settings:",le),r("error","Failed to save settings",le.message)}finally{w(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Overview"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Created at"}),s.jsx("div",{className:"text-base font-medium text-gray-900 dark:text-gray-100",children:M(e.created_at)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Updated at"}),s.jsx("div",{className:"text-base font-medium text-gray-900 dark:text-gray-100",children:M(e.updated_at)})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsx("button",{onClick:()=>S("source"),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fr,{connectorClass:($=e.source_connector)==null?void 0:$.connector_class,sourceType:e.source_type,className:"w-10 h-10 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Configure Source"}),((E=e.source_connector)==null?void 0:E.has_pending_changes)&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded",children:"SRC Updated"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((U=e.source_connector)==null?void 0:U.name)||e.source_type||"Source Connector"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:te=>{te.stopPropagation(),i.has("source")||S("source")},className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 flex items-center gap-2",children:[s.jsx(ax,{className:"w-4 h-4"}),"Edit"]}),i.has("source")?s.jsx(ua,{className:"w-5 h-5 text-gray-500"}):s.jsx(nn,{className:"w-5 h-5 text-gray-500"})]})]})}),!i.has("source")&&s.jsx("div",{className:"px-6 py-4 bg-white dark:bg-gray-800",children:q()}),i.has("source")&&s.jsxs("div",{className:"px-6 py-6 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[tae(e,d,u),s.jsxs("div",{className:"mt-10 border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tables in Pipeline"}),j&&s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading..."})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"This view is for information only. Table selection is configured during pipeline creation."}),_.length>0?s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:_.map(te=>{var K;return s.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg text-sm",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(fr,{connectorClass:(K=e.source_connector)==null?void 0:K.connector_class,sourceType:e.source_type,className:"w-8 h-8 flex-shrink-0"}),s.jsxs("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:[te.schema_name,".",te.table_name]}),!te.included&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:"Excluded"})]})},te.id)})}):s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:j?"Loading tables...":"No tables have been selected for this pipeline yet."})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsx("button",{onClick:()=>S("destination"),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fr,{connectorClass:(I=e.sink_connector)==null?void 0:I.connector_class,sourceType:e.destination_type,className:"w-10 h-10 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Destination Configuration"}),((X=e.sink_connector)==null?void 0:X.has_pending_changes)&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded",children:"DST Updated"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((Z=e.sink_connector)==null?void 0:Z.name)||e.destination_type||"Destination Connector"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:te=>{te.stopPropagation(),i.has("destination")||S("destination")},className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 flex items-center gap-2",children:[s.jsx(ax,{className:"w-4 h-4"}),"Edit"]}),i.has("destination")?s.jsx(ua,{className:"w-5 h-5 text-gray-500"}):s.jsx(nn,{className:"w-5 h-5 text-gray-500"})]})]})}),!i.has("destination")&&s.jsx("div",{className:"px-6 py-4 bg-white dark:bg-gray-800",children:z()}),i.has("destination")&&s.jsx("div",{className:"px-6 py-6 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:s.jsx(Zne,{config:h,onChange:f})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:W,disabled:v||!P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(RL,{className:"w-4 h-4"}),v?"Saving...":"Save All Changes"]}),s.jsx("button",{onClick:()=>{u(g),f(y)},disabled:v,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})})]})}function tae(e,t,r){const n=(e.source_type||"").toLowerCase();return n==="oracle"?s.jsx(Qne,{config:t,onChange:r}):n==="postgres"||n==="postgresql"?s.jsx(Yne,{config:t,onChange:r}):n==="mysql"?s.jsx(Xne,{config:t,onChange:r}):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Settings for ",e.source_type||"this source"," are not yet configured"]})}function rae(e,t){if(e.length>0)return e.map(n=>({...n,deletable:!0}));const r=t["table.include.list"]||"";return r?r.split(",").map(n=>n.trim()).filter(n=>n.length>0).map((n,a)=>{const[i,o]=n.includes(".")?n.split("."):["public",n];return{id:`config-${a}`,schema_name:i,table_name:o,included:!0,deletable:!1}}):[]}function L2(e,t){return JSON.stringify(e??{})===JSON.stringify(t??{})}const $2=[{key:"source_connected",label:"Connected with Source",description:"Established connection to source database"},{key:"ingesting_started",label:"Started Ingesting Events",description:"Reading change events from source"},{key:"staging_events",label:"Staging Events for Loading",description:"Preparing events for destination"},{key:"loading_started",label:"Started Loading Events",description:"Writing events to destination"}];function nae(e,t){if(t)return s.jsx(st,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"});if(!e)return s.jsx(Fr,{className:"w-5 h-5 text-gray-400"});switch(e.event_status){case"completed":return s.jsx($r,{className:"w-5 h-5 text-green-600 dark:text-green-400"});case"failed":return s.jsx(ls,{className:"w-5 h-5 text-red-600 dark:text-red-400"});case"in_progress":return s.jsx(st,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"});default:return s.jsx(Fr,{className:"w-5 h-5 text-gray-400"})}}function aae(e){if(!e)return"bg-gray-100 dark:bg-gray-700";switch(e.event_status){case"completed":return"bg-green-100 dark:bg-green-900/30";case"failed":return"bg-red-100 dark:bg-red-900/30";case"in_progress":return"bg-blue-100 dark:bg-blue-900/30";default:return"bg-gray-100 dark:bg-gray-700"}}const $5=m.memo(function({progress:t,isLoading:r}){return r?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(st,{className:"w-8 h-8 text-blue-600 animate-spin"}),s.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading progress..."})]}):s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"flex items-center gap-4",children:$2.map((n,a)=>{const i=t[n.key],o=a===$2.length-1;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${aae(i)}`,title:n.description,children:nae(i,r)}),s.jsxs("div",{children:[s.jsx("span",{className:`text-sm font-semibold ${(i==null?void 0:i.event_status)==="completed"?"text-gray-900 dark:text-gray-100":(i==null?void 0:i.event_status)==="failed"?"text-red-600 dark:text-red-400":(i==null?void 0:i.event_status)==="in_progress"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:n.label}),(i==null?void 0:i.metadata)&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[i.metadata.running_tasks&&i.metadata.total_tasks&&s.jsxs("span",{children:[i.metadata.running_tasks,"/",i.metadata.total_tasks," tasks running"]}),i.metadata.connector_state&&s.jsxs("span",{className:"ml-2",children:["(",i.metadata.connector_state,")"]})]})]})]}),!o&&s.jsx(nn,{className:"w-5 h-5 text-gray-300"}),n.key==="ingesting_started"&&s.jsxs(s.Fragment,{children:[s.jsx("img",{src:"/simurg.svg",alt:"Simurg",className:"w-12 h-12 mx-4 hover:animate-bounce transition-transform cursor-pointer",style:{animation:"none"},onMouseEnter:l=>{l.currentTarget.style.animation="flap 0.3s ease-in-out 3"},onMouseLeave:l=>{l.currentTarget.style.animation="none"}}),s.jsx(nn,{className:"w-5 h-5 text-gray-300"}),s.jsx("style",{children:`
                    @keyframes flap {
                      0%, 100% { transform: scaleY(1) scaleX(1); }
                      25% { transform: scaleY(0.9) scaleX(1.1); }
                      50% { transform: scaleY(1.1) scaleX(0.95); }
                      75% { transform: scaleY(0.95) scaleX(1.05); }
                    }
                  `})]})]},n.key)})})})});function I5({pipelineId:e,enabled:t=!0,refetchInterval:r=6e4,timeRange:n="24h"}){return fc({queryKey:["pipeline-activity",e,n],queryFn:async()=>{if(!e)return null;try{return await E9(e,n)}catch(a){return console.error("Failed to load pipeline activity:",a),null}},enabled:t&&!!e,refetchInterval:r,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:a=>a,gcTime:5*60*1e3})}function ld(e){return e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toString()}function cd(e){return e.toFixed(2)}function sae(e,t){if(e===t)return!0;if(e===null||t===null||e===void 0||t===void 0)return!1;try{return JSON.stringify(e)===JSON.stringify(t)}catch(r){return console.warn("isEqual: JSON.stringify failed, using reference equality",r),e===t}}const z5=m.memo(({data:e,color:t="#3b82f6"})=>{if(!e||e.length===0)return s.jsx("div",{className:"w-full h-12"});const r=120,n=40,a=2,i=Math.max(...e,.1),o=Math.min(...e,0),l=i-o||1,c=e.map((d,u)=>{const h=u/(e.length-1||1)*(r-a*2)+a,f=n-a-(d-o)/l*(n-a*2);return`${h},${f}`}).join(" ");return s.jsx("svg",{width:r,height:n,className:"overflow-visible",children:s.jsx("polyline",{points:c,fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});z5.displayName="Sparkline";const dd=m.memo(({icon:e,label:t,totalRef:r,rateRef:n,initialTotal:a,initialRate:i,sparklineData:o,color:l})=>s.jsxs("div",{className:"flex-1 p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",style:{minHeight:"140px",contain:"layout"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(e,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:t})]}),s.jsx("div",{ref:r,className:"text-3xl font-bold text-gray-900 dark:text-gray-100 tabular-nums mb-2",children:ld(a)}),s.jsx("div",{className:"mb-2",children:s.jsx(z5,{data:o,color:l})}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[s.jsx(iae,{className:"w-3 h-3"}),s.jsx("span",{ref:n,children:cd(i)})," epm"]})]}));dd.displayName="ActivityCard";const uf=m.memo(()=>s.jsx("div",{className:"flex items-center justify-center px-2",children:s.jsx(is,{className:"w-6 h-6 text-gray-400 dark:text-gray-600"})}));uf.displayName="Arrow";const iae=({className:e})=>s.jsxs("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),s.jsx("path",{strokeWidth:"2",d:"M12 6v6l4 2"})]}),F5=m.memo(function({pipelineId:t,pipelineStatus:r,refreshInterval:n,onRefreshIntervalChange:a,onManualRefresh:i}){const[o,l]=m.useState("24h"),{data:c,isLoading:d,isFetching:u,refetch:h}=I5({pipelineId:t,enabled:r==="running"||r==="paused",refetchInterval:n,timeRange:o}),f=m.useRef(null),g=m.useRef(null),p=m.useRef(null),y=m.useRef(null),x=m.useRef(null),v=m.useRef(null),w=m.useRef(null),b=m.useRef(null),k=m.useRef(null);return m.useEffect(()=>{if(!c)return;const j=f.current;(!j||!sae(j,c))&&(g.current&&(g.current.textContent=ld(c.ingestion.total)),p.current&&(p.current.textContent=cd(c.ingestion.rate)),y.current&&(y.current.textContent=ld(c.transformations.total)),x.current&&(x.current.textContent=cd(c.transformations.rate)),v.current&&(v.current.textContent=ld(c.schemaMapper.total)),w.current&&(w.current.textContent=cd(c.schemaMapper.rate)),b.current&&(b.current.textContent=ld(c.load.total)),k.current&&(k.current.textContent=cd(c.load.rate)),f.current=c)},[c]),d?s.jsxs("div",{className:"flex items-center justify-center py-12",style:{minHeight:"200px"},children:[s.jsx(st,{className:"w-8 h-8 text-blue-600 animate-spin"}),s.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading activity..."})]}):c?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pipeline Activity"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["2h","12h","24h"].map(j=>s.jsx("button",{onClick:()=>l(j),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${o===j?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:j},j))}),s.jsx("button",{onClick:()=>{h(),i&&i()},className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Refresh now",children:s.jsx(ho,{className:`w-4 h-4 ${u?"animate-spin":""}`})})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(dd,{icon:kt,label:"INGESTION",totalRef:g,rateRef:p,initialTotal:c.ingestion.total,initialRate:c.ingestion.rate,sparklineData:c.ingestion.sparkline||[],color:"#3b82f6"}),s.jsx(uf,{}),s.jsx(dd,{icon:ML,label:"TRANSFORMATIONS",totalRef:y,rateRef:x,initialTotal:c.transformations.total,initialRate:c.transformations.rate,sparklineData:c.transformations.sparkline||[],color:"#8b5cf6"}),s.jsx(uf,{}),s.jsx(dd,{icon:kt,label:"SCHEMA MAPPER",totalRef:v,rateRef:w,initialTotal:c.schemaMapper.total,initialRate:c.schemaMapper.rate,sparklineData:c.schemaMapper.sparkline||[],color:"#ec4899"}),s.jsx(uf,{}),s.jsx(dd,{icon:os,label:"LOAD",totalRef:b,rateRef:k,initialTotal:c.load.total,initialRate:c.load.rate,sparklineData:c.load.sparkline||[],color:"#10b981"})]})]}):s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",style:{minHeight:"200px"},children:"No activity data available"})});function oae({pipelineId:e,enabled:t,interval:r=3e4,onStatusChange:n,onError:a}){const i=m.useRef(null),o=m.useRef(null),l=m.useCallback(async()=>{var c,d;try{const{data:u}=await ne.from("pipelines").select("status").eq("id",e).maybeSingle();if(!u||u.status!=="running")return;const h=await gO(e);if(!h.success||!h.status)return;let f=!1,g="running";if(h.status.source){h.status.source.connector.state==="FAILED"&&(f=!0,g="error");const y=(c=h.status.source.tasks)==null?void 0:c.filter(x=>x.state==="FAILED");y&&y.length>0&&(f=!0,g="error")}if(h.status.sink){h.status.sink.connector.state==="FAILED"&&(f=!0,g="error");const y=(d=h.status.sink.tasks)==null?void 0:d.filter(x=>x.state==="FAILED");y&&y.length>0&&(f=!0,g="error")}f&&o.current!==g&&(await ne.from("pipelines").update({status:g,updated_at:new Date().toISOString()}).eq("id",e),o.current=g,n==null||n(g))}catch(u){console.error("Health check failed:",u),a==null||a(u)}},[e,n,a]);return m.useEffect(()=>{if(!t){i.current&&(clearInterval(i.current),i.current=null);return}return l(),i.current=setInterval(l,r),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[t,r,l]),{checkHealth:l}}function U5({pipelineId:e,enabled:t=!0,refetchInterval:r=6e4}){return fc({queryKey:["pipeline-progress",e],queryFn:async()=>{if(!e)return{};try{return await P9(e)}catch(n){return console.error("Failed to load pipeline progress:",n),{}}},enabled:t&&!!e,refetchInterval:r,staleTime:0,refetchOnWindowFocus:!1,placeholderData:n=>n,gcTime:5*60*1e3})}function lae({pipelineId:e,enabled:t=!0,refetchInterval:r=6e4}){return fc({queryKey:["connector-statuses",e],queryFn:async()=>{if(!e)return{source:null,sink:null};try{const n=await fetch(`http://localhost:5002/api/pipelines/${e}/status`);if(!n.ok)throw new Error("Failed to fetch connector statuses");return(await n.json()).status||{source:null,sink:null}}catch(n){return console.error("Failed to load connector statuses:",n),{source:null,sink:null}}},enabled:t&&!!e,refetchInterval:r,staleTime:0,refetchOnWindowFocus:!1,placeholderData:n=>n,gcTime:5*60*1e3})}function cae({pipelineId:e,enabled:t=!0}){const r=Db();return{...fc({queryKey:["pipeline",e],queryFn:async()=>{if(!e)return null;try{const[i,o]=await Promise.all([ne.from("pipelines").select("*").eq("id",e).maybeSingle(),ne.from("pipeline_connectors").select("id, name, type, connector_class, status, config, last_deployed_version, has_pending_changes, pending_config").eq("pipeline_id",e)]);if(i.error)throw new Error(i.error.message);if(!i.data)throw new Error("Pipeline not found");const l=o.data||[],c=await Promise.all(l.map(async u=>{var g,p;const h=(g=u.config)!=null&&g.registry_connector?u.config:null;let f;if(h!=null&&h.registry_connector)try{f=await bc(h.registry_connector)||void 0}catch(y){console.warn("Failed to load registry config",y)}return f||(f=(h==null?void 0:h.snapshot_config)||((p=u.config)==null?void 0:p.snapshot_config)),{...u,registry_meta:h,config:u.config||{},resolved_config:f,last_deployed_version:u.last_deployed_version??null}}));return{...i.data,source_connector:c.find(u=>u.type==="source"),sink_connector:c.find(u=>u.type==="sink")}}catch(i){throw console.error("Failed to load pipeline data:",i),i}},enabled:t&&!!e,staleTime:3e4,refetchOnWindowFocus:!1,placeholderData:i=>i,gcTime:10*60*1e3,retry:1}),updatePipelineStatus:i=>{r.setQueryData(["pipeline",e],o=>o&&{...o,status:i,updated_at:new Date().toISOString()})}}}const dae=[{value:1e3,label:"1s"},{value:5e3,label:"5s"},{value:1e4,label:"10s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:3e5,label:"5m"},{value:6e5,label:"10m"},{value:9e5,label:"15m"},{value:18e5,label:"30m"}];function uae(){var Pe,We;const{id:e}=dg(),t=Dt(),{showToast:r}=Er(),{logActivity:n}=an(),[a,i]=m.useState("objects"),[o,l]=m.useState("logs"),[c,d]=m.useState(""),[u,h]=m.useState("all"),[f,g]=m.useState(!1),[p,y]=m.useState(!1),[x,v]=m.useState(!1),[w,b]=m.useState("preset"),[k,j]=m.useState("6h"),[N,_]=m.useState("interval"),[O,T]=m.useState("4"),[P,S]=m.useState(["00:00"]),[M,F]=m.useState(6e4),[q,z]=m.useState(0),[W,$]=m.useState(!0),{data:E,isLoading:U,error:I,refetch:X,updatePipelineStatus:Z}=cae({pipelineId:e||"",enabled:!!e}),{data:te={},isLoading:K,refetch:le}=U5({pipelineId:e||"",enabled:(E==null?void 0:E.status)==="running"||(E==null?void 0:E.status)==="paused",refetchInterval:M}),{data:me={source:null,sink:null},refetch:ue}=lae({pipelineId:e||"",enabled:!!E,refetchInterval:M}),{data:A=[]}=pO(e||"",{refetchInterval:1e4});oae({pipelineId:e||"",enabled:(E==null?void 0:E.status)==="running",interval:M,onStatusChange:Q=>{r("warning","Pipeline status changed",`Pipeline is now ${Q}`),X()},onError:Q=>{console.error("Health check error:",Q)}});const D=m.useCallback(async()=>{const Q=async()=>{await ue(),await le()};await Q(),setTimeout(()=>Q(),1e3),setTimeout(()=>Q(),2e3),setTimeout(()=>Q(),3e3)},[ue,le]);m.useEffect(()=>{if(E&&x){const Q=E.schedule_config;if(Q)if(Q.type==="interval"){const se=Q.hours||4,de={.083:"5m",.25:"15m",.5:"30m",1:"1h",2:"2h",3:"3h",6:"6h",8:"8h",12:"12h",24:"24h"};de[se]?(b("preset"),j(de[se])):(b("custom"),_("interval"),T(String(se)))}else Q.type==="daily"&&(b("custom"),_("daily"),S(Q.times||["00:00"]));else b("preset"),j("1h"),_("interval"),T("4"),S(["00:00"])}},[E,x]),m.useEffect(()=>{const Q=se=>{var de;((de=se.detail)==null?void 0:de.pipelineId)===e&&X()};return window.addEventListener("pipeline-updated",Q),()=>{window.removeEventListener("pipeline-updated",Q)}},[e,X]),m.useEffect(()=>{I&&(r("error","Failed to load pipeline"),t("/pipelines"))},[I,t,r]);const G=async()=>{var Q,se;if(E)try{Z("running"),r("info","Resuming pipeline connectors...");const de=[],Ee=[];(Q=E.source_connector)!=null&&Q.name&&Ee.push({name:E.source_connector.name,type:"source"}),(se=E.sink_connector)!=null&&se.name&&Ee.push({name:E.sink_connector.name,type:"sink"});const Xe=Ee.map(async Oe=>{try{const $e=await(await fetch(`http://localhost:5002/api/connectors/${Oe.name}/resume`,{method:"POST"})).json();$e.success||de.push(`${Oe.type}: ${$e.error||"Unknown error"}`)}catch(on){de.push(`${Oe.type}: ${on.message||"Failed to connect"}`)}});await Promise.all(Xe),await ne.from("pipelines").update({status:"running",updated_at:new Date().toISOString()}).eq("id",e),await n("pipeline.start",`Resumed pipeline: ${E.name}`,"pipeline",e),de.length>0?r("warning","Pipeline resumed with warnings",de.join(", ")):r("success","Pipeline resumed successfully");const Ue=async()=>{await ue(),await le()};await Ue(),setTimeout(()=>Ue(),1e3),setTimeout(()=>Ue(),2e3),setTimeout(()=>Ue(),3e3)}catch(de){r("error","Failed to resume pipeline",de.message),X()}},ae=async()=>{var Q,se;if(E)try{Z("paused"),r("info","Pausing pipeline connectors...");const de=[],Ee=[];(Q=E.source_connector)!=null&&Q.name&&Ee.push({name:E.source_connector.name,type:"source"}),(se=E.sink_connector)!=null&&se.name&&Ee.push({name:E.sink_connector.name,type:"sink"});const Xe=Ee.map(async Oe=>{try{const $e=await(await fetch(`http://localhost:5002/api/connectors/${Oe.name}/pause`,{method:"POST"})).json();$e.success||de.push(`${Oe.type}: ${$e.error||"Unknown error"}`)}catch(on){de.push(`${Oe.type}: ${on.message||"Failed to connect"}`)}});await Promise.all(Xe),await ne.from("pipelines").update({status:"paused",updated_at:new Date().toISOString()}).eq("id",e),await n("pipeline.pause",`Paused pipeline: ${E.name}`,"pipeline",e),de.length>0?r("warning","Pipeline paused with warnings",de.join(", ")):r("success","Pipeline paused successfully");const Ue=async()=>{await ue(),await le()};await Ue(),setTimeout(()=>Ue(),1e3),setTimeout(()=>Ue(),2e3),setTimeout(()=>Ue(),3e3)}catch(de){r("error","Failed to pause pipeline",de.message),X()}},B=async(Q,se,de)=>{try{const Ee=se.charAt(0).toUpperCase()+se.slice(1);r("info",`${Ee}ing ${de} connector...`);const Xe=se==="resume"?`/api/connectors/${Q}/resume`:se==="pause"?`/api/connectors/${Q}/pause`:`/api/connectors/${Q}/restart`,Oe=await(await fetch(`http://localhost:5002${Xe}`,{method:"POST"})).json();if(!Oe.success)throw new Error(Oe.error||`Failed to ${se} connector`);await n(`connector.${se}`,`${Ee}ed ${de} connector: ${Q}`,"pipeline",e),r("success",`${de.charAt(0).toUpperCase()+de.slice(1)} connector ${se}ed successfully`),ue(),le()}catch(Ee){r("error",`Failed to ${se} ${de} connector`,Ee.message)}},fe=async()=>{var Q,se;if(E)try{r("info","Restarting pipeline connectors...");const de=[],Ee=[];(Q=E.source_connector)!=null&&Q.name&&Ee.push({name:E.source_connector.name,type:"source"}),(se=E.sink_connector)!=null&&se.name&&Ee.push({name:E.sink_connector.name,type:"sink"});for(const Xe of Ee)try{const Oe=await(await fetch(`http://localhost:5002/api/connectors/${Xe.name}/restart`,{method:"POST"})).json();Oe.success||de.push(`${Xe.type}: ${Oe.error||"Unknown error"}`)}catch(Ue){de.push(`${Xe.type}: ${Ue.message||"Failed to connect"}`)}await n("pipeline.restart",`Restarted pipeline: ${E.name}`,"pipeline",e),de.length>0?r("warning","Pipeline restarted with warnings",de.join(", ")):r("success","Pipeline restarted successfully"),ue(),le()}catch(de){r("error","Failed to restart pipeline",de.message)}},be=async()=>{var Q,se,de,Ee,Xe,Ue,Oe,on,$e,gt,ht,ot,Qn;if(confirm("Deploy this pipeline to Kafka Connect? This will create source and sink connectors."))try{r("info","Deploying pipeline...");const jt=await fO(e);if(jt.success){const _n=`${E==null?void 0:E.name}-source`,Hr=`${E==null?void 0:E.name}-sink`;(se=(Q=jt.results)==null?void 0:Q.source)!=null&&se.connector&&await ne.from("pipeline_connectors").upsert({pipeline_id:e,name:_n,type:"source",connector_class:((de=jt.results.source.connector.config)==null?void 0:de["connector.class"])||"",config:jt.results.source.connector.config||{},status:"running"},{onConflict:"pipeline_id,type",ignoreDuplicates:!1}),(Xe=(Ee=jt.results)==null?void 0:Ee.sink)!=null&&Xe.connector&&await ne.from("pipeline_connectors").upsert({pipeline_id:e,name:Hr,type:"sink",connector_class:((Ue=jt.results.sink.connector.config)==null?void 0:Ue["connector.class"])||"",config:jt.results.sink.connector.config||{},status:"running"},{onConflict:"pipeline_id,type",ignoreDuplicates:!1});const Cn=await gO(e);let Ts="running";((($e=(on=(Oe=Cn.status)==null?void 0:Oe.source)==null?void 0:on.connector)==null?void 0:$e.state)==="FAILED"||((ot=(ht=(gt=Cn.status)==null?void 0:gt.sink)==null?void 0:ht.connector)==null?void 0:ot.state)==="FAILED")&&(Ts="error"),await ne.from("pipelines").update({status:Ts,updated_at:new Date().toISOString()}).eq("id",e),await n("pipeline.deploy",`Deployed pipeline to Kafka Connect: ${E==null?void 0:E.name}`,"pipeline",e),r("success","Pipeline deployed successfully"),X()}else{const _n=((Qn=jt.results)==null?void 0:Qn.errors)||[],Hr=_n.length>0?_n.map(Cn=>`${Cn.connector}: ${Cn.error}`).join(", "):jt.error;r("error","Failed to deploy pipeline",Hr)}}catch(jt){r("error","Failed to deploy pipeline",jt.message)}},Te=async(Q,se=!1,de=24)=>{var Ee,Xe,Ue;try{const Oe=(E==null?void 0:E.status)==="draft";if(se||Oe){if(Q){const gt=await fetch(`http://127.0.0.1:5002/api/pipelines/${e}/connectors?deleteTopics=true`,{method:"DELETE"}),ht=await gt.json();if(!gt.ok||!ht.success)r("warning","Failed to delete some connectors/topics",ht.error||"Unknown error");else{const ot=((Ee=ht.deletedTopics)==null?void 0:Ee.length)>0?` ${ht.deletedTopics.length} topic(s) deleted.`:"";r("info",`Connectors removed.${ot}`)}}const{error:$e}=await ne.from("pipelines").delete().eq("id",e);$e?r("error","Failed to permanently delete pipeline",$e.message):(await n("pipeline.permanent_delete",`Permanently deleted ${Oe?"draft ":""}pipeline: ${E==null?void 0:E.name}${Q?" (including topics)":""}`,"pipeline",e),r("success",`${Oe?"Draft pipeline":"Pipeline"} permanently deleted`),t("/pipelines"))}else{const $e=await fetch(`http://127.0.0.1:5002/api/pipelines/${e}/connectors?deleteTopics=${Q}`,{method:"DELETE"}),gt=await $e.json();if(!$e.ok||!gt.success){r("error","Failed to delete connectors",gt.error||"Unknown error");return}const{error:ht}=await ne.from("pipelines").update({deleted_at:new Date().toISOString(),status:"deleted",backup_retention_hours:de}).eq("id",e);if(ht)r("error","Failed to delete pipeline",ht.message);else{if(await n("pipeline.delete",`Deleted pipeline: ${E==null?void 0:E.name}${Q?" (including topics)":""}`,"pipeline",e),gt.errors&&gt.errors.length>0)r("warning",`Pipeline deleted with warnings: ${gt.errors.map(ot=>ot.error).join(", ")}`);else{const ot=Q?` and ${((Xe=gt.deletedTopics)==null?void 0:Xe.length)||0} topic(s)`:"";r("success",`Pipeline marked for deletion. ${((Ue=gt.deletedConnectors)==null?void 0:Ue.length)||0} connector(s)${ot} removed. Restore available for ${de} hour${de!==1?"s":""}.`)}t("/pipelines")}}}catch(Oe){r("error","Failed to delete pipeline",Oe.message)}},Ae=async()=>{let Q;if(w==="preset")Q={type:"interval",hours:{"5m":.083,"15m":.25,"30m":.5,"1h":1,"2h":2,"3h":3,"6h":6,"8h":8,"12h":12,"24h":24}[k]||6};else if(N==="interval"){const se=parseFloat(O);if(isNaN(se)||se<.083||se>48){r("error","Invalid interval","Hours must be between 0.083 (5 mins) and 48");return}Q={type:"interval",hours:se}}else Q={type:"daily",times:P};try{const{error:se}=await ne.from("pipelines").update({schedule_config:Q}).eq("id",e);if(se){r("error","Failed to update schedule",se.message);return}await n("pipeline.schedule_update",`Updated ingestion schedule for pipeline: ${E==null?void 0:E.name}`,"pipeline",e,{schedule_config:Q}),r("success","Schedule updated successfully"),v(!1),X()}catch(se){r("error","Failed to update schedule",se.message)}},H=()=>{if(w==="preset"){const Q=k;if(Q==="5m")return"every 5 Minutes";if(Q==="15m")return"every 15 Minutes";if(Q==="30m")return"every 30 Minutes";if(Q==="1h")return"every 1 Hour";if(Q==="2h")return"every 2 Hours";if(Q==="3h")return"every 3 Hours";if(Q==="6h")return"every 6 Hours";if(Q==="8h")return"every 8 Hours";if(Q==="12h")return"every 12 Hours";if(Q==="24h")return"every 24 Hours"}else if(N==="interval"){const Q=parseFloat(O);if(Q<1){const se=Math.round(Q*60);return`every ${se} Minute${se>1?"s":""}`}return`every ${Q} Hour${Q>1?"s":""}`}else return`at ${P.join(", ")} daily`;return""},oe=Q=>{var Ee;const se=Q==="source"?me.source:me.sink,de=(Ee=se==null?void 0:se.connector)==null?void 0:Ee.state;if(!de)return"UNKNOWN";switch(de){case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"FAILED":return"FAILED";default:return de}},R=Q=>{switch(Q){case"RUNNING":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"PAUSED":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"FAILED":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},re=Q=>{switch(Q){case"RUNNING":return"";case"PAUSED":return"";case"FAILED":return"";default:return""}},Y=Q=>{var Ee,Xe,Ue,Oe;if(!Q.source_connector&&!Q.sink_connector)return Q.status;const se=(Xe=(Ee=me.source)==null?void 0:Ee.connector)==null?void 0:Xe.state,de=(Oe=(Ue=me.sink)==null?void 0:Ue.connector)==null?void 0:Oe.state;return!se&&!de?Q.status:se==="FAILED"||de==="FAILED"?"error":se==="PAUSED"||de==="PAUSED"?"paused":se==="RUNNING"&&de==="RUNNING"?"running":Q.status},J=Q=>{switch(Q){case"running":return"success";case"paused":return"warning";case"ready":return"info";case"error":return"error";default:return"default"}},we=Q=>new Date(Q).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});if(U&&!E)return s.jsxs("div",{className:"h-full flex flex-col animate-pulse",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsx("div",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"}),s.jsxs("div",{children:[s.jsx("div",{className:"h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),s.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:s.jsx("div",{className:"flex gap-6",children:[1,2,3,4].map(Q=>s.jsx("div",{className:"h-10 w-28 bg-gray-200 dark:bg-gray-700 rounded-lg"},Q))})}),s.jsxs("div",{className:"flex-1 p-8 space-y-4",children:[s.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"}),s.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"}),s.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})]});if(!E)return null;const Ce=[...E.deleted_at?[]:[{id:"objects",label:"Objects",icon:kt}],{id:"monitoring",label:"Monitoring",icon:os},{id:"logs",label:"Logs",icon:kL},{id:"settings",label:"Settings",icon:Yl}];return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"px-6 py-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>t("/pipelines"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ro,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:E.name}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[s.jsxs("span",{children:["Created ",we(E.created_at)]}),s.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:""}),s.jsx("span",{className:"font-mono opacity-75",children:E.id})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(E.status==="running"||E.status==="paused")&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx(Fr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("select",{value:M,onChange:Q=>F(Number(Q.target.value)),className:"text-sm font-medium bg-transparent border-none text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-0 cursor-pointer",children:dae.map(Q=>s.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),A.length>0&&s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:()=>{i("logs"),l("alerts")},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-colors bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30",title:`${A.length} unresolved alert(s) - Click to view`,children:[s.jsx($f,{className:`w-4 h-4 ${A.some(Q=>Q.severity==="critical")?"text-red-600 dark:text-red-400 animate-pulse":"text-yellow-600 dark:text-yellow-400 animate-pulse"}`}),s.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[A.length," Alert",A.length!==1?"s":""]})]})}),s.jsx(F9,{variant:J(Y(E)),children:Y(E).toUpperCase()}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>g(!f),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(nx,{className:"w-5 h-5"})}),f&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[Y(E)==="ready"&&s.jsxs("button",{onClick:()=>{be(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 border-b border-gray-200 dark:border-gray-700",children:[s.jsx(ni,{className:"w-4 h-4 text-green-600"}),"Deploy Pipeline"]}),Y(E)==="paused"&&s.jsxs("button",{onClick:()=>{G(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(ni,{className:"w-4 h-4"}),"Resume Pipeline"]}),Y(E)==="running"&&s.jsxs("button",{onClick:()=>{ae(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(mi,{className:"w-4 h-4"}),"Pause Pipeline"]}),s.jsxs("button",{onClick:()=>{fe(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4"}),"Restart Pipeline"]}),s.jsxs("button",{onClick:()=>{g(!1),v(!0)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(So,{className:"w-4 h-4"}),"Change Schedule"]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),s.jsxs("button",{onClick:()=>{y(!0),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx(mn,{className:"w-4 h-4"}),"Delete Pipeline"]})]})]})]})]})]}),(E.status==="running"||E.status==="paused")&&s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-800 rounded-lg px-4 py-2.5 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium mb-0.5",children:"Source"}),s.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:((Pe=E.source_connector)==null?void 0:Pe.name)||E.source_type||"Not configured"})]})]}),E.source_connector&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-8 w-px bg-blue-200 dark:bg-blue-700"}),s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-semibold shadow-sm ${R(oe("source"))}`,children:[s.jsx("span",{children:re(oe("source"))}),s.jsx("span",{children:oe("source")})]}),s.jsxs("div",{className:"flex gap-1",children:[oe("source")==="RUNNING"&&s.jsx("button",{onClick:()=>B(E.source_connector.name,"pause","source"),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors",title:"Pause Source",children:s.jsx(mi,{className:"w-3.5 h-3.5 text-blue-700 dark:text-blue-300"})}),oe("source")==="PAUSED"&&s.jsx("button",{onClick:()=>B(E.source_connector.name,"resume","source"),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors",title:"Resume Source",children:s.jsx(ni,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),s.jsx("button",{onClick:()=>B(E.source_connector.name,"restart","source"),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors",title:"Restart Source",children:s.jsx(ho,{className:"w-3.5 h-3.5 text-blue-700 dark:text-blue-300"})})]})]})]})}),s.jsx(nn,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-4"}),s.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border border-purple-200 dark:border-purple-800 rounded-lg px-4 py-2.5 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium mb-0.5",children:"Destination"}),s.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:((We=E.sink_connector)==null?void 0:We.name)||E.destination_type||"Not configured"})]})]}),E.sink_connector&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-8 w-px bg-purple-200 dark:bg-purple-700"}),s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-semibold shadow-sm ${R(oe("sink"))}`,children:[s.jsx("span",{children:re(oe("sink"))}),s.jsx("span",{children:oe("sink")})]}),s.jsxs("div",{className:"flex gap-1",children:[oe("sink")==="RUNNING"&&s.jsx("button",{onClick:()=>B(E.sink_connector.name,"pause","sink"),className:"p-1.5 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-md transition-colors",title:"Pause Sink",children:s.jsx(mi,{className:"w-3.5 h-3.5 text-purple-700 dark:text-purple-300"})}),oe("sink")==="PAUSED"&&s.jsx("button",{onClick:()=>B(E.sink_connector.name,"resume","sink"),className:"p-1.5 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-md transition-colors",title:"Resume Sink",children:s.jsx(ni,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),s.jsx("button",{onClick:()=>B(E.sink_connector.name,"restart","sink"),className:"p-1.5 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-md transition-colors",title:"Restart Sink",children:s.jsx(ho,{className:"w-3.5 h-3.5 text-purple-700 dark:text-purple-300"})})]})]})]})})]})})]})}),E.status==="running"&&W&&s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-8 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800 dark:text-green-200",children:[s.jsx($r,{className:"w-4 h-4"}),"Events have started loading in your Destination"]}),s.jsx("button",{onClick:()=>$(!1),className:"text-green-600 dark:text-green-400 hover:text-green-700 transition-colors",children:s.jsx(at,{className:"w-4 h-4"})})]})}),(E.status==="running"||E.status==="paused")&&s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-6",children:s.jsx($5,{progress:te,isLoading:K})}),(E.status==="running"||E.status==="paused")&&s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-6",children:s.jsx(F5,{pipelineId:e,pipelineStatus:E.status,refreshInterval:M,onRefreshIntervalChange:F,onManualRefresh:()=>{le(),ue()}})}),s.jsx("div",{className:"sticky top-0 z-30 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:s.jsx("div",{className:"flex gap-6",children:Ce.map(Q=>s.jsxs("button",{onClick:()=>i(Q.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${a===Q.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(Q.icon,{className:"w-4 h-4"}),Q.label]},Q.id))})}),a==="logs"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sticky top-[72px] z-20 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>l("logs"),className:`px-4 py-2 font-medium transition-colors ${o==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Logs"}),s.jsx("button",{onClick:()=>l("timeline"),className:`px-4 py-2 font-medium transition-colors ${o==="timeline"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Timeline"}),s.jsx("button",{onClick:()=>l("dlq"),className:`px-4 py-2 font-medium transition-colors ${o==="dlq"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"DLQ (2)"}),s.jsxs("button",{onClick:()=>l("alerts"),className:`px-4 py-2 font-medium transition-colors relative ${o==="alerts"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:["Alerts",A.length>0&&s.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-red-600 text-white text-xs rounded-full",children:A.length})]})]})}),o==="logs"&&s.jsx("div",{className:"sticky top-[140px] z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:Q=>d(Q.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rb,{className:"w-5 h-5 text-gray-400"}),s.jsxs("select",{value:u,onChange:Q=>h(Q.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"all",children:"All Levels"}),s.jsx("option",{value:"error",children:"Error"}),s.jsx("option",{value:"warn",children:"Warning"}),s.jsx("option",{value:"info",children:"Info"})]})]})]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx(rg,{className:"w-4 h-4"}),"Download Logs"]})]})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-8",children:[a==="objects"&&s.jsx(B9,{pipelineId:E.id,pipelineStatus:E.status,sourceType:E.source_type,destinationType:E.destination_type,onPipelineStatusChange:D,connectorStatuses:me}),a==="monitoring"&&s.jsx(Kne,{refreshTrigger:q,refreshInterval:M,isActive:a==="monitoring"&&(E==null?void 0:E.status)==="running"}),a==="logs"&&s.jsx(Gne,{pipelineId:E.id,pipelineStatus:E.status,activeView:o,searchQuery:c,severityFilter:u}),a==="settings"&&s.jsx(eae,{pipeline:E,onUpdate:X})]}),s.jsx(mO,{isOpen:p,onClose:()=>y(!1),onConfirm:Te,title:(E==null?void 0:E.status)==="draft"?"Delete Draft Pipeline?":"Delete Pipeline",message:(E==null?void 0:E.status)==="draft"?"This draft pipeline will be permanently deleted. This action CANNOT be undone.":"Choose how you want to delete this pipeline. You can keep it for restore or permanently remove it.",pipelineId:e,showTopicsOption:(E==null?void 0:E.status)==="draft",showDeleteTypeOption:(E==null?void 0:E.status)!=="draft",pipelineStatus:E==null?void 0:E.status}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>v(!1),children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-xl w-full max-h-[90vh] overflow-hidden",onClick:Q=>Q.stopPropagation(),children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Change the Pipeline Ingestion Schedule"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Define the frequency or time(s) at which the Pipeline must ingest the data from the Source."})]}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6 max-h-[60vh] overflow-auto",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Scheduled"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"This ingestion schedule applies to all the objects in the Pipeline."}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[["5m","15m","30m","1h","2h","3h"].map(Q=>s.jsx("button",{onClick:()=>{b("preset"),j(Q)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${w==="preset"&&k===Q?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:Q==="5m"?"5 Mins":Q==="15m"?"15 Mins":Q==="30m"?"30 Mins":Q==="1h"?"1 Hr":Q.replace("h"," Hrs")},Q)),s.jsx("button",{onClick:()=>b("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${w==="custom"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Custom"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",checked:N==="interval",onChange:()=>{_("interval"),w!=="custom"&&b("custom")},className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Run at fixed interval"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",checked:N==="daily",onChange:()=>{_("daily"),b("custom")},className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Run daily"})]})]}),w==="custom"&&s.jsx("div",{children:N==="interval"?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours *"}),s.jsx("input",{type:"number",min:"0.083",max:"48",step:"0.001",value:O,onChange:Q=>T(Q.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum 0.083 hr (5 mins) and Maximum 48 hrs"})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"At (in UTC) *"}),s.jsx("div",{className:"space-y-2",children:P.map((Q,se)=>s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Fr,{className:"w-5 h-5 text-gray-400"}),s.jsx("input",{type:"time",value:Q,onChange:de=>{const Ee=[...P];Ee[se]=de.target.value,S(Ee)},className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),P.length>1&&s.jsx("button",{onClick:()=>S(P.filter((de,Ee)=>Ee!==se)),className:"text-red-600 hover:text-red-700",children:"DELETE"})]},se))}),P.length<24&&s.jsxs("button",{onClick:()=>S([...P,"00:00"]),className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[s.jsx("span",{children:"+"})," ADD MORE"]})]})})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(Fr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["DataTravel will ingest your data ",s.jsx("span",{className:"font-semibold",children:H()})]})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"CANCEL"}),s.jsx("button",{onClick:Ae,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700",children:"UPDATE"})]})]})})]})}function hae(){return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Models"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-12",children:"SQL transformation models"}),s.jsx("div",{className:"max-w-2xl mx-auto mt-16",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(SL,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Models Coming Soon"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Define SQL transformation models to transform your data in-flight. This feature will allow you to apply custom business logic and transformations as data flows through your pipelines."}),s.jsx("span",{className:"inline-block px-4 py-2 bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg font-medium text-sm",children:"Phase 2 Feature"})]})})]})}function fae({connectionId:e}){const[t,r]=m.useState(null),[n,a]=m.useState(!1),[i,o]=m.useState(null),[l,c]=m.useState(null),d=async()=>{try{a(!0),o(null);const g=await(await fetch(`http://localhost:3001/api/pipelines/${e}/database-info`)).json();g.success?(r(g.data),c(new Date)):o(g.error||"Failed to fetch database info")}catch(f){o(f instanceof Error?f.message:"Failed to fetch database info")}finally{a(!1)}};m.useEffect(()=>{d()},[e]);const u=f=>{if(f===0)return"0 B";const g=1024,p=["B","KB","MB","GB","TB"],y=Math.floor(Math.log(f)/Math.log(g));return`${(f/Math.pow(g,y)).toFixed(2)} ${p[y]}`},h=f=>new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(f);return!t&&n?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Information"})]}),s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading database information..."})]}):i?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Information"})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[s.jsx(ls,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Failed to load database information"}),s.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 mt-1",children:i})]})]}),s.jsxs("button",{onClick:()=>d(),className:"mt-4 w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx(la,{className:"w-4 h-4"}),"Retry"]})]}):t?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Information"})]}),s.jsx("button",{onClick:()=>d(),disabled:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",title:"Refresh",children:s.jsx(la,{className:`w-4 h-4 text-gray-600 dark:text-gray-400 ${n?"animate-spin":""}`})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(pl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Tables"})]}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:t.totalTables})]}),s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(kE,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Database Size"})]}),s.jsx("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:u(t.size)})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx($r,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Status"})]}),s.jsx("div",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"Connected"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Database Name"}),s.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:t.database})]}),s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Version"}),s.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 break-all",children:t.version})]}),l&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 pt-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(Fr,{className:"w-3 h-3"}),s.jsxs("span",{children:["Last updated: ",h(l)]})]})]})]}):null}function gae({connectionId:e}){const[t,r]=m.useState([]),[n,a]=m.useState(!1),[i,o]=m.useState(null),[l,c]=m.useState(new Set),[d,u]=m.useState(new Map),[h,f]=m.useState(new Set),g=async()=>{try{a(!0),o(null);const k=await(await fetch(`http://localhost:3001/api/pipelines/${e}/sink-tables`)).json();k.success?r(k.data):o(k.error||"Failed to fetch sink tables")}catch(b){o(b instanceof Error?b.message:"Failed to fetch sink tables")}finally{a(!1)}},p=async(b,k)=>{const j=`${b}.${k}`;f(N=>new Set(N).add(j));try{const _=await(await fetch(`http://localhost:3001/api/pipelines/${e}/tables/${b}/${k}/sample`)).json();_.success&&u(O=>new Map(O).set(j,_.data))}catch(N){console.error("Failed to fetch sample data:",N)}finally{f(N=>{const _=new Set(N);return _.delete(j),_})}},y=(b,k)=>{const j=`${b}.${k}`,N=new Set(l);N.has(j)?N.delete(j):(N.add(j),d.has(j)||p(b,k)),c(N)};m.useEffect(()=>{g()},[e]);const x=b=>{if(b===0)return"0 B";const k=1024,j=["B","KB","MB","GB","TB"],N=Math.floor(Math.log(b)/Math.log(k));return`${(b/Math.pow(k,N)).toFixed(2)} ${j[N]}`},v=b=>new Intl.NumberFormat("en-US").format(b),w=b=>b?new Date(b).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return t.length===0&&n?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(pl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"})]}),s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading sink tables..."})]}):i?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(pl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"})]}),s.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:i})]}):t.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(pl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"})]}),s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No CDC sink tables found for this destination"})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pl,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"}),s.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 rounded-full",children:[t.length," ",t.length===1?"table":"tables"]})]}),s.jsx("button",{onClick:()=>g(),disabled:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",title:"Refresh",children:s.jsx(la,{className:`w-4 h-4 text-gray-600 dark:text-gray-400 ${n?"animate-spin":""}`})})]}),s.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto scrollbar-hide",children:t.map(b=>{const k=`${b.schema}.${b.tableName}`,j=l.has(k),N=d.get(k),_=h.has(k);return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>y(b.schema,b.tableName),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[j?s.jsx(ua,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):s.jsx(nn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),s.jsx(kt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[b.schema,".",b.tableName]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v(b.rowCount)," rows  ",x(b.tableSize),"  ",b.columnCount," columns"]})]})]}),b.lastModified&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx(So,{className:"w-3 h-3"}),w(b.lastModified)]})]}),j&&s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900",children:_?s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Loading sample data..."}):N&&N.length>0?s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:Object.keys(N[0]).map(O=>s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:O},O))})}),s.jsx("tbody",{children:N.map((O,T)=>s.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700 last:border-0",children:Object.values(O).map((P,S)=>s.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-gray-100 font-mono text-xs",children:P===null?s.jsx("span",{className:"text-gray-400 italic",children:"null"}):typeof P=="object"?s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:JSON.stringify(P)}):String(P)},S))},T))})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx(ga,{className:"w-3 h-3"}),s.jsx("span",{children:"Showing first 10 rows"})]})]}):s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No sample data available"})})]},k)})})]})}function mae(){var p;const[e,t]=m.useState([]),[r,n]=m.useState(!0),[a,i]=m.useState(null),[o,l]=m.useState(null),[c,d]=m.useState(!1),u=Dt();m.useEffect(()=>{h()},[]);async function h(){try{const{data:y,error:x}=await ne.from("pipelines").select(`
          id,
          name,
          destination_type,
          destination_config,
          status,
          sink_connector:pipeline_connectors!pipeline_connectors_pipeline_id_fkey(
            id,
            name,
            connector_class,
            type
          )
        `).not("destination_type","is",null);if(x)throw x;const v=new Map;y==null||y.forEach(w=>{var j,N;const b=(j=w.sink_connector)==null?void 0:j.find(_=>_.type==="sink"),k=`${w.destination_type}-${JSON.stringify(w.destination_config)}`;if(v.has(k)){const _=v.get(k);_.pipelineCount++,_.pipelines.push({id:w.id,name:w.name,status:w.status}),(w.status==="running"||w.status==="incremental")&&(_.status="active")}else v.set(k,{id:w.id,name:(b==null?void 0:b.name)||((N=w.destination_config)==null?void 0:N.host)||w.destination_type||"Destination",type:w.destination_type||"unknown",connector_class:b==null?void 0:b.connector_class,config:w.destination_config||{},pipelineCount:1,pipelines:[{id:w.id,name:w.name,status:w.status}],status:w.status==="running"||w.status==="incremental"?"active":"idle"})}),t(Array.from(v.values()))}catch(y){console.error("Error loading destinations:",y)}finally{n(!1)}}if(r)return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Destinations"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-12",children:"Loading destinations..."})]});if(e.length===0)return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Destinations"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-12",children:"Manage your data destinations"}),s.jsx("div",{className:"max-w-2xl mx-auto mt-16",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(Yl,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"No Destinations Yet"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Destinations are configured as part of the pipeline creation process. Create your first pipeline to set up a destination."})]})})]});function f(y){return y?"".repeat(y.length):""}function g(y){const x=y.host??"localhost",v=y.port??"5432",w=y.database??"mydb";return`${y.username??"user"}@${x}:${v}/${w}`}return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Destinations"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.length," destination",e.length!==1?"s":""," configured"]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(y=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{i(y),l(y.pipelines[0])},children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx(fr,{connectorClass:y.connector_class,sourceType:y.type,className:"w-12 h-12"}),s.jsx("div",{className:"flex items-center gap-2",children:y.status==="active"?s.jsx($r,{className:"w-5 h-5 text-green-500"}):s.jsx(In,{className:"w-5 h-5 text-gray-400"})})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:y.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 uppercase",children:y.type}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pipelines"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:y.pipelineCount})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${y.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:y.status})]})]}),s.jsxs("button",{className:"mt-4 w-full px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ja,{className:"w-4 h-4"}),"View Pipelines"]})]},y.id))}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>i(null),children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between z-10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fr,{connectorClass:a.connector_class,className:"w-14 h-14"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase",children:a.type})]})]}),s.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Pipelines Using This Destination (",a.pipelines.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Connector Type:"}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 rounded",children:((p=a.connector_class)==null?void 0:p.split(".").pop())||"N/A"})]})]}),s.jsx("div",{className:"space-y-2",children:a.pipelines.map(y=>s.jsxs("div",{onClick:x=>{x.stopPropagation(),l(y)},className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all ${(o==null?void 0:o.id)===y.id?"bg-blue-100 dark:bg-blue-900/30 ring-2 ring-blue-500 dark:ring-blue-400":"bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[s.jsx("span",{className:`font-medium ${(o==null?void 0:o.id)===y.id?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:y.name}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${y.status==="running"||y.status==="incremental"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":y.status==="snapshot"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:y.status})]},y.id))})]}),a.config.host&&o&&s.jsx(fae,{connectionId:o.id}),o&&s.jsx(gae,{connectionId:o.id}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),s.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${a.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:a.status})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Connection Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Host"}),s.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:a.config.host||"N/A"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Port"}),s.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:a.config.port||"N/A"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Database"}),s.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:a.config.database||"N/A"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),s.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:a.config.username||"N/A"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 font-mono flex-1",children:c?a.config.password||"N/A":f(String(a.config.password||""))}),s.jsx("button",{onClick:()=>d(!c),className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:c?s.jsx(bi,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):s.jsx(ga,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Connection String"}),s.jsx("span",{className:"col-span-2 text-sm text-blue-900 dark:text-blue-100 font-mono break-all",children:g(a.config)})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("button",{onClick:()=>{i(null),u("/pipelines")},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ja,{className:"w-4 h-4"}),"View Pipelines"]}),s.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 rounded-lg transition-colors",children:"Close"})]})]})]})})]})}function pae({data:e,title:t="Error Rate",threshold:r=10,height:n=300}){const a=e.map(h=>({time:new Date(h.timestamp).toLocaleTimeString(),value:Number(h.value.toFixed(2))})),i=e.map(h=>h.value),o=i.reduce((h,f)=>h+f,0),l=i.length>0?(o/i.length).toFixed(2):"0",c=i.length>0?Math.max(...i).toFixed(2):"0",d=i.length>0?i[i.length-1].toFixed(2):"0",u=parseFloat(d)>r;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${u?"bg-red-100 dark:bg-red-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:s.jsx(bn,{className:`w-5 h-5 ${u?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:["Current: ",s.jsx("strong",{className:`${u?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-gray-100"}`,children:d})]}),s.jsxs("span",{children:["Avg: ",s.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:l})]}),s.jsxs("span",{children:["Max: ",s.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:c})]}),s.jsxs("span",{children:["Total: ",s.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:o.toFixed(0)})]})]})]})]})}),a.length===0?s.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500 dark:text-gray-400",children:"No data available"}):s.jsx(Nw,{width:"100%",height:n,children:s.jsxs(xte,{data:a,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"errorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.1})]})}),s.jsx(gm,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),s.jsx(mm,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"12px"}}),s.jsx(pm,{stroke:"#9ca3af",style:{fontSize:"12px"},label:{value:"errors",angle:-90,position:"insideLeft",style:{fill:"#9ca3af"}}}),s.jsx(Pk,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f9fafb"},labelStyle:{color:"#9ca3af"}}),s.jsx(qg,{}),r>0&&s.jsx(vD,{y:r,stroke:"#f59e0b",strokeDasharray:"3 3",label:{value:`Threshold: ${r}`,fill:"#f59e0b",fontSize:12}}),s.jsx(LD,{type:"monotone",dataKey:"value",stroke:"#ef4444",strokeWidth:2,fill:"url(#errorGradient)",name:"Errors",animationDuration:300})]})})]})}function qh({data:e,width:t=100,height:r=30,color:n="#3b82f6",fillColor:a="rgba(59, 130, 246, 0.1)",type:i="line",showDots:o=!1}){const l=e.filter(p=>typeof p=="number"&&!isNaN(p)&&isFinite(p));if(!l||l.length===0)return s.jsx("svg",{width:t,height:r,className:"inline-block",children:s.jsx("line",{x1:"0",y1:r/2,x2:t,y2:r/2,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"2,2"})});const c=Math.min(...l),u=Math.max(...l)-c||1,h=l.map((p,y)=>{const x=l.length===1?t/2:y/(l.length-1)*t,v=r-(p-c)/u*r;return{x,y:v}}),f=h.map((p,y)=>`${y===0?"M":"L"} ${p.x.toFixed(2)} ${p.y.toFixed(2)}`).join(" "),g=i==="area"?`${f} L ${t} ${r} L 0 ${r} Z`:"";return s.jsxs("svg",{width:t,height:r,className:"inline-block",children:[i==="area"&&s.jsx("path",{d:g,fill:a}),s.jsx("path",{d:f,fill:"none",stroke:n,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"}),o&&h.map((p,y)=>s.jsx("circle",{cx:p.x,cy:p.y,r:"1.5",fill:n},y))]})}const Gp="http://127.0.0.1:5002",yae=[{value:"5m",label:"5 min"},{value:"15m",label:"15 min"},{value:"1h",label:"1 hour"},{value:"6h",label:"6 hours"},{value:"24h",label:"24 hours"}];function xae(){const[e,t]=m.useState([]),[r,n]=m.useState(""),[a,i]=m.useState(!0),[o,l]=m.useState(!1),[c,d]=m.useState("5m"),[u,h]=m.useState(!0),[f,g]=m.useState([]),[p,y]=m.useState([]),[x,v]=m.useState([]),[w,b]=m.useState(null),[k,j]=m.useState(null),[N,_]=m.useState([]),[O,T]=m.useState([]),[P,S]=m.useState([]),[M,F]=m.useState({status:"Unknown",errorRate:"0%",commitRate:"0/s",queueUsage:"0%"}),[q,z]=m.useState([]),[W,$]=m.useState([]),[E,U]=m.useState([]),[I,X]=m.useState([]),[Z,te]=m.useState([]),K=e.find(H=>H.id===r),{data:le={},isLoading:me}=U5({pipelineId:r||"",enabled:!!K&&(K.status==="running"||K.status==="paused"),refetchInterval:u?5e3:void 0}),{data:ue,isLoading:A,refetch:D}=I5({pipelineId:r||"",enabled:!!K&&(K.status==="running"||K.status==="paused"),refetchInterval:u?5e3:void 0});m.useEffect(()=>{G()},[]);const G=async()=>{try{const{data:H,error:oe}=await ne.from("pipelines").select("id, name, status").in("status",["running","paused","stopped"]).order("name");if(oe)throw oe;t(H||[]),H&&H.length>0&&!r&&n(H[0].id)}catch(H){console.error("Error loading pipelines:",H)}finally{i(!1)}},ae=m.useCallback(async H=>{if(H)try{const[oe,R,re]=await Promise.all([fetch(`${Gp}/api/monitoring/timeseries?pipelineId=${H}&metric=throughput&range=${c}`),fetch(`${Gp}/api/monitoring/timeseries?pipelineId=${H}&metric=latency&range=${c}`),fetch(`${Gp}/api/monitoring/timeseries?pipelineId=${H}&metric=errors&range=${c}`)]);if(oe.ok){const Y=await oe.json();if(Y.success&&Y.data.series.length>0){const J=Y.data.series[0].values,we=Array.isArray(J)?J.filter(Ce=>Ce&&typeof Ce.timestamp=="number"&&typeof Ce.value=="number"&&!isNaN(Ce.timestamp)&&!isNaN(Ce.value)&&isFinite(Ce.timestamp)&&isFinite(Ce.value)):[];console.log(" Throughput data validated:",we.length,"valid points out of",(J==null?void 0:J.length)||0),g(we)}else g([])}if(R.ok){const Y=await R.json();if(Y.success&&Y.data.series.length>0){const J=Y.data.series[0].values,we=Array.isArray(J)?J.filter(Ce=>Ce&&typeof Ce.timestamp=="number"&&typeof Ce.value=="number"&&!isNaN(Ce.timestamp)&&!isNaN(Ce.value)&&isFinite(Ce.timestamp)&&isFinite(Ce.value)):[];console.log(" Latency data validated:",we.length,"valid points out of",(J==null?void 0:J.length)||0),y(we)}else y([])}if(re.ok){const Y=await re.json();if(Y.success&&Y.data.series.length>0){const J=Y.data.series[0].values,we=Array.isArray(J)?J.filter(Ce=>Ce&&typeof Ce.timestamp=="number"&&typeof Ce.value=="number"&&!isNaN(Ce.timestamp)&&!isNaN(Ce.value)&&isFinite(Ce.timestamp)&&isFinite(Ce.value)):[];console.log(" Error data validated:",we.length,"valid points out of",(J==null?void 0:J.length)||0),v(we)}else v([])}}catch(oe){console.error("Error fetching metrics:",oe)}},[c]),B=m.useCallback(async H=>{if(H)try{const oe=await wx(H);oe&&(j(oe),b(oe.flowMetrics||null),_(oe.lagMetrics||[]),T(oe.slowTables||[]),S(oe.connectorTasks||[]),F(oe.state||{status:"Unknown",errorRate:"0%",commitRate:"0/s",queueUsage:"0%"}),fe(oe))}catch(oe){console.error("Error fetching monitoring data:",oe),b(null),_([]),T([]),S([])}},[]),fe=H=>{var Ce;const oe=[],R=new Date,re=Pe=>new Date(R.getTime()-Pe*6e4).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});let Y=0;H.state.status==="Streaming"&&(oe.push({id:`event-${Y}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"success",message:"Pipeline is streaming",details:"All connectors running normally"}),Y+=Math.floor(Math.random()*3)+1);const J=((Ce=H.flowMetrics)==null?void 0:Ce.sourceToKafka)||"0 rec/s";J.startsWith("0")||(oe.push({id:`event-${Y}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"info",message:"Records processed",details:`Source  Kafka: ${J}`}),Y+=Math.floor(Math.random()*2)+1),H.connectorTasks.forEach(Pe=>{Pe.status==="healthy"?oe.push({id:`event-${Y}-${Pe.id}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"success",message:`${Pe.id} healthy`,details:`Lag: ${Pe.lag}, Rate: ${Pe.records}`}):Pe.status==="warning"?oe.push({id:`event-${Y}-${Pe.id}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"warning",message:`${Pe.id} high lag`,details:`Lag: ${Pe.lag} - Performance degraded`}):Pe.status==="error"&&oe.push({id:`event-${Y}-${Pe.id}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"error",message:`${Pe.id} error`,details:"Task is not running - requires attention"}),Y+=Math.floor(Math.random()*2)+1}),parseFloat(H.state.errorRate)>1?(oe.push({id:`event-${Y}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"error",message:"High error rate detected",details:`Error rate: ${H.state.errorRate}`}),Y+=Math.floor(Math.random()*3)+1):(oe.push({id:`event-${Y}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"success",message:"Low error rate",details:`Error rate: ${H.state.errorRate} - System stable`}),Y+=Math.floor(Math.random()*4)+2),H.slowTables.length>0&&H.slowTables.forEach(Pe=>{oe.push({id:`event-${Y}-${Pe.table}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:Pe.status==="ok"?"":Pe.status==="warning"?"":"",type:Pe.status==="ok"?"success":Pe.status==="warning"?"warning":"error",message:`Table: ${Pe.table}`,details:`Lag: ${Pe.lag}, Records: ${Pe.records}`}),Y+=Math.floor(Math.random()*2)+1}),oe.push({id:`event-${Y}`,timestamp:new Date(R.getTime()-Y*6e4).toISOString(),time:re(Y),icon:"",type:"info",message:"Offset commits",details:`Commit rate: ${H.state.commitRate}`}),z(oe.sort((Pe,We)=>new Date(We.timestamp).getTime()-new Date(Pe.timestamp).getTime()).slice(0,20))};m.useEffect(()=>{r&&(ae(r),B(r))},[r,c,ae,B]),m.useEffect(()=>{if(!u||!r)return;const H=setInterval(()=>{ae(r),B(r)},3e4);return()=>clearInterval(H)},[u,r,ae,B]),m.useEffect(()=>{var H,oe,R;if(f.length>0){const re=((H=f[f.length-1])==null?void 0:H.value)||0;!isNaN(re)&&isFinite(re)&&$(Y=>[...Y,re].slice(-15))}if(p.length>0){const re=((oe=p[p.length-1])==null?void 0:oe.value)||0;!isNaN(re)&&isFinite(re)&&U(Y=>[...Y,re].slice(-15))}if(x.length>0){const re=((R=x[x.length-1])==null?void 0:R.value)||0;!isNaN(re)&&isFinite(re)&&X(Y=>[...Y,re].slice(-15))}if(M.commitRate){const re=M.commitRate.match(/([\d.]+)/),Y=re?parseFloat(re[1]):0;!isNaN(Y)&&isFinite(Y)&&te(J=>[...J,Y].slice(-15))}},[f,p,x,M.commitRate]);const be=async()=>{l(!0),await G(),r&&(await ae(r),await B(r)),setTimeout(()=>l(!1),500)},Te=async H=>{if(!r){console.warn("No pipeline selected");return}try{const oe=await fetch(`http://localhost:5001/api/monitoring-panels/${r}?userId=default`),{panels:R}=await oe.json(),re=(R==null?void 0:R.panels)||[];if(re.includes(H))console.log(`Panel "${H}" already in Pipeline Details`);else{const Y=[...re,H];await fetch(`http://localhost:5001/api/monitoring-panels/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"default",panels:Y})}),console.log(` Panel "${H}" added to Pipeline Details`)}}catch(oe){console.error("Failed to add panel:",oe)}},Ae=H=>{if(!H)return 0;const oe=H.match(/(\d+)/);if(!oe)return 0;const R=parseInt(oe[1],10);if(R===0)return 0;const Y=Math.min(Math.max(R/1e3*100,20),100);return Math.round(Y)};return s.jsxs("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Lr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Monitoring Dashboard"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Real-time pipeline monitoring and analytics"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:be,disabled:o,className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[s.jsx(la,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]}),s.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(rg,{className:"w-4 h-4"}),"Export"]}),s.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(Yl,{className:"w-4 h-4"}),"Settings"]})]})]}),s.jsxs("div",{className:"mt-6 flex items-center gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pipeline"}),s.jsx("select",{value:r,onChange:H=>n(H.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100",disabled:a,children:a?s.jsx("option",{children:"Loading pipelines..."}):e.length===0?s.jsx("option",{children:"No pipelines available"}):e.map(H=>s.jsxs("option",{value:H.id,children:[H.name," (",H.status,")"]},H.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Range"}),s.jsx("div",{className:"flex items-center gap-2",children:yae.map(H=>s.jsx("button",{onClick:()=>d(H.value),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${c===H.value?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:H.label},H.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-refresh"}),s.jsxs("button",{onClick:()=>h(!u),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 ${u?"bg-green-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600"}`,children:[s.jsx(Fr,{className:"w-4 h-4"}),u?"ON":"OFF"]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto px-8 py-6",children:a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(la,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading pipelines..."})]})}):K?s.jsxs("div",{className:"space-y-6",children:[K&&(K.status==="running"||K.status==="paused")&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Pipeline Progress"}),s.jsx($5,{progress:le,isLoading:me})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pipeline State"}),s.jsxs("button",{onClick:()=>Te("pipeline-state"),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx(si,{label:"State",value:M.status,icon:zf,variant:M.status==="Streaming"?"success":"default"}),s.jsx(si,{label:"Error Rate",value:M.errorRate,icon:bn,variant:parseFloat(M.errorRate)<1?"success":"default"}),s.jsx(si,{label:"Commit Rate",value:M.commitRate,icon:kt,variant:"default"}),s.jsx(si,{label:"Queue Usage",value:M.queueUsage,icon:Lr,variant:"default"})]})]}),K&&(K.status==="running"||K.status==="paused")&&ue&&s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:s.jsx(F5,{pipelineId:r,pipelineStatus:K.status,refreshInterval:5e3,onRefreshIntervalChange:()=>{},onManualRefresh:D})}),N.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"End-to-End Latency"}),s.jsxs("button",{onClick:()=>Te("end-to-end-latency"),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:N.map(H=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:H.label}),s.jsx(wi,{className:"w-3.5 h-3.5 text-gray-400 dark:text-gray-500"})]}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:H.value}),H.change&&s.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${H.trend==="down"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[H.trend==="down"?s.jsx(SE,{className:"w-3 h-3"}):s.jsx(os,{className:"w-3 h-3"}),H.change]})]})]},H.label))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"h-[400px]",children:s.jsx(QD,{data:f,title:"Source Throughput",color:"#3b82f6",onViewDetails:()=>Te("throughput")})}),s.jsx("div",{className:"h-[400px]",children:s.jsx(YD,{data:p,title:"Source Latency",onViewDetails:()=>Te("latency")})})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx("div",{className:"h-[400px]",children:s.jsx(pae,{data:x,title:"Error Rate",threshold:10})})}),w&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:s.jsx(kt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Records Flow"})]}),s.jsxs("button",{onClick:()=>Te("records-flow"),className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Source  Kafka"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.sourceToKafka||"0 rec/s"})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500 ease-out relative",style:{width:`${Ae(w.sourceToKafka)}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kafka  Sink"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.kafkaToSink||"0 rec/s"})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500 ease-out relative",style:{width:`${Ae(w.kafkaToSink)}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.3s"}})})})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sink  Destination"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.sinkToDestination||"0 rec/s"})]}),s.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-500 ease-out relative",style:{width:`${Ae(w.sinkToDestination)}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.6s"}})})})]})})]})]}),O.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Top Slow Tables"}),s.jsxs("button",{onClick:()=>Te("top-slow-tables"),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Table"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Lag"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Records"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:O.map(H=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:H.table}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:H.lag}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:H.records}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${H.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":H.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:H.status})})]},H.table))})]})})]}),P.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Connector Task Health Map",s.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",P.length," ",P.length===1?"task":"tasks",")"]})]}),s.jsxs("button",{onClick:()=>Te("connector-task-health"),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg transition-colors",title:"View on Details Page",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"View on Details"})]})]}),s.jsx("div",{className:"grid grid-cols-5 lg:grid-cols-8 xl:grid-cols-10 gap-3",children:P.map(H=>s.jsxs("div",{className:`p-3 rounded-lg border ${H.status==="healthy"?"border-green-500 bg-green-50 dark:bg-green-900/20":H.status==="warning"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate",children:H.id}),s.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ml-1 ${H.status==="healthy"?"bg-green-500":H.status==="warning"?"bg-yellow-500":"bg-red-500"}`})]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:"Lag:"}),s.jsx("span",{className:"font-medium truncate ml-1",children:H.lag})]}),s.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:"Rate:"}),s.jsx("span",{className:"font-medium truncate ml-1",children:H.records})]})]})]},H.id))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 border-2 border-purple-200 dark:border-purple-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:s.jsx(mL,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"Pipeline Health Score"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall system performance and reliability"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-5xl font-bold text-purple-600 dark:text-purple-400",children:M.status==="Streaming"&&parseFloat(M.errorRate)<1?"95":"72"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"out of 100"})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Uptime: 99.9%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Latency: Good"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[parseFloat(M.errorRate)<1?s.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):s.jsx(ls,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Errors: ",M.errorRate]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Throughput: Stable"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(V1,{className:"w-6 h-6 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Resources"}),s.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 px-2 py-1 rounded",children:"Coming Soon"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(bL,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CPU Usage"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(V1,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Memory"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(kE,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Disk I/O"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(AL,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Network"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden shadow-lg",children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800/50 dark:to-gray-800/30 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:["Real-time Activity Feed",s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Live pipeline events"})]})]}),s.jsx("span",{className:"px-3 py-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md text-xs font-medium text-gray-700 dark:text-gray-300",children:"Last 20 events"})]}),s.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:q.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-flex p-6 bg-gray-100 dark:bg-gray-800 rounded-full mb-4",children:s.jsx(Lr,{className:"w-16 h-16 text-gray-400 dark:text-gray-600"})}),s.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"No activity events yet"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Events will appear as the pipeline processes data"})]}):s.jsx("div",{className:"p-4 space-y-2",children:q.map((H,oe)=>{var J,we,Ce,Pe,We,Q,se,de;const R=oe===0?"NOW":`${oe*2}m`,re=()=>H.type==="success"?"bg-green-500":H.type==="warning"?"bg-yellow-500":H.type==="error"?"bg-red-500":"bg-blue-500",Y=()=>H.type==="success"?"bg-green-50/50 dark:bg-green-900/5 border-green-200 dark:border-green-800/30":H.type==="warning"?"bg-yellow-50/50 dark:bg-yellow-900/5 border-yellow-200 dark:border-yellow-800/30":H.type==="error"?"bg-red-50/50 dark:bg-red-900/5 border-red-200 dark:border-red-800/30":"bg-blue-50/50 dark:bg-blue-900/5 border-blue-200 dark:border-blue-800/30";return s.jsxs("div",{className:`relative flex gap-4 p-5 ${Y()} border-l-4 rounded-xl`,children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 flex-shrink-0",children:[s.jsx("div",{className:`w-1 h-full absolute left-0 top-0 ${re()}`}),s.jsx("div",{className:"text-3xl",children:H.icon}),s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${oe===0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 animate-pulse":"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:R})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-mono text-gray-500 dark:text-gray-400 bg-white/50 dark:bg-gray-800/50 px-2 py-1 rounded",children:H.time}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-md font-bold uppercase tracking-wider ${H.type==="success"?"bg-green-500 text-white":H.type==="warning"?"bg-yellow-500 text-white":H.type==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:H.type})]})}),s.jsx("h4",{className:"text-base font-bold text-gray-900 dark:text-gray-100 mb-1",children:H.message}),H.details&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(wi,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 flex-1",children:H.details})]}),H.message.includes("records")&&s.jsxs("div",{className:"mt-4 p-3 bg-white/60 dark:bg-gray-900/40 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Throughput Rate"})]}),s.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:((we=(J=H.details)==null?void 0:J.match(/[\d.]+[KM]?\/s|[\d,]+\/min/))==null?void 0:we[0])||"0/min"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qh,{data:W.length>0?W:[0],width:120,height:32,color:"#3b82f6",fillColor:"rgba(59, 130, 246, 0.15)",type:"area"}),s.jsx("div",{className:"flex-1 text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:W.length>0?`Last ${W.length} points`:"No data"})})]})]}),(H.message.includes("healthy")||H.message.includes("lag")&&H.message.includes("healthy"))&&H.details&&H.details.includes("Lag")&&s.jsxs("div",{className:"mt-4 p-3 bg-white/60 dark:bg-gray-900/40 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fr,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Replication Lag"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:((Pe=(Ce=H.details)==null?void 0:Ce.match(/Lag:\s*([\d.]+[a-z]+)/))==null?void 0:Pe[1])||"0ms"}),s.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs font-bold rounded-full",children:"Healthy"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qh,{data:E.length>0?E:[0],width:120,height:32,color:"#10b981",fillColor:"rgba(16, 185, 129, 0.15)",type:"area"}),s.jsx("div",{className:"flex-1 text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:E.length>0?`Last ${E.length} points`:"No data"})})]})]}),H.message.includes("error")&&H.message.includes("rate")&&s.jsxs("div",{className:"mt-4 p-3 bg-white/60 dark:bg-gray-900/40 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"w-4 h-4 text-orange-500"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Error Rate"})]}),s.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:((Q=(We=H.details)==null?void 0:We.match(/Error rate:\s*([\d.]+%)/))==null?void 0:Q[1])||"0.00%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qh,{data:I.length>0?I:[0],width:120,height:32,color:"#f97316",fillColor:"rgba(249, 115, 22, 0.15)",type:"area"}),s.jsx("div",{className:"flex-1 text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:I.length>0?`Last ${I.length} points`:"No data"})})]})]}),H.message.includes("Offset commits")&&s.jsxs("div",{className:"mt-4 p-3 bg-white/60 dark:bg-gray-900/40 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kt,{className:"w-4 h-4 text-purple-500"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Commit Rate"})]}),s.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:((de=(se=H.details)==null?void 0:se.match(/Commit rate:\s*([\d.]+\/s)/))==null?void 0:de[1])||"0/s"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qh,{data:Z.length>0?Z:[0],width:120,height:32,color:"#a855f7",fillColor:"rgba(168, 85, 247, 0.15)",type:"area"}),s.jsx("div",{className:"flex-1 text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z.length>0?`Last ${Z.length} points`:"No data"})})]})]})]})]},H.id)})})}),q.length>0&&s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800/50 dark:to-gray-800/30",children:s.jsxs("button",{className:"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold text-sm rounded-lg shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-2 group",children:[s.jsx("span",{children:"View All Events History"}),s.jsx(os,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(ys,{className:"w-6 h-6 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Alert History"}),s.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 px-2 py-1 rounded",children:"Coming Soon"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Historical view of triggered alerts with resolution times and impact analysis"})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"Real-time Monitoring Active"}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Monitoring data for ",s.jsx("strong",{children:K.name})," is being refreshed every 30 seconds.",u&&" Auto-refresh is enabled."]})]})]})})]}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Lr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No pipeline selected. Please select a pipeline to view monitoring data."})]})})})]})}function vae(){const e=[{icon:kt,title:"Source Configuration",description:"Learn how to configure Oracle and PostgreSQL sources",topics:["Oracle Pre-requisites","PostgreSQL Setup","Network Configuration"]},{icon:vL,title:"Pre-check SQL Snippets",description:"SQL commands for validating database configuration",topics:["ARCHIVELOG Mode","Supplemental Logging","User Privileges"]},{icon:yL,title:"Troubleshooting",description:"Common issues and their solutions",topics:["Connection Failures","Permission Errors","Long Transactions"]}];return s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Documentation"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Guides, references, and troubleshooting help"}),s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"relative mb-8",children:[s.jsx(ma,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search documentation...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100"})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map((t,r)=>{const n=t.icon;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mb-4",children:s.jsx(n,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:t.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t.description}),s.jsx("ul",{className:"space-y-2",children:t.topics.map((a,i)=>s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:a})},i))})]},r)})}),s.jsx("div",{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx(jE,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Need More Help?"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:"Can't find what you're looking for? Our support team is here to help."}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm",children:"Contact Support"})]})]})})]})]})}function bae(){const e=Dt(),{signIn:t}=an(),[r,n]=m.useState(""),[a,i]=m.useState(""),[o,l]=m.useState(!1),[c,d]=m.useState(!1),u=async h=>{h.preventDefault(),d(!0);const{error:f}=await t(r,a);f||e("/pipelines"),d(!1)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden flex items-center justify-center p-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-cyan-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-blue-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:[0,45,90,135,180,225,270,315].map((h,f)=>s.jsx("div",{className:"absolute w-3 h-3 bg-cyan-400 rounded-full shadow-lg shadow-cyan-500/50 animate-flow-dot",style:{top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${h}deg) translateX(0px)`,animationDelay:`${f*.5}s`}},f))})]}),s.jsxs("div",{className:"relative z-10 w-full max-w-6xl grid lg:grid-cols-2 gap-12 items-center",children:[s.jsx("div",{className:"hidden lg:block space-y-8",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h1",{className:"text-6xl font-bold text-white leading-tight",children:["Connect Your",s.jsx("span",{className:"block mt-2 bg-gradient-to-r from-cyan-400 via-blue-400 to-blue-500 text-transparent bg-clip-text",children:"Data Universe"})]}),s.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-white/5 backdrop-blur-sm rounded-full border border-white/10",children:[s.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm text-cyan-400 font-medium",children:"Real-time Data Pipelines"})]}),s.jsx("p",{className:"text-xl text-slate-300 leading-relaxed",children:"Enterprise-grade data replication and CDC platform. Connect any database to anywhere with zero downtime."})]})}),s.jsxs("div",{className:"w-full max-w-md mx-auto",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20",children:[s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl blur-xl opacity-50 animate-pulse"}),s.jsx("div",{className:"relative p-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl",children:s.jsx(kt,{className:"w-10 h-10 text-white"})})]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-slate-300",children:"Sign in to manage your data pipelines"})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-200 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:r,onChange:h=>n(h.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"you@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-200 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",type:o?"text":"password",value:a,onChange:h=>i(h.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"Enter your password"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:o?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]}),s.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-cyan-500/50 hover:scale-[1.02] active:scale-[0.98]",children:c?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-5 h-5 animate-spin"}),"Signing In..."]}):s.jsxs(s.Fragment,{children:["Sign In",s.jsx(is,{className:"w-5 h-5"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-slate-300",children:["Don't have an account?"," ",s.jsx(hg,{to:"/signup",className:"text-cyan-400 hover:text-cyan-300 font-semibold transition-colors",children:"Sign Up"})]})})]}),s.jsx("p",{className:"text-center text-sm text-slate-400 mt-6",children:"Protected by enterprise-grade security"})]})]})]})}function wae(){const e=Dt(),{signUp:t}=an(),[r,n]=m.useState(""),[a,i]=m.useState(""),[o,l]=m.useState(""),[c,d]=m.useState(""),[u,h]=m.useState(!1),[f,g]=m.useState(!1),[p,y]=m.useState(!1),[x,v]=m.useState(""),w=async b=>{if(b.preventDefault(),v(""),o!==c){v("Passwords do not match");return}if(o.length<6){v("Password must be at least 6 characters");return}y(!0);const{error:k}=await t(a,o,r);k||e("/login"),y(!1)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden flex items-center justify-center p-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-cyan-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-blue-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:[0,45,90,135,180,225,270,315].map((b,k)=>s.jsx("div",{className:"absolute w-3 h-3 bg-cyan-400 rounded-full shadow-lg shadow-cyan-500/50 animate-flow-dot",style:{top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${b}deg) translateX(0px)`,animationDelay:`${k*.5}s`}},k))})]}),s.jsxs("div",{className:"relative z-10 w-full max-w-md mx-auto",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20",children:[s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl blur-xl opacity-50 animate-pulse"}),s.jsx("div",{className:"relative p-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl",children:s.jsx(kt,{className:"w-10 h-10 text-white"})})]})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),s.jsx("p",{className:"text-slate-300",children:"Sign up to get started with data pipelines"})]}),x&&s.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl backdrop-blur-sm",children:s.jsx("p",{className:"text-sm text-red-300",children:x})}),s.jsxs("form",{onSubmit:w,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-200 mb-2",children:"Full Name"}),s.jsx("input",{id:"fullName",type:"text",value:r,onChange:b=>n(b.target.value),className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"John Doe"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-200 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:a,onChange:b=>i(b.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"you@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-200 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",type:u?"text":"password",value:o,onChange:b=>l(b.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"Minimum 6 characters"}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:u?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-200 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirmPassword",type:f?"text":"password",value:c,onChange:b=>d(b.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"Re-enter your password"}),s.jsx("button",{type:"button",onClick:()=>g(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:f?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]}),s.jsx("button",{type:"submit",disabled:p,className:"w-full py-3 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-cyan-500/50 hover:scale-[1.02] active:scale-[0.98]",children:p?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-5 h-5 animate-spin"}),"Creating Account..."]}):s.jsxs(s.Fragment,{children:["Create Account",s.jsx(is,{className:"w-5 h-5"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-slate-300",children:["Already have an account?"," ",s.jsx(hg,{to:"/login",className:"text-cyan-400 hover:text-cyan-300 font-semibold transition-colors",children:"Sign In"})]})})]}),s.jsx("p",{className:"text-center text-sm text-slate-400 mt-6",children:"By signing up, you agree to our Terms of Service"})]})]})}function kae(){const{hasRole:e,logActivity:t}=an(),{showToast:r}=Er(),n=Dt(),[a,i]=m.useState([]),[o,l]=m.useState(!0),[c,d]=m.useState(""),[u,h]=m.useState(!1),[f,g]=m.useState(!1),[p,y]=m.useState(null),[x,v]=m.useState(!1),[w,b]=m.useState(null),[k,j]=m.useState(!1),[N,_]=m.useState({email:"",password:"",full_name:"",role:"read_only"}),O=()=>{const E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let U="";for(let I=0;I<12;I++)U+=E.charAt(Math.floor(Math.random()*E.length));return U};m.useEffect(()=>{u&&(_({email:"",password:O(),full_name:"",role:"read_only"}),j(!1))},[u]);const T=async()=>{try{await navigator.clipboard.writeText(N.password),j(!0),r("success","Password copied to clipboard"),setTimeout(()=>j(!1),2e3)}catch{r("error","Failed to copy password")}};m.useEffect(()=>{if(!e("admin")){n("/pipelines");return}P()},[e,n]);const P=async()=>{try{l(!0);const{data:$,error:E}=await ne.from("user_profiles").select("*").order("created_at",{ascending:!1});if(E)throw E;const U=await Promise.all(($||[]).map(async I=>{const{count:X}=await ne.from("pipelines").select("*",{count:"exact",head:!0}).eq("user_id",I.id),{data:Z}=await ne.from("user_activity_logs").select("created_at").eq("user_id",I.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),{count:te}=await ne.from("alert_preferences").select("*",{count:"exact",head:!0}).eq("user_id",I.id).not("recipient_id","is",null);return{...I,pipeline_count:X||0,last_activity:(Z==null?void 0:Z.created_at)||null,alert_count:te||0}}));i(U)}catch($){console.error("Error fetching users:",$),r("error","Failed to load users")}finally{l(!1)}},S=async $=>{$.preventDefault();try{const{data:E}=await ne.auth.getSession();if(!E.session)throw new Error("Not authenticated");const U=await fetch("http://127.0.0.1:54321/functions/v1/admin-users",{method:"POST",headers:{Authorization:`Bearer ${E.session.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:N.email,password:N.password,full_name:N.full_name,role:N.role})});if(!U.ok){const X=await U.json();throw new Error(X.error||"Failed to create user")}const{user:I}=await U.json();I&&(await t("user.create",`Created new user: ${N.email}`,"user_profile",I.id,{role:N.role}),r("success","User created successfully"),h(!1),_({email:"",password:"",full_name:"",role:"read_only"}),P())}catch(E){console.error("Error creating user:",E),r("error",E.message||"Failed to create user")}},M=async $=>{if($.preventDefault(),!!p)try{const{error:E}=await ne.from("user_profiles").update({full_name:p.full_name,role:p.role,is_active:p.is_active}).eq("id",p.id);if(E)throw E;await t("user.update",`Updated user: ${p.email}`,"user_profile",p.id,{role:p.role,is_active:p.is_active}),r("success","User updated successfully"),g(!1),y(null),P()}catch(E){console.error("Error updating user:",E),r("error",E.message||"Failed to update user")}},F=async()=>{if(w)try{const{data:$}=await ne.auth.getSession();if(!$.session)throw new Error("Not authenticated");const E=await fetch("http://127.0.0.1:54321/functions/v1/admin-users",{method:"DELETE",headers:{Authorization:`Bearer ${$.session.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:w.id})});if(!E.ok){const U=await E.json();throw new Error(U.error||"Failed to delete user")}await t("user.delete",`Deleted user: ${w.email}`,"user_profile",w.id),r("success","User deleted successfully"),v(!1),b(null),P()}catch($){console.error("Error deleting user:",$),r("error",$.message||"Failed to delete user")}},q=a.filter($=>{var E;return $.email.toLowerCase().includes(c.toLowerCase())||((E=$.full_name)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))}),z=$=>{switch($){case"admin":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"maintainer":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"read_only":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}},W={admin:a.filter($=>$.role==="admin").length,maintainer:a.filter($=>$.role==="maintainer").length,read_only:a.filter($=>$.role==="read_only").length};return s.jsxs("div",{className:"p-8",children:[s.jsxs("button",{onClick:()=>n("/admin"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-6",children:[s.jsx(Ro,{className:"w-4 h-4"}),"Back to Admin"]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage users, roles, and permissions"})]}),s.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[s.jsx(pi,{className:"w-5 h-5"}),"Create User"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Users"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:a.length})]}),s.jsx(ix,{className:"w-10 h-10 text-blue-600"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Admins"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:W.admin})]}),s.jsx(Xl,{className:"w-10 h-10 text-red-600"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Maintainers"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:W.maintainer})]}),s.jsx(Lr,{className:"w-10 h-10 text-blue-600"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Read Only"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:W.read_only})]}),s.jsx(ix,{className:"w-10 h-10 text-gray-600"})]})})]}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search users by email or name...",value:c,onChange:$=>d($.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(st,{className:"w-8 h-8 animate-spin text-blue-600"})}):s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pipelines"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Activity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:q.map($=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>n(`/admin/users/${$.id}`),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:$.full_name||"N/A"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.email})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${z($.role)}`,children:$.role})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${$.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:$.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:$.pipeline_count||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:$.last_activity?new Date($.last_activity).toLocaleString():"Never"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 flex items-center justify-center",children:($.alert_count??0)>0&&s.jsx("div",{className:"p-2 text-amber-600 dark:text-amber-400",title:`${$.alert_count} alert preference${$.alert_count>1?"s":""} configured`,children:s.jsx(ys,{className:"w-4 h-4"})})}),s.jsx("button",{onClick:E=>{E.stopPropagation(),y($),g(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit user",children:s.jsx(ax,{className:"w-4 h-4"})}),s.jsx("button",{onClick:E=>{E.stopPropagation(),b($),v(!0)},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete user",children:s.jsx(mn,{className:"w-4 h-4"})})]})})]},$.id))})]})})}),u&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Create User"}),s.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:N.email,onChange:$=>_({...N,email:$.target.value}),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-Generated Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:N.password,readOnly:!0,className:"w-full px-4 py-2 pr-12 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-mono text-sm"}),s.jsx("button",{type:"button",onClick:T,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Copy password",children:k?s.jsx(Ql,{className:"w-4 h-4"}):s.jsx(wE,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"mt-1 text-xs text-amber-600 dark:text-amber-400",children:"Make sure to copy this password! It will be hashed and cannot be retrieved later."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:N.full_name,onChange:$=>_({...N,full_name:$.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),s.jsxs("select",{value:N.role,onChange:$=>_({...N,role:$.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"read_only",children:"Read Only"}),s.jsx("option",{value:"maintainer",children:"Maintainer"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Create User"})]})]})]})}),f&&p&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit User"}),s.jsx("button",{onClick:()=>{g(!1),y(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:p.email,disabled:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:p.full_name||"",onChange:$=>y({...p,full_name:$.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),s.jsxs("select",{value:p.role,onChange:$=>y({...p,role:$.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"read_only",children:"Read Only"}),s.jsx("option",{value:"maintainer",children:"Maintainer"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:p.is_active,onChange:$=>y({...p,is_active:$.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{g(!1),y(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Save Changes"})]})]})]})}),x&&w&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Delete User"}),s.jsx("button",{onClick:()=>{v(!1),b(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure you want to delete this user? This action cannot be undone."}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-400",children:w.full_name||"N/A"}),s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:w.email})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>{v(!1),b(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:F,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete User"})]})]})})]})}function jae({log:e,onClose:t}){var l;const r=c=>c==null?"null":typeof c=="object"?JSON.stringify(c,null,2):String(c),n=c=>({"database.hostname":"Database Host","database.port":"Database Port","database.user":"Database User","database.password":"Database Password","database.dbname":"Database Name","database.server.name":"Server Name","table.include.list":"Included Tables","table.exclude.list":"Excluded Tables","connection.url":"Connection URL","connection.user":"Connection User",topics:"Kafka Topics","tasks.max":"Max Tasks","key.converter":"Key Converter","value.converter":"Value Converter",transforms:"Transforms",predicates:"Predicates"})[c]||c.split(".").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "),a=((l=e.metadata)==null?void 0:l.changes)||{},i=Object.keys(a).length>0,o=Object.keys(a).length;return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Change Details"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[o," field",o!==1?"s":""," modified"]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(wi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:e.action_type}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:e.action_description}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:new Date(e.created_at).toLocaleString()})]})]})}),i&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent"}),s.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Modified Fields"}),s.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent"})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([c,d])=>s.jsxs("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:n(c)})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-4",children:c})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("div",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 rounded text-xs font-medium text-red-700 dark:text-red-400",children:"Old Value"})}),s.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsx("pre",{className:"text-sm text-red-800 dark:text-red-300 whitespace-pre-wrap break-all font-mono",children:r(d.old)})})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(is,{className:"w-5 h-5 text-gray-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("div",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 rounded text-xs font-medium text-green-700 dark:text-green-400",children:"New Value"})}),s.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:s.jsx("pre",{className:"text-sm text-green-800 dark:text-green-300 whitespace-pre-wrap break-all font-mono",children:r(d.new)})})]})]})})]},c))})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:s.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})})}function Nae(){var q;const{userId:e}=dg(),t=Dt(),{hasRole:r,user:n}=an(),{showToast:a}=Er(),[i,o]=m.useState(null),[l,c]=m.useState(null),[d,u]=m.useState([]),[h,f]=m.useState(!0),[g,p]=m.useState("all"),[y,x]=m.useState(null),[v,w]=m.useState(!1),[b,k]=m.useState({full_name:"",role:"read_only",change_email:!1,new_email:"",change_password:!1,new_password:""});m.useEffect(()=>{if(!r("admin")){t("/pipelines");return}e&&(j(),N(),_())},[e,r,t]);const j=async()=>{try{f(!0);const{data:z,error:W}=await ne.from("user_profiles").select("*").eq("id",e).maybeSingle();if(W)throw W;o(z)}catch(z){console.error("Error fetching user:",z),a("error","Failed to load user details")}finally{f(!1)}},N=async()=>{try{const{count:z}=await ne.from("pipelines").select("*",{count:"exact",head:!0}).eq("user_id",e),{count:W}=await ne.from("pipelines").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","running"),{count:$}=await ne.from("user_activity_logs").select("*",{count:"exact",head:!0}).eq("user_id",e),{data:E}=await ne.from("user_activity_logs").select("created_at").eq("user_id",e).eq("action_type","auth.login").order("created_at",{ascending:!1}).limit(1).maybeSingle();c({total_pipelines:z||0,active_pipelines:W||0,total_activities:$||0,last_login:(E==null?void 0:E.created_at)||null})}catch(z){console.error("Error fetching stats:",z)}},_=async()=>{try{f(!0);let z=ne.from("user_activity_logs").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(100);g!=="all"&&(z=z.ilike("action_type",`${g}%`));const{data:W,error:$}=await z;if($)throw $;u(W||[])}catch(z){console.error("Error fetching activities:",z),a("error","Failed to load activity logs")}finally{f(!1)}};m.useEffect(()=>{e&&_()},[g]);const O=async()=>{if(i)try{const z=!i.is_active,{error:W}=await ne.from("user_profiles").update({is_active:z}).eq("id",i.id);if(W)throw W;o({...i,is_active:z}),a("success",`User ${z?"activated":"deactivated"} successfully`)}catch(z){console.error("Error updating user status:",z),a("error",z.message||"Failed to update user status")}},T=async z=>{if(z.preventDefault(),!!i)try{const{data:W}=await ne.auth.getSession();if(!W.session)throw new Error("Not authenticated");const $={user_id:i.id,full_name:b.full_name,role:b.role};b.change_email&&b.new_email&&($.new_email=b.new_email),b.change_password&&b.new_password&&($.new_password=b.new_password);const E=await fetch("http://127.0.0.1:54321/functions/v1/admin-users",{method:"PUT",headers:{Authorization:`Bearer ${W.session.access_token}`,"Content-Type":"application/json"},body:JSON.stringify($)});if(!E.ok){const I=await E.json();throw new Error(I.error||"Failed to update user")}const U={...i,full_name:b.full_name,role:b.role,email:b.change_email?b.new_email:i.email};o(U),w(!1),a("success","User updated successfully")}catch(W){console.error("Error updating user:",W),a("error",W.message||"Failed to update user")}},P=()=>{i&&(k({full_name:i.full_name||"",role:i.role,change_email:!1,new_email:"",change_password:!1,new_password:""}),w(!0))},S=z=>z.startsWith("auth.")?s.jsx(Xl,{className:"w-4 h-4"}):z.startsWith("pipeline.")?s.jsx(kt,{className:"w-4 h-4"}):z.startsWith("user.")?s.jsx(sx,{className:"w-4 h-4"}):s.jsx(Lr,{className:"w-4 h-4"}),M=z=>z.includes("create")?"text-green-600 bg-green-50 dark:bg-green-900/30":z.includes("delete")?"text-red-600 bg-red-50 dark:bg-red-900/30":z.includes("update")?"text-blue-600 bg-blue-50 dark:bg-blue-900/30":z.includes("login")?"text-purple-600 bg-purple-50 dark:bg-purple-900/30":"text-gray-600 bg-gray-50 dark:bg-gray-900/30",F=z=>{switch(z){case"admin":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"maintainer":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"read_only":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}};return i?s.jsxs("div",{className:"h-screen flex flex-col p-8",children:[s.jsxs("div",{className:"mb-6 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t("/admin/users"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-4",children:[s.jsx(Ro,{className:"w-4 h-4"}),"Back to Users"]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:((q=i.full_name)==null?void 0:q.charAt(0))||i.email.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:i.full_name||"N/A"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:i.email}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${F(i.role)}`,children:i.role}),s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${i.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:i.is_active?"Active":"Inactive"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>setShowAddAlertModal(!0),className:"flex items-center gap-2 px-4 py-2 border border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[s.jsx(ys,{className:"w-4 h-4"}),"Add Alert"]}),s.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(wL,{className:"w-4 h-4"}),"Edit"]}),s.jsx("button",{onClick:O,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${i.is_active?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:i.is_active?s.jsxs(s.Fragment,{children:[s.jsx(pL,{className:"w-4 h-4"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"w-4 h-4"}),"Activate"]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 flex-shrink-0",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pipelines"}),s.jsx(kt,{className:"w-5 h-5 text-blue-600"})]}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:(l==null?void 0:l.total_pipelines)||0})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Pipelines"}),s.jsx(Lr,{className:"w-5 h-5 text-green-600"})]}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:(l==null?void 0:l.active_pipelines)||0})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Activities"}),s.jsx(Lr,{className:"w-5 h-5 text-purple-600"})]}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:(l==null?void 0:l.total_activities)||0})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Login"}),s.jsx(Fr,{className:"w-5 h-5 text-orange-600"})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:l!=null&&l.last_login?new Date(l.last_login).toLocaleDateString():"Never"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 mb-6 shadow-sm flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"User Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(EL,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),s.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:i.email})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sx,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full Name"}),s.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:i.full_name||"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xl,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Role"}),s.jsx("p",{className:"text-gray-900 dark:text-gray-100 capitalize",children:i.role})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(So,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),s.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:new Date(i.created_at).toLocaleDateString()})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm flex flex-col flex-1 min-h-0",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Activity History"}),s.jsxs("select",{value:g,onChange:z=>p(z.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"all",children:"All Activities"}),s.jsx("option",{value:"auth",children:"Authentication"}),s.jsx("option",{value:"pipeline",children:"Pipelines"}),s.jsx("option",{value:"user",children:"User Actions"})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:h?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(st,{className:"w-8 h-8 animate-spin text-blue-600"})}):d.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Lr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No activity logs found"})]}):s.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:d.map(z=>{var W,$;return s.jsxs("div",{className:`flex items-center gap-3 px-6 py-3 transition-colors ${z.action_type.includes("update")&&Object.keys(((W=z.metadata)==null?void 0:W.changes)||{}).length>0?"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,onClick:()=>{var E;z.action_type.includes("update")&&Object.keys(((E=z.metadata)==null?void 0:E.changes)||{}).length>0&&x(z)},children:[s.jsx("div",{className:`p-1.5 rounded-lg flex-shrink-0 ${M(z.action_type)}`,children:S(z.action_type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:z.action_type}),s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0",children:new Date(z.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:z.action_description})]}),z.action_type.includes("update")&&Object.keys((($=z.metadata)==null?void 0:$.changes)||{}).length>0&&s.jsx(nn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"})]},z.id)})})})]}),y&&s.jsx(jae,{log:y,onClose:()=>x(null)}),v&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit User"}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",required:!0,value:b.full_name,onChange:z=>k({...b,full_name:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),s.jsxs("select",{value:b.role,onChange:z=>k({...b,role:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"read_only",children:"Read Only"}),s.jsx("option",{value:"maintainer",children:"Maintainer"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.change_email,onChange:z=>k({...b,change_email:z.target.checked,new_email:""}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change Email"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.change_password,onChange:z=>k({...b,change_password:z.target.checked,new_password:""}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change Password"})]})]}),b.change_email&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Email"}),s.jsx("input",{type:"email",required:!0,value:b.new_email,onChange:z=>k({...b,new_email:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new email"})]}),b.change_password&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),s.jsx("input",{type:"password",required:!0,value:b.new_password,onChange:z=>k({...b,new_password:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",minLength:6}),s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Minimum 6 characters"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Save Changes"}),s.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"})]})]})]})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(st,{className:"w-8 h-8 animate-spin text-blue-600"})})}function Sae(){const{hasRole:e}=an(),{showToast:t}=Er(),[r,n]=m.useState([]),[a,i]=m.useState(!0),[o,l]=m.useState(""),[c,d]=m.useState("all"),[u,h]=m.useState("all"),[f,g]=m.useState(new Set),[p,y]=m.useState(null);m.useEffect(()=>{x();const T=ne.channel("user_activity_logs_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_activity_logs"},()=>{x()}).subscribe();return()=>{T.unsubscribe()}},[]);const x=async()=>{try{i(!0);let T=ne.from("user_activity_logs").select(`
          *,
          user_profiles!user_activity_logs_user_id_fkey (
            email,
            full_name
          )
        `).order("created_at",{ascending:!1}).limit(500);const{data:P,error:S}=await T;if(S)throw S;const M=(P||[]).map(F=>{var q,z;return{...F,user_email:((q=F.user_profiles)==null?void 0:q.email)||"Unknown",user_name:((z=F.user_profiles)==null?void 0:z.full_name)||"Unknown User"}});n(M)}catch(T){console.error("Error fetching logs:",T),t("error","Failed to load activity logs")}finally{i(!1)}},v=T=>T.includes("create")||T.includes("login")?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":T.includes("delete")||T.includes("logout")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":T.includes("update")?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",w=T=>T.includes("create")?"":T.includes("delete")?"":T.includes("update")?"":T.includes("login")?"":T.includes("logout")?"":"",b=()=>{const T=[["Timestamp","User","Action Type","Description","Resource Type","Resource ID"].join(","),...j.map(F=>[new Date(F.created_at).toISOString(),F.user_email,F.action_type,`"${F.action_description}"`,F.resource_type||"",F.resource_id||""].join(","))].join(`
`),P=new Blob([T],{type:"text/csv"}),S=window.URL.createObjectURL(P),M=document.createElement("a");M.href=S,M.download=`activity-logs-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(S),t("success","Logs exported successfully")},k=T=>{if(u==="all")return!0;const P=new Date(T.created_at),S=new Date;switch(u){case"today":return P.toDateString()===S.toDateString();case"week":const M=new Date(S.getTime()-7*24*60*60*1e3);return P>=M;case"month":const F=new Date(S.getTime()-30*24*60*60*1e3);return P>=F;default:return!0}},j=r.filter(T=>{var F;const P=T.action_description.toLowerCase().includes(o.toLowerCase())||T.action_type.toLowerCase().includes(o.toLowerCase())||((F=T.user_email)==null?void 0:F.toLowerCase().includes(o.toLowerCase())),S=c==="all"||T.action_type.startsWith(c),M=k(T);return P&&S&&M}),N=Array.from(new Set(r.map(T=>T.action_type.split(".")[0]))).sort(),_=(()=>{const P=[];for(const S of j){if(S.resource_type!=="pipeline"||!S.resource_id){P.push({mainLog:S,subLogs:[]});continue}const M=new Date(S.created_at).getTime();let F=!1;for(const q of P){if(q.mainLog.resource_id!==S.resource_id)continue;if(new Date(q.mainLog.created_at).getTime(),[q.mainLog,...q.subLogs].some($=>Math.abs(new Date($.created_at).getTime()-M)<3e5)){S.action_type==="pipeline.view"&&q.mainLog.action_type!=="pipeline.view"?(q.subLogs.push(q.mainLog),q.mainLog=S):q.subLogs.push(S),F=!0;break}}F||P.push({mainLog:S,subLogs:[]})}return P.forEach(S=>{S.subLogs.sort((M,F)=>new Date(F.created_at).getTime()-new Date(M.created_at).getTime())}),P})(),O=T=>{const P=new Set(f);P.has(T)?P.delete(T):P.add(T),g(P)};return s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Activity Logs"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("admin")?"View all system activity":"View your activity history"})]}),s.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[s.jsx(rg,{className:"w-5 h-5"}),"Export Logs"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search logs...",value:o,onChange:T=>l(T.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Rb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsxs("select",{value:c,onChange:T=>d(T.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 appearance-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Actions"}),N.map(T=>s.jsx("option",{value:T,children:T.charAt(0).toUpperCase()+T.slice(1)},T))]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(So,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsxs("select",{value:u,onChange:T=>h(T.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 appearance-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"Last 7 Days"}),s.jsx("option",{value:"month",children:"Last 30 Days"})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Lr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-400",children:["Showing ",j.length," of ",r.length," logs"]}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-500 mt-1",children:"Activity logs are retained for audit and compliance purposes"})]})]})})]}),a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(st,{className:"w-8 h-8 animate-spin text-blue-600"})}):j.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-12 text-center",children:[s.jsx(Lr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Activity Logs"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o||c!=="all"||u!=="all"?"No logs match your search criteria":"No activity logs have been recorded yet"})]}):s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map((T,P)=>{const{mainLog:S,subLogs:M}=T,F=`${S.id}-${P}`,q=f.has(F),z=M.length>0;return console.log("Rendering log row:",{id:S.id,action_type:S.action_type,has_metadata:S.metadata&&Object.keys(S.metadata).length>0,metadata_keys:S.metadata?Object.keys(S.metadata):[],should_show_badge:S.action_type.includes("update")&&Object.keys(S.metadata||{}).length>0}),s.jsxs("div",{children:[s.jsx("div",{className:`p-6 transition-colors ${S.action_type.includes("update")&&Object.keys(S.metadata||{}).length>0?"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,onClick:W=>{console.log(" LOG CARD CLICKED!",{action_type:S.action_type,has_metadata:!!S.metadata,metadata_keys:Object.keys(S.metadata||{}),metadata:S.metadata}),S.action_type.includes("update")&&Object.keys(S.metadata||{}).length>0?(console.log(" Opening modal for:",S.id),y(S)):console.log(" Not opening modal - conditions not met")},children:s.jsxs("div",{className:"flex items-start gap-4",children:[z&&s.jsx("button",{onClick:W=>{W.stopPropagation(),O(F)},className:"mt-1 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",children:q?s.jsx(ua,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):s.jsx(nn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),s.jsx("div",{className:"text-2xl",children:w(S.action_type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${v(S.action_type)}`,children:S.action_type}),z&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:["+",M.length," action",M.length>1?"s":""]}),S.resource_type&&s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.resource_type}),S.action_type.includes("update")&&Object.keys(S.metadata||{}).length>0&&s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:" Click for details"})]}),s.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:S.action_description})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(S.created_at).toLocaleString()})})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"User:"})," ",S.user_name||S.user_email]}),S.resource_id&&s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Resource ID:"})," ",S.resource_id.slice(0,8),"..."]})]}),Object.keys(S.metadata||{}).length>0&&s.jsxs("details",{className:"mt-3",onClick:W=>W.stopPropagation(),children:[s.jsx("summary",{className:"text-sm text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",children:"View raw metadata"}),s.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(S.metadata,null,2)})]})]})]})}),z&&q&&s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 border-l-4 border-blue-500",children:M.map(W=>s.jsx("div",{className:"p-6 pl-16 hover:bg-gray-100 dark:hover:bg-gray-800/50 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-0",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-xl",children:w(W.action_type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${v(W.action_type)}`,children:W.action_type})}),s.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:W.action_description})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(W.created_at).toLocaleString()})})]}),Object.keys(W.metadata||{}).length>0&&s.jsxs("details",{className:"mt-3",onClick:$=>$.stopPropagation(),children:[s.jsx("summary",{className:"text-sm text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",children:"View raw metadata"}),s.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(W.metadata,null,2)})]})]})]})},W.id))})]},F)})})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:T=>{T.target===T.currentTarget&&y(null)},children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Update Details"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:new Date(p.created_at).toLocaleString()})]}),s.jsx("button",{onClick:()=>y(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p.metadata&&s.jsxs("div",{className:"space-y-6",children:[p.metadata.pipeline_name&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Pipeline"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:p.metadata.pipeline_name})]}),p.metadata.connectors&&Array.isArray(p.metadata.connectors)&&s.jsx("div",{className:"space-y-4",children:p.metadata.connectors.map((T,P)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${T.type==="source"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:T.type==="source"?"Source":"Sink"}),s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:T.name})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:T.connector_class}),T.changes&&Array.isArray(T.changes)&&T.changes.length>0?s.jsxs("div",{className:"space-y-3",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Configuration Changes"}),T.changes.map((S,M)=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 space-y-2",children:[s.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-gray-100",children:S.field}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Old Value"}),s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-2 rounded border border-red-200 dark:border-red-800",children:s.jsx("code",{className:"text-xs break-all",children:JSON.stringify(S.old_value)})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"New Value"}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 p-2 rounded border border-green-200 dark:border-green-800",children:s.jsx("code",{className:"text-xs break-all",children:JSON.stringify(S.new_value)})})]})]})]},M))]}):s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(In,{className:"w-4 h-4"}),s.jsx("span",{children:"No configuration changes recorded"})]})]},P))})]})})]})})]})}function _ae(){const e=Dt(),{hasRole:t}=an();m.useEffect(()=>{t("admin")||e("/pipelines")},[t,e]);const r=[{title:"Alert Preferences",description:"Configure alert notifications for pipelines, webhooks, and data events",icon:ys,path:"/admin/alerts",color:"bg-blue-500",stats:"Manage notifications"},{title:"User Management",description:"Manage users, roles, and permissions across the platform",icon:ix,path:"/admin/users",color:"bg-green-500",stats:"Control access"}];return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Xl,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Admin Panel"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage system settings, users, and alert configurations"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(n=>{const a=n.icon;return s.jsx("button",{onClick:()=>e(n.path),className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-6 text-left border border-gray-200 dark:border-gray-700 group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`${n.color} p-3 rounded-lg text-white group-hover:scale-110 transition-transform`,children:s.jsx(a,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:n.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:n.description}),s.jsxs("div",{className:"inline-flex items-center text-sm font-medium text-blue-600 dark:text-blue-400",children:[n.stats,s.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},n.path)})})]})})}function Cae(){const{showToast:e}=Er(),{user:t}=an(),[r,n]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState(!0),[c,d]=m.useState(!1),[u,h]=m.useState(""),[f,g]=m.useState(""),[p,y]=m.useState(""),[x,v]=m.useState(new Set),[w,b]=m.useState(null),[k,j]=m.useState(!1),[N,_]=m.useState(!1),[O,T]=m.useState({isOpen:!1,webhookId:null,webhookName:""});m.useEffect(()=>{P()},[]);const P=async()=>{await Promise.all([S(),M()])},S=async()=>{try{const{data:I,error:X}=await ne.from("slack_integrations").select("*").order("created_at",{ascending:!1});if(X)throw X;const Z=await Promise.all((I||[]).map(async te=>{const{data:K,error:le}=await ne.from("pipeline_slack_channels").select("pipeline_id, pipelines(id, name, status)").eq("slack_webhook_id",te.id),me=le?[]:(K==null?void 0:K.map(ue=>ue.pipelines).filter(Boolean))||[];return{...te,pipeline_count:me.length,assigned_pipelines:me}}));n(Z)}catch(I){console.error("Failed to load Slack webhooks:",I),e("error","Failed to load Slack webhooks")}finally{l(!1)}},M=async()=>{try{const{data:I,error:X}=await ne.from("pipelines").select("id, name, status").order("name");if(X)throw X;i(I||[])}catch(I){console.error("Failed to load pipelines:",I)}},F=async()=>{if(!u.trim()||!f.trim()){e("error","Please fill in required fields");return}_(!0);try{const{data:I,error:X}=await ne.from("slack_integrations").insert({channel_name:u.trim(),webhook_url:f.trim(),description:p.trim()||null,user_id:t==null?void 0:t.id,workspace_name:"Default Workspace"}).select().single();if(X)throw X;if(x.size>0){const K=Array.from(x).map(me=>({pipeline_id:me,slack_webhook_id:I.id})),{error:le}=await ne.from("pipeline_slack_channels").insert(K);if(le)throw le}const Z=x.size,te=Z>0?`Slack webhook added and assigned to ${Z} pipeline${Z!==1?"s":""}`:"Slack webhook added successfully";e("success",te),d(!1),$(),S()}catch(I){console.error("Failed to add Slack webhook:",I),e("error","Failed to add Slack webhook")}finally{_(!1)}},q=(I,X)=>{T({isOpen:!0,webhookId:I,webhookName:X})},z=async()=>{if(O.webhookId)try{const{error:I}=await ne.from("slack_integrations").delete().eq("id",O.webhookId);if(I)throw I;e("success","Slack webhook deleted"),T({isOpen:!1,webhookId:null,webhookName:""}),S()}catch(I){console.error("Failed to delete Slack webhook:",I),e("error","Failed to delete Slack webhook")}},W=async I=>{b(I.id);try{const{data:X,error:Z}=await ne.from("pipeline_slack_channels").select(`
          pipeline_id,
          pipelines (
            id,
            name,
            status
          )
        `).eq("slack_webhook_id",I.id);Z&&console.error("Error fetching assigned pipelines:",Z);const te=(X==null?void 0:X.map(ue=>ue.pipelines).filter(Boolean))||[],K=te.length>0?E(te):{text:" CDCStream Pipeline Status Report",blocks:[{type:"header",text:{type:"plain_text",text:" Pipeline Status Report",emoji:!0}},{type:"section",text:{type:"mrkdwn",text:`*Webhook:* ${I.channel_name}
*Status:* No pipelines assigned to this webhook`}},{type:"context",elements:[{type:"mrkdwn",text:" Generated by CDCStream Monitoring System"}]}]},me=await(await fetch("http://localhost:5002/api/slack/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({webhookUrl:I.webhook_url,message:K})})).json();me.success?e("success","Test message sent successfully"):e("error",me.error||"Failed to send test message")}catch(X){console.error("Failed to test webhook:",X),e("error","Failed to send test message")}finally{b(null)}},$=()=>{h(""),g(""),y(""),v(new Set)},E=I=>{const X=me=>{switch(me){case"running":return"";case"ready":return"";case"paused":return"";case"error":return"";case"idle":return"";case"seeding":return"";case"incremental":return"";case"draft":return"";default:return""}},Z=I.filter(me=>me.status==="running").length;I.filter(me=>me.status==="paused").length;const te=I.filter(me=>me.status==="error").length;I.filter(me=>me.status==="ready").length;const K=[{type:"header",text:{type:"plain_text",text:" CDCStream Pipeline Status Report",emoji:!0}},{type:"section",fields:[{type:"mrkdwn",text:`*Total Pipelines*
${I.length}`},{type:"mrkdwn",text:`*Report Time*
${new Date().toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}`},{type:"mrkdwn",text:`*Running*
 ${Z}`},{type:"mrkdwn",text:`*Issues*
${te>0?"":""} ${te}`}]},{type:"divider"}],le=I.reduce((me,ue)=>{const A=ue.status||"unknown";return me[A]||(me[A]=[]),me[A].push(ue),me},{});return Object.entries(le).forEach(([me,ue])=>{K.push({type:"section",text:{type:"mrkdwn",text:`*${X(me)} ${me.toUpperCase()} (${ue.length})*
${ue.map(A=>` ${A.name}`).join(`
`)}`}})}),K.push({type:"divider"},{type:"context",elements:[{type:"mrkdwn",text:" *CDCStream* | Real-time Data Pipeline Monitoring"}]}),{text:`Pipeline Status Report: ${I.length} pipelines - ${Z} running, ${te} errors`,blocks:K,attachments:te>0?[{color:"#d32f2f",text:` ${te} pipeline${te!==1?"s":""} require${te===1?"s":""} attention`}]:[]}},U=async()=>{if(!f.trim()){e("error","Please enter a webhook URL");return}if(x.size===0){e("error","Please select at least one pipeline to test");return}j(!0);try{const I=a.filter(K=>x.has(K.id)),X=E(I),te=await(await fetch("http://localhost:5002/api/slack/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({webhookUrl:f.trim(),message:X})})).json();te.success?e("success",`Test message sent successfully for ${I.length} pipeline(s)`):e("error",te.error||"Failed to send test message")}catch(I){console.error("Failed to test webhook:",I),e("error","Failed to send test message")}finally{j(!1)}};return o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(st,{className:"w-8 h-8 animate-spin text-blue-600"})}):s.jsxs("div",{className:"flex-1 p-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 flex items-center gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Slack Integrations"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure Slack webhooks for alert notifications"})]}),s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(pi,{className:"w-4 h-4"}),"Add Webhook"]})]}),s.jsx("div",{className:"p-6",children:r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Oa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No Slack webhooks configured"}),s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(pi,{className:"w-4 h-4"}),"Add Your First Webhook"]})]}):s.jsx("div",{className:"space-y-4",children:r.map(I=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:I.channel_name}),I.pipeline_count!==void 0&&I.pipeline_count>0&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:[I.pipeline_count," pipeline",I.pipeline_count!==1?"s":""]})]}),I.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:I.description}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 font-mono bg-gray-50 dark:bg-gray-900 p-2 rounded",children:I.webhook_url}),I.assigned_pipelines&&I.assigned_pipelines.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Assigned to Pipelines:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:I.assigned_pipelines.map(X=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:X.name},X.id))})]}),s.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Added ",new Date(I.created_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>W(I),disabled:w===I.id,className:"inline-flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w===I.id?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(H1,{className:"w-4 h-4"}),"Test"]})}),s.jsxs("button",{onClick:()=>q(I.id,I.channel_name),className:"inline-flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Delete"]})]})]})},I.id))})})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:s.jsx(Oa,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Add Slack Webhook"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure a new Slack webhook for alerts"})]})]}),s.jsx("button",{onClick:()=>{d(!1),$()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:u,onChange:I=>h(I.target.value),placeholder:"e.g., Engineering Alerts",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Webhook URL ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"url",value:f,onChange:I=>g(I.target.value),placeholder:"https://hooks.slack.com/services/...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),s.jsx("textarea",{value:p,onChange:I=>y(I.target.value),placeholder:"e.g., Used for critical pipeline alerts",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign to Pipelines (Optional)"}),s.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 max-h-60 overflow-y-auto",children:a.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No pipelines available"}):s.jsx("div",{className:"p-3 space-y-2",children:a.map(I=>s.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",checked:x.has(I.id),onChange:X=>{const Z=new Set(x);X.target.checked?Z.add(I.id):Z.delete(I.id),v(Z)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 flex-1",children:I.name})]},I.id))})}),x.size>0&&s.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[x.size," pipeline",x.size!==1?"s":""," selected"]})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3",children:[s.jsx("button",{onClick:U,disabled:k||!f.trim()||x.size===0,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(H1,{className:"w-4 h-4"}),"Test"]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>{d(!1),$()},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:F,disabled:N||!u.trim()||!f.trim(),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ql,{className:"w-4 h-4"}),"Add Webhook"]})})]})]})]})}),O.isOpen&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:()=>T({isOpen:!1,webhookId:null,webhookName:""})}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full relative",children:[s.jsx("button",{onClick:()=>T({isOpen:!1,webhookId:null,webhookName:""}),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(at,{className:"w-5 h-5"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mn,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-3 text-center",children:"Delete Slack Integration?"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 text-center",children:["Are you sure you want to delete ",s.jsxs("span",{className:"font-semibold",children:['"',O.webhookName,'"']}),"?"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 text-center",children:"This action cannot be undone."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:()=>T({isOpen:!1,webhookId:null,webhookName:""}),className:"px-6 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold text-sm rounded-lg border-2 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all",children:"Cancel"}),s.jsx("button",{onClick:z,className:"px-6 py-2.5 bg-red-600 text-white font-semibold text-sm rounded-lg hover:bg-red-700 transition-all border-2 border-red-600 hover:border-red-700 shadow-md hover:shadow-lg",children:"Delete"})]})]})]})})]})]})}const Pae=[{key:"pipeline_connectivity",label:"Pipeline Connectivity",description:"Alerts when pipeline connection is lost or restored"},{key:"pipeline_job_failures",label:"Pipeline Job Failures",description:"Alerts when pipeline jobs fail"},{key:"source_event_types",label:"Source Event Types",description:"Alerts about different source event types"},{key:"failed_events_summary",label:"Failed Events Summary",description:"Summary of failed events"},{key:"webhooks",label:"Webhooks",description:"Webhook-related alerts"},{key:"pipeline_loading_status",label:"Pipeline Loading Status",description:"Alerts about pipeline loading progress"},{key:"source_side_events",label:"Source Side Events",description:"Alerts from source-side events"},{key:"data_spike_alert",label:"Data Spike Alert",description:"Alerts when unusual data spikes are detected"}],Eae=e=>({pipeline_id:e,pipeline_connectivity_slack:!1,pipeline_connectivity_dashboard:!1,pipeline_job_failures_slack:!1,pipeline_job_failures_dashboard:!1,source_event_types_slack:!1,source_event_types_dashboard:!1,failed_events_summary_slack:!1,failed_events_summary_dashboard:!1,webhooks_slack:!1,webhooks_dashboard:!1,pipeline_loading_status_slack:!1,pipeline_loading_status_dashboard:!1,source_side_events_slack:!1,source_side_events_dashboard:!1,data_spike_alert_slack:!1,data_spike_alert_dashboard:!1});function Oae(){const e=Dt(),{user:t}=an(),{showToast:r}=Er(),[n,a]=m.useState("preferences"),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[d,u]=m.useState([]),[h,f]=m.useState(""),[g,p]=m.useState(null),[y,x]=m.useState([]),[v,w]=m.useState({lag_ms:5e3,throughput_drop_percent:50,error_rate_percent:1,dlq_count:0,check_interval_ms:6e4,pause_duration_seconds:5});m.useEffect(()=>{b(),_()},[]),m.useEffect(()=>{h&&(k(),j())},[h]);const b=async()=>{try{const{data:S,error:M}=await ne.from("pipelines").select("id, name").order("name");if(M)throw M;u(S||[]),S&&S.length>0&&!h&&f(S[0].id)}catch(S){console.error("Failed to load pipelines:",S),r("error","Failed to load pipelines")}finally{o(!1)}},k=async()=>{if(h)try{const{data:S,error:M}=await ne.from("alert_preferences").select("*").eq("pipeline_id",h).maybeSingle();if(M)throw M;p(S||Eae(h))}catch(S){console.error("Failed to load preferences:",S),r("error","Failed to load alert preferences")}},j=async()=>{if(h)try{const{data:S,error:M}=await ne.from("pipeline_slack_channels").select(`
          id,
          slack_webhooks (
            id,
            name,
            description
          )
        `).eq("pipeline_id",h);if(M)throw M;const F=(S==null?void 0:S.map(q=>({id:q.slack_webhooks.id,name:q.slack_webhooks.name,description:q.slack_webhooks.description})))||[];x(F)}catch(S){console.error("Failed to load Slack channels:",S)}},N=(S,M)=>{if(!g)return;const F=`${S}_${M}`;p({...g,[F]:!g[F]})},_=async()=>{try{const M=await(await fetch("http://localhost:5002/api/monitoring/thresholds")).json();M.success&&w(M.thresholds)}catch(S){console.error("Failed to load thresholds:",S)}},O=async()=>{c(!0);try{const M=await(await fetch("http://localhost:5002/api/monitoring/thresholds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).json();if(!M.success)throw new Error(M.error);r("success","Monitoring thresholds updated successfully. Restart backend to apply changes.")}catch(S){console.error("Failed to save thresholds:",S),r("error","Failed to save thresholds",S.message)}finally{c(!1)}},T=async()=>{if(!(!g||!h)){c(!0);try{const S={...g,pipeline_id:h,created_by:t==null?void 0:t.id},{error:M}=await ne.from("alert_preferences").upsert(S,{onConflict:"pipeline_id"});if(M)throw M;r("success","Alert preferences saved successfully")}catch(S){console.error("Failed to save preferences:",S),r("error","Failed to save preferences",S.message)}finally{c(!1)}}},P=d.find(S=>S.id===h);return i?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx(st,{className:"w-8 h-8 animate-spin text-blue-600"})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>e("/admin"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ro,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[s.jsx(ys,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Alert Settings"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure alert preferences for your pipelines"})]})]})}),s.jsxs("div",{className:"flex gap-4 mt-6",children:[s.jsxs("button",{onClick:()=>a("preferences"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${n==="preferences"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(Yl,{className:"w-4 h-4 inline-block mr-2"}),"Alert Preferences"]}),s.jsxs("button",{onClick:()=>a("thresholds"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${n==="thresholds"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(NL,{className:"w-4 h-4 inline-block mr-2"}),"Monitoring Thresholds"]}),s.jsxs("button",{onClick:()=>a("slack"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${n==="slack"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(Oa,{className:"w-4 h-4 inline-block mr-2"}),"Slack Integrations"]})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n==="thresholds"?s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Proactive Monitoring Thresholds"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Configure global thresholds for automatic alert generation. These settings apply to all pipelines."}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Lag (milliseconds)"}),s.jsx("input",{type:"number",value:v.lag_ms,onChange:S=>w({...v,lag_ms:Number(S.target.value)}),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Alert when pipeline lag exceeds this value (default: 5000ms = 5 seconds)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Throughput Drop Threshold (%)"}),s.jsx("input",{type:"number",value:v.throughput_drop_percent,onChange:S=>w({...v,throughput_drop_percent:Number(S.target.value)}),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Alert when throughput drops by this percentage (default: 50%)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Error Rate (%)"}),s.jsx("input",{type:"number",value:v.error_rate_percent,onChange:S=>w({...v,error_rate_percent:Number(S.target.value)}),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Alert when error rate exceeds this percentage (default: 1%)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"DLQ Message Threshold"}),s.jsx("input",{type:"number",value:v.dlq_count,onChange:S=>w({...v,dlq_count:Number(S.target.value)}),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Alert when DLQ message count exceeds this value (default: 0 = any DLQ messages trigger alert)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Connector Pause Duration Threshold (seconds)"}),s.jsx("input",{type:"number",value:v.pause_duration_seconds,onChange:S=>w({...v,pause_duration_seconds:Number(S.target.value)}),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Alert when connector remains PAUSED for this duration (default: 5 seconds, max: 60 seconds)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monitoring Check Interval (milliseconds)"}),s.jsx("input",{type:"number",value:v.check_interval_ms,onChange:S=>w({...v,check_interval_ms:Number(S.target.value)}),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How often to check all pipelines (default: 60000ms = 60 seconds)"})]})]}),s.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[s.jsx("strong",{children:"Note:"})," After saving these settings, you must restart the backend service for changes to take effect."]})}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:O,disabled:l,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ql,{className:"w-4 h-4"}),"Save Thresholds"]})})})]})}):n==="preferences"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pipeline"}),s.jsx("select",{value:h,onChange:S=>f(S.target.value),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:d.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id))}),P&&y.length>0&&s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Assigned Slack Channels"}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:y.map(S=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 text-xs font-medium rounded-full border border-blue-200 dark:border-blue-700",children:["#",S.name]},S.id))}),s.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"Alerts will be sent to these channels when enabled below"})]})]})}),P&&y.length===0&&s.jsx("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["No Slack channels assigned to this pipeline. Slack alerts will not be sent.",s.jsx("button",{onClick:()=>e(`/pipelines/${h}`),className:"ml-2 text-amber-600 dark:text-amber-400 underline hover:no-underline",children:"Assign channels"})]})})]}),g&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:['Defined Alarms for "',P==null?void 0:P.name,'"']}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure alert types for this pipeline. Alarms will be sent to assigned Slack channels."})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Alert Type"}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[s.jsx(Oa,{className:"w-4 h-4 inline-block mr-1"}),"Slack"]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[s.jsx(NE,{className:"w-4 h-4 inline-block mr-1"}),"Dashboard"]})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Pae.map(S=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:S.label}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:S.description})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>N(S.key,"slack"),className:`inline-flex items-center justify-center w-12 h-6 rounded-full transition-colors ${g[`${S.key}_slack`]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("span",{className:`inline-block w-4 h-4 rounded-full bg-white transform transition-transform ${g[`${S.key}_slack`]?"translate-x-3":"-translate-x-3"}`})})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>N(S.key,"dashboard"),className:`inline-flex items-center justify-center w-12 h-6 rounded-full transition-colors ${g[`${S.key}_dashboard`]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("span",{className:`inline-block w-4 h-4 rounded-full bg-white transform transition-transform ${g[`${S.key}_dashboard`]?"translate-x-3":"-translate-x-3"}`})})})]},S.key))})]})}),s.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:s.jsx("button",{onClick:T,disabled:l,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?s.jsxs(s.Fragment,{children:[s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ql,{className:"w-4 h-4"}),"Save Settings"]})})})]})]}):s.jsx(Cae,{})})]})}function Tae({currentStep:e,steps:t,onStepClick:r}){return s.jsx("div",{className:"bg-white border-b border-gray-200 px-8 py-6",children:s.jsx("div",{className:"flex items-center justify-center gap-8",children:t.map((n,a)=>{const i=a+1,o=i<e,l=i===e;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{onClick:()=>r==null?void 0:r(i),className:`cursor-pointer w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${o?"bg-green-600 text-white":l?"bg-blue-600 text-white ring-4 ring-blue-200":"bg-gray-300 text-gray-600"}`,children:i}),s.jsx("div",{className:`text-sm font-medium ${l?"text-blue-600":"text-gray-600"}`,children:n}),a<t.length-1&&s.jsx("div",{className:`w-12 h-1 mx-4 ${o?"bg-green-600":"bg-gray-300"}`})]},a)})})})}const Wh=[{id:"oracle",name:"Oracle",logo:"/logos/oracle.svg",category:"Relational Databases",connector:"io.debezium.connector.oracle.OracleConnector",description:"Oracle Database"},{id:"postgres",name:"PostgreSQL",logo:"/logos/postgresql.svg",category:"Relational Databases",connector:"io.debezium.connector.postgresql.PostgresConnector",description:"PostgreSQL Database"},{id:"mysql",name:"MySQL",logo:"/logos/mysql.svg",category:"Relational Databases",connector:"io.debezium.connector.mysql.MySqlConnector",description:"MySQL Database"},{id:"mariadb",name:"MariaDB",logo:"/logos/mariadb.svg",category:"Relational Databases",connector:"io.debezium.connector.mysql.MySqlConnector",description:"MariaDB Database"},{id:"sqlserver",name:"SQL Server",logo:"/logos/sqlserver.svg",category:"Relational Databases",connector:"io.debezium.connector.sqlserver.SqlServerConnector",description:"Microsoft SQL Server"},{id:"db2",name:"IBM Db2",logo:"/logos/db2.svg",category:"Relational Databases",connector:"io.debezium.connector.db2.Db2Connector",description:"IBM Db2 Database"},{id:"snowflake",name:"Snowflake",logo:"/logos/snowflake.svg",category:"Cloud Data Warehouses",description:"Snowflake Data Warehouse"},{id:"bigquery",name:"BigQuery",logo:"/logos/bigquery.svg",category:"Cloud Data Warehouses",description:"Google BigQuery"},{id:"redshift",name:"Redshift",logo:"/logos/redshift.svg",category:"Cloud Data Warehouses",description:"Amazon Redshift"},{id:"azure-synapse",name:"Azure Synapse",logo:"/logos/azure.svg",category:"Cloud Data Warehouses",description:"Azure Synapse Analytics"},{id:"mongodb",name:"MongoDB",logo:"/logos/mongodb.svg",category:"NoSQL Databases",connector:"io.debezium.connector.mongodb.MongoDbConnector",description:"MongoDB Database"},{id:"cassandra",name:"Cassandra",logo:"/logos/cassandra.svg",category:"NoSQL Databases",description:"Apache Cassandra"},{id:"couchbase",name:"Couchbase",logo:"/logos/couchbase.svg",category:"NoSQL Databases",description:"Couchbase Server"},{id:"dynamodb",name:"DynamoDB",logo:"/logos/dynamodb.svg",category:"NoSQL Databases",description:"Amazon DynamoDB"},{id:"redis",name:"Redis",logo:"/logos/redis.svg",category:"Key-Value & Cache",description:"Redis Cache"},{id:"neo4j",name:"Neo4j",logo:"/logos/neo4j.svg",category:"Graph Databases",description:"Neo4j Graph Database"},{id:"elasticsearch",name:"Elasticsearch",logo:"/logos/elasticsearch.svg",category:"Search & Analytics",description:"Elasticsearch"},{id:"kafka",name:"Kafka",logo:"/logos/kafka.svg",category:"Event Streaming",description:"Apache Kafka"}];function Aae({onSelectSource:e,onBack:t}){const[r,n]=m.useState(""),[a,i]=m.useState(null),o=Array.from(new Set(Wh.map(d=>d.category))).sort(),l=Wh.filter(d=>{var f;const u=r===""||d.name.toLowerCase().includes(r.toLowerCase())||((f=d.description)==null?void 0:f.toLowerCase().includes(r.toLowerCase())),h=!a||d.category===a;return u&&h}),c=o.reduce((d,u)=>{const h=l.filter(f=>f.category===u);return h.length>0&&(d[u]=h),d},{});return s.jsxs("div",{className:"p-8",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium",children:[s.jsx(Ro,{className:"w-4 h-4"}),"Back"]}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select Source Type"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Select the Source you want to bring data from"}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx(ma,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search Source Types",value:r,onChange:d=>n(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[s.jsxs("button",{onClick:()=>i(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a===null?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All Sources (",Wh.length,")"]}),o.map(d=>{const u=Wh.filter(h=>h.category===d).length;return s.jsxs("button",{onClick:()=>i(d),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d," (",u,")"]},d)})]}),Object.keys(c).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ma,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sources found"}),s.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]}):s.jsx("div",{className:"space-y-8",children:Object.entries(c).map(([d,u])=>s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:d}),s.jsx("div",{className:"h-px flex-1 bg-gray-200"}),s.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[u.length," ",u.length===1?"source":"sources"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:u.map(h=>s.jsxs("button",{onClick:()=>e(h.id),className:"group flex flex-col items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:shadow-lg transition-all duration-200 relative",children:[h.connector&&s.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full",title:"Debezium connector available"}),s.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:s.jsx("img",{src:h.logo,alt:h.name,className:"w-full h-full object-contain transition-transform group-hover:scale-110",onError:f=>{const g=f.target;g.style.display="none";const p=g.parentElement;if(p){const y=document.createElement("div");y.className="text-blue-600",y.innerHTML='<svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"><path d="M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"></path><path d="M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"></path><path d="M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"></path></svg>',p.appendChild(y)}}})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:h.name}),h.description&&s.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:h.description})]})]},h.id))})]},d))})]})}function Dae({sourceType:e}){const t=Dt(),r=xr(),[n,a]=m.useState("change-tracking"),i=()=>{t("/pipelines/new/source")},o=()=>{t("/pipelines/new/pipeline-type",{state:{...r.state,pipelineMode:n}})},c=[{id:"change-tracking",title:"Change Tracking",badge:"Recommended",description:"Data is ingested using database's Change Tracking mode. To use this, you will need to enable Change Tracking on tables.",available:e==="sqlserver"},{id:"log-based",title:"Log-Based (CDC)",badge:"Recommended",description:"Data is ingested using database logs (Write-Ahead Logs for PostgreSQL). This captures all changes including inserts, updates, and deletes in real-time.",available:e==="postgres"||e==="oracle"},{id:"table",title:"Table",badge:"",description:"Data is ingested by running SQL queries on your tables. This mode provides change data capture through modified/updated timestamp columns. Deletes are not replicated to the Destination.",available:!0},{id:"custom-sql",title:"Custom SQL",badge:"",description:"Data is ingested by running a custom SQL query provided by you on the database. With this mode, you can replicate database views or selective data sets queried through the SQL query. Deletes are not replicated to the Destination.",available:!0}].filter(d=>d.available);return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-8",children:s.jsxs("div",{className:"w-full max-w-3xl",children:[s.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium",children:[s.jsx(Ro,{className:"w-4 h-4"}),"Back"]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("span",{className:"text-2xl",children:""}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Pipeline Mode"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Define how your source data will be captured and ingested."})]}),s.jsx("div",{className:"space-y-4 mb-8",children:c.map(d=>s.jsx("label",{className:`block p-6 bg-white dark:bg-gray-800 border-2 rounded-lg cursor-pointer transition-all ${n===d.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700 hover:border-blue-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"radio",name:"pipeline-mode",value:d.id,checked:n===d.id,onChange:u=>a(u.target.value),className:"mt-1 w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:d.title}),d.badge&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:d.badge})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.description})]})]})},d.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:o,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Continue"})})]})})}function Rae({sourceType:e}){const t=Dt(),r=xr(),n=r.state,a=(n==null?void 0:n.sourceType)||e||"your source",[i,o]=m.useState("edge"),l=()=>{t("/pipelines/new/pipeline-mode",{state:r.state})},c=()=>{t("/pipelines/new/source-config",{state:{...n,pipelineType:i}})};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-8",children:s.jsxs("div",{className:"w-full max-w-3xl",children:[s.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium",children:[s.jsx(Ro,{className:"w-4 h-4"}),"Back"]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("span",{className:"text-2xl",children:""}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Pipeline Type"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Choose the pipeline mode that best fits your performance and flexibility needs for ",a,"."]})]}),s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsx("label",{className:`block p-6 bg-white dark:bg-gray-800 border-2 rounded-lg cursor-pointer transition-all ${i==="edge"?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700 hover:border-blue-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"radio",name:"pipeline-type",value:"edge",checked:i==="edge",onChange:d=>o(d.target.value),className:"mt-1 w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Edge"}),s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:"Recommended"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New batch based engine offering higher throughput, control and observability with increased support for all new database versions and capabilities."})]})]})}),s.jsx("label",{className:`block p-6 bg-white dark:bg-gray-800 border-2 rounded-lg cursor-pointer transition-all ${i==="standard"?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700 hover:border-blue-300"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"radio",name:"pipeline-type",value:"standard",checked:i==="standard",onChange:d=>o(d.target.value),className:"mt-1 w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Standard"})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Legacy pipelines with moderate performance, use this only if you intend to use existing naming convention, structure or pre-load transformations."})]})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Continue"})})]})})}function nt({code:e,language:t="sql",title:r}){const[n,a]=m.useState(!1),i=async()=>{await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950 rounded-lg overflow-hidden border border-gray-700",children:[r&&s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 dark:bg-gray-900 border-b border-gray-700",children:[s.jsx("span",{className:"text-sm font-medium text-gray-300",children:r}),s.jsx("span",{className:"text-xs text-gray-500 uppercase",children:t})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:i,className:"absolute top-3 right-3 p-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Copy code",children:n?s.jsx(Ql,{className:"w-4 h-4 text-green-400"}):s.jsx(wE,{className:"w-4 h-4 text-gray-400"})}),s.jsx("pre",{className:"p-4 overflow-x-auto text-sm text-gray-100 font-mono",children:s.jsx("code",{children:e})})]})]})}function Mae({results:e,connectionName:t,isValidating:r=!1,currentStep:n="",onRetry:a}){const i=[{id:"hostname",label:"Validating hostname"},{id:"host",label:"Connecting to host"},{id:"database",label:"Connecting to database"},{id:"credentials",label:"Validating user credentials"},{id:"permissions",label:"Checking user permissions"},{id:"configurations",label:"Checking configurations"}],o=u=>{if(r){const f=i.findIndex(p=>p.id===n),g=i.findIndex(p=>p.id===u);return g<f?"success":g===f?"loading":"pending"}const h=e.find(f=>f.check_name.toLowerCase().includes(u));return h?h.status==="passed"?"success":"error":"pending"},l=u=>{const h=e.find(f=>f.check_name.toLowerCase().includes(u));return h&&h.status==="failed"?h.message:null},c=u=>{switch(u){case"success":return s.jsx(rx,{className:"w-5 h-5 text-green-600 dark:text-green-500"});case"error":return s.jsx(ls,{className:"w-5 h-5 text-red-600 dark:text-red-500"});case"loading":return s.jsx(st,{className:"w-5 h-5 text-blue-600 dark:text-blue-500 animate-spin"});case"pending":return s.jsx(rx,{className:"w-5 h-5 text-gray-300 dark:text-gray-600"})}},d=u=>{switch(u){case"success":return"text-gray-700 dark:text-gray-300";case"error":return"text-gray-900 dark:text-gray-100 font-semibold";case"loading":return"text-gray-900 dark:text-gray-100 font-semibold";case"pending":return"text-gray-400 dark:text-gray-500"}};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-blue-200 dark:border-blue-800 p-6",children:s.jsx("div",{className:"space-y-4",children:i.map((u,h)=>{const f=o(u.id),g=l(u.id);return s.jsx("div",{children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:c(f)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`text-base ${d(f)}`,children:u.label}),g&&f==="error"&&s.jsx("div",{className:"mt-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-red-900 dark:text-red-200",children:["FATAL: ",g," ",s.jsxs("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline inline-flex items-center gap-1",onClick:p=>p.preventDefault(),children:["Learn More ",s.jsx(nn,{className:"w-4 h-4"})]})]})})]})]})},u.id)})})}),!r&&e.length>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.filter(u=>u.status==="passed").length," of ",i.length," checks passed"]}),e.some(u=>u.status==="failed")&&a&&s.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",onClick:a,children:"Retry Connection"})]})]})}function Lae(){const[e,t]=m.useState(!1),[r,n]=m.useState(null);return{testConnection:async i=>{t(!0),n(null);try{const o="http://127.0.0.1:54321",l="sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH",c="http://127.0.0.1:5001",d=i.connectionType==="oracle";let u;if(d){const f={...i,serviceName:i.serviceName||i.database};u=await fetch(`${c}/api/test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})}else u=await fetch(`${o}/functions/v1/test-connection`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(i)});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const h=await u.json();return n(h),h}catch(o){const l={success:!1,error:o instanceof Error?o.message:"Unknown error occurred"};return n(l),l}finally{t(!1)}},testing:e,result:r}}function Om(e){const t=(e??"source").trim();return t.toLowerCase().endsWith("_source")?t:`${t}_source`}function I2(e,t){return e==="oracle-xe"?{host:"127.0.0.1",port:1521}:{host:e,port:t}}function $ae({sourceType:e}){const t=Dt(),r=xr(),{showToast:n}=Er(),{testConnection:a,testing:i,result:o}=Lae(),[l,c]=m.useState([]),[d,u]=m.useState(!1),[h,f]=m.useState(""),[g,p]=m.useState(!1),[y,x]=m.useState(!1),[v,w]=m.useState(!1),[b,k]=m.useState(!1),[j,N]=m.useState([]),[_,O]=m.useState(""),[T,P]=m.useState(!1),[S,M]=m.useState({name:"",host:"",port:e==="oracle"?1521:e==="postgres"?5432:1433,database_name:"",service_name:"",schema_name:e==="sqlserver"?"dbo":"public",username:"",password:"",ssh_tunnel:!1,use_ssl:!1,poll_interval:500,query_fetch_size:1e4,long_transaction_window:5,load_all_schemas:!1,online_catalog:!1,archive_log_only:!1,load_historical_data:!1,merge_tables:!1,include_new_tables:!1,drop_slot_on_stop:!0});function F(U){return U==="postgres"?"postgresql":U==="sqlserver"?"sqlserver":U}m.useEffect(()=>{const U=async()=>{const{data:X}=await ne.from("pipelines").select("id, name, source_type, source_config").eq("source_type",e).order("created_at",{ascending:!1});X&&N(X)},I=async()=>{const Z=new URLSearchParams(r.search).get("resume");if(Z){const{data:te}=await ne.from("pipelines").select("id, name, source_type, source_config").eq("id",Z).maybeSingle();if(te&&te.source_config){const K=te.source_config;M({name:te.name,host:K.host||"",port:K.port||(e==="oracle"?1521:e==="postgres"?5432:1433),database_name:K.database_name||"",service_name:K.service_name||"",schema_name:K.schema_name||(e==="sqlserver"?"dbo":"public"),username:K.username||"",password:"",ssh_tunnel:K.ssh_tunnel||!1,use_ssl:K.use_ssl||!1,poll_interval:K.poll_interval||500,query_fetch_size:K.query_fetch_size||1e4,long_transaction_window:K.long_transaction_window||5,load_all_schemas:K.load_all_schemas||!1,online_catalog:K.online_catalog||!1,archive_log_only:K.archive_log_only||!1,load_historical_data:K.load_historical_data||!1,merge_tables:K.merge_tables||!1,include_new_tables:K.include_new_tables||!1})}}};U(),I()},[e,r.search]);const q=U=>{const I=U.target.value;if(O(I),!I)return;const X=j.find(Z=>Z.id===I);if(X&&X.source_config){const Z=X.source_config;M({name:`${X.name} (Copy)`,host:Z.host||"",port:Z.port||(e==="oracle"?1521:e==="postgres"?5432:1433),database_name:Z.database_name||"",service_name:Z.service_name||"",schema_name:Z.schema_name||(e==="sqlserver"?"dbo":"public"),username:Z.username||"",password:"",ssh_tunnel:Z.ssh_tunnel||!1,use_ssl:Z.use_ssl||!1,poll_interval:Z.poll_interval||500,query_fetch_size:Z.query_fetch_size||1e4,long_transaction_window:Z.long_transaction_window||5,load_all_schemas:Z.load_all_schemas||!1,online_catalog:Z.online_catalog||!1,archive_log_only:Z.archive_log_only||!1,load_historical_data:Z.load_historical_data||!1,merge_tables:Z.merge_tables||!1,include_new_tables:Z.include_new_tables||!1})}},z=U=>{const{name:I,value:X,type:Z}=U.target,te=U.target.checked;M(K=>({...K,[I]:Z==="checkbox"?te:["port","poll_interval","query_fetch_size","long_transaction_window"].includes(I)?parseInt(X)||0:X}))},W=async()=>{var te,K,le,me;if(!S.host.trim()){n("error","Host is required");return}if(!S.username.trim()){n("error","Username is required");return}if(!S.password.trim()){n("error","Password is required");return}if(e==="oracle"&&!S.service_name.trim()&&!S.database_name.trim()){n("error","Oracle kaynaklar iin Service Name ya da Database Name gerekli");return}u(!0),c([]);const U=["hostname","host","database","credentials","permissions","configurations"],I=[];for(const ue of U)f(ue),await new Promise(A=>setTimeout(A,500));const X={connectionType:F(e),host:S.host,port:S.port,username:S.username,password:S.password,ssl:S.use_ssl};if(e==="oracle"){const ue=I2(S.host,S.port);X.host=ue.host,X.port=ue.port,X.serviceName=S.service_name}else X.database=S.database_name;const Z=await a(X);if(Z.success)U.forEach(ue=>{I.push({check_name:ue.charAt(0).toUpperCase()+ue.slice(1),status:"passed",message:`${ue.charAt(0).toUpperCase()+ue.slice(1)} validation passed`,details:{}})}),n("success","Connection successful!",Z.message);else{const ue=(te=Z.error)!=null&&te.toLowerCase().includes("database")?"database":(K=Z.error)!=null&&K.toLowerCase().includes("password")||(le=Z.error)!=null&&le.toLowerCase().includes("credential")?"credentials":(me=Z.error)!=null&&me.toLowerCase().includes("permission")?"permissions":"host";U.forEach(A=>{U.indexOf(A)<U.indexOf(ue)?I.push({check_name:A.charAt(0).toUpperCase()+A.slice(1),status:"passed",message:`${A.charAt(0).toUpperCase()+A.slice(1)} validation passed`,details:{}}):A===ue?I.push({check_name:A.charAt(0).toUpperCase()+A.slice(1),status:"failed",message:Z.error||"Validation failed",details:{}}):I.push({check_name:A.charAt(0).toUpperCase()+A.slice(1),status:"passed",message:"",details:{}})}),n("error","Connection failed",Z.error)}c(I),u(!1),f("")},$=async U=>{if(U.preventDefault(),!S.name.trim()){n("error","Pipeline name is required");return}if(!S.host.trim()){n("error","Host is required");return}if(!S.username.trim()){n("error","Username is required");return}if(!S.password.trim()){n("error","Password is required");return}if(e==="oracle"&&!S.service_name.trim()&&!S.database_name.trim()){n("error","Oracle kaynaklar iin Service Name ya da Database Name gerekli");return}x(!0);try{const{data:{user:I}}=await ne.auth.getUser(),X={user_id:(I==null?void 0:I.id)||"00000000-0000-0000-0000-000000000000",name:S.name,source_type:e,source_config:{host:S.host,port:S.port,database_name:S.database_name,username:S.username,ssl:S.use_ssl},status:"draft"},{data:Z,error:te}=await ne.from("pipelines").insert(X).select().maybeSingle();if(te){n("error","Failed to create pipeline",te.message);return}if(!Z){n("error","Failed to create pipeline");return}const K=Iae(e,S),le=Om(S.name);console.log("Creating connector version with config:",{name:le,kind:"source",connectorClass:K.connector_class,config:K.config});const me=await gg({name:le,kind:"source",connectorClass:K.connector_class,config:K.config,ownerId:I==null?void 0:I.id,createdBy:I==null?void 0:I.id});await ju(le,me.version.version);const ue={pipeline_id:Z.id,name:le,type:"source",connector_class:K.connector_class,config:{registry_connector:le,registry_version:me.version.version,checksum:me.version.checksum,connector_class:K.connector_class,snapshot_config:K.config},status:"running",tasks_max:1,last_deployed_version:me.version.version},{error:A}=await ne.from("pipeline_connectors").insert(ue);if(A){n("error","Failed to create source connector",A.message);return}n("success","Source configuration saved");const D={connectionType:F(e),host:S.host,port:S.port,username:S.username,password:S.password,ssl:S.use_ssl};if(e==="oracle"){const ae=I2(S.host,S.port);D.host=ae.host,D.port=ae.port,D.serviceName=S.service_name}else D.database=S.database_name,D.schemaName=S.schema_name;const G={...r.state,pipelineId:Z.id,sourceType:e,sourceConnection:D};t("/pipelines/new/objects",{state:G})}catch(I){n("error","An error occurred","Please try again"),console.error(I)}finally{x(!1)}},E=()=>({oracle:"Oracle",postgres:"PostgreSQL",sqlserver:"SQL Server"})[e]||e;return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[s.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Configure your ",E()," Source"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Follow the guide on the right to set up your Source"}),s.jsxs("form",{onSubmit:$,className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy from"}),s.jsxs("select",{value:_,onChange:q,className:"px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm text-gray-900 dark:text-gray-100",children:[s.jsx("option",{value:"",children:"Existing Sources"}),j.map(U=>s.jsx("option",{value:U.id,children:U.name},U.id))]})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Draft saved"})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3 flex items-start gap-3 border-l-4 border-l-blue-500",children:[s.jsx(wi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsx("div",{className:"flex-1",children:s.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["There are ",s.jsx("strong",{children:"Prerequisites"})," that you must ensure to set up this Source for your Pipeline."," ",s.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Learn more "})]})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Pipeline Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:S.name,onChange:z,required:!0,placeholder:`${E()} Pipeline`,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"A unique name for your Pipeline"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Host ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"host",value:S.host,onChange:z,required:!0,placeholder:"10.123.1.001 or db.example.com",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Port ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"port",value:S.port,onChange:z,required:!0,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database User ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"username",value:S.username,onChange:z,required:!0,placeholder:"dbuser",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:g?"text":"password",name:"password",value:S.password,onChange:z,required:!0,placeholder:"Enter database password",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-10 text-gray-900 dark:text-gray-100"}),s.jsx("button",{type:"button",onClick:()=>p(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:g?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]})]}),e==="oracle"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Service Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"service_name",value:S.service_name,onChange:z,required:!0,placeholder:"ORCLPDB1",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),e!=="oracle"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"database_name",value:S.database_name,onChange:z,required:!0,placeholder:"mydb",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name of the database you want to ingest data from"})]}),(e==="postgres"||e==="sqlserver")&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Schema Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"schema_name",value:S.schema_name,onChange:z,required:!0,placeholder:e==="sqlserver"?"dbo":"public",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name of the schema you want to ingest data from"})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded p-3",children:s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Please open access to the ",e==="postgres"?"PostgreSQL":e==="oracle"?"Oracle":"database"," port from DataMove's IP addresses"," ",s.jsx("span",{className:"font-mono text-red-600 dark:text-red-400 font-semibold",children:"13.228.214.171"})," and"," ",s.jsx("span",{className:"font-mono text-red-600 dark:text-red-400 font-semibold",children:e==="postgres"?"52.77.50.136":"52.77.56.136"})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-1",children:[s.jsx("input",{type:"checkbox",name:"ssh_tunnel",checked:S.ssh_tunnel,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Connect Through SSH"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Connect securely through an SSH tunnel if your database is not publicly accessible."})]})]}),e==="postgres"&&s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-1",children:[s.jsx("input",{type:"checkbox",name:"use_ssl",checked:S.use_ssl,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Use SSL"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Connect over an SSL-encrypted connection"})]})]})]}),(e==="postgres"||e==="sqlserver")&&s.jsxs("div",{className:"rounded",children:[s.jsxs("button",{type:"button",onClick:()=>k(!b),className:"w-full px-0 py-3 flex items-center gap-2 text-left",children:[s.jsx(ua,{className:`w-4 h-4 transition-transform ${b?"rotate-180":""}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Advanced Settings"})]}),b&&s.jsxs("div",{className:"pl-6 space-y-3 mt-2",children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"load_historical_data",checked:S.load_historical_data,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Load Historical Data"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e==="sqlserver"?"Applicable for Pipelines created with Change Tracking or Table mode. If this option is enabled, the entire table data is fetched during the first run of the Pipeline. If disabled, DataMove loads only the records written to your database after the Pipeline was created.":"If this option is enabled, the entire table data is fetched during the first run of the Pipeline. If disabled, DataMove loads only the records written to your database after the Pipeline was created."})]})]}),e==="postgres"&&s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"merge_tables",checked:S.merge_tables,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Merge Tables"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove merges tables having the same name from different schemas while loading data to the Destination."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"drop_slot_on_stop",checked:S.drop_slot_on_stop,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Drop Replication Slot on Stop"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, PostgreSQL replication slot will be dropped when the connector stops or is deleted. This ensures clean restore operations."})]})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"include_new_tables",checked:S.include_new_tables,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Include New Tables in the Pipeline"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e==="sqlserver"?"Applicable for all ingestion modes except Custom SQL. If enabled, DataMove automatically ingests from any tables created or restored after the Pipeline is created.":"If enabled, DataMove automatically ingests data from tables created in the Source after the Pipeline has been built. These may include completely new tables or previously deleted tables that have been re-created in the Source."})]})]})]})]}),e==="oracle"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded",children:[s.jsxs("button",{type:"button",onClick:()=>w(!v),className:"w-full px-0 py-3 flex items-center gap-2 text-left",children:[s.jsx(ua,{className:`w-4 h-4 transition-transform ${v?"rotate-180":""}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Redo Log Advanced Settings"})]}),v&&s.jsxs("div",{className:"pl-6 space-y-4 mt-2",children:[s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(bn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-yellow-900 dark:text-yellow-100 mb-3",children:"Improper configurations of the redo log settings may impact your database performance. We recommend that you contact Support before making any changes."}),s.jsx("button",{type:"button",className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"CONTACT SUPPORT"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Poll Interval (in ms) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"poll_interval",value:S.poll_interval,onChange:z,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The delay (in milliseconds) between checks for new transactions in redo logs. Applicable only if pipeline is in streaming mode."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Query Fetch Size ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"query_fetch_size",value:S.query_fetch_size,onChange:z,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The maximum number of rows that DataMove must fetch from the logs in each cycle."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Long Transaction Window (in mins) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"long_transaction_window",value:S.long_transaction_window,onChange:z,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The duration for which DataMove must traverse back from the latest transaction to fetch the data from a long-running transaction."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"load_all_schemas",checked:S.load_all_schemas,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Load All Schemas"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove loads data from all the schemas defined on the selected host."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"online_catalog",checked:S.online_catalog,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Online Catalog"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove retrieves the latest schema information on tables and columns from the specified Oracle database."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"archive_log_only",checked:S.archive_log_only,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Archive Log Only"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove ingests data only from archived logs."})]})]})]})]})]}),s.jsxs("div",{className:"rounded",children:[s.jsxs("button",{type:"button",onClick:()=>k(!b),className:"w-full px-0 py-3 flex items-center gap-2 text-left",children:[s.jsx(ua,{className:`w-4 h-4 transition-transform ${b?"rotate-180":""}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Advanced Settings"})]}),b&&s.jsxs("div",{className:"pl-6 space-y-3 mt-2",children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"load_historical_data",checked:S.load_historical_data,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Load Historical Data"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If disabled, DataMove loads only the data that is written to your database after the time of creation of the Pipeline."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"merge_tables",checked:S.merge_tables,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Merge Tables"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove merges tables having the same name from different schemas while loading data to the Destination."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[s.jsx("input",{type:"checkbox",name:"include_new_tables",checked:S.include_new_tables,onChange:z,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Include New Tables in the Pipeline"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove automatically ingests from any tables created or restored after the Pipeline is created."})]})]})]})]})]}),s.jsx("div",{className:"space-y-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:()=>{P(!0),W()},disabled:i||!S.host||!S.username||!S.password,className:"px-6 py-3 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:"Test Connection"}),s.jsxs("button",{type:"submit",disabled:y,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[y&&s.jsx(st,{className:"w-4 h-4 animate-spin"}),y?"Saving...":"Continue"]})]})})]})]}),s.jsxs("div",{className:"w-[600px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Prerequisites"}),e==="sqlserver"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"mt-0.5",children:""}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The SQL Server is running."})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"mt-0.5",children:""}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SQL Server version is 12 or higher."})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"mt-0.5",children:""}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"TCP/IP Protocol is enabled with TCP port as 1433."})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"mt-0.5",children:""}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"VIEW CHANGE TRACKING"})," and ",s.jsx("strong",{children:"ALTER DATABASE"})," privileges are granted to the database user, if Pipeline Mode is Change Tracking or Table, and Query mode is Change Tracking."]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"mt-0.5",children:""}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"SELECT"})," privileges are granted to the database user."]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-4",children:s.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Note:"})," We recommend that you create a database user for configuring your SQL Server Source in DataMove. However, if you already have one, refer to section Grant privileges to the user."]})})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 1: Enable TCP/IP Protocol"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"You need to configure the SQL Server instance with TCP port value 1433 to enable DataMove to connect to your MS SQL Server."}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Enable the TCP/IP port"}),s.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 mb-4 ml-4",children:[s.jsx("li",{children:" Open the SQL Server Configuration Manager."}),s.jsx("li",{children:" In the left navigation pane under SQL Server Network Configuration, click Protocols for <MS SQL Server Instance Name>. The default instance name is MSSQLSERVER."}),s.jsx("li",{children:" In the right pane, right click the TCP/IP Protocol Name, and select Enable (if not enabled already) in the Status field."}),s.jsx("li",{children:" Click OK to acknowledge the dialogue box that warns you to restart the services for the changes to take effect."})]}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"2. Verify the TCP/IP port"}),s.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 mb-4 ml-4",children:[s.jsx("li",{children:" Right-click the TCP/IP Protocol Name, and select Properties."}),s.jsx("li",{children:" In the TCP/IP Properties window, click the IP Addresses tab."}),s.jsx("li",{children:" In the IPAII section, ensure the TCP Port value is 1433, which is the default port for MS SQL Server."}),s.jsx("li",{children:" Click OK to acknowledge the dialogue box that warns you to restart the services for the changes to take effect."}),s.jsx("li",{children:" Click OK, and exit the TCP/IP Properties window."})]}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"3. Restart the MS SQL Server instance"}),s.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 ml-4",children:[s.jsx("li",{children:" In the left navigation pane, click SQL Server Services."}),s.jsx("li",{children:" In the right pane, right-click your <MS SQL Server Instance Name>, and select Restart."})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 2: Enable Change Tracking"}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mb-3",children:s.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[s.jsx("strong",{children:"Note:"})," This step is valid only for Pipelines with Change Tracking as their ingestion mode."]})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"The Change Tracking mechanism captures the database changes. To enable or disable change tracking, the database user must have the ALTER DATABASE privilege."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Enable change tracking at the database level:"}),s.jsx(nt,{code:`ALTER DATABASE <database_name> SET CHANGE_TRACKING = ON
(CHANGE_RETENTION = 3 DAYS, AUTO_CLEANUP = ON)`,title:"Enable Database-Level Change Tracking"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 mb-4",children:"The CHANGE_RETENTION value specifies the duration for which change tracking information is retained. DataMove recommends that you set the CHANGE_RETENTION value to 3 DAYS."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Enable change tracking at the table level:"}),s.jsx(nt,{code:"ALTER TABLE <schema_name>.<table> ENABLE CHANGE_TRACKING",title:"Enable Table-Level Change Tracking"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Repeat this step for each table you want to replicate using Change Tracking."}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-4",children:s.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Note:"})," DataMove does not support Change Data Capture (CDC) for SQL Server."]})})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 3: Create a Database User and Grant Privileges"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Create a database user (Optional)"}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-3",children:s.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Note:"})," Skip this step if you are using an existing database user."]})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to your SQL Server database as an admin user with an SQL client tool, such as sqlcmd:"}),s.jsx(nt,{code:`USE <database>;

CREATE LOGIN <username> WITH PASSWORD = '<password>';
CREATE USER <username> FOR LOGIN <username>;`,title:"Create Database User"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"2. Grant privileges to the user"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["The database user must have the following privileges: ",s.jsx("strong",{children:"SELECT"}),", ",s.jsx("strong",{children:"VIEW CHANGE TRACKING"})," (if ingestion mode is Change Tracking)."]}),s.jsx(nt,{code:"GRANT SELECT ON DATABASE::<database> TO <username>;",title:"Grant SELECT at Database Level"}),s.jsx(nt,{code:"GRANT SELECT ON SCHEMA::<schema_name> TO <username>;",title:"Grant SELECT at Schema Level"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 mt-4",children:"If the ingestion mode is Change Tracking, grant the VIEW CHANGE TRACKING privilege at the schema or table level:"}),s.jsx(nt,{code:"GRANT VIEW CHANGE TRACKING ON SCHEMA::<schema_name> TO <username>;",title:"Grant VIEW CHANGE TRACKING (Schema Level)"}),s.jsx(nt,{code:"GRANT VIEW CHANGE TRACKING ON OBJECT::<schema_name>.<table_name> TO <username>;",title:"Grant VIEW CHANGE TRACKING (Table Level)"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Replace placeholder values (e.g., <username> with hevo)"})]})]}),e==="oracle"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Oracle database version is 11 or above. You can retrieve the version with:"}),s.jsx(nt,{code:"SELECT BANNER_FULL FROM V$VERSION WHERE BANNER_FULL LIKE 'Oracle Database%';",title:"Check Oracle Version"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"SELECT permissions are granted to the database user."}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Note:"})," Redo Log-based replication is enabled when the ingestion mode is RedoLog and the database user has SYSDBA privileges."]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 1: Create Database User and Grant Privileges"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect as DBA using SQL Developer or any other SQL client tool and create a user with necessary permissions:"}),s.jsx(nt,{code:`-- Create a Database User
CREATE USER <username> IDENTIFIED BY <password>;

-- Grant Privileges to the Database User
GRANT SELECT ANY DICTIONARY to <username>;
GRANT CREATE SESSION, ALTER SESSION TO <username>;
GRANT SELECT ON ALL_VIEWS TO <username>;
GRANT SELECT ON <schema_name>.<table_name> TO <username>;

-- Grant Privileges on Metadata tables
GRANT SELECT ON DATABASE_PROPERTIES TO <username>;
GRANT SELECT ON ALL_OBJECTS TO <username>;
GRANT SELECT ON ALL_TABLES TO <username>;
GRANT SELECT ON ALL_TAB_COLUMNS TO <username>;
GRANT SELECT ON ALL_CONSTRAINTS TO <username>;
GRANT SELECT ON ALL_CONS_COLUMNS TO <username>;

-- Grant Permission to run LogMiner
GRANT LOGMINING TO <username>;
GRANT SELECT ON SYS.V_$DATABASE TO <username>;
GRANT SELECT ON SYS.V_$LOG TO <username>;
GRANT SELECT ON SYS.V_$LOGFILE TO <username>;
GRANT SELECT ON SYS.V_$ARCHIVED_LOG TO <username>;
GRANT SELECT ON SYS.V_$LOGMNR_CONTENTS TO <username>;
GRANT SELECT ON SYS.V_$ARCHIVE_DEST_STATUS TO <username>;
GRANT EXECUTE ON SYS.DBMS_LOGMNR TO <username>;
GRANT EXECUTE ON SYS.DBMS_LOGMNR_D TO <username>;`,title:"Create User & Grant Privileges"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Replace placeholder values (e.g., <username> with hevo)"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 2: Set up Redo Logs for Replication"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Enable Archive Log"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Check if archive log is enabled:"}),s.jsx(nt,{code:"SELECT LOG_MODE FROM V$DATABASE;",title:"Check Archive Log Mode"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-2",children:"Returns ARCHIVELOG (enabled) or NOARCHIVELOG (disabled). If disabled, enable it:"}),s.jsx(nt,{code:`SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE ARCHIVELOG;
ALTER DATABASE OPEN;`,title:"Enable Archive Log"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"2. Configure Retention Policy"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to RMAN and check retention policy:"}),s.jsx(nt,{code:`RMAN
CONNECT TARGET <database_username>;

SELECT VALUE FROM V$RMAN_CONFIGURATION WHERE NAME = 'RETENTION POLICY';`,title:"Check Retention Policy"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-3",children:"If less than 3 days, configure to at least 3 days (72 hours):"}),s.jsx(nt,{code:"CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 3 DAYS;",title:"Set Retention Policy"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"3. Enable Supplemental Logging"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Check if supplemental logging is enabled:"}),s.jsx(nt,{code:'SELECT SUPPLEMENTAL_LOG_DATA_MIN FROM "V$DATABASE";',title:"Check Supplemental Logging"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-2",children:"Returns YES (enabled) or NO (disabled). If NO, enable at database level:"}),s.jsx(nt,{code:"ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;",title:"Enable Supplemental Logging"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4 mb-2",children:"For table-level logging, check status:"}),s.jsx(nt,{code:`SELECT COUNT(*) FROM ALL_LOG_GROUPS
    WHERE LOG_GROUP_TYPE='ALL COLUMN LOGGING'
    AND OWNER= '<group_name>'
    AND TABLE_NAME='<table_name>';`,title:"Check Table-Level Logging"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-2",children:"If result is zero, enable for specific table:"}),s.jsx(nt,{code:"ALTER TABLE <SCHEMA_NAME>.<TABLE_NAME> ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;",title:"Enable Table-Level Logging"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"4. Check PGA/SGA Memory Settings"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Check PGA memory initialization parameters:"}),s.jsx(nt,{code:`SELECT NAME, VALUE/1024/1024 as VALUE_MB
    FROM V$PARAMETER
    WHERE NAME IN ('pga_aggregate_limit', 'pga_aggregate_target');`,title:"Check PGA Settings"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-3",children:"Monitor current PGA memory usage:"}),s.jsx(nt,{code:`SELECT NAME, VALUE, UNIT
    FROM V$PGASTAT
    WHERE NAME IN ('total PGA inuse','total PGA allocated');`,title:"Monitor PGA Usage"}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-3",children:s.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[s.jsx("strong",{children:"Oracle Buffers:"})," LogMiner uses in-memory Oracle buffers to cache transactions. Long-running transactions can increase PGA memory consumption and lead to OOM errors. Set PGA_AGGREGATE_LIMIT appropriately based on your workload."]})})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"5. Configure PGA Aggregate Limit"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Set PGA limit to prevent out-of-memory errors:"}),s.jsx(nt,{code:"ALTER SYSTEM SET pga_aggregate_limit = <new value> SCOPE=BOTH;",title:"Set PGA Limit"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Units: K (kilobytes), M (megabytes), G (gigabytes). Example: 1G"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 3: Retrieve Service Name"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Get the service name (alias) for your Oracle database:"}),s.jsx(nt,{code:"SELECT NAME FROM V$DATABASE;",title:"Get Service Name"})]})]}),e==="postgres"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"IP address or host name of your PostgreSQL server is available."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The PostgreSQL version is 9.5 or higher, up to 17.x."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Log-based incremental replication is enabled if ingestion mode is Logical Replication."}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Note:"})," DataMove currently does not support logical replication on read replicas."]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"DataMove's IP addresses are whitelisted."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SELECT, USAGE, and CONNECT privileges are granted to the database user."})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 1: Set up Log-based Incremental Replication"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"DataMove supports data ingestion replication from PostgreSQL servers via Write Ahead Logs (WALs) set at the logical level."}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Update the PostgreSQL database configuration file"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Modify the PostgreSQL configuration file, postgresql.conf:"}),s.jsx(nt,{code:`max_replication_slots = 10
max_wal_senders = 10
wal_level = logical
wal_sender_timeout = 0`,title:"postgresql.conf Settings"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"2. Update the client authentication file"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"In the pg_hba.conf file, assign permission to the database user:"}),s.jsx(nt,{code:`local replication <database_user> peer
host replication <database_user> 127.0.0.1/0 md5
host replication <database_user> ::1/0 md5`,title:"pg_hba.conf Settings"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"3. Enable access to WALs"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Restart the PostgreSQL server and provide your database user access to the WAL:"}),s.jsx(nt,{code:"sudo systemctl restart postgresql.service",title:"Restart PostgreSQL"}),s.jsx(nt,{code:"alter role <database_user> with replication;",title:"Grant Replication Access"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 2: Whitelist DataMove's IP Addresses"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Add the DataMove IP addresses for your region in the postgresql.conf and pg_hba.conf files:"}),s.jsx(nt,{code:"host    all             user_name           0.0.0.0/0              md5",title:"Whitelist IPs"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 3: Create a Database User and Grant Privileges"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Create a database user (Optional)"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to your PostgreSQL database instance as a root user:"}),s.jsx(nt,{code:"CREATE USER <database_username> WITH LOGIN PASSWORD '<password>';",title:"Create User"}),s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"2. Grant privileges to the user"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Run the following commands to grant privileges to the database user:"}),s.jsx(nt,{code:`GRANT CONNECT ON DATABASE <database_name> TO <database_username>;
GRANT USAGE ON SCHEMA <schema_name> TO <database_username>;
GRANT SELECT ON ALL TABLES IN SCHEMA <schema_name> TO <database_username>;`,title:"Grant Privileges"}),s.jsx(nt,{code:"ALTER DEFAULT PRIVILEGES IN SCHEMA <schema_name> GRANT SELECT ON TABLES TO <database_username>;",title:"Alter Default Privileges"})]})]})]}),T&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Test Connection"}),s.jsx("button",{onClick:()=>P(!1),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(at,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx(Mae,{results:l,connectionName:S.name||"Source Connection",isValidating:d,currentStep:h,onRetry:W})})]})})]})}function Iae(e,t){return e==="oracle"?zae(t):e==="postgres"?Fae(t):{connector_class:"io.debezium.connector.sqlserver.SqlServerConnector",config:{name:Om(t.name),"tasks.max":"1","database.hostname":t.host,"database.port":String(t.port||1433),"database.user":t.username,"database.password":t.password||"","database.dbname":t.database_name,"database.schema":t.schema_name||"dbo","table.include.list":"","tombstones.on.delete":"false","include.schema.changes":"false"}}}function zae(e){const t=B5(e.name,"pipeline"),r=e.service_name||e.database_name||`${t}-server`;return{connector_class:"io.debezium.connector.oracle.OracleConnector",config:{name:Om(e.name),"tasks.max":"1","database.server.name":r,"database.hostname":e.host,"database.port":String(e.port||1521),"database.user":e.username,"database.password":e.password||"","database.dbname":e.service_name||e.database_name||r,"database.out.server.name":`${r}-xout`,"database.connection.adapter":"logminer","database.schema":e.schema_name||"INVENTORY","database.history.kafka.bootstrap.servers":"kafka:9092","database.history.kafka.topic":"schema-changes.inventory","snapshot.mode":"initial","snapshot.lock.timeout.ms":"5000","snapshot.fetch.size":String(e.query_fetch_size||2e3),"snapshot.delay.ms":"0","connector.class":"io.debezium.connector.oracle.OracleConnector","topic.prefix":t,"table.include.list":"","log.mining.strategy":e.online_catalog?"online_catalog":"redo_log_catalog","log.mining.continuous.mine":"true","log.mining.sleep.time.default":"1000","decimal.handling.mode":"double","time.precision.mode":"adaptive","tombstones.on.delete":"false","include.schema.changes":"false",use_ssl:e.use_ssl,ssh_tunnel:e.ssh_tunnel}}}function Fae(e){const t=B5(e.name,"pipeline"),r=Math.abs(t.split("").reduce((n,a)=>(n<<5)-n+a.charCodeAt(0),0)%9e3)+1e3;return{connector_class:"io.debezium.connector.postgresql.PostgresConnector",config:{name:Om(e.name),"connector.class":"io.debezium.connector.postgresql.PostgresConnector","database.hostname":e.host,"database.port":String(e.port||5432),"database.user":e.username,"database.password":e.password||"","database.dbname":e.database_name,"database.schema":e.schema_name||"public","database.server.name":t,"database.server.id":String(r),"topic.prefix":t,"table.include.list":"","plugin.name":"pgoutput","publication.name":"dbz_publication","slot.name":`${t}_slot`,"slot.drop.on.stop":e.drop_slot_on_stop?"true":"false","snapshot.mode":"initial","decimal.handling.mode":"double","tombstones.on.delete":"false","include.schema.changes":"false","tasks.max":"1","key.converter":"org.apache.kafka.connect.json.JsonConverter","key.converter.schemas.enable":"true","value.converter":"org.apache.kafka.connect.json.JsonConverter","value.converter.schemas.enable":"true","errors.tolerance":"all","errors.log.enable":"true","errors.log.include.messages":"true","errors.deadletterqueue.topic.name":`${t}-source-dlq`,"errors.deadletterqueue.context.headers.enable":"true","errors.deadletterqueue.topic.replication.factor":"1",use_ssl:e.use_ssl,ssh_tunnel:e.ssh_tunnel}}}function B5(e,t){return e&&e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")||t}async function Uae(e,t){var l;if(!e)return;const r=t.map(c=>c.split(".")).map(([c,d])=>`${c}.${d}`).join(",");console.log("[updateConnectorTables] Selected tables:",t),console.log("[updateConnectorTables] Generated includeList:",r);const{data:n}=await ne.from("pipeline_connectors").select("id, config, connector_class").eq("pipeline_id",e).eq("type","source").maybeSingle();if(!n){console.warn("[updateConnectorTables] No connector found for pipeline:",e);return}console.log("[updateConnectorTables] Connector config:",n.config);const a=(l=n.config)!=null&&l.registry_connector?n.config:null;let i=n.config||{};a!=null&&a.registry_connector&&(console.log("[updateConnectorTables] Using registry connector:",a.registry_connector),i=await bc(a.registry_connector)||{},console.log("[updateConnectorTables] Base config from registry:",i));const o={...i,"table.include.list":r};if(console.log("[updateConnectorTables] Updated config with table.include.list:",o["table.include.list"]),a!=null&&a.registry_connector){console.log("[updateConnectorTables] Creating new connector version...");const c=await gg({name:a.registry_connector,kind:"source",connectorClass:n.connector_class,config:o});console.log("[updateConnectorTables] Created version:",c.version.version),await ju(a.registry_connector,c.version.version),console.log("[updateConnectorTables] Activated version:",c.version.version),await ne.from("pipeline_connectors").update({config:{...a,registry_version:c.version.version,checksum:c.version.checksum}}).eq("id",n.id)}else console.log("[updateConnectorTables] Updating connector config directly (no registry)"),await ne.from("pipeline_connectors").update({config:o}).eq("id",n.id);console.log("[updateConnectorTables] Update complete")}function Bae(){const e=Dt(),t=xr(),{showToast:r}=Er(),n=t.state||{},a="http://127.0.0.1:5001",[i,o]=m.useState(!0),[l,c]=m.useState(""),[d,u]=m.useState(!0),[h,f]=m.useState([]),[g,p]=m.useState(new Set),[y,x]=m.useState(!1),[v,w]=m.useState(null);m.useEffect(()=>{b()},[n==null?void 0:n.pipelineId,n==null?void 0:n.sourceConnection]);const b=async()=>{o(!0);try{let F=[];if(a&&(n!=null&&n.sourceConnection)){const W=await fetch(`${a}/api/list-tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n.sourceConnection,serviceName:n.sourceConnection.serviceName||n.sourceConnection.database})});if(!W.ok)throw new Error("Failed to load source schemas");const $=await W.json();if($.success&&Array.isArray($.tables))F=$.tables;else if(!$.success)throw new Error($.error||"Failed to load source schemas")}if(F.length===0&&(n!=null&&n.pipelineId)){const{data:W,error:$}=await ne.from("pipeline_objects").select("schema_name, table_name, stats").eq("pipeline_id",n.pipelineId).order("schema_name",{ascending:!0}).order("table_name",{ascending:!0});if($)throw $;F=(W||[]).map(E=>{var U,I,X;return{schema:E.schema_name,table:E.table_name,rowCount:((U=E.stats)==null?void 0:U.row_count)||0,sizeEstimate:((I=E.stats)==null?void 0:I.size_estimate)||"",lastModified:((X=E.stats)==null?void 0:X.last_modified)||""}})}if(!F||F.length===0){f([]);return}const q=F.reduce((W,$)=>(W[$.schema]||(W[$.schema]=[]),W[$.schema].push($),W),{}),z=Object.entries(q).map(([W,$])=>({name:W,tables:$,expanded:!0,selected:!1,indeterminate:!1}));if(f(z),n!=null&&n.pipelineId){const{data:W}=await ne.from("pipeline_connectors").select("config").eq("pipeline_id",n.pipelineId).eq("type","source").maybeSingle();if(W!=null&&W.config){const E=W.config["table.include.list"]||"";if(E){const U=E.split(",").map(I=>I.trim());p(new Set(U))}}}}catch(F){console.error("Failed to load schema data",F),r("error","Failed to load schema data",F instanceof Error?F.message:"Unknown error"),f([])}finally{o(!1)}},k=F=>{f(q=>q.map(z=>z.name===F?{...z,expanded:!z.expanded}:z))},j=F=>{const q=h.find(W=>W.name===F);if(!q)return;const z=q.tables.map(W=>`${W.schema}.${W.table}`);p(W=>{const $=new Set(W);return z.every(U=>$.has(U))?z.forEach(U=>$.delete(U)):z.forEach(U=>$.add(U)),$})},N=F=>{const q=`${F.schema}.${F.table}`;p(z=>{const W=new Set(z);return W.has(q)?W.delete(q):W.add(q),W})},_=l.trim().toLowerCase(),O=m.useMemo(()=>h.map(F=>{const q=F.tables.map($=>`${$.schema}.${$.table}`),z=q.filter($=>g.has($)).length,W=F.tables.filter($=>_?`${$.schema}.${$.table}`.toLowerCase().includes(_)||$.schema.toLowerCase().includes(_)||$.table.toLowerCase().includes(_):!0);return{...F,tables:W,selected:z===q.length&&q.length>0,indeterminate:z>0&&z<q.length}}).filter(F=>F.tables.length>0),[h,g,_]),T=async()=>{if(g.size===0){r("warning","No tables selected","Please select at least one table to check");return}if(!n.pipelineId){r("error","Pipeline ID is missing");return}o(!0);try{const{data:F}=await ne.from("pipeline_connectors").select("config, connector_class").eq("pipeline_id",n.pipelineId).eq("type","source").maybeSingle();if(!F){r("error","Source connector not found");return}let q=F.config||{};if(q.registry_connector){const $=await bc(q.registry_connector);$&&(q=$)}const z=Array.from(g).map($=>$.split(".")).map(([$,E])=>`${$}.${E}`).join(","),W={...q,"table.include.list":z};W["database.password"]&&(W["database.password"]="********"),W.password&&(W.password="********"),w(W),x(!0)}catch(F){r("error","Failed to generate config",F.message),console.error(F)}finally{o(!1)}},P=async()=>{if(g.size===0){r("warning","No tables selected","Please select at least one table to continue");return}if(!n.pipelineId){r("error","Pipeline ID is missing");return}o(!0);try{const F=Array.from(g).map(z=>{var U;const[W,$]=z.split("."),E=(U=h.find(I=>I.name===W))==null?void 0:U.tables.find(I=>I.table===$);return{pipeline_id:n.pipelineId,schema_name:W,table_name:$,included:!0,stats:{row_count:(E==null?void 0:E.rowCount)||0,size_estimate:(E==null?void 0:E.sizeEstimate)||"",last_modified:(E==null?void 0:E.lastModified)||""}}}),{error:q}=await ne.from("pipeline_objects").upsert(F,{onConflict:"pipeline_id,schema_name,table_name"});if(q){r("error","Failed to save selections",q.message);return}await Uae(n.pipelineId,Array.from(g)),r("success",`${g.size} tables selected`),e("/pipelines/new/destination-type",{state:t.state})}catch(F){r("error","An error occurred","Please try again"),console.error(F)}finally{o(!1)}},S=g.size,M=h.reduce((F,q)=>F+q.tables.length,0);return s.jsxs("div",{className:"flex h-full relative overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 p-8 pb-6",children:[s.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Objects to Sync"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Choose which schemas and tables you want to replicate to your destination"}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search schemas or tables...",value:l,onChange:F=>c(F.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100"})]})}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:S})," of ",M," tables selected"]}),s.jsx("button",{type:"button",onClick:()=>{if(S===M)p(new Set);else{const F=h.flatMap(q=>q.tables.map(z=>`${z.schema}.${z.table}`));p(new Set(F))}},disabled:M===0,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:S===M?"Deselect All":"Select All"})]})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:s.jsx("div",{className:"px-8 py-4",children:i?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(st,{className:"w-8 h-8 text-blue-600 animate-spin"})}):O.length===0?s.jsx("div",{className:"py-12 text-center text-gray-600 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:"No tables found. Run object discovery or ensure the source connection details are correct."}):s.jsx("div",{className:"space-y-2",children:O.map(F=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 cursor-pointer",children:[s.jsx("button",{type:"button",onClick:()=>j(F.name),className:"flex-shrink-0",children:F.indeterminate?s.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded flex items-center justify-center",children:s.jsx("div",{className:"w-2.5 h-0.5 bg-white"})}):F.selected?s.jsx(B1,{className:"w-5 h-5 text-blue-600"}):s.jsx(G1,{className:"w-5 h-5 text-gray-400"})}),s.jsxs("button",{type:"button",onClick:()=>k(F.name),className:"flex items-center gap-2 flex-1","aria-expanded":F.expanded,children:[F.expanded?s.jsx(ua,{className:"w-4 h-4 text-gray-500"}):s.jsx(nn,{className:"w-4 h-4 text-gray-500"}),s.jsx(kt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:F.name}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",F.tables.length," tables)"]})]})]}),F.expanded&&s.jsx("div",{className:"bg-white dark:bg-gray-900",children:F.tables.map(q=>{const z=`${q.schema}.${q.table}`,W=g.has(z);return s.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 border-t border-gray-100 dark:border-gray-800",children:[s.jsx("button",{type:"button",onClick:()=>N(q),className:"flex-shrink-0",children:W?s.jsx(B1,{className:"w-5 h-5 text-blue-600"}):s.jsx(G1,{className:"w-5 h-5 text-gray-400"})}),s.jsx(pl,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:q.table}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[q.rowCount.toLocaleString()," rows  ",q.sizeEstimate,"  Modified ",q.lastModified]})]}),s.jsx("button",{type:"button",className:"flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ga,{className:"w-4 h-4"})})]},z)})})]},F.name))})})}),s.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("button",{type:"button",onClick:T,disabled:i||S===0,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Check Configuration"]})})]}),y&&v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Source Connector Configuration Preview"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Review the configuration before continuing. The ",s.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded",children:"table.include.list"})," shows your selected tables."]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:s.jsx("pre",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 overflow-x-auto whitespace-pre-wrap break-words",children:JSON.stringify(v,null,2)})})}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Back to Table Selection"}),s.jsxs("button",{type:"button",onClick:()=>{x(!1),P()},disabled:i,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&s.jsx(st,{className:"w-4 h-4 animate-spin"}),"Continue to Destination"]})]})]})}),s.jsxs("div",{className:"w-[500px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Object Selection Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",id:"auto-mapping",checked:d,onChange:F=>u(F.target.checked),className:"mt-1 w-4 h-4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"auto-mapping",className:"font-medium text-gray-900 dark:text-gray-100 cursor-pointer block mb-1",children:"Auto-Mapping"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically map source columns to destination columns based on name and type compatibility. Turn off to manually configure column mappings."})]})]})}),!d&&s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:"Manual mapping will be available in the next step after selecting your destination."})}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Selection Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Schemas:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Set(Array.from(g).map(F=>F.split(".")[0])).size})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tables:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:S})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Estimated Size:"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:(()=>{let F=0;return g.forEach(q=>{var E;const[z,W]=q.split("."),$=(E=h.find(U=>U.name===z))==null?void 0:E.tables.find(U=>U.table===W);if($){const U=$.sizeEstimate;U.includes("MB")?F+=parseFloat(U):U.includes("KB")&&(F+=parseFloat(U)/1024)}}),F>0?`${F.toFixed(2)} MB`:"< 1 MB"})()})]})]})]})]})]})]})}const Qp=[{id:"postgres",name:"PostgreSQL",logo:"/logos/postgresql.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"PostgreSQL Database"},{id:"mysql",name:"MySQL",logo:"/logos/mysql.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"MySQL Database"},{id:"sqlserver",name:"SQL Server",logo:"/logos/sqlserver.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"Microsoft SQL Server"},{id:"oracle",name:"Oracle",logo:"/logos/oracle.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"Oracle Database"},{id:"snowflake",name:"Snowflake",logo:"/logos/snowflake.svg",category:"Cloud Data Warehouses",connector:"com.snowflake.kafka.connector.SnowflakeSinkConnector",description:"Snowflake Data Warehouse",comingSoon:!0},{id:"bigquery",name:"BigQuery",logo:"/logos/bigquery.svg",category:"Cloud Data Warehouses",connector:"com.wepay.kafka.connect.bigquery.BigQuerySinkConnector",description:"Google BigQuery",comingSoon:!0},{id:"kafka",name:"Kafka",logo:"/logos/kafka.svg",category:"Streaming Platforms",connector:"org.apache.kafka.connect.file.FileStreamSinkConnector",description:"Apache Kafka Topic",comingSoon:!0},{id:"elasticsearch",name:"Elasticsearch",logo:"/logos/elasticsearch.svg",category:"Search & Analytics",connector:"io.confluent.connect.elasticsearch.ElasticsearchSinkConnector",description:"Elasticsearch Index",comingSoon:!0}];function qae(){const e=Dt(),t=xr(),{showToast:r}=Er(),n=t.state||{},[a,i]=m.useState(""),[o,l]=m.useState(null),[c,d]=m.useState(!1),h=Qp.filter(g=>{const p=a.toLowerCase();return g.name.toLowerCase().includes(p)||g.category.toLowerCase().includes(p)||g.description.toLowerCase().includes(p)}).reduce((g,p)=>(g[p.category]||(g[p.category]=[]),g[p.category].push(p),g),{}),f=async()=>{if(!o){r("warning","Please select a destination type");return}if(!n.pipelineId){r("error","Pipeline ID is missing");return}const g=Qp.find(p=>p.id===o);if(g!=null&&g.comingSoon){r("info","Coming Soon",`${g.name} support is coming soon!`);return}d(!0);try{const{error:p}=await ne.from("pipelines").update({destination_type:o,updated_at:new Date().toISOString()}).eq("id",n.pipelineId);if(p)throw p;e("/pipelines/new/destination",{state:{...n,destinationType:o}})}catch(p){console.error("Error updating destination type:",p),r("error","Failed to save destination type",p.message)}finally{d(!1)}};return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 p-8 pb-6",children:[s.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Destination"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Choose where you want to replicate your data"}),s.jsx("div",{children:s.jsxs("div",{className:"relative",children:[s.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search destinations...",value:a,onChange:g=>i(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100"})]})})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto px-8 pb-8",children:s.jsx("div",{className:"space-y-8",children:Object.entries(h).map(([g,p])=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wider",children:g}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(y=>s.jsxs("button",{onClick:()=>!y.comingSoon&&l(y.id),disabled:y.comingSoon,className:`relative p-6 bg-white dark:bg-gray-800 border-2 rounded-xl text-left transition-all ${o===y.id?"border-blue-500 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700"} ${y.comingSoon?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[y.comingSoon&&s.jsx("span",{className:"absolute top-3 right-3 px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs font-medium rounded",children:"Coming Soon"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(fr,{sourceType:y.id,connectorClass:y.connector,className:"w-12 h-12 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.description})]})]})]},y.id))})]},g))})}),s.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 px-8 py-6 bg-white dark:bg-gray-900",children:s.jsxs("button",{onClick:f,disabled:!o||c,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c?"Saving...":"Continue to Configuration",s.jsx(is,{className:"w-5 h-5"})]})})]}),s.jsxs("div",{className:"w-[400px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Destination Information"}),o?s.jsx(s.Fragment,{children:(()=>{const g=Qp.find(p=>p.id===o);return g?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(fr,{sourceType:g.id,connectorClass:g.connector,className:"w-16 h-16 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:g.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.category})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Connector Class"}),s.jsx("code",{className:"block text-xs bg-white dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700 font-mono text-gray-900 dark:text-gray-100 break-all",children:g.connector})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Features"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-0.5",children:""}),s.jsx("span",{children:"Real-time data replication"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-0.5",children:""}),s.jsx("span",{children:"Automatic schema evolution"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-0.5",children:""}),s.jsx("span",{children:"Upsert and delete support"})]}),!g.comingSoon&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-0.5",children:""}),s.jsx("span",{children:"Production ready"})]})]})]}),g.comingSoon&&s.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-orange-900 dark:text-orange-100",children:["Support for ",g.name," is coming soon! Currently, only PostgreSQL, MySQL, SQL Server, and Oracle destinations are available."]})})]}):null})()}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select a destination type to see more details"})]})]})}function Wae({pipelineId:e}={}){const t=Dt(),r=xr(),{showToast:n}=Er(),a=r.state,i=e||a.pipelineId,[o,l]=m.useState(!1),[c,d]=m.useState(!1),[u,h]=m.useState(!0),[f,g]=m.useState({host:"",port:5432,database:"",schema:"public",username:"",password:"",ssl:!1}),p=k=>{const{name:j,value:N,type:_,checked:O}=k.target;g(T=>({...T,[j]:_==="checkbox"?O:j==="port"?parseInt(N)||0:N}))},y=k=>u?k.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""):k,x=()=>{const k=y(f.database||"destination"),j=(i==null?void 0:i.slice(0,8))||"local";return`${k}_${j}_sink`},v=()=>{f.schema;const k=x();return{name:k,"connector.class":"io.debezium.connector.jdbc.JdbcSinkConnector","tasks.max":"1",topics:"placeholder","connection.url":`jdbc:postgresql://${f.host}:${f.port}/${f.database}`,"connection.username":f.username,"connection.password":f.password,"connection.pool.size":"10","auto.create":"true","schema.evolution":"basic","insert.mode":"upsert","primary.key.mode":"record_value","primary.key.fields":"id","delete.enabled":"false",transforms:"route","transforms.route.type":"org.apache.kafka.connect.transforms.RegexRouter","transforms.route.regex":"([^.]+)\\.([^.]+)\\.(.*)","transforms.route.replacement":"$1_$2_$3","key.converter":"org.apache.kafka.connect.json.JsonConverter","key.converter.schemas.enable":"true","value.converter":"org.apache.kafka.connect.json.JsonConverter","value.converter.schemas.enable":"true","debezium.format.value.schemas.enable":"true","errors.tolerance":"all","errors.log.enable":"true","errors.log.include.messages":"true","errors.deadletterqueue.topic.name":`${k}-dlq`,"errors.deadletterqueue.topic.replication.factor":"1","errors.deadletterqueue.context.headers.enable":"true","consumer.override.auto.offset.reset":"earliest"}},w=async k=>{if(k.preventDefault(),!f.host.trim()){n("error","Host is required");return}if(!f.database.trim()){n("error","Database is required");return}if(!f.username.trim()){n("error","Username is required");return}if(!f.password.trim()){n("error","Password is required");return}if(!i){n("error","Pipeline ID is missing");return}d(!0);try{const{data:j}=await ne.from("pipeline_connectors").select("config, connector_class").eq("pipeline_id",i).eq("type","source").maybeSingle();let N=y(f.database||"pipeline_topic");if(j!=null&&j.config){let q=j.config;if(q.registry_connector){const{getActiveConnectorConfig:W}=await gc(async()=>{const{getActiveConnectorConfig:E}=await Promise.resolve().then(()=>C9);return{getActiveConnectorConfig:E}},[]),$=await W(q.registry_connector);$&&(q=$,console.log("[DestinationStep] Loaded source config from registry:",q.registry_connector))}const z=q["topic.prefix"]||q["database.server.name"];z?(N=`${z}\\..*`,console.log("[DestinationStep] Using source topic prefix regex:",N)):console.warn("[DestinationStep] No topic.prefix or database.server.name found in source config")}const _={host:f.host,port:f.port,database:f.database,schema:f.schema,username:f.username,ssl:f.ssl,sanitize_names:u},{error:O}=await ne.from("pipelines").update({destination_type:"postgres",destination_config:_,updated_at:new Date().toISOString()}).eq("id",i);if(O){n("error","Failed to save destination",O.message);return}const T=x();let P=v();P["topics.regex"]=N,console.log("[DestinationStep] Sink config topics:",P.topics),console.log("[DestinationStep] Sink config topics.regex:",P["topics.regex"]);const S=await gg({name:T,kind:"sink",connectorClass:"io.debezium.connector.jdbc.JdbcSinkConnector",config:P,ownerId:i||null});await ju(T,S.version.version);const M={pipeline_id:i,name:T,type:"sink",connector_class:"io.debezium.connector.jdbc.JdbcSinkConnector",config:{registry_connector:T,registry_version:S.version.version,checksum:S.version.checksum,connector_class:"io.debezium.connector.jdbc.JdbcSinkConnector",snapshot_config:P},status:"running",tasks_max:1,last_deployed_version:S.version.version},{error:F}=await ne.from("pipeline_connectors").insert(M);if(F){n("error","Failed to create destination connector",F.message);return}n("success","Destination configuration saved"),t("/pipelines/new/schedule",{state:r.state})}catch(j){n("error","An error occurred","Please try again"),console.error(j)}finally{d(!1)}},b=[{original:"User Accounts",sanitized:y("User Accounts")},{original:"Sales Data",sanitized:y("Sales Data")},{original:"Product-Info",sanitized:y("Product-Info")}];return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[s.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Configure PostgreSQL Destination"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Set up your destination database where data will be replicated"}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 flex gap-3",children:[s.jsx(In,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:["Ensure your PostgreSQL destination meets the ",s.jsx("span",{className:"font-semibold",children:"Prerequisites"})," listed on the right."]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Host ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"host",value:f.host,onChange:p,required:!0,placeholder:"localhost or pg.example.com",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Port ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"port",value:f.port,onChange:p,required:!0,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"database",value:f.database,onChange:p,required:!0,placeholder:"analytics",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Schema ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"schema",value:f.schema,onChange:p,required:!0,placeholder:"public",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Username ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"username",value:f.username,onChange:p,required:!0,placeholder:"pguser",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",name:"password",value:f.password,onChange:p,required:!0,placeholder:"Enter password",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-10 text-gray-900 dark:text-gray-100"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:o?s.jsx(bi,{className:"w-5 h-5"}):s.jsx(ga,{className:"w-5 h-5"})})]})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"ssl",checked:f.ssl,onChange:p,className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Use SSL Connection"})]})}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:k=>h(k.target.checked),className:"mt-1 w-4 h-4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Sanitize Table and Column Names"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Convert names to lowercase and replace spaces with underscores for PostgreSQL compatibility"}),u&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview:"}),b.map((k,j)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:k.original}),s.jsx(is,{className:"w-3 h-3 text-gray-400"}),s.jsx("span",{className:"font-mono text-blue-600 dark:text-blue-400",children:k.sanitized})]},j))]})]})]})})}),s.jsx("div",{className:"flex gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c&&s.jsx(st,{className:"w-4 h-4 animate-spin"}),c?"Saving...":"Save & Continue"]})})]})]}),s.jsxs("div",{className:"w-[600px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Prerequisites"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"1. PostgreSQL Database Available"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Ensure you have a PostgreSQL instance (version 10+) running and accessible"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"2. Create Destination User"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Create a dedicated user with appropriate write permissions"}),s.jsx(nt,{code:`-- Create user
CREATE USER <username> WITH PASSWORD '<strong_password>';

-- Grant database connection
GRANT CONNECT ON DATABASE <database> TO <username>;

-- Grant schema usage and creation rights
GRANT USAGE, CREATE ON SCHEMA <schema> TO <username>;

-- Grant table permissions
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA <schema> TO <username>;
GRANT SELECT, USAGE ON ALL SEQUENCES IN SCHEMA <schema> TO <username>;

-- Grant future table permissions
ALTER DEFAULT PRIVILEGES IN SCHEMA <schema>
  GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO <username>;
ALTER DEFAULT PRIVILEGES IN SCHEMA <schema>
  GRANT SELECT, USAGE ON SEQUENCES TO <username>;`,title:"Create User and Grant Permissions"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"3. Verify Schema Access"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Test that the user can create tables in the target schema"}),s.jsx(nt,{code:`-- Test table creation
CREATE TABLE <schema>._bookkeeping_test (id SERIAL PRIMARY KEY, created_at TIMESTAMP DEFAULT NOW());

-- If successful, drop the test table
DROP TABLE <schema>._bookkeeping_test;`,title:"Test Schema Access"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"4. Network Access"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ensure your PostgreSQL server is accessible from our region. Check your firewall rules and pg_hba.conf settings."})]})]})]})]})}function Hae(){const e=Dt(),t=xr(),{showToast:r}=Er(),n=t.state,[a,i]=m.useState(!1),[o,l]=m.useState("continuous"),[c,d]=m.useState("initial"),[u,h]=m.useState("0 0 * * *"),f=async x=>{if(x.preventDefault(),!n.pipelineId){r("error","Pipeline ID is missing");return}if(o==="scheduled"&&!u.trim()){r("error","Cron expression is required for scheduled mode");return}i(!0);try{const v={mode:o,snapshot_mode:c,...o==="scheduled"&&{cron:u}},{error:w}=await ne.from("pipelines").update({schedule_config:v,status:"ready",updated_at:new Date().toISOString()}).eq("id",n.pipelineId);if(w){r("error","Failed to save schedule",w.message);return}r("success","Pipeline created successfully"),e("/pipelines")}catch(v){r("error","An error occurred","Please try again"),console.error(v)}finally{i(!1)}},g=[{id:"continuous",icon:zf,title:"Continuous Replication",description:"Real-time CDC streaming with minimal latency",recommended:!0},{id:"scheduled",icon:So,title:"Scheduled Sync",description:"Run at specific intervals using cron expressions",recommended:!1},{id:"manual",icon:Fr,title:"Manual Trigger",description:"Start replication manually when needed",recommended:!1}],p=[{label:"Every hour",value:"0 * * * *"},{label:"Every 6 hours",value:"0 */6 * * *"},{label:"Daily at midnight",value:"0 0 * * *"},{label:"Weekly (Sunday)",value:"0 0 * * 0"}],y=[{label:"Initial Snapshot",status:c==="always"||c==="initial"?"complete":"skipped",description:"Full table copy"},{label:"CDC Streaming",status:"active",description:"Ongoing changes"},{label:"Monitoring",status:"pending",description:"Health checks"}];return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[s.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Schedule & Finalize"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Configure when and how your pipeline runs"}),s.jsxs("form",{onSubmit:f,className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Replication Mode"}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.map(x=>s.jsxs("label",{className:`relative flex items-start gap-4 p-5 border-2 rounded-lg cursor-pointer transition-all ${o===x.id?"border-blue-600 dark:border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsx("input",{type:"radio",name:"scheduleMode",value:x.id,checked:o===x.id,onChange:v=>l(v.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(x.icon,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:x.title}),x.recommended&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded",children:"Recommended"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.description})]})]},x.id))})]}),o==="scheduled"&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Cron Expression"}),s.jsx("input",{type:"text",value:u,onChange:x=>h(x.target.value),placeholder:"0 0 * * *",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-gray-900 dark:text-gray-100"}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:p.map(x=>s.jsx("button",{type:"button",onClick:()=>h(x.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:x.label},x.value))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Initial Snapshot"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[s.jsx("input",{type:"radio",name:"snapshotMode",value:"initial",checked:c==="initial",onChange:x=>d(x.target.value),className:"mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Initial snapshot only (Recommended)"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy existing data once, then stream changes"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[s.jsx("input",{type:"radio",name:"snapshotMode",value:"never",checked:c==="never",onChange:x=>d(x.target.value),className:"mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Skip snapshot"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Only capture new changes from now on"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[s.jsx("input",{type:"radio",name:"snapshotMode",value:"always",checked:c==="always",onChange:x=>d(x.target.value),className:"mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Always snapshot"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full copy on every run (scheduled mode only)"})]})]})]})]}),s.jsx("div",{className:"flex gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a&&s.jsx(st,{className:"w-4 h-4 animate-spin"}),a?"Completing Pipeline...":"Complete Pipeline"]})})]})]}),s.jsxs("div",{className:"w-[500px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Pipeline Execution Timeline"}),s.jsx("div",{className:"relative",children:y.map((x,v)=>s.jsxs("div",{className:"relative pb-8 last:pb-0",children:[v<y.length-1&&s.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-700"}),s.jsxs("div",{className:"relative flex items-start gap-4",children:[s.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${x.status==="complete"?"bg-green-600 text-white":x.status==="active"?"bg-blue-600 text-white ring-4 ring-blue-200 dark:ring-blue-900":x.status==="skipped"?"bg-gray-400 dark:bg-gray-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:[x.status==="complete"&&s.jsx(Ql,{className:"w-4 h-4"}),x.status==="active"&&s.jsx(zf,{className:"w-4 h-4"}),x.status==="pending"&&s.jsx(Fr,{className:"w-4 h-4"}),x.status==="skipped"&&s.jsx(In,{className:"w-4 h-4"})]}),s.jsxs("div",{className:"flex-1 pt-0.5",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:x.label}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.description})]})]})]},v))}),s.jsx("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(In,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:[s.jsx("p",{className:"font-semibold mb-1",children:"What happens next?"}),s.jsxs("ul",{className:"space-y-1 text-blue-800 dark:text-blue-200",children:[s.jsx("li",{children:' Pipeline will be created in "Ready" state'}),s.jsx("li",{children:" You can start it manually from the dashboard"}),s.jsx("li",{children:" Monitor progress in real-time"}),s.jsx("li",{children:" View logs and metrics"})]})]})]})}),o==="continuous"&&s.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-green-900 dark:text-green-100",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Continuous Replication"}),s.jsx("p",{className:"text-green-800 dark:text-green-200",children:"Changes will be captured in near real-time with typical latency under 1 second"})]})})]})]})}function Ls({step:e,existingPipelineId:t}){const r=Dt(),n=xr(),a=n.state,[i,o]=m.useState(null),c=new URLSearchParams(n.search).get("resume")||t;m.useEffect(()=>{c&&e==="source-config"&&(async()=>{const{data:v}=await ne.from("pipelines").select("source_type").eq("id",c).maybeSingle();v!=null&&v.source_type&&o(v.source_type)})()},[c,e]);const d={source:1,"pipeline-mode":1,"pipeline-type":1,"source-config":1,objects:2,"destination-type":3,destination:3,schedule:4},u=["Configure Source","Select Objects","Configure Destination","Schedule & Final"],h=()=>{r("/pipelines")},f=x=>{r("/pipelines/new/pipeline-mode",{state:{sourceType:x}})},g=e==="source"||e==="pipeline-mode"||e==="pipeline-type",y=new Set(["objects","destination-type"]).has(e)?"flex-1 min-h-0 overflow-hidden":"flex-1 min-h-0 overflow-auto";return s.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[!g&&s.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:[s.jsx(Tae,{currentStep:d[e],steps:u}),s.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(at,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),s.jsxs("div",{className:y,children:[e==="source"&&s.jsx(Aae,{onSelectSource:f,onBack:h}),e==="pipeline-mode"&&(a==null?void 0:a.sourceType)&&s.jsx(Dae,{sourceType:a.sourceType}),e==="pipeline-type"&&(a==null?void 0:a.sourceType)&&s.jsx(Rae,{sourceType:a.sourceType}),e==="source-config"&&((a==null?void 0:a.sourceType)||i)&&s.jsx($ae,{sourceType:(a==null?void 0:a.sourceType)||i||""}),e==="objects"&&s.jsx(Bae,{}),e==="destination-type"&&s.jsx(qae,{}),e==="destination"&&s.jsx(Wae,{pipelineId:c}),e==="schedule"&&s.jsx(Hae,{})]})]})}function z2(){const{pipelineId:e}=dg();return s.jsxs(Hb,{children:[s.jsx(dt,{path:"/",element:s.jsx(Wb,{to:"source",replace:!0})}),s.jsx(dt,{path:"source",element:s.jsx(Ls,{step:"source",existingPipelineId:e})}),s.jsx(dt,{path:"pipeline-mode",element:s.jsx(Ls,{step:"pipeline-mode",existingPipelineId:e})}),s.jsx(dt,{path:"pipeline-type",element:s.jsx(Ls,{step:"pipeline-type",existingPipelineId:e})}),s.jsx(dt,{path:"source-config",element:s.jsx(Ls,{step:"source-config",existingPipelineId:e})}),s.jsx(dt,{path:"objects",element:s.jsx(Ls,{step:"objects",existingPipelineId:e})}),s.jsx(dt,{path:"destination-type",element:s.jsx(Ls,{step:"destination-type",existingPipelineId:e})}),s.jsx(dt,{path:"destination",element:s.jsx(Ls,{step:"destination",existingPipelineId:e})}),s.jsx(dt,{path:"schedule",element:s.jsx(Ls,{step:"schedule",existingPipelineId:e})})]})}function Vae(){const[e,t]=m.useState([]),[r,n]=m.useState(!1),[a,i]=m.useState(""),o=(f,g,p)=>{t(y=>[...y,{step:f,status:g,message:p,timestamp:new Date().toISOString()}])},l=async()=>{var f,g,p,y,x;if(!a){alert("Please enter a pipeline ID");return}n(!0),t([]),o("Start","pending","Starting deployment test...");try{const v=await fetch(`http://localhost:5001/api/pipelines/${a}/deploy`,{method:"POST",headers:{"Content-Type":"application/json"}}),w=await v.json();v.ok?(o("Deploy","success","Deployment successful!"),(f=w.results)!=null&&f.source&&o("Source","success","Source connector deployed"),(g=w.results)!=null&&g.sink&&o("Sink","success","Sink connector deployed")):(o("Deploy","error",`Deployment failed: ${w.error}`),(p=w.results)!=null&&p.errors&&w.results.errors.forEach(b=>{o("Error","error",`${b.connector}: ${b.error}`)}),((y=w.error)!=null&&y.includes("rolled back")||(x=w.error)!=null&&x.includes("rollback"))&&o("Rollback","warning"," Rollback was triggered!"))}catch(v){o("Deploy","error",v.message)}n(!1)},c=async()=>{if(!a){alert("Please enter a pipeline ID");return}n(!0),t([]),o("Start","pending","Pausing pipeline...");try{const f=await fetch(`http://localhost:5001/api/pipelines/${a}/pause`,{method:"POST",headers:{"Content-Type":"application/json"}}),g=await f.json();f.ok?o("Pause","success",g.message):(o("Pause","error",g.error),g.errors&&g.errors.forEach(p=>{o("Error","error",`${p.connector}: ${p.error}`)}))}catch(f){o("Pause","error",f.message)}n(!1)},d=async()=>{if(!a){alert("Please enter a pipeline ID");return}n(!0),t([]),o("Start","pending","Starting pipeline...");try{const f=await fetch(`http://localhost:5001/api/pipelines/${a}/start`,{method:"POST",headers:{"Content-Type":"application/json"}}),g=await f.json();f.ok?o("Start","success",g.message):(o("Start","error",g.error),g.errors&&g.errors.forEach(p=>{o("Error","error",`${p.connector}: ${p.error}`)}))}catch(f){o("Start","error",f.message)}n(!1)},u=async()=>{if(!a){alert("Please enter a pipeline ID");return}if(confirm("Are you sure you want to delete all connectors?")){n(!0),t([]),o("Start","pending","Deleting connectors...");try{const f=await fetch(`http://localhost:5001/api/pipelines/${a}/connectors`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),g=await f.json();f.ok?o("Delete","success",g.message):(o("Delete","error",g.error),g.errors&&g.errors.forEach(p=>{o("Error","error",`${p.connector}: ${p.error}`)}))}catch(f){o("Delete","error",f.message)}n(!1)}},h=f=>{switch(f){case"success":return s.jsx($r,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(ls,{className:"w-5 h-5 text-red-500"});case"warning":return s.jsx(bn,{className:"w-5 h-5 text-yellow-500"});default:return s.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rollback Test Console"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Test deployment, rollback, pause, start, and delete operations"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pipeline ID"}),s.jsx("input",{type:"text",value:a,onChange:f=>i(f.target.value),placeholder:"Enter pipeline ID (e.g., 123e4567-e89b-12d3-a456-426614174000)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs("button",{onClick:l,disabled:r||!a,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(W1,{className:"w-5 h-5"}),"Deploy"]}),s.jsxs("button",{onClick:c,disabled:r||!a,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(mi,{className:"w-5 h-5"}),"Pause"]}),s.jsxs("button",{onClick:d,disabled:r||!a,className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(W1,{className:"w-5 h-5"}),"Start"]}),s.jsxs("button",{onClick:u,disabled:r||!a,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(mn,{className:"w-5 h-5"}),"Delete"]})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Test Results"}),e.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500",children:s.jsx("p",{children:"No test results yet. Run a test to see results."})}):s.jsx("div",{className:"space-y-3",children:e.map((f,g)=>s.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg ${f.status==="success"?"bg-green-50":f.status==="error"?"bg-red-50":f.status==="warning"?"bg-yellow-50":"bg-blue-50"}`,children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h(f.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900",children:f.step}),s.jsx("p",{className:"text-sm text-gray-600 break-words",children:f.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(f.timestamp).toLocaleTimeString()})]})]},g))})]}),s.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Test Rollback:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[s.jsx("li",{children:"Get a pipeline ID from the Pipelines page"}),s.jsx("li",{children:'Click "Deploy" - this will attempt to deploy both source and sink connectors'}),s.jsx("li",{children:'If sink deployment fails, check the results for "Rollback" warning'}),s.jsx("li",{children:'Check backend logs for: "Rolling back source connector due to sink failure"'}),s.jsx("li",{children:"Verify that source connector was deleted from Kafka Connect"})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Backend Logs to Monitor:"}),s.jsxs("div",{className:"text-sm text-yellow-800 space-y-1 font-mono",children:[s.jsx("p",{children:' "Deploying source connector"'}),s.jsx("p",{children:' "Deploying sink connector"'}),s.jsx("p",{children:' "Sink deployment failed"'}),s.jsx("p",{children:' "Rolling back source connector due to sink failure"'}),s.jsx("p",{children:' "Source connector rolled back"'})]})]})]})})})}function Kae(){const e=xr(),t=e.pathname.match(/^\/admin\/users\/[^/]+$/),r=e.pathname==="/admin/alerts";return s.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(j9,{}),s.jsxs("div",{className:"flex-1 flex flex-col ml-[72px]",children:[!r&&s.jsx(S9,{}),s.jsx("div",{className:`flex-1 ${t?"overflow-hidden":"overflow-auto"}`,children:s.jsxs(Hb,{children:[s.jsx(dt,{path:"/",element:s.jsx(Wb,{to:"/pipelines",replace:!0})}),s.jsx(dt,{path:"/pipelines",element:s.jsx(z9,{})}),s.jsx(dt,{path:"/pipelines/new/*",element:s.jsx(z2,{})}),s.jsx(dt,{path:"/wizard/:pipelineId/*",element:s.jsx(z2,{})}),s.jsx(dt,{path:"/pipelines/:id",element:s.jsx(uae,{})}),s.jsx(dt,{path:"/models",element:s.jsx(hae,{})}),s.jsx(dt,{path:"/destinations",element:s.jsx(mae,{})}),s.jsx(dt,{path:"/monitoring",element:s.jsx(xae,{})}),s.jsx(dt,{path:"/docs",element:s.jsx(vae,{})}),s.jsx(dt,{path:"/admin",element:s.jsx(nd,{requiredRole:"admin",children:s.jsx(_ae,{})})}),s.jsx(dt,{path:"/admin/alerts",element:s.jsx(nd,{requiredRole:"admin",children:s.jsx(Oae,{})})}),s.jsx(dt,{path:"/admin/users",element:s.jsx(nd,{requiredRole:"admin",children:s.jsx(kae,{})})}),s.jsx(dt,{path:"/admin/users/:userId",element:s.jsx(nd,{requiredRole:"admin",children:s.jsx(Nae,{})})}),s.jsx(dt,{path:"/admin/activity-logs",element:s.jsx(Sae,{})}),s.jsx(dt,{path:"/test-rollback",element:s.jsx(Vae,{})})]})})]})]})}function Gae(){return s.jsx(g9,{children:s.jsxs(Hb,{children:[s.jsx(dt,{path:"/login",element:s.jsx(bae,{})}),s.jsx(dt,{path:"/signup",element:s.jsx(wae,{})}),s.jsx(dt,{path:"/*",element:s.jsx(nd,{children:s.jsx(Kae,{})})})]})})}function Qae(){const{showToast:e}=Er(),t=m.useRef(null),r=m.useRef(new Set);m.useEffect(()=>{const n=async()=>{try{const{data:a,error:i}=await ne.from("pipelines").select("id, name, schedule_config, status").eq("status","ready").not("schedule_config","is",null);if(i)throw i;if(!a)return;const o=new Date;for(const l of a){if(!l.schedule_config)continue;const c=l.schedule_config;let d=!1,u=0;if(c.type==="preset"){const h=c.value||"6h";h==="30m"?u=30:h==="1h"?u=60:h==="2h"?u=120:h==="3h"?u=180:h==="6h"?u=360:h==="8h"?u=480:h==="12h"?u=720:h==="24h"&&(u=1440)}else if(c.type==="interval")u=(c.hours||6)*60;else if(c.type==="daily"){const h=c.times||["00:00"],f=`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`;for(const g of h){const[p,y]=g.split(":").map(Number),x=o.getHours()*60+o.getMinutes(),v=p*60+y;if(Math.abs(x-v)<1){d=!0;break}}}if(c.type==="preset"||c.type==="interval")if(c.lastRun){const h=new Date(c.lastRun);(o.getTime()-h.getTime())/(1e3*60)>=u&&(d=!0)}else d=!0;d&&!r.current.has(l.id)&&(e("info",`Pipeline "${l.name}" is scheduled to run`,"Starting data ingestion..."),r.current.add(l.id),await ne.from("pipelines").update({schedule_config:{...c,lastRun:o.toISOString(),nextRun:new Date(o.getTime()+u*60*1e3).toISOString()}}).eq("id",l.id),setTimeout(()=>{r.current.delete(l.id)},6e4))}}catch(a){console.error("Schedule check error:",a)}};return n(),t.current=setInterval(n,3e4),()=>{t.current&&clearInterval(t.current)}},[e])}function Yae(){return Qae(),s.jsx(Gae,{})}function Xae(){return s.jsx(uL,{children:s.jsx($L,{children:s.jsx(r7,{children:s.jsx(Yae,{})})})})}const Jae=new JM({defaultOptions:{queries:{staleTime:5e3,refetchOnWindowFocus:!1,retry:1}}});cE(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(ZM,{client:Jae,children:s.jsx(Xae,{})})}));
