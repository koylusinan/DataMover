var D0=e=>{throw TypeError(e)};var cc=(e,t,s)=>t.has(e)||D0("Cannot "+s);var T=(e,t,s)=>(cc(e,t,"read from private field"),s?s.call(e):t.get(e)),he=(e,t,s)=>t.has(e)?D0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),re=(e,t,s,a)=>(cc(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),we=(e,t,s)=>(cc(e,t,"access private method"),s);var fl=(e,t,s,a)=>({set _(n){re(e,t,n,s)},get _(){return T(e,t,a)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),s}var Kg={exports:{}},Ro={},Jg={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),jx=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),_x=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),Cx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),Tx=Symbol.for("react.forward_ref"),Px=Symbol.for("react.suspense"),Ax=Symbol.for("react.memo"),Rx=Symbol.for("react.lazy"),O0=Symbol.iterator;function Lx(e){return e===null||typeof e!="object"?null:(e=O0&&e[O0]||e["@@iterator"],typeof e=="function"?e:null)}var Yg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xg=Object.assign,Zg={};function $n(e,t,s){this.props=e,this.context=t,this.refs=Zg,this.updater=s||Yg}$n.prototype.isReactComponent={};$n.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function em(){}em.prototype=$n.prototype;function bu(e,t,s){this.props=e,this.context=t,this.refs=Zg,this.updater=s||Yg}var vu=bu.prototype=new em;vu.constructor=bu;Xg(vu,$n.prototype);vu.isPureReactComponent=!0;var $0=Array.isArray,tm=Object.prototype.hasOwnProperty,ku={current:null},rm={key:!0,ref:!0,__self:!0,__source:!0};function sm(e,t,s){var a,n={},i=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)tm.call(t,a)&&!rm.hasOwnProperty(a)&&(n[a]=t[a]);var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(a in o=e.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:tl,type:e,key:i,ref:l,props:n,_owner:ku.current}}function Dx(e,t){return{$$typeof:tl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wu(e){return typeof e=="object"&&e!==null&&e.$$typeof===tl}function Ox(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var I0=/\/+/g;function dc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ox(""+e.key):t.toString(36)}function Bl(e,t,s,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case tl:case jx:l=!0}}if(l)return l=e,n=n(l),e=a===""?"."+dc(l,0):a,$0(n)?(s="",e!=null&&(s=e.replace(I0,"$&/")+"/"),Bl(n,t,s,"",function(d){return d})):n!=null&&(wu(n)&&(n=Dx(n,s+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(I0,"$&/")+"/")+e)),t.push(n)),1;if(l=0,a=a===""?".":a+":",$0(e))for(var o=0;o<e.length;o++){i=e[o];var c=a+dc(i,o);l+=Bl(i,t,s,c,n)}else if(c=Lx(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=a+dc(i,o++),l+=Bl(i,t,s,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function pl(e,t,s){if(e==null)return e;var a=[],n=0;return Bl(e,a,"","",function(i){return t.call(s,i,n++)}),a}function $x(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lt={current:null},ql={transition:null},Ix={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:ku};function am(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:pl,forEach:function(e,t,s){pl(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return pl(e,function(){t++}),t},toArray:function(e){return pl(e,function(t){return t})||[]},only:function(e){if(!wu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=$n;ke.Fragment=Nx;ke.Profiler=Sx;ke.PureComponent=bu;ke.StrictMode=_x;ke.Suspense=Px;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ix;ke.act=am;ke.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=Xg({},e.props),n=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=ku.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)tm.call(t,c)&&!rm.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:tl,type:e.type,key:n,ref:i,props:a,_owner:l}};ke.createContext=function(e){return e={$$typeof:Ex,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cx,_context:e},e.Consumer=e};ke.createElement=sm;ke.createFactory=function(e){var t=sm.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:Tx,render:e}};ke.isValidElement=wu;ke.lazy=function(e){return{$$typeof:Rx,_payload:{_status:-1,_result:e},_init:$x}};ke.memo=function(e,t){return{$$typeof:Ax,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=ql.transition;ql.transition={};try{e()}finally{ql.transition=t}};ke.unstable_act=am;ke.useCallback=function(e,t){return Lt.current.useCallback(e,t)};ke.useContext=function(e){return Lt.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return Lt.current.useDeferredValue(e)};ke.useEffect=function(e,t){return Lt.current.useEffect(e,t)};ke.useId=function(){return Lt.current.useId()};ke.useImperativeHandle=function(e,t,s){return Lt.current.useImperativeHandle(e,t,s)};ke.useInsertionEffect=function(e,t){return Lt.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return Lt.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return Lt.current.useMemo(e,t)};ke.useReducer=function(e,t,s){return Lt.current.useReducer(e,t,s)};ke.useRef=function(e){return Lt.current.useRef(e)};ke.useState=function(e){return Lt.current.useState(e)};ke.useSyncExternalStore=function(e,t,s){return Lt.current.useSyncExternalStore(e,t,s)};ke.useTransition=function(){return Lt.current.useTransition()};ke.version="18.3.1";Jg.exports=ke;var p=Jg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=p,Fx=Symbol.for("react.element"),Ux=Symbol.for("react.fragment"),zx=Object.prototype.hasOwnProperty,Bx=Mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qx={key:!0,ref:!0,__self:!0,__source:!0};function nm(e,t,s){var a,n={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)zx.call(t,a)&&!qx.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Fx,type:e,key:i,ref:l,props:n,_owner:Bx.current}}Ro.Fragment=Ux;Ro.jsx=nm;Ro.jsxs=nm;Kg.exports=Ro;var r=Kg.exports,im={exports:{}},Jt={},lm={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,M){var D=C.length;C.push(M);e:for(;0<D;){var B=D-1>>>1,W=C[B];if(0<n(W,M))C[B]=M,C[D]=W,D=B;else break e}}function s(C){return C.length===0?null:C[0]}function a(C){if(C.length===0)return null;var M=C[0],D=C.pop();if(D!==M){C[0]=D;e:for(var B=0,W=C.length,ie=W>>>1;B<ie;){var te=2*(B+1)-1,pe=C[te],K=te+1,ae=C[K];if(0>n(pe,D))K<W&&0>n(ae,pe)?(C[B]=ae,C[K]=D,B=K):(C[B]=pe,C[te]=D,B=te);else if(K<W&&0>n(ae,D))C[B]=ae,C[K]=D,B=K;else break e}}return M}function n(C,M){var D=C.sortIndex-M.sortIndex;return D!==0?D:C.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,g=3,f=!1,x=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(C){for(var M=s(d);M!==null;){if(M.callback===null)a(d);else if(M.startTime<=C)a(d),M.sortIndex=M.expirationTime,t(c,M);else break;M=s(d)}}function k(C){if(w=!1,m(C),!x)if(s(c)!==null)x=!0,q(N);else{var M=s(d);M!==null&&$(k,M.startTime-C)}}function N(C,M){x=!1,w&&(w=!1,y(P),P=-1),f=!0;var D=g;try{for(m(M),h=s(c);h!==null&&(!(h.expirationTime>M)||C&&!E());){var B=h.callback;if(typeof B=="function"){h.callback=null,g=h.priorityLevel;var W=B(h.expirationTime<=M);M=e.unstable_now(),typeof W=="function"?h.callback=W:h===s(c)&&a(c),m(M)}else a(c);h=s(c)}if(h!==null)var ie=!0;else{var te=s(d);te!==null&&$(k,te.startTime-M),ie=!1}return ie}finally{h=null,g=D,f=!1}}var S=!1,_=null,P=-1,A=5,R=-1;function E(){return!(e.unstable_now()-R<A)}function Y(){if(_!==null){var C=e.unstable_now();R=C;var M=!0;try{M=_(!0,C)}finally{M?L():(S=!1,_=null)}}else S=!1}var L;if(typeof b=="function")L=function(){b(Y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,O=U.port2;U.port1.onmessage=Y,L=function(){O.postMessage(null)}}else L=function(){v(Y,0)};function q(C){_=C,S||(S=!0,L())}function $(C,M){P=v(function(){C(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){x||f||(x=!0,q(N))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(C){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var D=g;g=M;try{return C()}finally{g=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,M){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var D=g;g=C;try{return M()}finally{g=D}},e.unstable_scheduleCallback=function(C,M,D){var B=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,C){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,C={id:u++,callback:M,priorityLevel:C,startTime:D,expirationTime:W,sortIndex:-1},D>B?(C.sortIndex=D,t(d,C),s(c)===null&&C===s(d)&&(w?(y(P),P=-1):w=!0,$(k,D-B))):(C.sortIndex=W,t(c,C),x||f||(x=!0,q(N))),C},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(C){var M=g;return function(){var D=g;g=M;try{return C.apply(this,arguments)}finally{g=D}}}})(om);lm.exports=om;var Hx=lm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=p,Kt=Hx;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cm=new Set,Ci={};function Da(e,t){Cn(e,t),Cn(e+"Capture",t)}function Cn(e,t){for(Ci[e]=t,e=0;e<t.length;e++)cm.add(t[e])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gc=Object.prototype.hasOwnProperty,Wx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M0={},F0={};function Gx(e){return Gc.call(F0,e)?!0:Gc.call(M0,e)?!1:Wx.test(e)?F0[e]=!0:(M0[e]=!0,!1)}function Qx(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kx(e,t,s,a){if(t===null||typeof t>"u"||Qx(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dt(e,t,s,a,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ju=/[\-:]([a-z])/g;function Nu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ju,Nu);yt[t]=new Dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ju,Nu);yt[t]=new Dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ju,Nu);yt[t]=new Dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function _u(e,t,s,a){var n=yt.hasOwnProperty(t)?yt[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kx(t,s,n,a)&&(s=null),a||n===null?Gx(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=s===null?n.type===3?!1:"":s:(t=n.attributeName,a=n.attributeNamespace,s===null?e.removeAttribute(t):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var cs=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Ja=Symbol.for("react.fragment"),Su=Symbol.for("react.strict_mode"),Qc=Symbol.for("react.profiler"),dm=Symbol.for("react.provider"),um=Symbol.for("react.context"),Cu=Symbol.for("react.forward_ref"),Kc=Symbol.for("react.suspense"),Jc=Symbol.for("react.suspense_list"),Eu=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),hm=Symbol.for("react.offscreen"),U0=Symbol.iterator;function Qn(e){return e===null||typeof e!="object"?null:(e=U0&&e[U0]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Object.assign,uc;function ni(e){if(uc===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);uc=t&&t[1]||""}return`
`+uc+e}var hc=!1;function gc(e,t){if(!e||hc)return"";hc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{hc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?ni(e):""}function Jx(e){switch(e.tag){case 5:return ni(e.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 2:case 15:return e=gc(e.type,!1),e;case 11:return e=gc(e.type.render,!1),e;case 1:return e=gc(e.type,!0),e;default:return""}}function Yc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ja:return"Fragment";case Ka:return"Portal";case Qc:return"Profiler";case Su:return"StrictMode";case Kc:return"Suspense";case Jc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case um:return(e.displayName||"Context")+".Consumer";case dm:return(e._context.displayName||"Context")+".Provider";case Cu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Eu:return t=e.displayName||null,t!==null?t:Yc(e.type)||"Memo";case xs:t=e._payload,e=e._init;try{return Yc(e(t))}catch{}}return null}function Yx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yc(t);case 8:return t===Su?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xx(e){var t=gm(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yl(e){e._valueTracker||(e._valueTracker=Xx(e))}function mm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=gm(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function ro(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xc(e,t){var s=t.checked;return Je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function z0(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=Gs(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fm(e,t){t=t.checked,t!=null&&_u(e,"checked",t,!1)}function Zc(e,t){fm(e,t);var s=Gs(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ed(e,t.type,s):t.hasOwnProperty("defaultValue")&&ed(e,t.type,Gs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function B0(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ed(e,t,s){(t!=="number"||ro(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var ii=Array.isArray;function cn(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Gs(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function td(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function q0(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(G(92));if(ii(s)){if(1<s.length)throw Error(G(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Gs(s)}}function pm(e,t){var s=Gs(t.value),a=Gs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function H0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bl,ym=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bl=bl||document.createElement("div"),bl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ei(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zx=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(e){Zx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fi[t]=fi[e]})});function bm(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||fi.hasOwnProperty(e)&&fi[e]?(""+t).trim():t+"px"}function vm(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=bm(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,n):e[s]=n}}var ey=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sd(e,t){if(t){if(ey[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function ad(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nd=null;function Tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var id=null,dn=null,un=null;function V0(e){if(e=al(e)){if(typeof id!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Io(t),id(e.stateNode,e.type,t))}}function km(e){dn?un?un.push(e):un=[e]:dn=e}function wm(){if(dn){var e=dn,t=un;if(un=dn=null,V0(e),t)for(e=0;e<t.length;e++)V0(t[e])}}function jm(e,t){return e(t)}function Nm(){}var mc=!1;function _m(e,t,s){if(mc)return e(t,s);mc=!0;try{return jm(e,t,s)}finally{mc=!1,(dn!==null||un!==null)&&(Nm(),wm())}}function Ti(e,t){var s=e.stateNode;if(s===null)return null;var a=Io(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(G(231,t,typeof s));return s}var ld=!1;if(as)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){ld=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{ld=!1}function ty(e,t,s,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var pi=!1,so=null,ao=!1,od=null,ry={onError:function(e){pi=!0,so=e}};function sy(e,t,s,a,n,i,l,o,c){pi=!1,so=null,ty.apply(ry,arguments)}function ay(e,t,s,a,n,i,l,o,c){if(sy.apply(this,arguments),pi){if(pi){var d=so;pi=!1,so=null}else throw Error(G(198));ao||(ao=!0,od=d)}}function Oa(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Sm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function W0(e){if(Oa(e)!==e)throw Error(G(188))}function ny(e){var t=e.alternate;if(!t){if(t=Oa(e),t===null)throw Error(G(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===s)return W0(n),e;if(i===a)return W0(n),t;i=i.sibling}throw Error(G(188))}if(s.return!==a.return)s=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===s){l=!0,s=n,a=i;break}if(o===a){l=!0,a=n,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,a=n;break}if(o===a){l=!0,a=i,s=n;break}o=o.sibling}if(!l)throw Error(G(189))}}if(s.alternate!==a)throw Error(G(190))}if(s.tag!==3)throw Error(G(188));return s.stateNode.current===s?e:t}function Cm(e){return e=ny(e),e!==null?Em(e):null}function Em(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Em(e);if(t!==null)return t;e=e.sibling}return null}var Tm=Kt.unstable_scheduleCallback,G0=Kt.unstable_cancelCallback,iy=Kt.unstable_shouldYield,ly=Kt.unstable_requestPaint,rt=Kt.unstable_now,oy=Kt.unstable_getCurrentPriorityLevel,Pu=Kt.unstable_ImmediatePriority,Pm=Kt.unstable_UserBlockingPriority,no=Kt.unstable_NormalPriority,cy=Kt.unstable_LowPriority,Am=Kt.unstable_IdlePriority,Lo=null,zr=null;function dy(e){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Lo,e,void 0,(e.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:gy,uy=Math.log,hy=Math.LN2;function gy(e){return e>>>=0,e===0?32:31-(uy(e)/hy|0)|0}var vl=64,kl=4194304;function li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function io(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,n=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var o=l&~n;o!==0?a=li(o):(i&=l,i!==0&&(a=li(i)))}else l=s&~n,l!==0?a=li(l):i!==0&&(a=li(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-yr(t),n=1<<s,a|=e[s],t&=~n;return a}function my(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fy(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-yr(i),o=1<<l,c=n[l];c===-1?(!(o&s)||o&a)&&(n[l]=my(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function cd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rm(){var e=vl;return vl<<=1,!(vl&4194240)&&(vl=64),e}function fc(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function rl(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yr(t),e[t]=s}function py(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-yr(s),i=1<<n;t[n]=0,a[n]=-1,e[n]=-1,s&=~i}}function Au(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-yr(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}var De=0;function Lm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Dm,Ru,Om,$m,Im,dd=!1,wl=[],Ds=null,Os=null,$s=null,Pi=new Map,Ai=new Map,bs=[],xy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q0(e,t){switch(e){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(t.pointerId)}}function Jn(e,t,s,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=al(t),t!==null&&Ru(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function yy(e,t,s,a,n){switch(t){case"focusin":return Ds=Jn(Ds,e,t,s,a,n),!0;case"dragenter":return Os=Jn(Os,e,t,s,a,n),!0;case"mouseover":return $s=Jn($s,e,t,s,a,n),!0;case"pointerover":var i=n.pointerId;return Pi.set(i,Jn(Pi.get(i)||null,e,t,s,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Ai.set(i,Jn(Ai.get(i)||null,e,t,s,a,n)),!0}return!1}function Mm(e){var t=ca(e.target);if(t!==null){var s=Oa(t);if(s!==null){if(t=s.tag,t===13){if(t=Sm(s),t!==null){e.blockedOn=t,Im(e.priority,function(){Om(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=ud(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);nd=a,s.target.dispatchEvent(a),nd=null}else return t=al(s),t!==null&&Ru(t),e.blockedOn=s,!1;t.shift()}return!0}function K0(e,t,s){Hl(e)&&s.delete(t)}function by(){dd=!1,Ds!==null&&Hl(Ds)&&(Ds=null),Os!==null&&Hl(Os)&&(Os=null),$s!==null&&Hl($s)&&($s=null),Pi.forEach(K0),Ai.forEach(K0)}function Yn(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,by)))}function Ri(e){function t(n){return Yn(n,e)}if(0<wl.length){Yn(wl[0],e);for(var s=1;s<wl.length;s++){var a=wl[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Ds!==null&&Yn(Ds,e),Os!==null&&Yn(Os,e),$s!==null&&Yn($s,e),Pi.forEach(t),Ai.forEach(t),s=0;s<bs.length;s++)a=bs[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<bs.length&&(s=bs[0],s.blockedOn===null);)Mm(s),s.blockedOn===null&&bs.shift()}var hn=cs.ReactCurrentBatchConfig,lo=!0;function vy(e,t,s,a){var n=De,i=hn.transition;hn.transition=null;try{De=1,Lu(e,t,s,a)}finally{De=n,hn.transition=i}}function ky(e,t,s,a){var n=De,i=hn.transition;hn.transition=null;try{De=4,Lu(e,t,s,a)}finally{De=n,hn.transition=i}}function Lu(e,t,s,a){if(lo){var n=ud(e,t,s,a);if(n===null)_c(e,t,a,oo,s),Q0(e,a);else if(yy(n,e,t,s,a))a.stopPropagation();else if(Q0(e,a),t&4&&-1<xy.indexOf(e)){for(;n!==null;){var i=al(n);if(i!==null&&Dm(i),i=ud(e,t,s,a),i===null&&_c(e,t,a,oo,s),i===n)break;n=i}n!==null&&a.stopPropagation()}else _c(e,t,a,null,s)}}var oo=null;function ud(e,t,s,a){if(oo=null,e=Tu(a),e=ca(e),e!==null)if(t=Oa(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Sm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return oo=e,null}function Fm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oy()){case Pu:return 1;case Pm:return 4;case no:case cy:return 16;case Am:return 536870912;default:return 16}default:return 16}}var Ps=null,Du=null,Vl=null;function Um(){if(Vl)return Vl;var e,t=Du,s=t.length,a,n="value"in Ps?Ps.value:Ps.textContent,i=n.length;for(e=0;e<s&&t[e]===n[e];e++);var l=s-e;for(a=1;a<=l&&t[s-a]===n[i-a];a++);return Vl=n.slice(e,1<a?1-a:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function J0(){return!1}function Yt(e){function t(s,a,n,i,l){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(s=e[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:J0,this.isPropagationStopped=J0,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=Yt(In),sl=Je({},In,{view:0,detail:0}),wy=Yt(sl),pc,xc,Xn,Do=Je({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$u,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&e.type==="mousemove"?(pc=e.screenX-Xn.screenX,xc=e.screenY-Xn.screenY):xc=pc=0,Xn=e),pc)},movementY:function(e){return"movementY"in e?e.movementY:xc}}),Y0=Yt(Do),jy=Je({},Do,{dataTransfer:0}),Ny=Yt(jy),_y=Je({},sl,{relatedTarget:0}),yc=Yt(_y),Sy=Je({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Cy=Yt(Sy),Ey=Je({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ty=Yt(Ey),Py=Je({},In,{data:0}),X0=Yt(Py),Ay={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ry={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ly[e])?!!t[e]:!1}function $u(){return Dy}var Oy=Je({},sl,{key:function(e){if(e.key){var t=Ay[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ry[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$u,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$y=Yt(Oy),Iy=Je({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z0=Yt(Iy),My=Je({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$u}),Fy=Yt(My),Uy=Je({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),zy=Yt(Uy),By=Je({},Do,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=Yt(By),Hy=[9,13,27,32],Iu=as&&"CompositionEvent"in window,xi=null;as&&"documentMode"in document&&(xi=document.documentMode);var Vy=as&&"TextEvent"in window&&!xi,zm=as&&(!Iu||xi&&8<xi&&11>=xi),eh=" ",th=!1;function Bm(e,t){switch(e){case"keyup":return Hy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function Wy(e,t){switch(e){case"compositionend":return qm(t);case"keypress":return t.which!==32?null:(th=!0,eh);case"textInput":return e=t.data,e===eh&&th?null:e;default:return null}}function Gy(e,t){if(Ya)return e==="compositionend"||!Iu&&Bm(e,t)?(e=Um(),Vl=Du=Ps=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zm&&t.locale!=="ko"?null:t.data;default:return null}}var Qy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qy[e.type]:t==="textarea"}function Hm(e,t,s,a){km(a),t=co(t,"onChange"),0<t.length&&(s=new Ou("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var yi=null,Li=null;function Ky(e){tf(e,0)}function Oo(e){var t=en(e);if(mm(t))return e}function Jy(e,t){if(e==="change")return t}var Vm=!1;if(as){var bc;if(as){var vc="oninput"in document;if(!vc){var sh=document.createElement("div");sh.setAttribute("oninput","return;"),vc=typeof sh.oninput=="function"}bc=vc}else bc=!1;Vm=bc&&(!document.documentMode||9<document.documentMode)}function ah(){yi&&(yi.detachEvent("onpropertychange",Wm),Li=yi=null)}function Wm(e){if(e.propertyName==="value"&&Oo(Li)){var t=[];Hm(t,Li,e,Tu(e)),_m(Ky,t)}}function Yy(e,t,s){e==="focusin"?(ah(),yi=t,Li=s,yi.attachEvent("onpropertychange",Wm)):e==="focusout"&&ah()}function Xy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oo(Li)}function Zy(e,t){if(e==="click")return Oo(t)}function eb(e,t){if(e==="input"||e==="change")return Oo(t)}function tb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wr=typeof Object.is=="function"?Object.is:tb;function Di(e,t){if(wr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!Gc.call(t,n)||!wr(e[n],t[n]))return!1}return!0}function nh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ih(e,t){var s=nh(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=nh(s)}}function Gm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qm(){for(var e=window,t=ro();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ro(e.document)}return t}function Mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rb(e){var t=Qm(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Gm(s.ownerDocument.documentElement,s)){if(a!==null&&Mu(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=s.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!e.extend&&i>a&&(n=a,a=i,i=n),n=ih(s,i);var l=ih(s,a);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sb=as&&"documentMode"in document&&11>=document.documentMode,Xa=null,hd=null,bi=null,gd=!1;function lh(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;gd||Xa==null||Xa!==ro(a)||(a=Xa,"selectionStart"in a&&Mu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),bi&&Di(bi,a)||(bi=a,a=co(hd,"onSelect"),0<a.length&&(t=new Ou("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Xa)))}function Nl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Za={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},kc={},Km={};as&&(Km=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function $o(e){if(kc[e])return kc[e];if(!Za[e])return e;var t=Za[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Km)return kc[e]=t[s];return e}var Jm=$o("animationend"),Ym=$o("animationiteration"),Xm=$o("animationstart"),Zm=$o("transitionend"),ef=new Map,oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(e,t){ef.set(e,t),Da(t,[e])}for(var wc=0;wc<oh.length;wc++){var jc=oh[wc],ab=jc.toLowerCase(),nb=jc[0].toUpperCase()+jc.slice(1);Ys(ab,"on"+nb)}Ys(Jm,"onAnimationEnd");Ys(Ym,"onAnimationIteration");Ys(Xm,"onAnimationStart");Ys("dblclick","onDoubleClick");Ys("focusin","onFocus");Ys("focusout","onBlur");Ys(Zm,"onTransitionEnd");Cn("onMouseEnter",["mouseout","mouseover"]);Cn("onMouseLeave",["mouseout","mouseover"]);Cn("onPointerEnter",["pointerout","pointerover"]);Cn("onPointerLeave",["pointerout","pointerover"]);Da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Da("onBeforeInput",["compositionend","keypress","textInput","paste"]);Da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ib=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function ch(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,ay(a,t,void 0,e),e.currentTarget=null}function tf(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;ch(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;ch(n,o,d),i=c}}}if(ao)throw e=od,ao=!1,od=null,e}function ze(e,t){var s=t[yd];s===void 0&&(s=t[yd]=new Set);var a=e+"__bubble";s.has(a)||(rf(t,e,2,!1),s.add(a))}function Nc(e,t,s){var a=0;t&&(a|=4),rf(s,e,a,t)}var _l="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){if(!e[_l]){e[_l]=!0,cm.forEach(function(s){s!=="selectionchange"&&(ib.has(s)||Nc(s,!1,e),Nc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_l]||(t[_l]=!0,Nc("selectionchange",!1,t))}}function rf(e,t,s,a){switch(Fm(t)){case 1:var n=vy;break;case 4:n=ky;break;default:n=Lu}s=n.bind(null,t,s,e),n=void 0,!ld||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function _c(e,t,s,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=ca(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}_m(function(){var d=i,u=Tu(s),h=[];e:{var g=ef.get(e);if(g!==void 0){var f=Ou,x=e;switch(e){case"keypress":if(Wl(s)===0)break e;case"keydown":case"keyup":f=$y;break;case"focusin":x="focus",f=yc;break;case"focusout":x="blur",f=yc;break;case"beforeblur":case"afterblur":f=yc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Ny;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Fy;break;case Jm:case Ym:case Xm:f=Cy;break;case Zm:f=zy;break;case"scroll":f=wy;break;case"wheel":f=qy;break;case"copy":case"cut":case"paste":f=Ty;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Z0}var w=(t&4)!==0,v=!w&&e==="scroll",y=w?g!==null?g+"Capture":null:g;w=[];for(var b=d,m;b!==null;){m=b;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,y!==null&&(k=Ti(b,y),k!=null&&w.push($i(b,k,m)))),v)break;b=b.return}0<w.length&&(g=new f(g,x,null,s,u),h.push({event:g,listeners:w}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",g&&s!==nd&&(x=s.relatedTarget||s.fromElement)&&(ca(x)||x[ns]))break e;if((f||g)&&(g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window,f?(x=s.relatedTarget||s.toElement,f=d,x=x?ca(x):null,x!==null&&(v=Oa(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=d),f!==x)){if(w=Y0,k="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(w=Z0,k="onPointerLeave",y="onPointerEnter",b="pointer"),v=f==null?g:en(f),m=x==null?g:en(x),g=new w(k,b+"leave",f,s,u),g.target=v,g.relatedTarget=m,k=null,ca(u)===d&&(w=new w(y,b+"enter",x,s,u),w.target=m,w.relatedTarget=v,k=w),v=k,f&&x)t:{for(w=f,y=x,b=0,m=w;m;m=Ua(m))b++;for(m=0,k=y;k;k=Ua(k))m++;for(;0<b-m;)w=Ua(w),b--;for(;0<m-b;)y=Ua(y),m--;for(;b--;){if(w===y||y!==null&&w===y.alternate)break t;w=Ua(w),y=Ua(y)}w=null}else w=null;f!==null&&dh(h,g,f,w,!1),x!==null&&v!==null&&dh(h,v,x,w,!0)}}e:{if(g=d?en(d):window,f=g.nodeName&&g.nodeName.toLowerCase(),f==="select"||f==="input"&&g.type==="file")var N=Jy;else if(rh(g))if(Vm)N=eb;else{N=Xy;var S=Yy}else(f=g.nodeName)&&f.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=Zy);if(N&&(N=N(e,d))){Hm(h,N,s,u);break e}S&&S(e,g,d),e==="focusout"&&(S=g._wrapperState)&&S.controlled&&g.type==="number"&&ed(g,"number",g.value)}switch(S=d?en(d):window,e){case"focusin":(rh(S)||S.contentEditable==="true")&&(Xa=S,hd=d,bi=null);break;case"focusout":bi=hd=Xa=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,lh(h,s,u);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":lh(h,s,u)}var _;if(Iu)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ya?Bm(e,s)&&(P="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(P="onCompositionStart");P&&(zm&&s.locale!=="ko"&&(Ya||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ya&&(_=Um()):(Ps=u,Du="value"in Ps?Ps.value:Ps.textContent,Ya=!0)),S=co(d,P),0<S.length&&(P=new X0(P,e,null,s,u),h.push({event:P,listeners:S}),_?P.data=_:(_=qm(s),_!==null&&(P.data=_)))),(_=Vy?Wy(e,s):Gy(e,s))&&(d=co(d,"onBeforeInput"),0<d.length&&(u=new X0("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=_))}tf(h,t)})}function $i(e,t,s){return{instance:e,listener:t,currentTarget:s}}function co(e,t){for(var s=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Ti(e,s),i!=null&&a.unshift($i(e,i,n)),i=Ti(e,t),i!=null&&a.push($i(e,i,n))),e=e.return}return a}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dh(e,t,s,a,n){for(var i=t._reactName,l=[];s!==null&&s!==a;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=Ti(s,i),c!=null&&l.unshift($i(s,c,o))):n||(c=Ti(s,i),c!=null&&l.push($i(s,c,o)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var lb=/\r\n?/g,ob=/\u0000|\uFFFD/g;function uh(e){return(typeof e=="string"?e:""+e).replace(lb,`
`).replace(ob,"")}function Sl(e,t,s){if(t=uh(t),uh(e)!==t&&s)throw Error(G(425))}function uo(){}var md=null,fd=null;function pd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,cb=typeof clearTimeout=="function"?clearTimeout:void 0,hh=typeof Promise=="function"?Promise:void 0,db=typeof queueMicrotask=="function"?queueMicrotask:typeof hh<"u"?function(e){return hh.resolve(null).then(e).catch(ub)}:xd;function ub(e){setTimeout(function(){throw e})}function Sc(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){e.removeChild(n),Ri(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);Ri(t)}function Is(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Mn=Math.random().toString(36).slice(2),Ir="__reactFiber$"+Mn,Ii="__reactProps$"+Mn,ns="__reactContainer$"+Mn,yd="__reactEvents$"+Mn,hb="__reactListeners$"+Mn,gb="__reactHandles$"+Mn;function ca(e){var t=e[Ir];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ns]||s[Ir]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=gh(e);e!==null;){if(s=e[Ir])return s;e=gh(e)}return t}e=s,s=e.parentNode}return null}function al(e){return e=e[Ir]||e[ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function en(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Io(e){return e[Ii]||null}var bd=[],tn=-1;function Xs(e){return{current:e}}function Be(e){0>tn||(e.current=bd[tn],bd[tn]=null,tn--)}function Fe(e,t){tn++,bd[tn]=e.current,e.current=t}var Qs={},_t=Xs(Qs),Ut=Xs(!1),Ca=Qs;function En(e,t){var s=e.type.contextTypes;if(!s)return Qs;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in s)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function zt(e){return e=e.childContextTypes,e!=null}function ho(){Be(Ut),Be(_t)}function mh(e,t,s){if(_t.current!==Qs)throw Error(G(168));Fe(_t,t),Fe(Ut,s)}function sf(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(G(108,Yx(e)||"Unknown",n));return Je({},s,a)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qs,Ca=_t.current,Fe(_t,e),Fe(Ut,Ut.current),!0}function fh(e,t,s){var a=e.stateNode;if(!a)throw Error(G(169));s?(e=sf(e,t,Ca),a.__reactInternalMemoizedMergedChildContext=e,Be(Ut),Be(_t),Fe(_t,e)):Be(Ut),Fe(Ut,s)}var Jr=null,Mo=!1,Cc=!1;function af(e){Jr===null?Jr=[e]:Jr.push(e)}function mb(e){Mo=!0,af(e)}function Zs(){if(!Cc&&Jr!==null){Cc=!0;var e=0,t=De;try{var s=Jr;for(De=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}Jr=null,Mo=!1}catch(n){throw Jr!==null&&(Jr=Jr.slice(e+1)),Tm(Pu,Zs),n}finally{De=t,Cc=!1}}return null}var rn=[],sn=0,mo=null,fo=0,er=[],tr=0,Ea=null,Zr=1,es="";function na(e,t){rn[sn++]=fo,rn[sn++]=mo,mo=e,fo=t}function nf(e,t,s){er[tr++]=Zr,er[tr++]=es,er[tr++]=Ea,Ea=e;var a=Zr;e=es;var n=32-yr(a)-1;a&=~(1<<n),s+=1;var i=32-yr(t)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,Zr=1<<32-yr(t)+n|s<<n|a,es=i+e}else Zr=1<<i|s<<n|a,es=e}function Fu(e){e.return!==null&&(na(e,1),nf(e,1,0))}function Uu(e){for(;e===mo;)mo=rn[--sn],rn[sn]=null,fo=rn[--sn],rn[sn]=null;for(;e===Ea;)Ea=er[--tr],er[tr]=null,es=er[--tr],er[tr]=null,Zr=er[--tr],er[tr]=null}var Qt=null,Gt=null,qe=!1,xr=null;function lf(e,t){var s=sr(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ph(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Gt=Is(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Ea!==null?{id:Zr,overflow:es}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=sr(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Qt=e,Gt=null,!0):!1;default:return!1}}function vd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function kd(e){if(qe){var t=Gt;if(t){var s=t;if(!ph(e,t)){if(vd(e))throw Error(G(418));t=Is(s.nextSibling);var a=Qt;t&&ph(e,t)?lf(a,s):(e.flags=e.flags&-4097|2,qe=!1,Qt=e)}}else{if(vd(e))throw Error(G(418));e.flags=e.flags&-4097|2,qe=!1,Qt=e}}}function xh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function Cl(e){if(e!==Qt)return!1;if(!qe)return xh(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pd(e.type,e.memoizedProps)),t&&(t=Gt)){if(vd(e))throw of(),Error(G(418));for(;t;)lf(e,t),t=Is(t.nextSibling)}if(xh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Gt=Is(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Qt?Is(e.stateNode.nextSibling):null;return!0}function of(){for(var e=Gt;e;)e=Is(e.nextSibling)}function Tn(){Gt=Qt=null,qe=!1}function zu(e){xr===null?xr=[e]:xr.push(e)}var fb=cs.ReactCurrentBatchConfig;function Zn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(G(309));var a=s.stateNode}if(!a)throw Error(G(147,e));var n=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!s._owner)throw Error(G(290,e))}return e}function El(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yh(e){var t=e._init;return t(e._payload)}function cf(e){function t(y,b){if(e){var m=y.deletions;m===null?(y.deletions=[b],y.flags|=16):m.push(b)}}function s(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function a(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function n(y,b){return y=zs(y,b),y.index=0,y.sibling=null,y}function i(y,b,m){return y.index=m,e?(m=y.alternate,m!==null?(m=m.index,m<b?(y.flags|=2,b):m):(y.flags|=2,b)):(y.flags|=1048576,b)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,b,m,k){return b===null||b.tag!==6?(b=Dc(m,y.mode,k),b.return=y,b):(b=n(b,m),b.return=y,b)}function c(y,b,m,k){var N=m.type;return N===Ja?u(y,b,m.props.children,k,m.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xs&&yh(N)===b.type)?(k=n(b,m.props),k.ref=Zn(y,b,m),k.return=y,k):(k=Zl(m.type,m.key,m.props,null,y.mode,k),k.ref=Zn(y,b,m),k.return=y,k)}function d(y,b,m,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==m.containerInfo||b.stateNode.implementation!==m.implementation?(b=Oc(m,y.mode,k),b.return=y,b):(b=n(b,m.children||[]),b.return=y,b)}function u(y,b,m,k,N){return b===null||b.tag!==7?(b=ja(m,y.mode,k,N),b.return=y,b):(b=n(b,m),b.return=y,b)}function h(y,b,m){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Dc(""+b,y.mode,m),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xl:return m=Zl(b.type,b.key,b.props,null,y.mode,m),m.ref=Zn(y,null,b),m.return=y,m;case Ka:return b=Oc(b,y.mode,m),b.return=y,b;case xs:var k=b._init;return h(y,k(b._payload),m)}if(ii(b)||Qn(b))return b=ja(b,y.mode,m,null),b.return=y,b;El(y,b)}return null}function g(y,b,m,k){var N=b!==null?b.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return N!==null?null:o(y,b,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case xl:return m.key===N?c(y,b,m,k):null;case Ka:return m.key===N?d(y,b,m,k):null;case xs:return N=m._init,g(y,b,N(m._payload),k)}if(ii(m)||Qn(m))return N!==null?null:u(y,b,m,k,null);El(y,m)}return null}function f(y,b,m,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(m)||null,o(b,y,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case xl:return y=y.get(k.key===null?m:k.key)||null,c(b,y,k,N);case Ka:return y=y.get(k.key===null?m:k.key)||null,d(b,y,k,N);case xs:var S=k._init;return f(y,b,m,S(k._payload),N)}if(ii(k)||Qn(k))return y=y.get(m)||null,u(b,y,k,N,null);El(b,k)}return null}function x(y,b,m,k){for(var N=null,S=null,_=b,P=b=0,A=null;_!==null&&P<m.length;P++){_.index>P?(A=_,_=null):A=_.sibling;var R=g(y,_,m[P],k);if(R===null){_===null&&(_=A);break}e&&_&&R.alternate===null&&t(y,_),b=i(R,b,P),S===null?N=R:S.sibling=R,S=R,_=A}if(P===m.length)return s(y,_),qe&&na(y,P),N;if(_===null){for(;P<m.length;P++)_=h(y,m[P],k),_!==null&&(b=i(_,b,P),S===null?N=_:S.sibling=_,S=_);return qe&&na(y,P),N}for(_=a(y,_);P<m.length;P++)A=f(_,y,P,m[P],k),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?P:A.key),b=i(A,b,P),S===null?N=A:S.sibling=A,S=A);return e&&_.forEach(function(E){return t(y,E)}),qe&&na(y,P),N}function w(y,b,m,k){var N=Qn(m);if(typeof N!="function")throw Error(G(150));if(m=N.call(m),m==null)throw Error(G(151));for(var S=N=null,_=b,P=b=0,A=null,R=m.next();_!==null&&!R.done;P++,R=m.next()){_.index>P?(A=_,_=null):A=_.sibling;var E=g(y,_,R.value,k);if(E===null){_===null&&(_=A);break}e&&_&&E.alternate===null&&t(y,_),b=i(E,b,P),S===null?N=E:S.sibling=E,S=E,_=A}if(R.done)return s(y,_),qe&&na(y,P),N;if(_===null){for(;!R.done;P++,R=m.next())R=h(y,R.value,k),R!==null&&(b=i(R,b,P),S===null?N=R:S.sibling=R,S=R);return qe&&na(y,P),N}for(_=a(y,_);!R.done;P++,R=m.next())R=f(_,y,P,R.value,k),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?P:R.key),b=i(R,b,P),S===null?N=R:S.sibling=R,S=R);return e&&_.forEach(function(Y){return t(y,Y)}),qe&&na(y,P),N}function v(y,b,m,k){if(typeof m=="object"&&m!==null&&m.type===Ja&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case xl:e:{for(var N=m.key,S=b;S!==null;){if(S.key===N){if(N=m.type,N===Ja){if(S.tag===7){s(y,S.sibling),b=n(S,m.props.children),b.return=y,y=b;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xs&&yh(N)===S.type){s(y,S.sibling),b=n(S,m.props),b.ref=Zn(y,S,m),b.return=y,y=b;break e}s(y,S);break}else t(y,S);S=S.sibling}m.type===Ja?(b=ja(m.props.children,y.mode,k,m.key),b.return=y,y=b):(k=Zl(m.type,m.key,m.props,null,y.mode,k),k.ref=Zn(y,b,m),k.return=y,y=k)}return l(y);case Ka:e:{for(S=m.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===m.containerInfo&&b.stateNode.implementation===m.implementation){s(y,b.sibling),b=n(b,m.children||[]),b.return=y,y=b;break e}else{s(y,b);break}else t(y,b);b=b.sibling}b=Oc(m,y.mode,k),b.return=y,y=b}return l(y);case xs:return S=m._init,v(y,b,S(m._payload),k)}if(ii(m))return x(y,b,m,k);if(Qn(m))return w(y,b,m,k);El(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,b!==null&&b.tag===6?(s(y,b.sibling),b=n(b,m),b.return=y,y=b):(s(y,b),b=Dc(m,y.mode,k),b.return=y,y=b),l(y)):s(y,b)}return v}var Pn=cf(!0),df=cf(!1),po=Xs(null),xo=null,an=null,Bu=null;function qu(){Bu=an=xo=null}function Hu(e){var t=po.current;Be(po),e._currentValue=t}function wd(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function gn(e,t){xo=e,Bu=an=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ft=!0),e.firstContext=null)}function lr(e){var t=e._currentValue;if(Bu!==e)if(e={context:e,memoizedValue:t,next:null},an===null){if(xo===null)throw Error(G(308));an=e,xo.dependencies={lanes:0,firstContext:e}}else an=an.next=e;return t}var da=null;function Vu(e){da===null?da=[e]:da.push(e)}function uf(e,t,s,a){var n=t.interleaved;return n===null?(s.next=s,Vu(t)):(s.next=n.next,n.next=s),t.interleaved=s,is(e,a)}function is(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ys=!1;function Wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Se&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,is(e,s)}return n=a.interleaved,n===null?(t.next=t,Vu(a)):(t.next=n.next,n.next=t),a.interleaved=t,is(e,s)}function Gl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Au(e,s)}}function bh(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?n=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?n=i=t:i=i.next=t}else n=i=t;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function yo(e,t,s,a){var n=e.updateQueue;ys=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;l=0,u=d=c=null,o=i;do{var g=o.lane,f=o.eventTime;if((a&g)===g){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,w=o;switch(g=t,f=s,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(f,h,g);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,g=typeof x=="function"?x.call(f,h,g):x,g==null)break e;h=Je({},h,g);break e;case 2:ys=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=n.effects,g===null?n.effects=[o]:g.push(o))}else f={eventTime:f,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,l|=g;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;g=o,o=g.next,g.next=null,n.lastBaseUpdate=g,n.shared.pending=null}}while(!0);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);Pa|=l,e.lanes=l,e.memoizedState=h}}function vh(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(G(191,n));n.call(a)}}}var nl={},Br=Xs(nl),Mi=Xs(nl),Fi=Xs(nl);function ua(e){if(e===nl)throw Error(G(174));return e}function Gu(e,t){switch(Fe(Fi,t),Fe(Mi,e),Fe(Br,nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=rd(t,e)}Be(Br),Fe(Br,t)}function An(){Be(Br),Be(Mi),Be(Fi)}function gf(e){ua(Fi.current);var t=ua(Br.current),s=rd(t,e.type);t!==s&&(Fe(Mi,e),Fe(Br,s))}function Qu(e){Mi.current===e&&(Be(Br),Be(Mi))}var Qe=Xs(0);function bo(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ec=[];function Ku(){for(var e=0;e<Ec.length;e++)Ec[e]._workInProgressVersionPrimary=null;Ec.length=0}var Ql=cs.ReactCurrentDispatcher,Tc=cs.ReactCurrentBatchConfig,Ta=0,Ke=null,lt=null,ut=null,vo=!1,vi=!1,Ui=0,pb=0;function wt(){throw Error(G(321))}function Ju(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!wr(e[s],t[s]))return!1;return!0}function Yu(e,t,s,a,n,i){if(Ta=i,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ql.current=e===null||e.memoizedState===null?vb:kb,e=s(a,n),vi){i=0;do{if(vi=!1,Ui=0,25<=i)throw Error(G(301));i+=1,ut=lt=null,t.updateQueue=null,Ql.current=wb,e=s(a,n)}while(vi)}if(Ql.current=ko,t=lt!==null&&lt.next!==null,Ta=0,ut=lt=Ke=null,vo=!1,t)throw Error(G(300));return e}function Xu(){var e=Ui!==0;return Ui=0,e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Ke.memoizedState=ut=e:ut=ut.next=e,ut}function or(){if(lt===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ut===null?Ke.memoizedState:ut.next;if(t!==null)ut=t,lt=e;else{if(e===null)throw Error(G(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ut===null?Ke.memoizedState=ut=e:ut=ut.next=e}return ut}function zi(e,t){return typeof t=="function"?t(e):t}function Pc(e){var t=or(),s=t.queue;if(s===null)throw Error(G(311));s.lastRenderedReducer=e;var a=lt,n=a.baseQueue,i=s.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,s.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Ta&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=a):c=c.next=h,Ke.lanes|=u,Pa|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,wr(a,t.memoizedState)||(Ft=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,s.lastRenderedState=a}if(e=s.interleaved,e!==null){n=e;do i=n.lane,Ke.lanes|=i,Pa|=i,n=n.next;while(n!==e)}else n===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ac(e){var t=or(),s=t.queue;if(s===null)throw Error(G(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,i=t.memoizedState;if(n!==null){s.pending=null;var l=n=n.next;do i=e(i,l.action),l=l.next;while(l!==n);wr(i,t.memoizedState)||(Ft=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,a]}function mf(){}function ff(e,t){var s=Ke,a=or(),n=t(),i=!wr(a.memoizedState,n);if(i&&(a.memoizedState=n,Ft=!0),a=a.queue,Zu(yf.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||ut!==null&&ut.memoizedState.tag&1){if(s.flags|=2048,Bi(9,xf.bind(null,s,a,n,t),void 0,null),ht===null)throw Error(G(349));Ta&30||pf(s,t,n)}return n}function pf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function xf(e,t,s,a){t.value=s,t.getSnapshot=a,bf(t)&&vf(e)}function yf(e,t,s){return s(function(){bf(t)&&vf(e)})}function bf(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!wr(e,s)}catch{return!0}}function vf(e){var t=is(e,1);t!==null&&br(t,e,1,-1)}function kh(e){var t=Rr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},t.queue=e,e=e.dispatch=bb.bind(null,Ke,e),[t.memoizedState,e]}function Bi(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function kf(){return or().memoizedState}function Kl(e,t,s,a){var n=Rr();Ke.flags|=e,n.memoizedState=Bi(1|t,s,void 0,a===void 0?null:a)}function Fo(e,t,s,a){var n=or();a=a===void 0?null:a;var i=void 0;if(lt!==null){var l=lt.memoizedState;if(i=l.destroy,a!==null&&Ju(a,l.deps)){n.memoizedState=Bi(t,s,i,a);return}}Ke.flags|=e,n.memoizedState=Bi(1|t,s,i,a)}function wh(e,t){return Kl(8390656,8,e,t)}function Zu(e,t){return Fo(2048,8,e,t)}function wf(e,t){return Fo(4,2,e,t)}function jf(e,t){return Fo(4,4,e,t)}function Nf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _f(e,t,s){return s=s!=null?s.concat([e]):null,Fo(4,4,Nf.bind(null,t,e),s)}function e0(){}function Sf(e,t){var s=or();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Ju(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Cf(e,t){var s=or();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Ju(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Ef(e,t,s){return Ta&21?(wr(s,t)||(s=Rm(),Ke.lanes|=s,Pa|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ft=!0),e.memoizedState=s)}function xb(e,t){var s=De;De=s!==0&&4>s?s:4,e(!0);var a=Tc.transition;Tc.transition={};try{e(!1),t()}finally{De=s,Tc.transition=a}}function Tf(){return or().memoizedState}function yb(e,t,s){var a=Us(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Pf(e))Af(t,s);else if(s=uf(e,t,s,a),s!==null){var n=Rt();br(s,e,a,n),Rf(s,t,a)}}function bb(e,t,s){var a=Us(e),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Pf(e))Af(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,s);if(n.hasEagerState=!0,n.eagerState=o,wr(o,l)){var c=t.interleaved;c===null?(n.next=n,Vu(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}s=uf(e,t,n,a),s!==null&&(n=Rt(),br(s,e,a,n),Rf(s,t,a))}}function Pf(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Af(e,t){vi=vo=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Rf(e,t,s){if(s&4194240){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Au(e,s)}}var ko={readContext:lr,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},vb={readContext:lr,useCallback:function(e,t){return Rr().memoizedState=[e,t===void 0?null:t],e},useContext:lr,useEffect:wh,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Kl(4194308,4,Nf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kl(4,2,e,t)},useMemo:function(e,t){var s=Rr();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=Rr();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=yb.bind(null,Ke,e),[a.memoizedState,e]},useRef:function(e){var t=Rr();return e={current:e},t.memoizedState=e},useState:kh,useDebugValue:e0,useDeferredValue:function(e){return Rr().memoizedState=e},useTransition:function(){var e=kh(!1),t=e[0];return e=xb.bind(null,e[1]),Rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=Ke,n=Rr();if(qe){if(s===void 0)throw Error(G(407));s=s()}else{if(s=t(),ht===null)throw Error(G(349));Ta&30||pf(a,t,s)}n.memoizedState=s;var i={value:s,getSnapshot:t};return n.queue=i,wh(yf.bind(null,a,i,e),[e]),a.flags|=2048,Bi(9,xf.bind(null,a,i,s,t),void 0,null),s},useId:function(){var e=Rr(),t=ht.identifierPrefix;if(qe){var s=es,a=Zr;s=(a&~(1<<32-yr(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ui++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=pb++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kb={readContext:lr,useCallback:Sf,useContext:lr,useEffect:Zu,useImperativeHandle:_f,useInsertionEffect:wf,useLayoutEffect:jf,useMemo:Cf,useReducer:Pc,useRef:kf,useState:function(){return Pc(zi)},useDebugValue:e0,useDeferredValue:function(e){var t=or();return Ef(t,lt.memoizedState,e)},useTransition:function(){var e=Pc(zi)[0],t=or().memoizedState;return[e,t]},useMutableSource:mf,useSyncExternalStore:ff,useId:Tf,unstable_isNewReconciler:!1},wb={readContext:lr,useCallback:Sf,useContext:lr,useEffect:Zu,useImperativeHandle:_f,useInsertionEffect:wf,useLayoutEffect:jf,useMemo:Cf,useReducer:Ac,useRef:kf,useState:function(){return Ac(zi)},useDebugValue:e0,useDeferredValue:function(e){var t=or();return lt===null?t.memoizedState=e:Ef(t,lt.memoizedState,e)},useTransition:function(){var e=Ac(zi)[0],t=or().memoizedState;return[e,t]},useMutableSource:mf,useSyncExternalStore:ff,useId:Tf,unstable_isNewReconciler:!1};function hr(e,t){if(e&&e.defaultProps){t=Je({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function jd(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:Je({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Uo={isMounted:function(e){return(e=e._reactInternals)?Oa(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Rt(),n=Us(e),i=ts(a,n);i.payload=t,s!=null&&(i.callback=s),t=Ms(e,i,n),t!==null&&(br(t,e,n,a),Gl(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Rt(),n=Us(e),i=ts(a,n);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Ms(e,i,n),t!==null&&(br(t,e,n,a),Gl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Rt(),a=Us(e),n=ts(s,a);n.tag=2,t!=null&&(n.callback=t),t=Ms(e,n,a),t!==null&&(br(t,e,a,s),Gl(t,e,a))}};function jh(e,t,s,a,n,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,l):t.prototype&&t.prototype.isPureReactComponent?!Di(s,a)||!Di(n,i):!0}function Lf(e,t,s){var a=!1,n=Qs,i=t.contextType;return typeof i=="object"&&i!==null?i=lr(i):(n=zt(t)?Ca:_t.current,a=t.contextTypes,i=(a=a!=null)?En(e,n):Qs),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uo,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function Nh(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Uo.enqueueReplaceState(t,t.state,null)}function Nd(e,t,s,a){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},Wu(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=lr(i):(i=zt(t)?Ca:_t.current,n.context=En(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(jd(e,t,i,s),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Uo.enqueueReplaceState(n,n.state,null),yo(e,s,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Rn(e,t){try{var s="",a=t;do s+=Jx(a),a=a.return;while(a);var n=s}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function Rc(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function _d(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var jb=typeof WeakMap=="function"?WeakMap:Map;function Df(e,t,s){s=ts(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){jo||(jo=!0,Od=a),_d(e,t)},s}function Of(e,t,s){s=ts(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;s.payload=function(){return a(n)},s.callback=function(){_d(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){_d(e,t),typeof a!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function _h(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new jb;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(s)||(n.add(s),e=Ib.bind(null,e,t,s),t.then(e,e))}function Sh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ch(e,t,s,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=ts(-1,1),t.tag=2,Ms(s,t,1))),s.lanes|=1),e)}var Nb=cs.ReactCurrentOwner,Ft=!1;function At(e,t,s,a){t.child=e===null?df(t,null,s,a):Pn(t,e.child,s,a)}function Eh(e,t,s,a,n){s=s.render;var i=t.ref;return gn(t,n),a=Yu(e,t,s,a,i,n),s=Xu(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ls(e,t,n)):(qe&&s&&Fu(t),t.flags|=1,At(e,t,a,n),t.child)}function Th(e,t,s,a,n){if(e===null){var i=s.type;return typeof i=="function"&&!o0(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,$f(e,t,i,a,n)):(e=Zl(s.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:Di,s(l,a)&&e.ref===t.ref)return ls(e,t,n)}return t.flags|=1,e=zs(i,a),e.ref=t.ref,e.return=t,t.child=e}function $f(e,t,s,a,n){if(e!==null){var i=e.memoizedProps;if(Di(i,a)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=a=i,(e.lanes&n)!==0)e.flags&131072&&(Ft=!0);else return t.lanes=e.lanes,ls(e,t,n)}return Sd(e,t,s,a,n)}function If(e,t,s){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ln,Wt),Wt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(ln,Wt),Wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:s,Fe(ln,Wt),Wt|=a}else i!==null?(a=i.baseLanes|s,t.memoizedState=null):a=s,Fe(ln,Wt),Wt|=a;return At(e,t,n,s),t.child}function Mf(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Sd(e,t,s,a,n){var i=zt(s)?Ca:_t.current;return i=En(t,i),gn(t,n),s=Yu(e,t,s,a,i,n),a=Xu(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ls(e,t,n)):(qe&&a&&Fu(t),t.flags|=1,At(e,t,s,n),t.child)}function Ph(e,t,s,a,n){if(zt(s)){var i=!0;go(t)}else i=!1;if(gn(t,n),t.stateNode===null)Jl(e,t),Lf(t,s,a),Nd(t,s,a,n),a=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=lr(d):(d=zt(s)?Ca:_t.current,d=En(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&Nh(t,l,a,d),ys=!1;var g=t.memoizedState;l.state=g,yo(t,a,l,n),c=t.memoizedState,o!==a||g!==c||Ut.current||ys?(typeof u=="function"&&(jd(t,s,u,a),c=t.memoizedState),(o=ys||jh(t,s,o,a,g,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,hf(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:hr(t.type,o),l.props=d,h=t.pendingProps,g=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=lr(c):(c=zt(s)?Ca:_t.current,c=En(t,c));var f=s.getDerivedStateFromProps;(u=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||g!==c)&&Nh(t,l,a,c),ys=!1,g=t.memoizedState,l.state=g,yo(t,a,l,n);var x=t.memoizedState;o!==h||g!==x||Ut.current||ys?(typeof f=="function"&&(jd(t,s,f,a),x=t.memoizedState),(d=ys||jh(t,s,d,a,g,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,x,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),l.props=a,l.state=x,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),a=!1)}return Cd(e,t,s,a,i,n)}function Cd(e,t,s,a,n,i){Mf(e,t);var l=(t.flags&128)!==0;if(!a&&!l)return n&&fh(t,s,!1),ls(e,t,i);a=t.stateNode,Nb.current=t;var o=l&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&l?(t.child=Pn(t,e.child,null,i),t.child=Pn(t,null,o,i)):At(e,t,o,i),t.memoizedState=a.state,n&&fh(t,s,!0),t.child}function Ff(e){var t=e.stateNode;t.pendingContext?mh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mh(e,t.context,!1),Gu(e,t.containerInfo)}function Ah(e,t,s,a,n){return Tn(),zu(n),t.flags|=256,At(e,t,s,a),t.child}var Ed={dehydrated:null,treeContext:null,retryLane:0};function Td(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uf(e,t,s){var a=t.pendingProps,n=Qe.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Fe(Qe,n&1),e===null)return kd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=qo(l,a,0,null),e=ja(e,a,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Td(s),t.memoizedState=Ed,e):t0(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return _b(e,t,l,a,o,n,s);if(i){i=a.fallback,l=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=zs(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=zs(o,i):(i=ja(i,l,s,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=e.child.memoizedState,l=l===null?Td(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=Ed,a}return i=e.child,e=i.sibling,a=zs(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function t0(e,t){return t=qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Tl(e,t,s,a){return a!==null&&zu(a),Pn(t,e.child,null,s),e=t0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _b(e,t,s,a,n,i,l){if(s)return t.flags&256?(t.flags&=-257,a=Rc(Error(G(422))),Tl(e,t,l,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=qo({mode:"visible",children:a.children},n,0,null),i=ja(i,n,l,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Pn(t,e.child,null,l),t.child.memoizedState=Td(l),t.memoizedState=Ed,i);if(!(t.mode&1))return Tl(e,t,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(G(419)),a=Rc(i,a,void 0),Tl(e,t,l,a)}if(o=(l&e.childLanes)!==0,Ft||o){if(a=ht,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,is(e,n),br(a,e,n,-1))}return l0(),a=Rc(Error(G(421))),Tl(e,t,l,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Mb.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,Gt=Is(n.nextSibling),Qt=t,qe=!0,xr=null,e!==null&&(er[tr++]=Zr,er[tr++]=es,er[tr++]=Ea,Zr=e.id,es=e.overflow,Ea=t),t=t0(t,a.children),t.flags|=4096,t)}function Rh(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),wd(e.return,t,s)}function Lc(e,t,s,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=s,i.tailMode=n)}function zf(e,t,s){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(At(e,t,a.children,s),a=Qe.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rh(e,s,t);else if(e.tag===19)Rh(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Fe(Qe,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&bo(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),Lc(t,!1,n,s,i);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&bo(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Lc(t,!0,s,null,i);break;case"together":Lc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ls(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Pa|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,s=zs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=zs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Sb(e,t,s){switch(t.tag){case 3:Ff(t),Tn();break;case 5:gf(t);break;case 1:zt(t.type)&&go(t);break;case 4:Gu(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Fe(po,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Fe(Qe,Qe.current&1),t.flags|=128,null):s&t.child.childLanes?Uf(e,t,s):(Fe(Qe,Qe.current&1),e=ls(e,t,s),e!==null?e.sibling:null);Fe(Qe,Qe.current&1);break;case 19:if(a=(s&t.childLanes)!==0,e.flags&128){if(a)return zf(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Fe(Qe,Qe.current),a)break;return null;case 22:case 23:return t.lanes=0,If(e,t,s)}return ls(e,t,s)}var Bf,Pd,qf,Hf;Bf=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Pd=function(){};qf=function(e,t,s,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,ua(Br.current);var i=null;switch(s){case"input":n=Xc(e,n),a=Xc(e,a),i=[];break;case"select":n=Je({},n,{value:void 0}),a=Je({},a,{value:void 0}),i=[];break;case"textarea":n=td(e,n),a=td(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=uo)}sd(s,a);var l;s=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ci.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Hf=function(e,t,s,a){s!==a&&(t.flags|=4)};function ei(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Cb(e,t,s){var a=t.pendingProps;switch(Uu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return zt(t.type)&&ho(),jt(t),null;case 3:return a=t.stateNode,An(),Be(Ut),Be(_t),Ku(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xr!==null&&(Md(xr),xr=null))),Pd(e,t),jt(t),null;case 5:Qu(t);var n=ua(Fi.current);if(s=t.type,e!==null&&t.stateNode!=null)qf(e,t,s,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(G(166));return jt(t),null}if(e=ua(Br.current),Cl(t)){a=t.stateNode,s=t.type;var i=t.memoizedProps;switch(a[Ir]=t,a[Ii]=i,e=(t.mode&1)!==0,s){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(n=0;n<oi.length;n++)ze(oi[n],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":z0(a,i),ze("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},ze("invalid",a);break;case"textarea":q0(a,i),ze("invalid",a)}sd(s,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&Sl(a.textContent,o,e),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Sl(a.textContent,o,e),n=["children",""+o]):Ci.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ze("scroll",a)}switch(s){case"input":yl(a),B0(a,i,!0);break;case"textarea":yl(a),H0(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=uo)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xm(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=l.createElement(s,{is:a.is}):(e=l.createElement(s),s==="select"&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,s),e[Ir]=t,e[Ii]=a,Bf(e,t,!1,!1),t.stateNode=e;e:{switch(l=ad(s,a),s){case"dialog":ze("cancel",e),ze("close",e),n=a;break;case"iframe":case"object":case"embed":ze("load",e),n=a;break;case"video":case"audio":for(n=0;n<oi.length;n++)ze(oi[n],e);n=a;break;case"source":ze("error",e),n=a;break;case"img":case"image":case"link":ze("error",e),ze("load",e),n=a;break;case"details":ze("toggle",e),n=a;break;case"input":z0(e,a),n=Xc(e,a),ze("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=Je({},a,{value:void 0}),ze("invalid",e);break;case"textarea":q0(e,a),n=td(e,a),ze("invalid",e);break;default:n=a}sd(s,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?vm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ym(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Ei(e,c):typeof c=="number"&&Ei(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ci.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",e):c!=null&&_u(e,i,c,l))}switch(s){case"input":yl(e),B0(e,a,!1);break;case"textarea":yl(e),H0(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Gs(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?cn(e,!!a.multiple,i,!1):a.defaultValue!=null&&cn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=uo)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)Hf(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(G(166));if(s=ua(Fi.current),ua(Br.current),Cl(t)){if(a=t.stateNode,s=t.memoizedProps,a[Ir]=t,(i=a.nodeValue!==s)&&(e=Qt,e!==null))switch(e.tag){case 3:Sl(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(a.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Ir]=t,t.stateNode=a}return jt(t),null;case 13:if(Be(Qe),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Gt!==null&&t.mode&1&&!(t.flags&128))of(),Tn(),t.flags|=98560,i=!1;else if(i=Cl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Ir]=t}else Tn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),i=!1}else xr!==null&&(Md(xr),xr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?ot===0&&(ot=3):l0())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return An(),Pd(e,t),e===null&&Oi(t.stateNode.containerInfo),jt(t),null;case 10:return Hu(t.type._context),jt(t),null;case 17:return zt(t.type)&&ho(),jt(t),null;case 19:if(Be(Qe),i=t.memoizedState,i===null)return jt(t),null;if(a=(t.flags&128)!==0,l=i.rendering,l===null)if(a)ei(i,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=bo(e),l!==null){for(t.flags|=128,ei(i,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)i=s,e=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Fe(Qe,Qe.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>Ln&&(t.flags|=128,a=!0,ei(i,!1),t.lanes=4194304)}else{if(!a)if(e=bo(l),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!qe)return jt(t),null}else 2*rt()-i.renderingStartTime>Ln&&s!==1073741824&&(t.flags|=128,a=!0,ei(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,s=Qe.current,Fe(Qe,a?s&1|2:s&1),t):(jt(t),null);case 22:case 23:return i0(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Wt&1073741824&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function Eb(e,t){switch(Uu(t),t.tag){case 1:return zt(t.type)&&ho(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return An(),Be(Ut),Be(_t),Ku(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qu(t),null;case 13:if(Be(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Tn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Qe),null;case 4:return An(),null;case 10:return Hu(t.type._context),null;case 22:case 23:return i0(),null;case 24:return null;default:return null}}var Pl=!1,Nt=!1,Tb=typeof WeakSet=="function"?WeakSet:Set,se=null;function nn(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){et(e,t,a)}else s.current=null}function Ad(e,t,s){try{s()}catch(a){et(e,t,a)}}var Lh=!1;function Pb(e,t){if(md=lo,e=Qm(),Mu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,g=null;t:for(;;){for(var f;h!==s||n!==0&&h.nodeType!==3||(o=l+n),h!==i||a!==0&&h.nodeType!==3||(c=l+a),h.nodeType===3&&(l+=h.nodeValue.length),(f=h.firstChild)!==null;)g=h,h=f;for(;;){if(h===e)break t;if(g===s&&++d===n&&(o=l),g===i&&++u===a&&(c=l),(f=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=f}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(fd={focusedElem:e,selectionRange:s},lo=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,v=x.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:hr(t.type,w),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(k){et(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return x=Lh,Lh=!1,x}function ki(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&Ad(t,s,i)}n=n.next}while(n!==a)}}function zo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function Rd(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Vf(e){var t=e.alternate;t!==null&&(e.alternate=null,Vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ir],delete t[Ii],delete t[yd],delete t[hb],delete t[gb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wf(e){return e.tag===5||e.tag===3||e.tag===4}function Dh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ld(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=uo));else if(a!==4&&(e=e.child,e!==null))for(Ld(e,t,s),e=e.sibling;e!==null;)Ld(e,t,s),e=e.sibling}function Dd(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Dd(e,t,s),e=e.sibling;e!==null;)Dd(e,t,s),e=e.sibling}var mt=null,fr=!1;function hs(e,t,s){for(s=s.child;s!==null;)Gf(e,t,s),s=s.sibling}function Gf(e,t,s){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Lo,s)}catch{}switch(s.tag){case 5:Nt||nn(s,t);case 6:var a=mt,n=fr;mt=null,hs(e,t,s),mt=a,fr=n,mt!==null&&(fr?(e=mt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):mt.removeChild(s.stateNode));break;case 18:mt!==null&&(fr?(e=mt,s=s.stateNode,e.nodeType===8?Sc(e.parentNode,s):e.nodeType===1&&Sc(e,s),Ri(e)):Sc(mt,s.stateNode));break;case 4:a=mt,n=fr,mt=s.stateNode.containerInfo,fr=!0,hs(e,t,s),mt=a,fr=n;break;case 0:case 11:case 14:case 15:if(!Nt&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Ad(s,t,l),n=n.next}while(n!==a)}hs(e,t,s);break;case 1:if(!Nt&&(nn(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(o){et(s,t,o)}hs(e,t,s);break;case 21:hs(e,t,s);break;case 22:s.mode&1?(Nt=(a=Nt)||s.memoizedState!==null,hs(e,t,s),Nt=a):hs(e,t,s);break;default:hs(e,t,s)}}function Oh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Tb),t.forEach(function(a){var n=Fb.bind(null,e,a);s.has(a)||(s.add(a),a.then(n,n))})}}function dr(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:mt=o.stateNode,fr=!1;break e;case 3:mt=o.stateNode.containerInfo,fr=!0;break e;case 4:mt=o.stateNode.containerInfo,fr=!0;break e}o=o.return}if(mt===null)throw Error(G(160));Gf(i,l,n),mt=null,fr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){et(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qf(t,e),t=t.sibling}function Qf(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dr(t,e),Ar(e),a&4){try{ki(3,e,e.return),zo(3,e)}catch(w){et(e,e.return,w)}try{ki(5,e,e.return)}catch(w){et(e,e.return,w)}}break;case 1:dr(t,e),Ar(e),a&512&&s!==null&&nn(s,s.return);break;case 5:if(dr(t,e),Ar(e),a&512&&s!==null&&nn(s,s.return),e.flags&32){var n=e.stateNode;try{Ei(n,"")}catch(w){et(e,e.return,w)}}if(a&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&fm(n,i),ad(o,l);var d=ad(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?vm(n,h):u==="dangerouslySetInnerHTML"?ym(n,h):u==="children"?Ei(n,h):_u(n,u,h,d)}switch(o){case"input":Zc(n,i);break;case"textarea":pm(n,i);break;case"select":var g=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?cn(n,!!i.multiple,f,!1):g!==!!i.multiple&&(i.defaultValue!=null?cn(n,!!i.multiple,i.defaultValue,!0):cn(n,!!i.multiple,i.multiple?[]:"",!1))}n[Ii]=i}catch(w){et(e,e.return,w)}}break;case 6:if(dr(t,e),Ar(e),a&4){if(e.stateNode===null)throw Error(G(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(w){et(e,e.return,w)}}break;case 3:if(dr(t,e),Ar(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(w){et(e,e.return,w)}break;case 4:dr(t,e),Ar(e);break;case 13:dr(t,e),Ar(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(a0=rt())),a&4&&Oh(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Nt=(d=Nt)||u,dr(t,e),Nt=d):dr(t,e),Ar(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(se=e,u=e.child;u!==null;){for(h=se=u;se!==null;){switch(g=se,f=g.child,g.tag){case 0:case 11:case 14:case 15:ki(4,g,g.return);break;case 1:nn(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){a=g,s=g.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){et(a,s,w)}}break;case 5:nn(g,g.return);break;case 22:if(g.memoizedState!==null){Ih(h);continue}}f!==null?(f.return=g,se=f):Ih(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=bm("display",l))}catch(w){et(e,e.return,w)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(w){et(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dr(t,e),Ar(e),a&4&&Oh(e);break;case 21:break;default:dr(t,e),Ar(e)}}function Ar(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Wf(s)){var a=s;break e}s=s.return}throw Error(G(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Ei(n,""),a.flags&=-33);var i=Dh(e);Dd(e,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Dh(e);Ld(e,o,l);break;default:throw Error(G(161))}}catch(c){et(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ab(e,t,s){se=e,Kf(e)}function Kf(e,t,s){for(var a=(e.mode&1)!==0;se!==null;){var n=se,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||Pl;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Nt;o=Pl;var d=Nt;if(Pl=l,(Nt=c)&&!d)for(se=n;se!==null;)l=se,c=l.child,l.tag===22&&l.memoizedState!==null?Mh(n):c!==null?(c.return=l,se=c):Mh(n);for(;i!==null;)se=i,Kf(i),i=i.sibling;se=n,Pl=o,Nt=d}$h(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,se=i):$h(e)}}function $h(e){for(;se!==null;){var t=se;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||zo(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Nt)if(s===null)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:hr(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vh(t,i,a);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}vh(t,l,s)}break;case 5:var o=t.stateNode;if(s===null&&t.flags&4){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ri(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Nt||t.flags&512&&Rd(t)}catch(g){et(t,t.return,g)}}if(t===e){se=null;break}if(s=t.sibling,s!==null){s.return=t.return,se=s;break}se=t.return}}function Ih(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var s=t.sibling;if(s!==null){s.return=t.return,se=s;break}se=t.return}}function Mh(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{zo(4,t)}catch(c){et(t,s,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(c){et(t,n,c)}}var i=t.return;try{Rd(t)}catch(c){et(t,i,c)}break;case 5:var l=t.return;try{Rd(t)}catch(c){et(t,l,c)}}}catch(c){et(t,t.return,c)}if(t===e){se=null;break}var o=t.sibling;if(o!==null){o.return=t.return,se=o;break}se=t.return}}var Rb=Math.ceil,wo=cs.ReactCurrentDispatcher,r0=cs.ReactCurrentOwner,ar=cs.ReactCurrentBatchConfig,Se=0,ht=null,at=null,xt=0,Wt=0,ln=Xs(0),ot=0,qi=null,Pa=0,Bo=0,s0=0,wi=null,It=null,a0=0,Ln=1/0,Qr=null,jo=!1,Od=null,Fs=null,Al=!1,As=null,No=0,ji=0,$d=null,Yl=-1,Xl=0;function Rt(){return Se&6?rt():Yl!==-1?Yl:Yl=rt()}function Us(e){return e.mode&1?Se&2&&xt!==0?xt&-xt:fb.transition!==null?(Xl===0&&(Xl=Rm()),Xl):(e=De,e!==0||(e=window.event,e=e===void 0?16:Fm(e.type)),e):1}function br(e,t,s,a){if(50<ji)throw ji=0,$d=null,Error(G(185));rl(e,s,a),(!(Se&2)||e!==ht)&&(e===ht&&(!(Se&2)&&(Bo|=s),ot===4&&vs(e,xt)),Bt(e,a),s===1&&Se===0&&!(t.mode&1)&&(Ln=rt()+500,Mo&&Zs()))}function Bt(e,t){var s=e.callbackNode;fy(e,t);var a=io(e,e===ht?xt:0);if(a===0)s!==null&&G0(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&G0(s),t===1)e.tag===0?mb(Fh.bind(null,e)):af(Fh.bind(null,e)),db(function(){!(Se&6)&&Zs()}),s=null;else{switch(Lm(a)){case 1:s=Pu;break;case 4:s=Pm;break;case 16:s=no;break;case 536870912:s=Am;break;default:s=no}s=sp(s,Jf.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Jf(e,t){if(Yl=-1,Xl=0,Se&6)throw Error(G(327));var s=e.callbackNode;if(mn()&&e.callbackNode!==s)return null;var a=io(e,e===ht?xt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=_o(e,a);else{t=a;var n=Se;Se|=2;var i=Xf();(ht!==e||xt!==t)&&(Qr=null,Ln=rt()+500,wa(e,t));do try{Ob();break}catch(o){Yf(e,o)}while(!0);qu(),wo.current=i,Se=n,at!==null?t=0:(ht=null,xt=0,t=ot)}if(t!==0){if(t===2&&(n=cd(e),n!==0&&(a=n,t=Id(e,n))),t===1)throw s=qi,wa(e,0),vs(e,a),Bt(e,rt()),s;if(t===6)vs(e,a);else{if(n=e.current.alternate,!(a&30)&&!Lb(n)&&(t=_o(e,a),t===2&&(i=cd(e),i!==0&&(a=i,t=Id(e,i))),t===1))throw s=qi,wa(e,0),vs(e,a),Bt(e,rt()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(G(345));case 2:ia(e,It,Qr);break;case 3:if(vs(e,a),(a&130023424)===a&&(t=a0+500-rt(),10<t)){if(io(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){Rt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=xd(ia.bind(null,e,It,Qr),t);break}ia(e,It,Qr);break;case 4:if(vs(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var l=31-yr(a);i=1<<l,l=t[l],l>n&&(n=l),a&=~i}if(a=n,a=rt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Rb(a/1960))-a,10<a){e.timeoutHandle=xd(ia.bind(null,e,It,Qr),a);break}ia(e,It,Qr);break;case 5:ia(e,It,Qr);break;default:throw Error(G(329))}}}return Bt(e,rt()),e.callbackNode===s?Jf.bind(null,e):null}function Id(e,t){var s=wi;return e.current.memoizedState.isDehydrated&&(wa(e,t).flags|=256),e=_o(e,t),e!==2&&(t=It,It=s,t!==null&&Md(t)),e}function Md(e){It===null?It=e:It.push.apply(It,e)}function Lb(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],i=n.getSnapshot;n=n.value;try{if(!wr(i(),n))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vs(e,t){for(t&=~s0,t&=~Bo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-yr(t),a=1<<s;e[s]=-1,t&=~a}}function Fh(e){if(Se&6)throw Error(G(327));mn();var t=io(e,0);if(!(t&1))return Bt(e,rt()),null;var s=_o(e,t);if(e.tag!==0&&s===2){var a=cd(e);a!==0&&(t=a,s=Id(e,a))}if(s===1)throw s=qi,wa(e,0),vs(e,t),Bt(e,rt()),s;if(s===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ia(e,It,Qr),Bt(e,rt()),null}function n0(e,t){var s=Se;Se|=1;try{return e(t)}finally{Se=s,Se===0&&(Ln=rt()+500,Mo&&Zs())}}function Aa(e){As!==null&&As.tag===0&&!(Se&6)&&mn();var t=Se;Se|=1;var s=ar.transition,a=De;try{if(ar.transition=null,De=1,e)return e()}finally{De=a,ar.transition=s,Se=t,!(Se&6)&&Zs()}}function i0(){Wt=ln.current,Be(ln)}function wa(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,cb(s)),at!==null)for(s=at.return;s!==null;){var a=s;switch(Uu(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ho();break;case 3:An(),Be(Ut),Be(_t),Ku();break;case 5:Qu(a);break;case 4:An();break;case 13:Be(Qe);break;case 19:Be(Qe);break;case 10:Hu(a.type._context);break;case 22:case 23:i0()}s=s.return}if(ht=e,at=e=zs(e.current,null),xt=Wt=t,ot=0,qi=null,s0=Bo=Pa=0,It=wi=null,da!==null){for(t=0;t<da.length;t++)if(s=da[t],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,i=s.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}s.pending=a}da=null}return e}function Yf(e,t){do{var s=at;try{if(qu(),Ql.current=ko,vo){for(var a=Ke.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}vo=!1}if(Ta=0,ut=lt=Ke=null,vi=!1,Ui=0,r0.current=null,s===null||s.return===null){ot=1,qi=t,at=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=xt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Sh(l);if(f!==null){f.flags&=-257,Ch(f,l,o,i,t),f.mode&1&&_h(i,d,t),t=f,c=d;var x=t.updateQueue;if(x===null){var w=new Set;w.add(c),t.updateQueue=w}else x.add(c);break e}else{if(!(t&1)){_h(i,d,t),l0();break e}c=Error(G(426))}}else if(qe&&o.mode&1){var v=Sh(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ch(v,l,o,i,t),zu(Rn(c,o));break e}}i=c=Rn(c,o),ot!==4&&(ot=2),wi===null?wi=[i]:wi.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Df(i,c,t);bh(i,y);break e;case 1:o=c;var b=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Fs===null||!Fs.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=Of(i,o,t);bh(i,k);break e}}i=i.return}while(i!==null)}ep(s)}catch(N){t=N,at===s&&s!==null&&(at=s=s.return);continue}break}while(!0)}function Xf(){var e=wo.current;return wo.current=ko,e===null?ko:e}function l0(){(ot===0||ot===3||ot===2)&&(ot=4),ht===null||!(Pa&268435455)&&!(Bo&268435455)||vs(ht,xt)}function _o(e,t){var s=Se;Se|=2;var a=Xf();(ht!==e||xt!==t)&&(Qr=null,wa(e,t));do try{Db();break}catch(n){Yf(e,n)}while(!0);if(qu(),Se=s,wo.current=a,at!==null)throw Error(G(261));return ht=null,xt=0,ot}function Db(){for(;at!==null;)Zf(at)}function Ob(){for(;at!==null&&!iy();)Zf(at)}function Zf(e){var t=rp(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,t===null?ep(e):at=t,r0.current=null}function ep(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Eb(s,t),s!==null){s.flags&=32767,at=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,at=null;return}}else if(s=Cb(s,t,Wt),s!==null){at=s;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);ot===0&&(ot=5)}function ia(e,t,s){var a=De,n=ar.transition;try{ar.transition=null,De=1,$b(e,t,s,a)}finally{ar.transition=n,De=a}return null}function $b(e,t,s,a){do mn();while(As!==null);if(Se&6)throw Error(G(327));s=e.finishedWork;var n=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(py(e,i),e===ht&&(at=ht=null,xt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Al||(Al=!0,sp(no,function(){return mn(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var l=De;De=1;var o=Se;Se|=4,r0.current=null,Pb(e,s),Qf(s,e),rb(fd),lo=!!md,fd=md=null,e.current=s,Ab(s),ly(),Se=o,De=l,ar.transition=i}else e.current=s;if(Al&&(Al=!1,As=e,No=n),i=e.pendingLanes,i===0&&(Fs=null),dy(s.stateNode),Bt(e,rt()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(jo)throw jo=!1,e=Od,Od=null,e;return No&1&&e.tag!==0&&mn(),i=e.pendingLanes,i&1?e===$d?ji++:(ji=0,$d=e):ji=0,Zs(),null}function mn(){if(As!==null){var e=Lm(No),t=ar.transition,s=De;try{if(ar.transition=null,De=16>e?16:e,As===null)var a=!1;else{if(e=As,As=null,No=0,Se&6)throw Error(G(331));var n=Se;for(Se|=4,se=e.current;se!==null;){var i=se,l=i.child;if(se.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:ki(8,u,i)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var g=u.sibling,f=u.return;if(Vf(u),u===d){se=null;break}if(g!==null){g.return=f,se=g;break}se=f}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var v=w.sibling;w.sibling=null,w=v}while(w!==null)}}se=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,se=l;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ki(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,se=y;break e}se=i.return}}var b=e.current;for(se=b;se!==null;){l=se;var m=l.child;if(l.subtreeFlags&2064&&m!==null)m.return=l,se=m;else e:for(l=b;se!==null;){if(o=se,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zo(9,o)}}catch(N){et(o,o.return,N)}if(o===l){se=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,se=k;break e}se=o.return}}if(Se=n,Zs(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Lo,e)}catch{}a=!0}return a}finally{De=s,ar.transition=t}}return!1}function Uh(e,t,s){t=Rn(s,t),t=Df(e,t,1),e=Ms(e,t,1),t=Rt(),e!==null&&(rl(e,1,t),Bt(e,t))}function et(e,t,s){if(e.tag===3)Uh(e,e,s);else for(;t!==null;){if(t.tag===3){Uh(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Fs===null||!Fs.has(a))){e=Rn(s,e),e=Of(t,e,1),t=Ms(t,e,1),e=Rt(),t!==null&&(rl(t,1,e),Bt(t,e));break}}t=t.return}}function Ib(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&s,ht===e&&(xt&s)===s&&(ot===4||ot===3&&(xt&130023424)===xt&&500>rt()-a0?wa(e,0):s0|=s),Bt(e,t)}function tp(e,t){t===0&&(e.mode&1?(t=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):t=1);var s=Rt();e=is(e,t),e!==null&&(rl(e,t,s),Bt(e,s))}function Mb(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),tp(e,s)}function Fb(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(G(314))}a!==null&&a.delete(t),tp(e,s)}var rp;rp=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Ft=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ft=!1,Sb(e,t,s);Ft=!!(e.flags&131072)}else Ft=!1,qe&&t.flags&1048576&&nf(t,fo,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Jl(e,t),e=t.pendingProps;var n=En(t,_t.current);gn(t,s),n=Yu(null,t,a,e,n,s);var i=Xu();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(a)?(i=!0,go(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Wu(t),n.updater=Uo,t.stateNode=n,n._reactInternals=t,Nd(t,a,e,s),t=Cd(null,t,a,!0,i,s)):(t.tag=0,qe&&i&&Fu(t),At(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(Jl(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=zb(a),e=hr(a,e),n){case 0:t=Sd(null,t,a,e,s);break e;case 1:t=Ph(null,t,a,e,s);break e;case 11:t=Eh(null,t,a,e,s);break e;case 14:t=Th(null,t,a,hr(a.type,e),s);break e}throw Error(G(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:hr(a,n),Sd(e,t,a,n,s);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:hr(a,n),Ph(e,t,a,n,s);case 3:e:{if(Ff(t),e===null)throw Error(G(387));a=t.pendingProps,i=t.memoizedState,n=i.element,hf(e,t),yo(t,a,null,s);var l=t.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=Rn(Error(G(423)),t),t=Ah(e,t,a,s,n);break e}else if(a!==n){n=Rn(Error(G(424)),t),t=Ah(e,t,a,s,n);break e}else for(Gt=Is(t.stateNode.containerInfo.firstChild),Qt=t,qe=!0,xr=null,s=df(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Tn(),a===n){t=ls(e,t,s);break e}At(e,t,a,s)}t=t.child}return t;case 5:return gf(t),e===null&&kd(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,l=n.children,pd(a,n)?l=null:i!==null&&pd(a,i)&&(t.flags|=32),Mf(e,t),At(e,t,l,s),t.child;case 6:return e===null&&kd(t),null;case 13:return Uf(e,t,s);case 4:return Gu(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Pn(t,null,a,s):At(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:hr(a,n),Eh(e,t,a,n,s);case 7:return At(e,t,t.pendingProps,s),t.child;case 8:return At(e,t,t.pendingProps.children,s),t.child;case 12:return At(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Fe(po,a._currentValue),a._currentValue=l,i!==null)if(wr(i.value,l)){if(i.children===n.children&&!Ut.current){t=ls(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=ts(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),wd(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(G(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),wd(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}At(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,gn(t,s),n=lr(n),a=a(n),t.flags|=1,At(e,t,a,s),t.child;case 14:return a=t.type,n=hr(a,t.pendingProps),n=hr(a.type,n),Th(e,t,a,n,s);case 15:return $f(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:hr(a,n),Jl(e,t),t.tag=1,zt(a)?(e=!0,go(t)):e=!1,gn(t,s),Lf(t,a,n),Nd(t,a,n,s),Cd(null,t,a,!0,e,s);case 19:return zf(e,t,s);case 22:return If(e,t,s)}throw Error(G(156,t.tag))};function sp(e,t){return Tm(e,t)}function Ub(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(e,t,s,a){return new Ub(e,t,s,a)}function o0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zb(e){if(typeof e=="function")return o0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cu)return 11;if(e===Eu)return 14}return 2}function zs(e,t){var s=e.alternate;return s===null?(s=sr(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Zl(e,t,s,a,n,i){var l=2;if(a=e,typeof e=="function")o0(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ja:return ja(s.children,n,i,t);case Su:l=8,n|=8;break;case Qc:return e=sr(12,s,t,n|2),e.elementType=Qc,e.lanes=i,e;case Kc:return e=sr(13,s,t,n),e.elementType=Kc,e.lanes=i,e;case Jc:return e=sr(19,s,t,n),e.elementType=Jc,e.lanes=i,e;case hm:return qo(s,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dm:l=10;break e;case um:l=9;break e;case Cu:l=11;break e;case Eu:l=14;break e;case xs:l=16,a=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=sr(l,s,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function ja(e,t,s,a){return e=sr(7,e,a,t),e.lanes=s,e}function qo(e,t,s,a){return e=sr(22,e,a,t),e.elementType=hm,e.lanes=s,e.stateNode={isHidden:!1},e}function Dc(e,t,s){return e=sr(6,e,null,t),e.lanes=s,e}function Oc(e,t,s){return t=sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bb(e,t,s,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function c0(e,t,s,a,n,i,l,o,c){return e=new Bb(e,t,s,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=sr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wu(i),e}function qb(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function ap(e){if(!e)return Qs;e=e._reactInternals;e:{if(Oa(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var s=e.type;if(zt(s))return sf(e,s,t)}return t}function np(e,t,s,a,n,i,l,o,c){return e=c0(s,a,!0,e,n,i,l,o,c),e.context=ap(null),s=e.current,a=Rt(),n=Us(s),i=ts(a,n),i.callback=t??null,Ms(s,i,n),e.current.lanes=n,rl(e,n,a),Bt(e,a),e}function Ho(e,t,s,a){var n=t.current,i=Rt(),l=Us(n);return s=ap(s),t.context===null?t.context=s:t.pendingContext=s,t=ts(i,l),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ms(n,t,l),e!==null&&(br(e,n,l,i),Gl(e,n,l)),l}function So(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function d0(e,t){zh(e,t),(e=e.alternate)&&zh(e,t)}function Hb(){return null}var ip=typeof reportError=="function"?reportError:function(e){console.error(e)};function u0(e){this._internalRoot=e}Vo.prototype.render=u0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Ho(e,t,null,null)};Vo.prototype.unmount=u0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Aa(function(){Ho(null,e,null,null)}),t[ns]=null}};function Vo(e){this._internalRoot=e}Vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=$m();e={blockedOn:null,target:e,priority:t};for(var s=0;s<bs.length&&t!==0&&t<bs[s].priority;s++);bs.splice(s,0,e),s===0&&Mm(e)}};function h0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function Vb(e,t,s,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=So(l);i.call(d)}}var l=np(t,a,e,0,null,!1,!1,"",Bh);return e._reactRootContainer=l,e[ns]=l.current,Oi(e.nodeType===8?e.parentNode:e),Aa(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=So(c);o.call(d)}}var c=c0(e,0,!1,null,null,!1,!1,"",Bh);return e._reactRootContainer=c,e[ns]=c.current,Oi(e.nodeType===8?e.parentNode:e),Aa(function(){Ho(t,c,s,a)}),c}function Go(e,t,s,a,n){var i=s._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=So(l);o.call(c)}}Ho(t,l,e,n)}else l=Vb(s,t,e,n,a);return So(l)}Dm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=li(t.pendingLanes);s!==0&&(Au(t,s|1),Bt(t,rt()),!(Se&6)&&(Ln=rt()+500,Zs()))}break;case 13:Aa(function(){var a=is(e,1);if(a!==null){var n=Rt();br(a,e,1,n)}}),d0(e,1)}};Ru=function(e){if(e.tag===13){var t=is(e,134217728);if(t!==null){var s=Rt();br(t,e,134217728,s)}d0(e,134217728)}};Om=function(e){if(e.tag===13){var t=Us(e),s=is(e,t);if(s!==null){var a=Rt();br(s,e,t,a)}d0(e,t)}};$m=function(){return De};Im=function(e,t){var s=De;try{return De=e,t()}finally{De=s}};id=function(e,t,s){switch(t){case"input":if(Zc(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=Io(a);if(!n)throw Error(G(90));mm(a),Zc(a,n)}}}break;case"textarea":pm(e,s);break;case"select":t=s.value,t!=null&&cn(e,!!s.multiple,t,!1)}};jm=n0;Nm=Aa;var Wb={usingClientEntryPoint:!1,Events:[al,en,Io,km,wm,n0]},ti={findFiberByHostInstance:ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gb={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cm(e),e===null?null:e.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||Hb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Lo=Rl.inject(Gb),zr=Rl}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wb;Jt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h0(t))throw Error(G(200));return qb(e,t,null,s)};Jt.createRoot=function(e,t){if(!h0(e))throw Error(G(299));var s=!1,a="",n=ip;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=c0(e,1,!1,null,null,s,!1,a,n),e[ns]=t.current,Oi(e.nodeType===8?e.parentNode:e),new u0(t)};Jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Cm(t),e=e===null?null:e.stateNode,e};Jt.flushSync=function(e){return Aa(e)};Jt.hydrate=function(e,t,s){if(!Wo(t))throw Error(G(200));return Go(null,e,t,!0,s)};Jt.hydrateRoot=function(e,t,s){if(!h0(e))throw Error(G(405));var a=s!=null&&s.hydratedSources||null,n=!1,i="",l=ip;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=np(t,null,e,1,s??null,n,!1,i,l),e[ns]=t.current,Oi(e),a)for(e=0;e<a.length;e++)s=a[e],n=s._getVersion,n=n(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Vo(t)};Jt.render=function(e,t,s){if(!Wo(t))throw Error(G(200));return Go(null,e,t,!1,s)};Jt.unmountComponentAtNode=function(e){if(!Wo(e))throw Error(G(40));return e._reactRootContainer?(Aa(function(){Go(null,null,e,!1,function(){e._reactRootContainer=null,e[ns]=null})}),!0):!1};Jt.unstable_batchedUpdates=n0;Jt.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Wo(s))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Go(e,t,s,!1,a)};Jt.version="18.3.1-next-f1338f8080-20240426";function lp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lp)}catch(e){console.error(e)}}lp(),im.exports=Jt;var Qb=im.exports,op,qh=Qb;op=qh.createRoot,qh.hydrateRoot;var il=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Kb={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ws,yu,Fg,Jb=(Fg=class{constructor(){he(this,ws,Kb);he(this,yu,!1)}setTimeoutProvider(e){re(this,ws,e)}setTimeout(e,t){return T(this,ws).setTimeout(e,t)}clearTimeout(e){T(this,ws).clearTimeout(e)}setInterval(e,t){return T(this,ws).setInterval(e,t)}clearInterval(e){T(this,ws).clearInterval(e)}},ws=new WeakMap,yu=new WeakMap,Fg),ha=new Jb;function Yb(e){setTimeout(e,0)}var Ra=typeof window>"u"||"Deno"in globalThis;function $t(){}function Xb(e,t){return typeof e=="function"?e(t):e}function Fd(e){return typeof e=="number"&&e>=0&&e!==1/0}function cp(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Bs(e,t){return typeof e=="function"?e(t):e}function Zt(e,t){return typeof e=="function"?e(t):e}function Hh(e,t){const{type:s="all",exact:a,fetchStatus:n,predicate:i,queryKey:l,stale:o}=e;if(l){if(a){if(t.queryHash!==g0(l,t.options))return!1}else if(!Vi(t.queryKey,l))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||n&&n!==t.state.fetchStatus||i&&!i(t))}function Vh(e,t){const{exact:s,status:a,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(Hi(t.options.mutationKey)!==Hi(i))return!1}else if(!Vi(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function g0(e,t){return((t==null?void 0:t.queryKeyHashFn)||Hi)(e)}function Hi(e){return JSON.stringify(e,(t,s)=>zd(s)?Object.keys(s).sort().reduce((a,n)=>(a[n]=s[n],a),{}):s)}function Vi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Vi(e[s],t[s])):!1}var Zb=Object.prototype.hasOwnProperty;function dp(e,t){if(e===t)return e;const s=Wh(e)&&Wh(t);if(!s&&!(zd(e)&&zd(t)))return t;const n=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),l=i.length,o=s?new Array(l):{};let c=0;for(let d=0;d<l;d++){const u=s?d:i[d],h=e[u],g=t[u];if(h===g){o[u]=h,(s?d<n:Zb.call(e,u))&&c++;continue}if(h===null||g===null||typeof h!="object"||typeof g!="object"){o[u]=g;continue}const f=dp(h,g);o[u]=f,f===h&&c++}return n===l&&c===n?e:o}function Ud(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Wh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function zd(e){if(!Gh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Gh(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Gh(e){return Object.prototype.toString.call(e)==="[object Object]"}function ev(e){return new Promise(t=>{ha.setTimeout(t,e)})}function Bd(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?dp(e,t):t}function tv(e,t,s=0){const a=[...e,t];return s&&a.length>s?a.slice(1):a}function rv(e,t,s=0){const a=[t,...e];return s&&a.length>s?a.slice(0,-1):a}var m0=Symbol();function up(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===m0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function sv(e,t){return typeof e=="function"?e(...t):!!e}var ga,js,fn,Ug,av=(Ug=class extends il{constructor(){super();he(this,ga);he(this,js);he(this,fn);re(this,fn,t=>{if(!Ra&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){T(this,js)||this.setEventListener(T(this,fn))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,js))==null||t.call(this),re(this,js,void 0))}setEventListener(t){var s;re(this,fn,t),(s=T(this,js))==null||s.call(this),re(this,js,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){T(this,ga)!==t&&(re(this,ga,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof T(this,ga)=="boolean"?T(this,ga):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ga=new WeakMap,js=new WeakMap,fn=new WeakMap,Ug),f0=new av;function qd(){let e,t;const s=new Promise((n,i)=>{e=n,t=i});s.status="pending",s.catch(()=>{});function a(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{a({status:"fulfilled",value:n}),e(n)},s.reject=n=>{a({status:"rejected",reason:n}),t(n)},s}var nv=Yb;function iv(){let e=[],t=0,s=o=>{o()},a=o=>{o()},n=nv;const i=o=>{t?e.push(o):n(()=>{s(o)})},l=()=>{const o=e;e=[],o.length&&n(()=>{a(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{n=o}}}var ft=iv(),pn,Ns,xn,zg,lv=(zg=class extends il{constructor(){super();he(this,pn,!0);he(this,Ns);he(this,xn);re(this,xn,t=>{if(!Ra&&window.addEventListener){const s=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){T(this,Ns)||this.setEventListener(T(this,xn))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Ns))==null||t.call(this),re(this,Ns,void 0))}setEventListener(t){var s;re(this,xn,t),(s=T(this,Ns))==null||s.call(this),re(this,Ns,t(this.setOnline.bind(this)))}setOnline(t){T(this,pn)!==t&&(re(this,pn,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return T(this,pn)}},pn=new WeakMap,Ns=new WeakMap,xn=new WeakMap,zg),Co=new lv;function ov(e){return Math.min(1e3*2**e,3e4)}function hp(e){return(e??"online")==="online"?Co.isOnline():!0}var Hd=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function gp(e){let t=!1,s=0,a;const n=qd(),i=()=>n.status!=="pending",l=w=>{var v;if(!i()){const y=new Hd(w);g(y),(v=e.onCancel)==null||v.call(e,y)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>f0.isFocused()&&(e.networkMode==="always"||Co.isOnline())&&e.canRun(),u=()=>hp(e.networkMode)&&e.canRun(),h=w=>{i()||(a==null||a(),n.resolve(w))},g=w=>{i()||(a==null||a(),n.reject(w))},f=()=>new Promise(w=>{var v;a=y=>{(i()||d())&&w(y)},(v=e.onPause)==null||v.call(e)}).then(()=>{var w;a=void 0,i()||(w=e.onContinue)==null||w.call(e)}),x=()=>{if(i())return;let w;const v=s===0?e.initialPromise:void 0;try{w=v??e.fn()}catch(y){w=Promise.reject(y)}Promise.resolve(w).then(h).catch(y=>{var S;if(i())return;const b=e.retry??(Ra?0:3),m=e.retryDelay??ov,k=typeof m=="function"?m(s,y):m,N=b===!0||typeof b=="number"&&s<b||typeof b=="function"&&b(s,y);if(t||!N){g(y);return}s++,(S=e.onFail)==null||S.call(e,s,y),ev(k).then(()=>d()?void 0:f()).then(()=>{t?g(y):x()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(a==null||a(),n),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?x():f().then(x),n)}}var ma,Bg,mp=(Bg=class{constructor(){he(this,ma)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fd(this.gcTime)&&re(this,ma,ha.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ra?1/0:5*60*1e3))}clearGcTimeout(){T(this,ma)&&(ha.clearTimeout(T(this,ma)),re(this,ma,void 0))}},ma=new WeakMap,Bg),fa,yn,Xt,pa,dt,Ji,xa,gr,Wr,qg,cv=(qg=class extends mp{constructor(t){super();he(this,gr);he(this,fa);he(this,yn);he(this,Xt);he(this,pa);he(this,dt);he(this,Ji);he(this,xa);re(this,xa,!1),re(this,Ji,t.defaultOptions),this.setOptions(t.options),this.observers=[],re(this,pa,t.client),re(this,Xt,T(this,pa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,re(this,fa,Kh(this.options)),this.state=t.state??T(this,fa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=T(this,dt))==null?void 0:t.promise}setOptions(t){if(this.options={...T(this,Ji),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Kh(this.options);s.data!==void 0&&(this.setState(Qh(s.data,s.dataUpdatedAt)),re(this,fa,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,Xt).remove(this)}setData(t,s){const a=Bd(this.state.data,t,this.options);return we(this,gr,Wr).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(t,s){we(this,gr,Wr).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var a,n;const s=(a=T(this,dt))==null?void 0:a.promise;return(n=T(this,dt))==null||n.cancel(t),s?s.then($t).catch($t):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,fa))}isActive(){return this.observers.some(t=>Zt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===m0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Bs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!cp(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=T(this,dt))==null||s.continue()}onOnline(){var s;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=T(this,dt))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),T(this,Xt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(T(this,dt)&&(T(this,xa)?T(this,dt).cancel({revert:!0}):T(this,dt).cancelRetry()),this.scheduleGc()),T(this,Xt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||we(this,gr,Wr).call(this,{type:"invalidate"})}async fetch(t,s){var c,d,u,h,g,f,x,w,v,y,b,m;if(this.state.fetchStatus!=="idle"&&((c=T(this,dt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(T(this,dt))return T(this,dt).continueRetry(),T(this,dt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(N=>N.options.queryFn);k&&this.setOptions(k.options)}const a=new AbortController,n=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(re(this,xa,!0),a.signal)})},i=()=>{const k=up(this.options,s),S=(()=>{const _={client:T(this,pa),queryKey:this.queryKey,meta:this.meta};return n(_),_})();return re(this,xa,!1),this.options.persister?this.options.persister(k,S,this):k(S)},o=(()=>{const k={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:T(this,pa),state:this.state,fetchFn:i};return n(k),k})();(d=this.options.behavior)==null||d.onFetch(o,this),re(this,yn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&we(this,gr,Wr).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),re(this,dt,gp({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:k=>{k instanceof Hd&&k.revert&&this.setState({...T(this,yn),fetchStatus:"idle"}),a.abort()},onFail:(k,N)=>{we(this,gr,Wr).call(this,{type:"failed",failureCount:k,error:N})},onPause:()=>{we(this,gr,Wr).call(this,{type:"pause"})},onContinue:()=>{we(this,gr,Wr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const k=await T(this,dt).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(f=(g=T(this,Xt).config).onSuccess)==null||f.call(g,k,this),(w=(x=T(this,Xt).config).onSettled)==null||w.call(x,k,this.state.error,this),k}catch(k){if(k instanceof Hd){if(k.silent)return T(this,dt).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw we(this,gr,Wr).call(this,{type:"error",error:k}),(y=(v=T(this,Xt).config).onError)==null||y.call(v,k,this),(m=(b=T(this,Xt).config).onSettled)==null||m.call(b,this.state.data,k,this),k}finally{this.scheduleGc()}}},fa=new WeakMap,yn=new WeakMap,Xt=new WeakMap,pa=new WeakMap,dt=new WeakMap,Ji=new WeakMap,xa=new WeakMap,gr=new WeakSet,Wr=function(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fp(a.data,this.options),fetchMeta:t.meta??null};case"success":const n={...a,...Qh(t.data,t.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return re(this,yn,t.manual?n:void 0),n;case"error":const i=t.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),ft.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),T(this,Xt).notify({query:this,type:"updated",action:t})})},qg);function fp(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hp(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Qh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Kh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,a=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ot,je,Yi,Tt,ya,bn,Yr,_s,Xi,vn,kn,ba,va,Ss,wn,Re,ci,Vd,Wd,Gd,Qd,Kd,Jd,Yd,pp,Hg,dv=(Hg=class extends il{constructor(t,s){super();he(this,Re);he(this,Ot);he(this,je);he(this,Yi);he(this,Tt);he(this,ya);he(this,bn);he(this,Yr);he(this,_s);he(this,Xi);he(this,vn);he(this,kn);he(this,ba);he(this,va);he(this,Ss);he(this,wn,new Set);this.options=s,re(this,Ot,t),re(this,_s,null),re(this,Yr,qd()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,je).addObserver(this),Jh(T(this,je),this.options)?we(this,Re,ci).call(this):this.updateResult(),we(this,Re,Qd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xd(T(this,je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xd(T(this,je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,we(this,Re,Kd).call(this),we(this,Re,Jd).call(this),T(this,je).removeObserver(this)}setOptions(t){const s=this.options,a=T(this,je);if(this.options=T(this,Ot).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zt(this.options.enabled,T(this,je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");we(this,Re,Yd).call(this),T(this,je).setOptions(this.options),s._defaulted&&!Ud(this.options,s)&&T(this,Ot).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,je),observer:this});const n=this.hasListeners();n&&Yh(T(this,je),a,this.options,s)&&we(this,Re,ci).call(this),this.updateResult(),n&&(T(this,je)!==a||Zt(this.options.enabled,T(this,je))!==Zt(s.enabled,T(this,je))||Bs(this.options.staleTime,T(this,je))!==Bs(s.staleTime,T(this,je)))&&we(this,Re,Vd).call(this);const i=we(this,Re,Wd).call(this);n&&(T(this,je)!==a||Zt(this.options.enabled,T(this,je))!==Zt(s.enabled,T(this,je))||i!==T(this,Ss))&&we(this,Re,Gd).call(this,i)}getOptimisticResult(t){const s=T(this,Ot).getQueryCache().build(T(this,Ot),t),a=this.createResult(s,t);return hv(this,a)&&(re(this,Tt,a),re(this,bn,this.options),re(this,ya,T(this,je).state)),a}getCurrentResult(){return T(this,Tt)}trackResult(t,s){return new Proxy(t,{get:(a,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&T(this,Yr).status==="pending"&&T(this,Yr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(t){T(this,wn).add(t)}getCurrentQuery(){return T(this,je)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=T(this,Ot).defaultQueryOptions(t),a=T(this,Ot).getQueryCache().build(T(this,Ot),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(t){return we(this,Re,ci).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,Tt)))}createResult(t,s){var A;const a=T(this,je),n=this.options,i=T(this,Tt),l=T(this,ya),o=T(this,bn),d=t!==a?t.state:T(this,Yi),{state:u}=t;let h={...u},g=!1,f;if(s._optimisticResults){const R=this.hasListeners(),E=!R&&Jh(t,s),Y=R&&Yh(t,a,s,n);(E||Y)&&(h={...h,...fp(u.data,t.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:w,status:v}=h;f=h.data;let y=!1;if(s.placeholderData!==void 0&&f===void 0&&v==="pending"){let R;i!=null&&i.isPlaceholderData&&s.placeholderData===(o==null?void 0:o.placeholderData)?(R=i.data,y=!0):R=typeof s.placeholderData=="function"?s.placeholderData((A=T(this,kn))==null?void 0:A.state.data,T(this,kn)):s.placeholderData,R!==void 0&&(v="success",f=Bd(i==null?void 0:i.data,R,s),g=!0)}if(s.select&&f!==void 0&&!y)if(i&&f===(l==null?void 0:l.data)&&s.select===T(this,Xi))f=T(this,vn);else try{re(this,Xi,s.select),f=s.select(f),f=Bd(i==null?void 0:i.data,f,s),re(this,vn,f),re(this,_s,null)}catch(R){re(this,_s,R)}T(this,_s)&&(x=T(this,_s),f=T(this,vn),w=Date.now(),v="error");const b=h.fetchStatus==="fetching",m=v==="pending",k=v==="error",N=m&&b,S=f!==void 0,P={status:v,fetchStatus:h.fetchStatus,isPending:m,isSuccess:v==="success",isError:k,isInitialLoading:N,isLoading:N,data:f,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:w,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!m,isLoadingError:k&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:k&&S,isStale:p0(t,s),refetch:this.refetch,promise:T(this,Yr),isEnabled:Zt(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=L=>{P.status==="error"?L.reject(P.error):P.data!==void 0&&L.resolve(P.data)},E=()=>{const L=re(this,Yr,P.promise=qd());R(L)},Y=T(this,Yr);switch(Y.status){case"pending":t.queryHash===a.queryHash&&R(Y);break;case"fulfilled":(P.status==="error"||P.data!==Y.value)&&E();break;case"rejected":(P.status!=="error"||P.error!==Y.reason)&&E();break}}return P}updateResult(){const t=T(this,Tt),s=this.createResult(T(this,je),this.options);if(re(this,ya,T(this,je).state),re(this,bn,this.options),T(this,ya).data!==void 0&&re(this,kn,T(this,je)),Ud(s,t))return;re(this,Tt,s);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!T(this,wn).size)return!0;const l=new Set(i??T(this,wn));return this.options.throwOnError&&l.add("error"),Object.keys(T(this,Tt)).some(o=>{const c=o;return T(this,Tt)[c]!==t[c]&&l.has(c)})};we(this,Re,pp).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&we(this,Re,Qd).call(this)}},Ot=new WeakMap,je=new WeakMap,Yi=new WeakMap,Tt=new WeakMap,ya=new WeakMap,bn=new WeakMap,Yr=new WeakMap,_s=new WeakMap,Xi=new WeakMap,vn=new WeakMap,kn=new WeakMap,ba=new WeakMap,va=new WeakMap,Ss=new WeakMap,wn=new WeakMap,Re=new WeakSet,ci=function(t){we(this,Re,Yd).call(this);let s=T(this,je).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch($t)),s},Vd=function(){we(this,Re,Kd).call(this);const t=Bs(this.options.staleTime,T(this,je));if(Ra||T(this,Tt).isStale||!Fd(t))return;const a=cp(T(this,Tt).dataUpdatedAt,t)+1;re(this,ba,ha.setTimeout(()=>{T(this,Tt).isStale||this.updateResult()},a))},Wd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,je)):this.options.refetchInterval)??!1},Gd=function(t){we(this,Re,Jd).call(this),re(this,Ss,t),!(Ra||Zt(this.options.enabled,T(this,je))===!1||!Fd(T(this,Ss))||T(this,Ss)===0)&&re(this,va,ha.setInterval(()=>{(this.options.refetchIntervalInBackground||f0.isFocused())&&we(this,Re,ci).call(this)},T(this,Ss)))},Qd=function(){we(this,Re,Vd).call(this),we(this,Re,Gd).call(this,we(this,Re,Wd).call(this))},Kd=function(){T(this,ba)&&(ha.clearTimeout(T(this,ba)),re(this,ba,void 0))},Jd=function(){T(this,va)&&(ha.clearInterval(T(this,va)),re(this,va,void 0))},Yd=function(){const t=T(this,Ot).getQueryCache().build(T(this,Ot),this.options);if(t===T(this,je))return;const s=T(this,je);re(this,je,t),re(this,Yi,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},pp=function(t){ft.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(T(this,Tt))}),T(this,Ot).getQueryCache().notify({query:T(this,je),type:"observerResultsUpdated"})})},Hg);function uv(e,t){return Zt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jh(e,t){return uv(e,t)||e.state.data!==void 0&&Xd(e,t,t.refetchOnMount)}function Xd(e,t,s){if(Zt(t.enabled,e)!==!1&&Bs(t.staleTime,e)!=="static"){const a=typeof s=="function"?s(e):s;return a==="always"||a!==!1&&p0(e,t)}return!1}function Yh(e,t,s,a){return(e!==t||Zt(a.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&p0(e,s)}function p0(e,t){return Zt(t.enabled,e)!==!1&&e.isStaleByTime(Bs(t.staleTime,e))}function hv(e,t){return!Ud(e.getCurrentResult(),t)}function Xh(e){return{onFetch:(t,s)=>{var u,h,g,f,x;const a=t.options,n=(g=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],l=((x=t.state.data)==null?void 0:x.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let w=!1;const v=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},y=up(t.options,t.fetchOptions),b=async(m,k,N)=>{if(w)return Promise.reject();if(k==null&&m.pages.length)return Promise.resolve(m);const _=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:k,direction:N?"backward":"forward",meta:t.options.meta};return v(E),E})(),P=await y(_),{maxPages:A}=t.options,R=N?rv:tv;return{pages:R(m.pages,P,A),pageParams:R(m.pageParams,k,A)}};if(n&&i.length){const m=n==="backward",k=m?gv:Zh,N={pages:i,pageParams:l},S=k(a,N);o=await b(N,S,m)}else{const m=e??i.length;do{const k=c===0?l[0]??a.initialPageParam:Zh(a,o);if(c>0&&k==null)break;o=await b(o,k),c++}while(c<m)}return o};t.options.persister?t.fetchFn=()=>{var w,v;return(v=(w=t.options).persister)==null?void 0:v.call(w,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=d}}}function Zh(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function gv(e,{pages:t,pageParams:s}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,s[0],s):void 0}var Zi,Dr,Pt,ka,Or,fs,Vg,mv=(Vg=class extends mp{constructor(t){super();he(this,Or);he(this,Zi);he(this,Dr);he(this,Pt);he(this,ka);re(this,Zi,t.client),this.mutationId=t.mutationId,re(this,Pt,t.mutationCache),re(this,Dr,[]),this.state=t.state||fv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){T(this,Dr).includes(t)||(T(this,Dr).push(t),this.clearGcTimeout(),T(this,Pt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){re(this,Dr,T(this,Dr).filter(s=>s!==t)),this.scheduleGc(),T(this,Pt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){T(this,Dr).length||(this.state.status==="pending"?this.scheduleGc():T(this,Pt).remove(this))}continue(){var t;return((t=T(this,ka))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,u,h,g,f,x,w,v,y,b,m,k,N,S,_,P,A;const s=()=>{we(this,Or,fs).call(this,{type:"continue"})},a={client:T(this,Zi),meta:this.options.meta,mutationKey:this.options.mutationKey};re(this,ka,gp({fn:()=>this.options.mutationFn?this.options.mutationFn(t,a):Promise.reject(new Error("No mutationFn found")),onFail:(R,E)=>{we(this,Or,fs).call(this,{type:"failed",failureCount:R,error:E})},onPause:()=>{we(this,Or,fs).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,Pt).canRun(this)}));const n=this.state.status==="pending",i=!T(this,ka).canStart();try{if(n)s();else{we(this,Or,fs).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=T(this,Pt).config).onMutate)==null?void 0:o.call(l,t,this,a));const E=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,a));E!==this.state.context&&we(this,Or,fs).call(this,{type:"pending",context:E,variables:t,isPaused:i})}const R=await T(this,ka).start();return await((h=(u=T(this,Pt).config).onSuccess)==null?void 0:h.call(u,R,t,this.state.context,this,a)),await((f=(g=this.options).onSuccess)==null?void 0:f.call(g,R,t,this.state.context,a)),await((w=(x=T(this,Pt).config).onSettled)==null?void 0:w.call(x,R,null,this.state.variables,this.state.context,this,a)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,R,null,t,this.state.context,a)),we(this,Or,fs).call(this,{type:"success",data:R}),R}catch(R){try{throw await((m=(b=T(this,Pt).config).onError)==null?void 0:m.call(b,R,t,this.state.context,this,a)),await((N=(k=this.options).onError)==null?void 0:N.call(k,R,t,this.state.context,a)),await((_=(S=T(this,Pt).config).onSettled)==null?void 0:_.call(S,void 0,R,this.state.variables,this.state.context,this,a)),await((A=(P=this.options).onSettled)==null?void 0:A.call(P,void 0,R,t,this.state.context,a)),R}finally{we(this,Or,fs).call(this,{type:"error",error:R})}}finally{T(this,Pt).runNext(this)}}},Zi=new WeakMap,Dr=new WeakMap,Pt=new WeakMap,ka=new WeakMap,Or=new WeakSet,fs=function(t){const s=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ft.batch(()=>{T(this,Dr).forEach(a=>{a.onMutationUpdate(t)}),T(this,Pt).notify({mutation:this,type:"updated",action:t})})},Vg);function fv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xr,mr,el,Wg,pv=(Wg=class extends il{constructor(t={}){super();he(this,Xr);he(this,mr);he(this,el);this.config=t,re(this,Xr,new Set),re(this,mr,new Map),re(this,el,0)}build(t,s,a){const n=new mv({client:t,mutationCache:this,mutationId:++fl(this,el)._,options:t.defaultMutationOptions(s),state:a});return this.add(n),n}add(t){T(this,Xr).add(t);const s=Ll(t);if(typeof s=="string"){const a=T(this,mr).get(s);a?a.push(t):T(this,mr).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(T(this,Xr).delete(t)){const s=Ll(t);if(typeof s=="string"){const a=T(this,mr).get(s);if(a)if(a.length>1){const n=a.indexOf(t);n!==-1&&a.splice(n,1)}else a[0]===t&&T(this,mr).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Ll(t);if(typeof s=="string"){const a=T(this,mr).get(s),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var a;const s=Ll(t);if(typeof s=="string"){const n=(a=T(this,mr).get(s))==null?void 0:a.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ft.batch(()=>{T(this,Xr).forEach(t=>{this.notify({type:"removed",mutation:t})}),T(this,Xr).clear(),T(this,mr).clear()})}getAll(){return Array.from(T(this,Xr))}find(t){const s={exact:!0,...t};return this.getAll().find(a=>Vh(s,a))}findAll(t={}){return this.getAll().filter(s=>Vh(t,s))}notify(t){ft.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return ft.batch(()=>Promise.all(t.map(s=>s.continue().catch($t))))}},Xr=new WeakMap,mr=new WeakMap,el=new WeakMap,Wg);function Ll(e){var t;return(t=e.options.scope)==null?void 0:t.id}var $r,Gg,xv=(Gg=class extends il{constructor(t={}){super();he(this,$r);this.config=t,re(this,$r,new Map)}build(t,s,a){const n=s.queryKey,i=s.queryHash??g0(n,s);let l=this.get(i);return l||(l=new cv({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(l)),l}add(t){T(this,$r).has(t.queryHash)||(T(this,$r).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=T(this,$r).get(t.queryHash);s&&(t.destroy(),s===t&&T(this,$r).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ft.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return T(this,$r).get(t)}getAll(){return[...T(this,$r).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>Hh(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>Hh(t,a)):s}notify(t){ft.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){ft.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ft.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$r=new WeakMap,Gg),Ze,Cs,Es,jn,Nn,Ts,_n,Sn,Qg,yv=(Qg=class{constructor(e={}){he(this,Ze);he(this,Cs);he(this,Es);he(this,jn);he(this,Nn);he(this,Ts);he(this,_n);he(this,Sn);re(this,Ze,e.queryCache||new xv),re(this,Cs,e.mutationCache||new pv),re(this,Es,e.defaultOptions||{}),re(this,jn,new Map),re(this,Nn,new Map),re(this,Ts,0)}mount(){fl(this,Ts)._++,T(this,Ts)===1&&(re(this,_n,f0.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,Ze).onFocus())})),re(this,Sn,Co.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,Ze).onOnline())})))}unmount(){var e,t;fl(this,Ts)._--,T(this,Ts)===0&&((e=T(this,_n))==null||e.call(this),re(this,_n,void 0),(t=T(this,Sn))==null||t.call(this),re(this,Sn,void 0))}isFetching(e){return T(this,Ze).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return T(this,Cs).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=T(this,Ze).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=T(this,Ze).build(this,t),a=s.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Bs(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return T(this,Ze).findAll(e).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),n=T(this,Ze).get(a.queryHash),i=n==null?void 0:n.state.data,l=Xb(t,i);if(l!==void 0)return T(this,Ze).build(this,a).setData(l,{...s,manual:!0})}setQueriesData(e,t,s){return ft.batch(()=>T(this,Ze).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=T(this,Ze).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=T(this,Ze);ft.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=T(this,Ze);return ft.batch(()=>(s.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},a=ft.batch(()=>T(this,Ze).findAll(e).map(n=>n.cancel(s)));return Promise.all(a).then($t).catch($t)}invalidateQueries(e,t={}){return ft.batch(()=>(T(this,Ze).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=ft.batch(()=>T(this,Ze).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch($t)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then($t)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=T(this,Ze).build(this,t);return s.isStaleByTime(Bs(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then($t).catch($t)}fetchInfiniteQuery(e){return e.behavior=Xh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then($t).catch($t)}ensureInfiniteQueryData(e){return e.behavior=Xh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Co.isOnline()?T(this,Cs).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,Ze)}getMutationCache(){return T(this,Cs)}getDefaultOptions(){return T(this,Es)}setDefaultOptions(e){re(this,Es,e)}setQueryDefaults(e,t){T(this,jn).set(Hi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...T(this,jn).values()],s={};return t.forEach(a=>{Vi(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,t){T(this,Nn).set(Hi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...T(this,Nn).values()],s={};return t.forEach(a=>{Vi(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...T(this,Es).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=g0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===m0&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...T(this,Es).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){T(this,Ze).clear(),T(this,Cs).clear()}},Ze=new WeakMap,Cs=new WeakMap,Es=new WeakMap,jn=new WeakMap,Nn=new WeakMap,Ts=new WeakMap,_n=new WeakMap,Sn=new WeakMap,Qg),xp=p.createContext(void 0),x0=e=>{const t=p.useContext(xp);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},bv=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(xp.Provider,{value:e,children:t})),yp=p.createContext(!1),vv=()=>p.useContext(yp);yp.Provider;function kv(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var wv=p.createContext(kv()),jv=()=>p.useContext(wv),Nv=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},_v=e=>{p.useEffect(()=>{e.clearReset()},[e])},Sv=({result:e,errorResetBoundary:t,throwOnError:s,query:a,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(n&&e.data===void 0||sv(s,[e.error,a])),Cv=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...n)=>s(a(...n)):s(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ev=(e,t)=>e.isLoading&&e.isFetching&&!t,Tv=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,eg=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Pv(e,t,s){var h,g,f,x,w;const a=vv(),n=jv(),i=x0(),l=i.defaultQueryOptions(e);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,l),l._optimisticResults=a?"isRestoring":"optimistic",Cv(l),Nv(l,n),_v(n);const o=!i.getQueryCache().get(l.queryHash),[c]=p.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),u=!a&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(v=>{const y=u?c.subscribe(ft.batchCalls(v)):$t;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(l)},[l,c]),Tv(l,d))throw eg(l,c,n);if(Sv({result:d,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((x=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||x.call(f,l,d),l.experimental_prefetchInRender&&!Ra&&Ev(d,a)){const v=o?eg(l,c,n):(w=i.getQueryCache().get(l.queryHash))==null?void 0:w.promise;v==null||v.catch($t).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function $a(e,t){return Pv(e,dv)}const bp=p.createContext(void 0);function Av({children:e}){const[t,s]=p.useState(()=>localStorage.getItem("theme")==="dark"?"dark":"light");p.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark")},[t]);const a=()=>{s(n=>n==="light"?"dark":"light")};return r.jsx(bp.Provider,{value:{theme:t,toggleTheme:a},children:e})}function Rv(){const e=p.useContext(bp);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(e,t)=>{const s=p.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>p.createElement("svg",{ref:u,...Lv,width:n,height:n,stroke:a,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Dv(e)}`,o].join(" "),...d},[...t.map(([h,g])=>p.createElement(h,g)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=Z("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Z("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=Z("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=Z("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Z("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=Z("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=Z("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Z("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Z("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Z("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Z("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Z("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Z("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=Z("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Z("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Z("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Z("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Z("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Z("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Z("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Z("Slack",[["rect",{width:"3",height:"8",x:"13",y:"2",rx:"1.5",key:"diqz80"}],["path",{d:"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5",key:"183iwg"}],["rect",{width:"3",height:"8",x:"8",y:"14",rx:"1.5",key:"hqg7r1"}],["path",{d:"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5",key:"76g71w"}],["rect",{width:"8",height:"3",x:"14",y:"13",rx:"1.5",key:"1kmz0a"}],["path",{d:"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5",key:"jc4sz0"}],["rect",{width:"8",height:"3",x:"2",y:"8",rx:"1.5",key:"1omvl4"}],["path",{d:"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5",key:"16f3cl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Z("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Z("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Z("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),wp=p.createContext(void 0);function rk({children:e}){const[t,s]=p.useState([]),a=p.useCallback((i,l,o)=>{const c=Math.random().toString(36).substring(7),d={id:c,type:i,message:l,description:o};s(u=>[...u,d]),setTimeout(()=>{s(u=>u.filter(h=>h.id!==c))},5e3)},[]),n=i=>{s(l=>l.filter(o=>o.id!==i))};return r.jsxs(wp.Provider,{value:{showToast:a},children:[e,r.jsx("div",{className:"fixed bottom-4 left-4 z-50 space-y-2",children:t.map(i=>r.jsx(sk,{toast:i,onClose:()=>n(i.id)},i.id))})]})}function sk({toast:e,onClose:t}){const s={success:Zd,error:Ws,warning:jr,info:Js},a={success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-900 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-900 dark:text-red-100",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-900 dark:text-amber-100",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-900 dark:text-blue-100"},n={success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-amber-600 dark:text-amber-400",info:"text-blue-600 dark:text-blue-400"},i=s[e.type];return r.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border shadow-lg min-w-[320px] max-w-md ${a[e.type]}`,children:[r.jsx(i,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${n[e.type]}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm",children:e.message}),e.description&&r.jsx("p",{className:"text-sm opacity-90 mt-1",children:e.description})]}),r.jsx("button",{onClick:t,className:"flex-shrink-0 hover:opacity-70 transition-opacity","aria-label":"Close",children:r.jsx(He,{className:"w-4 h-4"})})]})}function St(){const e=p.useContext(wp);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const ak="modulepreload",nk=function(e){return"/"+e},cg={},Fn=function(t,s,a){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=nk(c),c in cg)return;cg[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ak,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((g,f)=>{h.addEventListener("load",g),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},ik=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Fn(async()=>{const{default:a}=await Promise.resolve().then(()=>Un);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)};class v0 extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class lk extends v0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class dg extends v0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ug extends v0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var nu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(nu||(nu={}));var ok=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};class ck{constructor(t,{headers:s={},customFetch:a,region:n=nu.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=ik(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var a;return ok(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:l}=s;let o={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:u}).catch(w=>{throw new lk(w)}),g=h.headers.get("x-relay-error");if(g&&g==="true")throw new dg(h);if(!h.ok)throw new ug(h);let f=((a=h.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield h.json():f==="application/octet-stream"?x=yield h.blob():f==="text/event-stream"?x=h:f==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof ug||n instanceof dg?n.context:void 0}}})}}var Mt={},k0={},Jo={},ll={},Yo={},Xo={},dk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},On=dk();const uk=On.fetch,jp=On.fetch.bind(On),Np=On.Headers,hk=On.Request,gk=On.Response,Un=Object.freeze(Object.defineProperty({__proto__:null,Headers:Np,Request:hk,Response:gk,default:jp,fetch:uk},Symbol.toStringTag,{value:"Module"})),mk=wx(Un);var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});let fk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Zo.default=fk;var _p=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xo,"__esModule",{value:!0});const pk=_p(mk),xk=_p(Zo);let yk=class{constructor(t){var s,a;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(s=t.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=t.signal,this.isMaybeSingle=(a=t.isMaybeSingle)!==null&&a!==void 0?a:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=pk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=new Headers(this.headers),this.headers.set(t,s),this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,d;let u=null,h=null,g=null,f=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?h=b:h=JSON.parse(b))}const v=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&y&&y.length>1&&(g=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,f=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(h=[],u=null,f=200,x="OK")}catch{i.status===404&&v===""?(f=204,x="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,f=200,x="OK"),u&&this.shouldThrowOnError)throw new xk.default(u)}return{error:u,data:h,count:g,status:f,statusText:x}});return this.shouldThrowOnError||(n=n.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,s)}returns(){return this}overrideTypes(){return this}};Xo.default=yk;var bk=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yo,"__esModule",{value:!0});const vk=bk(Xo);let kk=class extends vk.default{select(t){let s=!1;const a=(t??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:s=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:a=s}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,s,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:s=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,s?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Yo.default=kk;var wk=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ll,"__esModule",{value:!0});const jk=wk(Yo);let Nk=class extends jk.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const a=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const l=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${i}fts${l}.${s}`),this}match(t){return Object.entries(t).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(t,s,a){return this.url.searchParams.append(t,`not.${s}.${a}`),this}or(t,{foreignTable:s,referencedTable:a=s}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,s,a){return this.url.searchParams.append(t,`${s}.${a}`),this}};ll.default=Nk;var _k=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jo,"__esModule",{value:!0});const si=_k(ll);let Sk=class{constructor(t,{headers:s={},schema:a,fetch:n}){this.url=t,this.headers=new Headers(s),this.schema=a,this.fetch=n}select(t,{head:s=!1,count:a}={}){const n=s?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),a&&this.headers.append("Prefer",`count=${a}`),new si.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:s,defaultToNull:a=!0}={}){var n;const i="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new si.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:s,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new si.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:s}={}){var a;const n="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new si.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:t}={}){var s;const a="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new si.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Jo.default=Sk;var Sp=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k0,"__esModule",{value:!0});const Ck=Sp(Jo),Ek=Sp(ll);let Tk=class Cp{constructor(t,{headers:s={},schema:a,fetch:n}={}){this.url=t,this.headers=new Headers(s),this.schemaName=a,this.fetch=n}from(t){const s=new URL(`${this.url}/${t}`);return new Ck.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Cp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:a=!1,get:n=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let d;a||n?(o=a?"HEAD":"GET",Object.entries(s).filter(([h,g])=>g!==void 0).map(([h,g])=>[h,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([h,g])=>{c.searchParams.append(h,g)})):(o="POST",d=s);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new Ek.default({method:o,url:c,headers:u,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};k0.default=Tk;var zn=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const Ep=zn(k0);Mt.PostgrestClient=Ep.default;const Tp=zn(Jo);Mt.PostgrestQueryBuilder=Tp.default;const Pp=zn(ll);Mt.PostgrestFilterBuilder=Pp.default;const Ap=zn(Yo);Mt.PostgrestTransformBuilder=Ap.default;const Rp=zn(Xo);Mt.PostgrestBuilder=Rp.default;const Lp=zn(Zo);Mt.PostgrestError=Lp.default;var Pk=Mt.default={PostgrestClient:Ep.default,PostgrestQueryBuilder:Tp.default,PostgrestFilterBuilder:Pp.default,PostgrestTransformBuilder:Ap.default,PostgrestBuilder:Rp.default,PostgrestError:Lp.default};const{PostgrestClient:Ak,PostgrestQueryBuilder:j2,PostgrestFilterBuilder:N2,PostgrestTransformBuilder:_2,PostgrestBuilder:S2,PostgrestError:C2}=Pk;class Rk{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,n=parseInt(a.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const a=this.getWebSocketConstructor();return new a(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Lk="2.15.5",Dk=`realtime-js/${Lk}`,Ok="1.0.0",iu=1e4,$k=1e3,Ik=100;var Ni;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ni||(Ni={}));var nt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nt||(nt={}));var pr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pr||(pr={}));var lu;(function(e){e.websocket="websocket"})(lu||(lu={}));var oa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(oa||(oa={}));class Mk{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,s,a)}_decodeBroadcast(t,s,a){const n=s.getUint8(1),i=s.getUint8(2);let l=this.HEADER_LENGTH+2;const o=a.decode(t.slice(l,l+n));l=l+n;const c=a.decode(t.slice(l,l+i));l=l+i;const d=JSON.parse(a.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Dp{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Me||(Me={}));const hg=(e,t,s={})=>{var a;const n=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,l)=>(i[l]=Fk(l,e,t,n),i),{})},Fk=(e,t,s,a)=>{const n=t.find(o=>o.name===e),i=n==null?void 0:n.type,l=s[e];return i&&!a.includes(i)?Op(i,l):ou(l)},Op=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return qk(t,s)}switch(e){case Me.bool:return Uk(t);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return zk(t);case Me.json:case Me.jsonb:return Bk(t);case Me.timestamp:return Hk(t);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return ou(t);default:return ou(t)}},ou=e=>e,Uk=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zk=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Bk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},qk=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,a=e[s];if(e[0]==="{"&&a==="}"){let i;const l=e.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Op(t,o))}return e},Hk=e=>typeof e=="string"?e.replace(" ","T"):e,$p=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class $c{constructor(t,s,a={},n=iu){this.channel=t,this.event=s,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gg||(gg={}));class _i{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_i.syncState(this.state,n,i,l),this.pendingDiffs.forEach(c=>{this.state=_i.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=_i.syncDiff(this.state,n,i,l),o())}),this.onJoin((n,i,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:l})}),this.onLeave((n,i,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,n){const i=this.cloneDeep(t),l=this.transformState(s),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const h=i[d];if(h){const g=u.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),x=u.filter(v=>f.indexOf(v.presence_ref)<0),w=h.filter(v=>g.indexOf(v.presence_ref)<0);x.length>0&&(o[d]=x),w.length>0&&(c[d]=w)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},a,n)}static syncDiff(t,s,a,n){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),u.length>0){const h=t[o].map(f=>f.presence_ref),g=u.filter(f=>h.indexOf(f.presence_ref)<0);t[o].unshift(...g)}a(o,u,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=d,n(o,d,c),d.length===0&&delete t[o]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const n=t[a];return"metas"in n?s[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[a]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mg||(mg={}));var Si;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Si||(Si={}));var Kr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Kr||(Kr={}));class w0{constructor(t,s={config:{}},a){this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new $c(this,pr.join,this.params,this.timeout),this.rejoinTimer=new Dp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new _i(this),this.broadcastEndpointURL=$p(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var a,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(f=>f.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Si.PRESENCE]&&this.bindings[Si.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},g={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Kr.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Kr.CLOSED)),this.updateJoinPayload(Object.assign({config:g},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var x;if(this.socket.setAuth(),f===void 0){t==null||t(Kr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,v=(x=w==null?void 0:w.length)!==null&&x!==void 0?x:0,y=[];for(let b=0;b<v;b++){const m=w[b],{filter:{event:k,schema:N,table:S,filter:_}}=m,P=f&&f[b];if(P&&P.event===k&&P.schema===N&&P.table===S&&P.filter===_)y.push(Object.assign(Object.assign({},m),{id:P.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(Kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Kr.SUBSCRIBED);return}}).receive("error",f=>{this.state=nt.errored,t==null||t(Kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this.state===nt.joined&&t===Si.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,a)}async send(t,s={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new $c(this,pr.leave,{},t),a.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,s,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),l=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),l}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new $c(this,t,s,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ik){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var n,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=pr;if(a&&[o,c,d,u].indexOf(l)>=0&&a!==this._joinRef())return;let g=this._onMessage(l,s,a);if(s&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var x,w,v;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(w=f.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(f=>f.callback(g,a)):(i=this.bindings[l])===null||i===void 0||i.filter(f=>{var x,w,v,y,b,m;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in f){const k=f.id,N=(x=f.filter)===null||x===void 0?void 0:x.event;return k&&((w=s.ids)===null||w===void 0?void 0:w.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((m=s==null?void 0:s.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===l}).map(f=>{if(typeof g=="object"&&"ids"in g){const x=g.data,{schema:w,table:v,commit_timestamp:y,type:b,errors:m}=x;g=Object.assign(Object.assign({},{schema:w,table:v,commit_timestamp:y,eventType:b,new:{},old:{},errors:m}),this._getPayloadRecords(x))}f.callback(g,a)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const n=t.toLocaleLowerCase(),i={type:n,filter:s,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&w0.isEqual(n.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pr.close,{},t)}_onError(t){this._on(pr.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=hg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=hg(t.columns,t.old_record)),s}}const Ic=()=>{},Ol={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Vk=[1e3,2e3,5e3,1e4],Wk=1e4,Gk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qk{constructor(t,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=iu,this.transport=null,this.heartbeatIntervalMs=Ol.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ic,this.ref=0,this.reconnectTimer=null,this.logger=Ic,this.conn=null,this.sendBuffer=[],this.serializer=new Mk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...l)=>Fn(async()=>{const{default:o}=await Promise.resolve().then(()=>Un);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((a=s==null?void 0:s.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${lu.websocket}`,this.httpEndpoint=$p(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Rk.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ok}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Ni.connecting:return oa.Connecting;case Ni.open:return oa.Open;case Ni.closing:return oa.Closing;default:return oa.Closed}}isConnected(){return this.connectionState()===oa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new w0(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:a,payload:n,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${a} (${i})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($k,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ol.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:n,payload:i,ref:l}=s,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${a} ${n} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(a)).forEach(d=>d._trigger(n,i,l)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pr.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${a}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([Gk],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const n={access_token:s,version:Dk};s&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(pr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(s)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Dp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ol.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,a,n,i,l,o,c,d,u;if(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:iu,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Ol.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Ic,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>Vk[h-1]||Wk,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(h,g)=>g(JSON.stringify(h)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class j0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function it(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Kk extends j0{constructor(t,s,a){super(t),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cu extends j0{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Jk=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};const Ip=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Fn(async()=>{const{default:a}=await Promise.resolve().then(()=>Un);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},Yk=()=>Jk(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fn(()=>Promise.resolve().then(()=>Un),void 0)).Response:Response}),du=e=>{if(Array.isArray(e))return e.map(s=>du(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,a])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=du(a)}),t},Xk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Fa=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};const Mc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Zk=(e,t,s)=>Fa(void 0,void 0,void 0,function*(){const a=yield Yk();e instanceof a&&!(s!=null&&s.noResolveJson)?e.json().then(n=>{const i=e.status||500,l=(n==null?void 0:n.statusCode)||i+"";t(new Kk(Mc(n),i,l))}).catch(n=>{t(new cu(Mc(n),n))}):t(new cu(Mc(e),e))}),ew=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?n:(Xk(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(a)):n.body=a,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s))};function ol(e,t,s,a,n,i){return Fa(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(s,ew(t,a,n,i)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Zk(c,o,a))})})}function To(e,t,s,a){return Fa(this,void 0,void 0,function*(){return ol(e,"GET",t,s,a)})}function Lr(e,t,s,a,n){return Fa(this,void 0,void 0,function*(){return ol(e,"POST",t,a,n,s)})}function uu(e,t,s,a,n){return Fa(this,void 0,void 0,function*(){return ol(e,"PUT",t,a,n,s)})}function tw(e,t,s,a){return Fa(this,void 0,void 0,function*(){return ol(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function Mp(e,t,s,a,n){return Fa(this,void 0,void 0,function*(){return ol(e,"DELETE",t,a,n,s)})}var Et=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};const rw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sw{constructor(t,s={},a,n){this.shouldThrowOnError=!1,this.url=t,this.headers=s,this.bucketId=a,this.fetch=Ip(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,s,a,n){return Et(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},fg),n);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=a,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(t=="PUT"?uu:Lr)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}upload(t,s,a){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,a)})}uploadToSignedUrl(t,s,a,n){return Et(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:fg.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield uu(this.fetch,o.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(it(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return Et(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield Lr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new j0("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a))return{data:null,error:a};throw a}})}update(t,s,a){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,a)})}move(t,s,a){return Et(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}copy(t,s,a){return Et(this,void 0,void 0,function*(){try{return{data:{path:(yield Lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}createSignedUrl(t,s,a){return Et(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield Lr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const l=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}createSignedUrls(t,s,a){return Et(this,void 0,void 0,function*(){try{const n=yield Lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}download(t,s){return Et(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield To(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}info(t){return Et(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const a=yield To(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:du(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a))return{data:null,error:a};throw a}})}exists(t){return Et(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield tw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a)&&a instanceof cu){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,s){const a=this._getFinalPath(t),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${a}${d}`)}}}remove(t){return Et(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(it(s))return{data:null,error:s};throw s}})}list(t,s,a){return Et(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},rw),s),{prefix:t||""});return{data:yield Lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}listV2(t,s){return Et(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const aw="2.12.1",nw={"X-Client-Info":`storage-js/${aw}`};var za=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};class iw{constructor(t,s={},a,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},nw),s),this.fetch=Ip(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return za(this,void 0,void 0,function*(){try{return{data:yield To(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}getBucket(t){return za(this,void 0,void 0,function*(){try{return{data:yield To(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(it(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return za(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a))return{data:null,error:a};throw a}})}updateBucket(t,s){return za(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a))return{data:null,error:a};throw a}})}emptyBucket(t){return za(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(it(s))return{data:null,error:s};throw s}})}deleteBucket(t){return za(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(it(s))return{data:null,error:s};throw s}})}}class lw extends iw{constructor(t,s={},a,n){super(t,s,a,n)}from(t){return new sw(this.url,this.headers,t,this.fetch)}}const ow="2.57.4";let di="";typeof Deno<"u"?di="deno":typeof document<"u"?di="web":typeof navigator<"u"&&navigator.product==="ReactNative"?di="react-native":di="node";const cw={"X-Client-Info":`supabase-js-${di}/${ow}`},dw={headers:cw},uw={schema:"public"},hw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gw={};var mw=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};const fw=e=>{let t;return e?t=e:typeof fetch>"u"?t=jp:t=fetch,(...s)=>t(...s)},pw=()=>typeof Headers>"u"?Np:Headers,xw=(e,t,s)=>{const a=fw(s),n=pw();return(i,l)=>mw(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new n(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},l),{headers:d}))})};var yw=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};function bw(e){return e.endsWith("/")?e:e+"/"}function vw(e,t){var s,a;const{db:n,auth:i,realtime:l,global:o}=e,{db:c,auth:d,realtime:u,global:h}=t,g={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(a=o==null?void 0:o.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>yw(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function kw(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(bw(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Fp="2.71.1",Wa=30*1e3,hu=3,Fc=hu*Wa,ww="http://localhost:9999",jw="supabase.auth.token",Nw={"X-Client-Info":`gotrue-js/${Fp}`},gu="X-Supabase-Api-Version",Up={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_w=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sw=10*60*1e3;class ec extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Cw extends ec{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function Ew(e){return xe(e)&&e.name==="AuthApiError"}class zp extends ec{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class ea extends ec{constructor(t,s,a,n){super(t,a,n),this.name=s,this.status=a}}class ps extends ea{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tw(e){return xe(e)&&e.name==="AuthSessionMissingError"}class $l extends ea{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Il extends ea{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ml extends ea{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Pw(e){return xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class pg extends ea{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mu extends ea{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Uc(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class xg extends ea{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class fu extends ea{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yg=` 	
\r=`.split(""),Aw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<yg.length;t+=1)e[yg[t].charCodeAt(0)]=-2;for(let t=0;t<Po.length;t+=1)e[Po[t].charCodeAt(0)]=t;return e})();function bg(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(Po[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(Po[a]),t.queuedBits-=6}}function Bp(e,t,s){const a=Aw[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function vg(e){const t=[],s=l=>{t.push(String.fromCodePoint(l))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=l=>{Dw(l,a,s)};for(let l=0;l<e.length;l+=1)Bp(e.charCodeAt(l),n,i);return t.join("")}function Rw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Lw(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Rw(a,t)}}function Dw(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Ow(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Bp(e.charCodeAt(n),s,a);return new Uint8Array(t)}function $w(e){const t=[];return Lw(e,s=>t.push(s)),new Uint8Array(t)}function Iw(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>bg(n,s,a)),bg(null,s,a),t.join("")}function Mw(e){return Math.round(Date.now()/1e3)+e}function Fw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ur=()=>typeof window<"u"&&typeof document<"u",sa={tested:!1,writable:!1},qp=()=>{if(!ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sa.tested)return sa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sa.tested=!0,sa.writable=!0}catch{sa.tested=!0,sa.writable=!1}return sa.writable};function Uw(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return s.searchParams.forEach((a,n)=>{t[n]=a}),t}const Hp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Fn(async()=>{const{default:a}=await Promise.resolve().then(()=>Un);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},zw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ga=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},aa=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},gs=async(e,t)=>{await e.removeItem(t)};class tc{constructor(){this.promise=new tc.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}tc.promiseConstructor=Promise;function zc(e){const t=e.split(".");if(t.length!==3)throw new fu("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!_w.test(t[a]))throw new fu("JWT not in base64url format");return{header:JSON.parse(vg(t[0])),payload:JSON.parse(vg(t[1])),signature:Ow(t[2]),raw:{header:t[0],payload:t[1]}}}async function Bw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qw(e,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){a(l);return}}catch(l){if(!t(i,l)){n(l);return}}})()})}function Hw(e){return("0"+e.toString(16)).substr(-2)}function Vw(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Hw).join("")}async function Ww(e){const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Gw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await Ww(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ba(e,t,s=!1){const a=Vw();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await Ga(e,`${t}-code-verifier`,n);const i=await Gw(a);return[i,a===i?"plain":"s256"]}const Qw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Kw(e){const t=e.headers.get(gu);if(!t||!t.match(Qw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Jw(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Yw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qa(e){if(!Xw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bc(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kg(e){return JSON.parse(JSON.stringify(e))}var Zw=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s};const la=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ej=[502,503,504];async function wg(e){var t;if(!zw(e))throw new mu(la(e),0);if(ej.includes(e.status))throw new mu(la(e),e.status);let s;try{s=await e.json()}catch(i){throw new zp(la(i),i)}let a;const n=Kw(e);if(n&&n.getTime()>=Up["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new xg(la(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new ps}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new xg(la(s),e.status,s.weak_password.reasons);throw new Cw(la(s),e.status||500,a)}const tj=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))};async function ve(e,t,s,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[gu]||(i[gu]=Up["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const l=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(l.redirect_to=a.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await rj(e,t,s+o,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function rj(e,t,s,a,n,i){const l=tj(t,a,n,i);let o;try{o=await e(s,Object.assign({},l))}catch(c){throw console.error(c),new mu(la(c),0)}if(o.ok||await wg(o),a!=null&&a.noResolveJson)return o;try{return await o.json()}catch(c){await wg(c)}}function Gr(e){var t;let s=null;ij(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=Mw(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:a},error:null}}function jg(e){const t=Gr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ks(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function sj(e){return{data:e,error:null}}function aj(e){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i}=e,l=Zw(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function nj(e){return e}function ij(e){return e.access_token&&e.refresh_token&&e.expires_in}const qc=["global","local","others"];var lj=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s};class oj{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=Hp(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=qc[0]){if(qc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qc.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ks})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=lj(t,["options"]),n=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:aj,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(xe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ks})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,n,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:nj});if(u.error)throw u.error;const h=await u.json(),g=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,f=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);d[`${v}Page`]=w}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){qa(t);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ks})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){qa(t);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:ks})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){qa(t);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:ks})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){qa(t.userId);try{const{data:s,error:a}=await ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:a}}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _deleteFactor(t){qa(t.userId),qa(t.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}}function Ng(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function cj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ha={debug:!!(globalThis&&qp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dj extends Vp{}async function uj(e,t,s){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ha.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}cj();const hj={url:ww,storageKey:jw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _g(e,t,s){return await s()}const Va={};class Qi{constructor(t){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qi.nextInstanceID,Qi.nextInstanceID+=1,this.instanceID>0&&ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},hj),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new oj({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Hp(n.fetch),this.lock=n.lock||_g,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ur()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=uj:this.lock=_g,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:qp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ng(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Ng(this.memoryStorage)),ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=Va[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Va[this.storageKey]=Object.assign(Object.assign({},Va[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Va[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Va[this.storageKey]=Object.assign(Object.assign({},Va[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=Uw(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),ur()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Pw(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return xe(s)?{error:s}:{error:new zp("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,n;try{const i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Gr}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,a,n;try{let i;if("email"in t){const{email:u,password:h,options:g}=t;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await Ba(this.storage,this.storageKey)),i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:u,password:h,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:f,code_challenge_method:x},xform:Gr})}else if("phone"in t){const{phone:u,password:h,options:g}=t;i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Gr})}else throw new Il("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:l,options:o}=t;s=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jg})}else if("phone"in t){const{phone:i,password:l,options:o}=t;s=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jg})}else throw new Il("You must provide either an email or phone number and a password");const{data:a,error:n}=s;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new $l}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,a,n,i,l,o,c,d,u,h,g,f;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:v,wallet:y,statement:b,options:m}=t;let k;if(ur())if(typeof y=="object")k=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const N=new URL((s=m==null?void 0:m.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),b?{statement:b}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)x=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),w=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(a=m==null?void 0:m.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((d=m==null?void 0:m.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(x),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=S}}try{const{data:v,error:y}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Iw(w)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Gr});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new $l}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(xe(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const s=await aa(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(s??"").split("/");try{const{data:i,error:l}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Gr});if(await gs(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new $l}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:l})}catch(i){if(xe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:s,provider:a,token:n,access_token:i,nonce:l}=t,o=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Gr}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new $l}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,a,n,i,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ba(this.storage,this.storageKey));const{error:h}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:u}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Il("You must provide either an email or phone number.")}catch(o){if(xe(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var s,a;try{let n,i;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:l,error:o}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Gr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var s,a,n;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Ba(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:sj})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new ps;const{error:n}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:l}=await ve(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:l,error:o}=await ve(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Il("You must provide either an email or phone number and a type")}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await aa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Fc:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const l=await aa(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Bc()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ks}):await this._useSession(async s=>{var a,n,i;const{data:l,error:o}=s;if(o)throw o;return!(!((a=l.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ps}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ks})})}catch(s){if(xe(s))return Tw(s)&&(await this._removeSession(),await gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new ps;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Ba(this.storage,this.storageKey));const{data:d,error:u}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:ks});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ps;const s=Date.now()/1e3;let a=s,n=!0,i=null;const{payload:l}=zc(t.access_token);if(l.exp&&(a=l.exp,n=a<=s),n){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(xe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:l,error:o}=s;if(o)throw o;t=(a=l.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new ps;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!ur())throw new Ml("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ml(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new pg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ml("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pg("No code detected.");const{data:b,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!i||!o||!l||!d)throw new Ml("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let g=u+h;c&&(g=parseInt(c));const f=g-u;f*1e3<=Wa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=g-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,g,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,g,u);const{data:w,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:g,refresh_token:l,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(xe(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await aa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{error:i};const l=(a=n.session)===null||a===void 0?void 0:a.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Ew(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=Fw(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,n;try{const{data:{session:i},error:l}=s;if(l)throw l;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Ba(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:a,error:n}=await this._useSession(async i=>{var l,o,c,d,u;const{data:h,error:g}=i;if(g)throw g;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return ur()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(xe(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,n;const{data:i,error:l}=s;if(l)throw l;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await qw(async n=>(n>0&&await Bw(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Gr})),(n,i)=>{const l=200*Math.pow(2,n);return i&&Uc(i)&&Date.now()+l-a<Wa})}catch(a){if(this._debug(s,"error",a),xe(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),ur()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const n=await aa(this.storage,this.storageKey);if(n&&this.userStorage){let l=await aa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await Ga(this.userStorage,this.storageKey+"-user",l)),n.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Bc()}else if(n&&!n.user&&!n.user){const l=await aa(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await gs(this.storage,this.storageKey+"-user"),await Ga(this.storage,this.storageKey,n)):n.user=Bc()}if(this._debug(a,"session from storage",n),!this._isValidSession(n)){this._debug(a,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Fc;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${Fc}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),Uc(l)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(n.access_token);!o&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(a,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(a,"error",n),console.error(n);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new tc;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new ps;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),xe(i)){const l={session:null,error:i};return Uc(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await Ga(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=kg(n);await Ga(this.storage,this.storageKey,i)}else{const n=kg(s);await Ga(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await gs(this.storage,this.storageKey),await gs(this.storage,this.storageKey+"-code-verifier"),await gs(this.storage,this.storageKey+"-user"),this.userStorage&&await gs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/Wa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Wa}ms, refresh threshold is ${hu} ticks`),n<=hu&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Vp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const n=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ba(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,n;const{data:i,error:l}=s;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:l,error:o}=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(s){if(xe(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(xe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(t==null?void 0:t.factors)||[],n=a.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=a.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=zc(n.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((a=(s=n.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(o=>o.kid===t);if(a)return a;const n=Date.now();if(a=this.jwks.keys.find(o=>o.kid===t),a&&this.jwks_cached_at+Sw>n)return a;const{data:i,error:l}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,a=i.keys.find(o=>o.kid===t),!a)?null:a}async getClaims(t,s={}){try{let a=t;if(!a){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};a=f.session.access_token}const{header:n,payload:i,signature:l,raw:{header:o,payload:c}}=zc(a);s!=null&&s.allowExpired||Jw(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:f}=await this.getUser(a);if(f)throw f;return{data:{claims:i,header:n,signature:l},error:null}}const u=Yw(n.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,l,$w(`${o}.${c}`)))throw new fu("Invalid JWT signature");return{data:{claims:i,header:n,signature:l},error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}}Qi.nextInstanceID=0;const gj=Qi;class mj extends gj{constructor(t){super(t)}}var fj=function(e,t,s,a){function n(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(a.next(u))}catch(h){l(h)}}function c(u){try{d(a.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):n(u.value).then(o,c)}d((a=a.apply(e,t||[])).next())})};class pj{constructor(t,s,a){var n,i,l;this.supabaseUrl=t,this.supabaseKey=s;const o=kw(t);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:uw,realtime:gw,auth:Object.assign(Object.assign({},hw),{storageKey:c}),global:dw},u=vw(a??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=xw(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Ak(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new lw(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new ck(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},a={}){return this.rest.rpc(t,s,a)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return fj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,userStorage:i,storageKey:l,flowType:o,lock:c,debug:d},u,h){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mj({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),u),storageKey:l,autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,userStorage:i,flowType:o,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Qk(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,s,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xj=(e,t,s)=>new pj(e,t,s);function yj(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}yj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bj="http://127.0.0.1:54321",vj="sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH",H=xj(bj,vj),Wp=p.createContext(void 0);function kj({children:e}){const[t,s]=p.useState(null),[a,n]=p.useState(null),[i,l]=p.useState(null),[o,c]=p.useState(!0),{showToast:d}=St(),u=async N=>{try{const{data:S,error:_}=await H.from("user_profiles").select("*").eq("id",N).maybeSingle();if(_)throw _;return S}catch(S){return console.error("Error fetching profile:",S),null}},h=async(N,S,_)=>{try{const{data:P,error:A}=await H.from("user_profiles").insert({id:N,email:S,full_name:_||null,role:"read_only",is_active:!0,last_login_at:new Date().toISOString()}).select().single();if(A)throw A;return P}catch(P){return console.error("Error creating profile:",P),null}},g=async N=>{try{await H.from("user_profiles").update({last_login_at:new Date().toISOString()}).eq("id",N)}catch(S){console.error("Error updating last login:",S)}};p.useEffect(()=>{H.auth.getSession().then(({data:{session:S}})=>{l(S),s((S==null?void 0:S.user)??null),S!=null&&S.user?u(S.user.id).then(async _=>{var P;if(_)n(_),await g(S.user.id);else{const A=await h(S.user.id,S.user.email||"",(P=S.user.user_metadata)==null?void 0:P.full_name);n(A)}c(!1)}):c(!1)});const{data:{subscription:N}}=H.auth.onAuthStateChange((S,_)=>{l(_),s((_==null?void 0:_.user)??null),_!=null&&_.user?u(_.user.id).then(async P=>{var A;if(P)n(P),await g(_.user.id);else{const R=await h(_.user.id,_.user.email||"",(A=_.user.user_metadata)==null?void 0:A.full_name);n(R)}}):n(null)});return()=>N.unsubscribe()},[]);const f=async(N,S)=>{try{const{data:_,error:P}=await H.auth.signInWithPassword({email:N,password:S});if(P)return d("error","Login failed: "+P.message),{error:P};if(_.user){const A=await u(_.user.id);if(!(A!=null&&A.is_active))return await H.auth.signOut(),d("error","Your account has been deactivated"),{error:new ec("Account deactivated")};await m("auth.login","User logged in"),d("success","Successfully logged in")}return{error:null}}catch(_){return d("error","An error occurred during login"),{error:_}}},x=async(N,S,_)=>{try{const{data:P,error:A}=await H.auth.signUp({email:N,password:S,options:{data:{full_name:_}}});return A?(d("error","Sign up failed: "+A.message),{error:A}):(P.user&&(await h(P.user.id,N,_),d("success","Account created successfully")),{error:null})}catch(P){return d("error","An error occurred during sign up"),{error:P}}},w=async()=>{try{await m("auth.logout","User logged out"),await H.auth.signOut(),s(null),n(null),l(null),d("success","Logged out successfully")}catch{d("error","Error logging out")}},v=async N=>{if(!t)return{error:new Error("Not authenticated")};try{const{error:S}=await H.from("user_profiles").update(N).eq("id",t.id);if(S)throw S;const _=await u(t.id);return _&&n(_),await m("profile.update","User updated profile","user_profile",t.id),d("success","Profile updated successfully"),{error:null}}catch(S){return d("error","Error updating profile"),{error:S}}},y=N=>(a==null?void 0:a.role)===N&&(a==null?void 0:a.is_active)===!0,b=N=>{if(!(a!=null&&a.is_active))return!1;const S={read_only:1,maintainer:2,admin:3},_=S[a.role],P=S[N];return _>=P},m=async(N,S,_,P,A)=>{if(t)try{await H.from("user_activity_logs").insert({user_id:t.id,action_type:N,action_description:S,resource_type:_||null,resource_id:P||null,metadata:A||{}})}catch(R){console.error("Error logging activity:",R)}},k={user:t,profile:a,session:i,loading:o,signIn:f,signUp:x,signOut:w,updateProfile:v,hasRole:y,hasRoleLevel:b,logActivity:m};return r.jsx(Wp.Provider,{value:k,children:e})}function qt(){const e=p.useContext(Wp);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sg="popstate";function wj(e={}){function t(a,n){let{pathname:i,search:l,hash:o}=a.location;return pu("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(a,n){return typeof n=="string"?n:Ki(n)}return Nj(t,s,null,e)}function We(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jj(){return Math.random().toString(36).substring(2,10)}function Cg(e,t){return{usr:e.state,key:e.key,idx:t}}function pu(e,t,s=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Bn(t):t,state:s,key:t&&t.key||a||jj()}}function Ki({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Bn(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function Nj(e,t,s,a={}){let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o="POP",c=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function h(){o="POP";let v=u(),y=v==null?null:v-d;d=v,c&&c({action:o,location:w.location,delta:y})}function g(v,y){o="PUSH";let b=pu(w.location,v,y);d=u()+1;let m=Cg(b,d),k=w.createHref(b);try{l.pushState(m,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(k)}i&&c&&c({action:o,location:w.location,delta:1})}function f(v,y){o="REPLACE";let b=pu(w.location,v,y);d=u();let m=Cg(b,d),k=w.createHref(b);l.replaceState(m,"",k),i&&c&&c({action:o,location:w.location,delta:0})}function x(v){return _j(v)}let w={get action(){return o},get location(){return e(n,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Sg,h),c=v,()=>{n.removeEventListener(Sg,h),c=null}},createHref(v){return t(n,v)},createURL:x,encodeLocation(v){let y=x(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:f,go(v){return l.go(v)}};return w}function _j(e,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),We(s,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Ki(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}function Gp(e,t,s="/"){return Sj(e,t,s,!1)}function Sj(e,t,s,a){let n=typeof t=="string"?Bn(t):t,i=os(n.pathname||"/",s);if(i==null)return null;let l=Qp(e);Cj(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=Mj(i);o=$j(l[c],d,a)}return o}function Qp(e,t=[],s=[],a="",n=!1){let i=(l,o,c=n,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(a)&&c)return;We(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length)}let h=ss([a,u.relativePath]),g=s.concat(u);l.children&&l.children.length>0&&(We(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Qp(l.children,t,g,h,c)),!(l.path==null&&!l.index)&&t.push({path:h,score:Dj(h,l.index),routesMeta:g})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of Kp(l.path))i(l,o,!0,d)}),t}function Kp(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,n=s.endsWith("?"),i=s.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=Kp(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Cj(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Oj(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var Ej=/^:[\w-]+$/,Tj=3,Pj=2,Aj=1,Rj=10,Lj=-2,Eg=e=>e==="*";function Dj(e,t){let s=e.split("/"),a=s.length;return s.some(Eg)&&(a+=Lj),t&&(a+=Pj),s.filter(n=>!Eg(n)).reduce((n,i)=>n+(Ej.test(i)?Tj:i===""?Aj:Rj),a)}function Oj(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function $j(e,t,s=!1){let{routesMeta:a}=e,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Ao({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),g=c.route;if(!h&&d&&s&&!a[a.length-1].route.index&&(h=Ao({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),l.push({params:n,pathname:ss([i,h.pathname]),pathnameBase:Bj(ss([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=ss([i,h.pathnameBase]))}return l}function Ao(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=Ij(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,{paramName:u,isOptional:h},g)=>{if(u==="*"){let x=o[g]||"";l=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const f=o[g];return h&&!f?d[u]=void 0:d[u]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function Ij(e,t=!1,s=!0){Sr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function Mj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function os(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function Fj(e,t="/"){let{pathname:s,search:a="",hash:n=""}=typeof e=="string"?Bn(e):e;return{pathname:s?s.startsWith("/")?s:Uj(s,t):t,search:qj(a),hash:Hj(n)}}function Uj(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Hc(e,t,s,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zj(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function N0(e){let t=zj(e);return t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase)}function _0(e,t,s,a=!1){let n;typeof e=="string"?n=Bn(e):(n={...e},We(!n.pathname||!n.pathname.includes("?"),Hc("?","pathname","search",n)),We(!n.pathname||!n.pathname.includes("#"),Hc("#","pathname","hash",n)),We(!n.search||!n.search.includes("#"),Hc("#","search","hash",n)));let i=e===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=s;else{let h=t.length-1;if(!a&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),h-=1;n.pathname=g.join("/")}o=h>=0?t[h]:"/"}let c=Fj(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var ss=e=>e.join("/").replace(/\/\/+/g,"/"),Bj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Hj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Vj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jp=["POST","PUT","PATCH","DELETE"];new Set(Jp);var Wj=["GET",...Jp];new Set(Wj);var qn=p.createContext(null);qn.displayName="DataRouter";var rc=p.createContext(null);rc.displayName="DataRouterState";p.createContext(!1);var Yp=p.createContext({isTransitioning:!1});Yp.displayName="ViewTransition";var Gj=p.createContext(new Map);Gj.displayName="Fetchers";var Qj=p.createContext(null);Qj.displayName="Await";var Cr=p.createContext(null);Cr.displayName="Navigation";var cl=p.createContext(null);cl.displayName="Location";var Er=p.createContext({outlet:null,matches:[],isDataRoute:!1});Er.displayName="Route";var S0=p.createContext(null);S0.displayName="RouteError";function Kj(e,{relative:t}={}){We(Hn(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=p.useContext(Cr),{hash:n,pathname:i,search:l}=dl(e,{relative:t}),o=i;return s!=="/"&&(o=i==="/"?s:ss([s,i])),a.createHref({pathname:o,search:l,hash:n})}function Hn(){return p.useContext(cl)!=null}function bt(){return We(Hn(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(cl).location}var Xp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zp(e){p.useContext(Cr).static||p.useLayoutEffect(e)}function tt(){let{isDataRoute:e}=p.useContext(Er);return e?oN():Jj()}function Jj(){We(Hn(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(qn),{basename:t,navigator:s}=p.useContext(Cr),{matches:a}=p.useContext(Er),{pathname:n}=bt(),i=JSON.stringify(N0(a)),l=p.useRef(!1);return Zp(()=>{l.current=!0}),p.useCallback((c,d={})=>{if(Sr(l.current,Xp),!l.current)return;if(typeof c=="number"){s.go(c);return}let u=_0(c,JSON.parse(i),n,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ss([t,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[t,s,i,n,e])}p.createContext(null);function sc(){let{matches:e}=p.useContext(Er),t=e[e.length-1];return t?t.params:{}}function dl(e,{relative:t}={}){let{matches:s}=p.useContext(Er),{pathname:a}=bt(),n=JSON.stringify(N0(s));return p.useMemo(()=>_0(e,JSON.parse(n),a,t==="path"),[e,n,a,t])}function Yj(e,t){return ex(e,t)}function ex(e,t,s,a,n){var b;We(Hn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=p.useContext(Cr),{matches:l}=p.useContext(Er),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let m=h&&h.path||"";tx(d,!h||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let g=bt(),f;if(t){let m=typeof t=="string"?Bn(t):t;We(u==="/"||((b=m.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),f=m}else f=g;let x=f.pathname||"/",w=x;if(u!=="/"){let m=u.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(m.length).join("/")}let v=Gp(e,{pathname:w});Sr(h||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Sr(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=rN(v&&v.map(m=>Object.assign({},m,{params:Object.assign({},c,m.params),pathname:ss([u,i.encodeLocation?i.encodeLocation(m.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:ss([u,i.encodeLocation?i.encodeLocation(m.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathnameBase])})),l,s,a,n);return t&&y?p.createElement(cl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function Xj(){let e=lN(),t=Vj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),s?p.createElement("pre",{style:n},s):null,l)}var Zj=p.createElement(Xj,null),eN=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?p.createElement(Er.Provider,{value:this.props.routeContext},p.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tN({routeContext:e,match:t,children:s}){let a=p.useContext(qn);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(Er.Provider,{value:e},s)}function rN(e,t=[],s=null,a=null,n=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let i=e,l=s==null?void 0:s.errors;if(l!=null){let d=i.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);We(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(s)for(let d=0;d<i.length;d++){let u=i[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:h,errors:g}=s,f=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!g||g[u.route.id]===void 0);if(u.route.lazy||f){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,u,h)=>{let g,f=!1,x=null,w=null;s&&(g=l&&u.route.id?l[u.route.id]:void 0,x=u.route.errorElement||Zj,o&&(c<0&&h===0?(tx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,w=null):c===h&&(f=!0,w=u.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,h+1)),y=()=>{let b;return g?b=x:f?b=w:u.route.Component?b=p.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=d,p.createElement(tN,{match:u,routeContext:{outlet:d,matches:v,isDataRoute:s!=null},children:b})};return s&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?p.createElement(eN,{location:s.location,revalidation:s.revalidation,component:x,error:g,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:a}):y()},null)}function C0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sN(e){let t=p.useContext(qn);return We(t,C0(e)),t}function aN(e){let t=p.useContext(rc);return We(t,C0(e)),t}function nN(e){let t=p.useContext(Er);return We(t,C0(e)),t}function E0(e){let t=nN(e),s=t.matches[t.matches.length-1];return We(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function iN(){return E0("useRouteId")}function lN(){var a;let e=p.useContext(S0),t=aN("useRouteError"),s=E0("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[s]}function oN(){let{router:e}=sN("useNavigate"),t=E0("useNavigate"),s=p.useRef(!1);return Zp(()=>{s.current=!0}),p.useCallback(async(n,i={})=>{Sr(s.current,Xp),s.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))},[e,t])}var Tg={};function tx(e,t,s){!t&&!Tg[e]&&(Tg[e]=!0,Sr(!1,s))}p.memo(cN);function cN({routes:e,future:t,state:s,unstable_onError:a}){return ex(e,void 0,s,a,t)}function T0({to:e,replace:t,state:s,relative:a}){We(Hn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=p.useContext(Cr);Sr(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=p.useContext(Er),{pathname:l}=bt(),o=tt(),c=_0(e,N0(i),l,a==="path"),d=JSON.stringify(c);return p.useEffect(()=>{o(JSON.parse(d),{replace:t,state:s,relative:a})},[o,d,a,t,s]),null}function Ie(e){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dN({basename:e="/",children:t=null,location:s,navigationType:a="POP",navigator:n,static:i=!1}){We(!Hn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=p.useMemo(()=>({basename:l,navigator:n,static:i,future:{}}),[l,n,i]);typeof s=="string"&&(s=Bn(s));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:g="default"}=s,f=p.useMemo(()=>{let x=os(c,l);return x==null?null:{location:{pathname:x,search:d,hash:u,state:h,key:g},navigationType:a}},[l,c,d,u,h,g,a]);return Sr(f!=null,`<Router basename="${l}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:p.createElement(Cr.Provider,{value:o},p.createElement(cl.Provider,{children:t,value:f}))}function P0({children:e,location:t}){return Yj(xu(e),t)}function xu(e,t=[]){let s=[];return p.Children.forEach(e,(a,n)=>{if(!p.isValidElement(a))return;let i=[...t,n];if(a.type===p.Fragment){s.push.apply(s,xu(a.props.children,i));return}We(a.type===Ie,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=xu(a.props.children,i)),s.push(l)}),s}var eo="get",to="application/x-www-form-urlencoded";function ac(e){return e!=null&&typeof e.tagName=="string"}function uN(e){return ac(e)&&e.tagName.toLowerCase()==="button"}function hN(e){return ac(e)&&e.tagName.toLowerCase()==="form"}function gN(e){return ac(e)&&e.tagName.toLowerCase()==="input"}function mN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fN(e,t){return e.button===0&&(!t||t==="_self")&&!mN(e)}var Fl=null;function pN(){if(Fl===null)try{new FormData(document.createElement("form"),0),Fl=!1}catch{Fl=!0}return Fl}var xN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vc(e){return e!=null&&!xN.has(e)?(Sr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${to}"`),null):e}function yN(e,t){let s,a,n,i,l;if(hN(e)){let o=e.getAttribute("action");a=o?os(o,t):null,s=e.getAttribute("method")||eo,n=Vc(e.getAttribute("enctype"))||to,i=new FormData(e)}else if(uN(e)||gN(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(a=c?os(c,t):null,s=e.getAttribute("formmethod")||o.getAttribute("method")||eo,n=Vc(e.getAttribute("formenctype"))||Vc(o.getAttribute("enctype"))||to,i=new FormData(o,e),!pN()){let{name:d,type:u,value:h}=e;if(u==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,h)}}else{if(ac(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=eo,a=null,n=to,l=e}return i&&n==="text/plain"&&(l=i,i=void 0),{action:a,method:s.toLowerCase(),encType:n,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function A0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bN(e,t,s){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${s}`:t&&os(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function vN(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kN(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function wN(e,t,s){let a=await Promise.all(e.map(async n=>{let i=t.routes[n.route.id];if(i){let l=await vN(i,s);return l.links?l.links():[]}return[]}));return SN(a.flat(1).filter(kN).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Pg(e,t,s,a,n,i){let l=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,o=(c,d)=>{var u;return s[d].pathname!==c.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?t.filter((c,d)=>{var h;let u=a.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((h=s[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function jN(e,t,{includeHydrateFallback:s}={}){return NN(e.map(a=>{let n=t.routes[a.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function NN(e){return[...new Set(e)]}function _N(e){let t={},s=Object.keys(e).sort();for(let a of s)t[a]=e[a];return t}function SN(e,t){let s=new Set;return new Set(t),e.reduce((a,n)=>{let i=JSON.stringify(_N(n));return s.has(i)||(s.add(i),a.push({key:i,link:n})),a},[])}function rx(){let e=p.useContext(qn);return A0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function CN(){let e=p.useContext(rc);return A0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var R0=p.createContext(void 0);R0.displayName="FrameworkContext";function sx(){let e=p.useContext(R0);return A0(e,"You must render this element inside a <HydratedRouter> element"),e}function EN(e,t){let s=p.useContext(R0),[a,n]=p.useState(!1),[i,l]=p.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,g=p.useRef(null);p.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=y=>{y.forEach(b=>{l(b.isIntersecting)})},v=new IntersectionObserver(w,{threshold:.5});return g.current&&v.observe(g.current),()=>{v.disconnect()}}},[e]),p.useEffect(()=>{if(a){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[a]);let f=()=>{n(!0)},x=()=>{n(!1),l(!1)};return s?e!=="intent"?[i,g,{}]:[i,g,{onFocus:ai(o,f),onBlur:ai(c,x),onMouseEnter:ai(d,f),onMouseLeave:ai(u,x),onTouchStart:ai(h,f)}]:[!1,g,{}]}function ai(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function TN({page:e,...t}){let{router:s}=rx(),a=p.useMemo(()=>Gp(s.routes,e,s.basename),[s.routes,e,s.basename]);return a?p.createElement(AN,{page:e,matches:a,...t}):null}function PN(e){let{manifest:t,routeModules:s}=sx(),[a,n]=p.useState([]);return p.useEffect(()=>{let i=!1;return wN(e,t,s).then(l=>{i||n(l)}),()=>{i=!0}},[e,t,s]),a}function AN({page:e,matches:t,...s}){let a=bt(),{manifest:n,routeModules:i}=sx(),{basename:l}=rx(),{loaderData:o,matches:c}=CN(),d=p.useMemo(()=>Pg(e,t,c,n,a,"data"),[e,t,c,n,a]),u=p.useMemo(()=>Pg(e,t,c,n,a,"assets"),[e,t,c,n,a]),h=p.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let x=new Set,w=!1;if(t.forEach(y=>{var m;let b=n.routes[y.route.id];!b||!b.hasLoader||(!d.some(k=>k.route.id===y.route.id)&&y.route.id in o&&((m=i[y.route.id])!=null&&m.shouldRevalidate)||b.hasClientLoader?w=!0:x.add(y.route.id))}),x.size===0)return[];let v=bN(e,l,"data");return w&&x.size>0&&v.searchParams.set("_routes",t.filter(y=>x.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[l,o,a,n,d,t,e,i]),g=p.useMemo(()=>jN(u,n),[u,n]),f=PN(u);return p.createElement(p.Fragment,null,h.map(x=>p.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...s})),g.map(x=>p.createElement("link",{key:x,rel:"modulepreload",href:x,...s})),f.map(({key:x,link:w})=>p.createElement("link",{key:x,nonce:s.nonce,...w})))}function RN(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var ax=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ax&&(window.__reactRouterVersion="7.9.5")}catch{}function LN({basename:e,children:t,window:s}){let a=p.useRef();a.current==null&&(a.current=wj({window:s,v5Compat:!0}));let n=a.current,[i,l]=p.useState({action:n.action,location:n.location}),o=p.useCallback(c=>{p.startTransition(()=>l(c))},[l]);return p.useLayoutEffect(()=>n.listen(o),[n,o]),p.createElement(dN,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:n})}var nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nc=p.forwardRef(function({onClick:t,discover:s="render",prefetch:a="none",relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h,...g},f){let{basename:x}=p.useContext(Cr),w=typeof d=="string"&&nx.test(d),v,y=!1;if(typeof d=="string"&&w&&(v=d,ax))try{let A=new URL(window.location.href),R=d.startsWith("//")?new URL(A.protocol+d):new URL(d),E=os(R.pathname,x);R.origin===A.origin&&E!=null?d=E+R.search+R.hash:y=!0}catch{Sr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Kj(d,{relative:n}),[m,k,N]=EN(a,g),S=$N(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:h});function _(A){t&&t(A),A.defaultPrevented||S(A)}let P=p.createElement("a",{...g,...N,href:v||b,onClick:y||i?t:_,ref:RN(f,k),target:c,"data-discover":!w&&s==="render"?"true":void 0});return m&&!w?p.createElement(p.Fragment,null,P,p.createElement(TN,{page:b})):P});nc.displayName="Link";var Qa=p.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:a="",end:n=!1,style:i,to:l,viewTransition:o,children:c,...d},u){let h=dl(l,{relative:d.relative}),g=bt(),f=p.useContext(rc),{navigator:x,basename:w}=p.useContext(Cr),v=f!=null&&zN(h)&&o===!0,y=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,b=g.pathname,m=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(b=b.toLowerCase(),m=m?m.toLowerCase():null,y=y.toLowerCase()),m&&w&&(m=os(m,w)||m);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=b===y||!n&&b.startsWith(y)&&b.charAt(k)==="/",S=m!=null&&(m===y||!n&&m.startsWith(y)&&m.charAt(y.length)==="/"),_={isActive:N,isPending:S,isTransitioning:v},P=N?t:void 0,A;typeof a=="function"?A=a(_):A=[a,N?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(_):i;return p.createElement(nc,{...d,"aria-current":P,className:A,ref:u,style:R,to:l,viewTransition:o},typeof c=="function"?c(_):c)});Qa.displayName="NavLink";var DN=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:a,replace:n,state:i,method:l=eo,action:o,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...g},f)=>{let x=FN(),w=UN(o,{relative:d}),v=l.toLowerCase()==="get"?"get":"post",y=typeof o=="string"&&nx.test(o),b=m=>{if(c&&c(m),m.defaultPrevented)return;m.preventDefault();let k=m.nativeEvent.submitter,N=(k==null?void 0:k.getAttribute("formmethod"))||l;x(k||m.currentTarget,{fetcherKey:t,method:N,navigate:s,replace:n,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return p.createElement("form",{ref:f,method:v,action:w,onSubmit:a?c:b,...g,"data-discover":!y&&e==="render"?"true":void 0})});DN.displayName="Form";function ON(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ix(e){let t=p.useContext(qn);return We(t,ON(e)),t}function $N(e,{target:t,replace:s,state:a,preventScrollReset:n,relative:i,viewTransition:l}={}){let o=tt(),c=bt(),d=dl(e,{relative:i});return p.useCallback(u=>{if(fN(u,t)){u.preventDefault();let h=s!==void 0?s:Ki(c)===Ki(d);o(e,{replace:h,state:a,preventScrollReset:n,relative:i,viewTransition:l})}},[c,o,d,s,a,t,e,n,i,l])}var IN=0,MN=()=>`__${String(++IN)}__`;function FN(){let{router:e}=ix("useSubmit"),{basename:t}=p.useContext(Cr),s=iN();return p.useCallback(async(a,n={})=>{let{action:i,method:l,encType:o,formData:c,body:d}=yN(a,t);if(n.navigate===!1){let u=n.fetcherKey||MN();await e.fetch(u,s,n.action||i,{preventScrollReset:n.preventScrollReset,formData:c,body:d,formMethod:n.method||l,formEncType:n.encType||o,flushSync:n.flushSync})}else await e.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:c,body:d,formMethod:n.method||l,formEncType:n.encType||o,replace:n.replace,state:n.state,fromRouteId:s,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,s])}function UN(e,{relative:t}={}){let{basename:s}=p.useContext(Cr),a=p.useContext(Er);We(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),i={...dl(e||".",{relative:t})},l=bt();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:ss([s,i.pathname])),Ki(i)}function zN(e,{relative:t}={}){let s=p.useContext(Yp);We(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=ix("useViewTransitionState"),n=dl(e,{relative:t});if(!s.isTransitioning)return!1;let i=os(s.currentLocation.pathname,a)||s.currentLocation.pathname,l=os(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Ao(n.pathname,l)!=null||Ao(n.pathname,i)!=null}function BN({enabled:e=!0,refetchInterval:t=1e4}={}){return $a({queryKey:["alert-stats"],queryFn:async()=>{const s=await fetch("http://localhost:5002/api/alerts/stats");if(!s.ok)throw new Error("Failed to fetch alert stats");return(await s.json()).stats},enabled:e,refetchInterval:t,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:s=>s,gcTime:5*60*1e3})}function qN({enabled:e=!0,refetchInterval:t=1e4}={}){return $a({queryKey:["alerts"],queryFn:async()=>{const s=await fetch("http://localhost:5002/api/alerts");if(!s.ok)throw new Error("Failed to fetch alerts");return(await s.json()).alerts},enabled:e,refetchInterval:t,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:s=>s,gcTime:5*60*1e3})}function lx(e,{enabled:t=!0,refetchInterval:s=1e4}={}){return $a({queryKey:["pipeline-alerts",e],queryFn:async()=>{const a=await fetch(`http://localhost:5002/api/pipelines/${e}/alerts?resolved=false`);if(!a.ok)throw new Error("Failed to fetch pipeline alerts");return(await a.json()).alerts},enabled:t&&!!e,refetchInterval:s,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:a=>a,gcTime:5*60*1e3})}async function HN(e){if(!(await fetch(`http://localhost:5002/api/alerts/${e}/resolve`,{method:"POST"})).ok)throw new Error("Failed to resolve alert")}function VN(e){switch(e){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"warning":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"info":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}}function WN(e){return{CONNECTOR_FAILED:"Connector Failed",TASK_FAILED:"Task Failed",HIGH_LAG:"High Lag",THROUGHPUT_DROP:"Throughput Drop",DLQ_MESSAGES:"DLQ Messages",HIGH_ERROR_RATE:"High Error Rate"}[e]||e}function GN(){const{profile:e,user:t,signOut:s}=qt(),a=tt(),[n,i]=p.useState(!1),[l,o]=p.useState(!1),[c,d]=p.useState([]),[u,h]=p.useState([]),[g,f]=p.useState(new Set),[x,w]=p.useState(!1),{data:v}=BN({refetchInterval:1e4}),y=[{id:"pipelines",label:"Pipelines",icon:au,path:"/pipelines"},{id:"models",label:"Models",icon:Iv,path:"/models"},{id:"destinations",label:"Destinations",icon:Ve,path:"/destinations"}],b=async()=>{await s(),a("/login")};p.useEffect(()=>{t&&m()},[t]);const m=async()=>{if(t){w(!0);try{console.log("[Sidebar] Fetching alerts for user:",t.id,t.email);const{data:_,error:P}=await H.from("alert_recipients").select(`
          id,
          pipeline_id,
          email,
          channels,
          created_at,
          pipelines!inner(name, source_type, destination_type)
        `).eq("recipient_user_id",t.id).order("created_at",{ascending:!1});if(P)throw console.error("[Sidebar] Error fetching alerts:",P),P;console.log("[Sidebar] Alerts fetched:",_);const A=(_||[]).filter(E=>E.pipeline_id);d(A);const R=A.reduce((E,Y)=>{if(!Y.pipeline_id)return E;const L=Y.email,U=E.find(O=>O.email===L);return U?(U.alerts.push(Y),U.count++):E.push({email:L,count:1,alerts:[Y]}),E},[]);console.log("[Sidebar] Grouped alerts:",R),h(R)}catch(_){console.error("[Sidebar] Error fetching alerts:",_)}finally{w(!1)}}},k=_=>{f(P=>{const A=new Set(P);return A.has(_)?A.delete(_):A.add(_),A})},N=_=>{switch(_){case"email":return r.jsx(eu,{className:"w-4 h-4"});case"slack":return r.jsx(kp,{className:"w-4 h-4"});case"dashboard":return r.jsx(b0,{className:"w-4 h-4"});default:return r.jsx(vr,{className:"w-4 h-4"})}},S=_=>{switch(_){case"admin":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"maintainer":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"read_only":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}};return r.jsxs("div",{className:"w-[72px] bg-[#1a1d24] text-white flex flex-col fixed h-screen left-0 top-0 z-30",children:[r.jsx("div",{className:"p-3 border-b border-gray-800",children:r.jsx(Qa,{to:"/pipelines",className:"flex items-center justify-center group",children:r.jsx("div",{className:"p-2 bg-blue-600 rounded-lg group-hover:bg-blue-700 transition-colors",children:r.jsx(au,{className:"w-6 h-6 text-white"})})})}),r.jsxs("nav",{className:"flex-1 flex flex-col py-4 px-2 gap-1",children:[y.map(_=>{const P=_.icon;return r.jsx(Qa,{to:_.path,className:({isActive:A})=>`flex items-center justify-center p-3 rounded-lg transition-all ${A?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,title:_.label,children:r.jsx(P,{className:"w-6 h-6"})},_.id)}),(e==null?void 0:e.role)==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-px bg-gray-800 my-2 mx-2"}),r.jsx(Qa,{to:"/admin",className:({isActive:_})=>`flex items-center justify-center p-3 rounded-lg transition-all ${_?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,title:"Admin Panel",children:r.jsx(Dn,{className:"w-6 h-6"})})]})]}),r.jsxs("div",{className:"border-t border-gray-800 p-2 space-y-1",children:[r.jsx(Qa,{to:"/test-rollback",className:"flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all",title:"Test Rollback",children:r.jsx(Bv,{className:"w-6 h-6"})}),r.jsx(Qa,{to:"/docs",className:"flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all",title:"Help",children:r.jsx(vp,{className:"w-6 h-6"})}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>{o(!l),i(!1)},className:"w-full flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all relative",title:v&&v.unresolved_count>0?`${v.unresolved_count} unresolved alerts (${v.critical_count} critical)`:"My Alerts",children:v&&v.unresolved_count>0?r.jsxs(r.Fragment,{children:[r.jsx(Wi,{className:`w-6 h-6 ${v.critical_count>0?"text-red-500 animate-pulse":"text-yellow-500 animate-pulse"}`}),r.jsx("span",{className:"absolute top-1.5 right-1.5 bg-red-600 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:v.unresolved_count>9?"9+":v.unresolved_count})]}):r.jsxs(r.Fragment,{children:[r.jsx(vr,{className:"w-6 h-6"}),c.length>0&&r.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-500 rounded-full"})]})}),l&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),r.jsxs("div",{className:"absolute left-full bottom-0 ml-2 w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-[600px] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"My Alert Assignments"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Pipelines where you receive alerts"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:x?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):u.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(vr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No alert assignments yet"})]}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map(_=>{const P=g.has(_.email);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>k(_.email),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(eu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:_.email}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[_.count," pipeline",_.count!==1?"s":""]})]})]}),P?r.jsx(rs,{className:"w-5 h-5 text-gray-400"}):r.jsx(cr,{className:"w-5 h-5 text-gray-400"})]}),P&&r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50",children:_.alerts.map(A=>r.jsx("button",{onClick:()=>{a(`/pipelines/${A.pipeline_id}`),o(!1)},className:"w-full px-4 py-3 pl-16 text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors border-t border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"flex items-start justify-between gap-3",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:A.pipelines.name}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[A.pipelines.source_type,"  ",A.pipelines.destination_type]}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:A.channels.map(R=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white dark:bg-gray-800 rounded text-xs text-gray-600 dark:text-gray-300",children:[N(R),r.jsx("span",{className:"capitalize",children:R})]},R))})]})})},A.id))})]},_.email)})})})]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>{i(!n),o(!1)},className:"w-full flex items-center justify-center p-3 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800/50 transition-all",title:"User menu",children:r.jsx(ru,{className:"w-6 h-6"})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),r.jsxs("div",{className:"absolute left-full bottom-0 ml-2 w-64 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(e==null?void 0:e.full_name)||"User"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(t==null?void 0:t.email)||"user@example.com"}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded ${S((e==null?void 0:e.role)||"read_only")}`,children:(e==null?void 0:e.role)||"read_only"})})]}),(e==null?void 0:e.role)==="admin"&&r.jsxs("button",{onClick:()=>{a("/admin"),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[r.jsx(Dn,{className:"w-4 h-4"}),"Admin Panel"]}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:r.jsxs("button",{onClick:b,className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors flex items-center gap-2",children:[r.jsx(Gv,{className:"w-4 h-4"}),"Sign Out"]})})]})]})]})]})]})}const ox={oracle:{url:"/logos/oracle.svg",bgColor:"bg-red-50",darkBgColor:"dark:bg-red-900/20"},postgresql:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},postgres:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},sqlserver:{url:"/logos/sqlserver.svg",bgColor:"bg-gray-50",darkBgColor:"dark:bg-gray-800"},mysql:{url:"/logos/mysql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},mongodb:{url:"/logos/mongodb.svg",bgColor:"bg-green-50",darkBgColor:"dark:bg-green-900/20"},mongo:{url:"/logos/mongodb.svg",bgColor:"bg-green-50",darkBgColor:"dark:bg-green-900/20"},mariadb:{url:"/logos/mariadb.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},db2:{url:"/logos/db2.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},cassandra:{url:"/logos/cassandra.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},redis:{url:"/logos/redis.svg",bgColor:"bg-red-50",darkBgColor:"dark:bg-red-900/20"},elasticsearch:{url:"/logos/elasticsearch.svg",bgColor:"bg-teal-50",darkBgColor:"dark:bg-teal-900/20"},dynamodb:{url:"/logos/dynamodb.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},snowflake:{url:"/logos/snowflake.svg",bgColor:"bg-cyan-50",darkBgColor:"dark:bg-cyan-900/20"},synapse:{url:"/logos/azure.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},bigquery:{url:"/logos/bigquery.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},redshift:{url:"/logos/redshift.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},kafka:{url:"/logos/kafka.svg",bgColor:"bg-gray-50",darkBgColor:"dark:bg-gray-800"},couchbase:{url:"/logos/couchbase.svg",bgColor:"bg-red-50",darkBgColor:"dark:bg-red-900/20"},neo4j:{url:"/logos/neo4j.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},jdbc:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"},jdbcsink:{url:"/logos/postgresql.svg",bgColor:"bg-blue-50",darkBgColor:"dark:bg-blue-900/20"}};function QN(e){if(!e)return null;const t=e.toLowerCase();for(const[s,a]of Object.entries(ox))if(t.includes(s))return a;return null}function pt({connectorClass:e,sourceType:t,className:s="w-10 h-10"}){let a=null;return t&&(a=ox[t.toLowerCase()]||null),a||(a=QN(e)),a?r.jsx("div",{className:`${s} rounded-lg ${a.bgColor} ${a.darkBgColor} flex items-center justify-center p-2`,children:r.jsx("img",{src:a.url,alt:`${e||"Database"} Logo`,className:"w-full h-full object-contain",onError:n=>{console.error(`Failed to load logo: ${a.url} for connector: ${e}`);const i=n.target;i.style.display="none";const l=i.parentElement;if(l){const o=document.createElement("div");o.className="w-full h-full flex items-center justify-center text-gray-500 dark:text-gray-400",o.innerHTML='<svg class="w-full h-full" fill="currentColor" viewBox="0 0 20 20"><path d="M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"></path><path d="M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"></path><path d="M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"></path></svg>',l.appendChild(o)}}})}):r.jsx("div",{className:`${s} rounded-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center p-2`,children:r.jsxs("svg",{className:"w-full h-full text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:[r.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),r.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),r.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})})}function KN(){const{theme:e,toggleTheme:t}=Rv(),[s,a]=p.useState(""),[n,i]=p.useState([]),[l,o]=p.useState(!1),[c,d]=p.useState(!1),u=p.useRef(null),h=tt();p.useEffect(()=>{function x(w){u.current&&!u.current.contains(w.target)&&d(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),p.useEffect(()=>{const w=setTimeout(async()=>{if(!s.trim()){i([]),d(!1);return}o(!0);const v=[],y=s.toLowerCase();try{const{data:b}=await H.from("pipelines").select("id, name").ilike("name",`%${y}%`).limit(5);b&&b.forEach(R=>{v.push({id:R.id,type:"pipeline",title:`Pipeline: ${R.name}`})});const{data:m}=await H.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","source").ilike("name",`%${y}%`).limit(10),{data:k}=await H.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","source").ilike("connector_class",`%${y}%`).limit(10),N=new Map;[...m||[],...k||[]].forEach(R=>{N.has(R.id)||(N.set(R.id,R),v.push({id:R.id,type:"source_connector",title:`Source Connector: ${R.pipelines.name}`,subtitle:R.name,pipelineId:R.pipeline_id,connectorClass:R.connector_class,pipelineName:R.pipelines.name}))});const{data:S}=await H.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","sink").ilike("name",`%${y}%`).limit(10),{data:_}=await H.from("pipeline_connectors").select(`
            id,
            name,
            pipeline_id,
            type,
            connector_class,
            pipelines!inner(name)
          `).eq("type","sink").ilike("connector_class",`%${y}%`).limit(10),P=new Map;[...S||[],..._||[]].forEach(R=>{P.has(R.id)||(P.set(R.id,R),v.push({id:R.id,type:"destination_connector",title:`Destination Connector: ${R.pipelines.name}`,subtitle:R.name,pipelineId:R.pipeline_id,connectorClass:R.connector_class,pipelineName:R.pipelines.name}))});const A=v.slice(0,15);i(A),d(A.length>0)}catch(b){console.error("Search error:",b)}finally{o(!1)}},300);return()=>clearTimeout(w)},[s]);const g=x=>{x.type==="pipeline"?h(`/pipelines/${x.id}`):h(`/pipelines/${x.pipelineId}`),a(""),d(!1)},f=()=>{a(""),i([]),d(!1)};return r.jsxs("header",{className:"h-14 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex items-center px-6 gap-4",children:[r.jsx("div",{className:"flex-1 max-w-2xl",ref:u,children:r.jsxs("div",{className:"relative",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:s,onChange:x=>a(x.target.value),onFocus:()=>n.length>0&&d(!0),placeholder:"Search pipelines, connectors...",className:"w-full pl-10 pr-10 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),s&&r.jsx("button",{onClick:f,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(He,{className:"w-4 h-4"})}),c&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-96 overflow-y-auto z-50",children:l?r.jsx("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Searching..."}):n.length===0?r.jsx("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No results found"}):r.jsx("div",{className:"py-2",children:n.map(x=>r.jsxs("button",{onClick:()=>g(x),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0 flex items-center gap-3",children:[x.type==="pipeline"?r.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center flex-shrink-0",children:r.jsx(au,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}):x.connectorClass?r.jsx(pt,{connectorClass:x.connectorClass,className:"w-8 h-8 flex-shrink-0"}):r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:r.jsx(Ve,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:x.pipelineName||x.title}),x.subtitle&&r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"truncate",children:x.subtitle})]}),x.type!=="pipeline"&&r.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:x.type==="source_connector"?"Source Connector":"Destination Connector"})]})]},`${x.type}-${x.id}`))})})]})}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("button",{onClick:t,className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Toggle theme",children:e==="light"?r.jsx(Kv,{className:"w-5 h-5"}):r.jsx(ek,{className:"w-5 h-5"})})})]})}function ui({children:e,requiredRole:t,requireAuth:s=!0}){const{user:a,profile:n,loading:i,hasRoleLevel:l}=qt();return i?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Le,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):s&&!a?r.jsx(T0,{to:"/login",replace:!0}):t&&!l(t)?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center max-w-md p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You don't have permission to access this page."}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-6",children:["Your role: ",r.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:n==null?void 0:n.role}),r.jsx("br",{}),"Required role: ",r.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:t})]}),r.jsx("a",{href:"/pipelines",className:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})}):n!=null&&n.is_active?r.jsx(r.Fragment,{children:e}):r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center max-w-md p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Account Deactivated"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your account has been deactivated. Please contact an administrator for assistance."})]})})}const JN="http://127.0.0.1:5001";async function ic(e,t={}){const s={...t.headers};t.body!==void 0&&t.body!==null&&(s["Content-Type"]=s["Content-Type"]||"application/json");const a=await fetch(`${JN}${e}`,{headers:s,...t}),n=await a.json().catch(()=>({}));if(!a.ok||n.success===!1){let i=n.error||a.statusText||"Registry request failed";if(Array.isArray(n.details)&&n.details.length>0){console.error("Validation errors:",n.details);const l=n.details.map(o=>`${o.instancePath?`${o.instancePath}: `:""}${o.message||JSON.stringify(o)}`).join("; ");i=`${i}: ${l}`}throw new Error(i)}return n}async function lc(e){const{name:t,...s}=e;return ic(`/api/registry/connectors/${encodeURIComponent(t)}/versions`,{method:"POST",body:JSON.stringify(s)})}async function ul(e,t){return ic(`/api/connectors/${encodeURIComponent(e)}/versions/${t}/activate`,{method:"POST"})}async function L0(e){return ic(`/api/connectors/${encodeURIComponent(e)}/versions`)}async function Vn(e,t){const s=await L0(e);let a;return t&&t>0&&(a=s.versions.find(n=>n.version===t)),a||(a=s.versions.find(n=>n.is_active)||s.versions[0]),(a==null?void 0:a.config)||null}async function cx(e,t){return ic(`/api/registry/connectors/${encodeURIComponent(e)}/mark-deployed`,{method:"POST",body:JSON.stringify({version:t})})}const YN=Object.freeze(Object.defineProperty({__proto__:null,activateConnectorVersion:ul,createConnectorVersion:lc,getActiveConnectorConfig:Vn,getConnectorVersions:L0,markConnectorDeployed:cx},Symbol.toStringTag,{value:"Module"})),Wn="http://127.0.0.1:5002";async function hl(e,t,s=3){for(let a=0;a<s;a++)try{const n=new AbortController,i=setTimeout(()=>n.abort(),3e4),l=await fetch(e,{...t,signal:n.signal});return clearTimeout(i),l}catch(n){if(a===s-1)throw n;if(n.name==="AbortError")throw new Error("Request timeout after 30 seconds");await new Promise(i=>setTimeout(i,1e3*Math.pow(2,a)))}throw new Error("Retry exhausted")}async function dx(e){const t=await hl(`${Wn}/api/pipelines/${e}/deploy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to deploy pipeline");return s}async function XN(e){const t=await fetch(`${Wn}/api/pipelines/${e}/connectors`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to delete connectors");return s}async function ux(e){const t=await hl(`${Wn}/api/pipelines/${e}/status`,{method:"GET"}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to get pipeline status");return s}async function ZN(e){try{const t=await hl(`${Wn}/api/pipelines/${e}/progress`,{method:"GET"}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to get pipeline progress");return s.progress||{}}catch(t){return console.error("Error fetching pipeline progress:",t),{}}}async function e1(e,t="24h"){try{const s=await hl(`${Wn}/api/pipelines/${e}/activity?timeRange=${t}`,{method:"GET"}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to get pipeline activity");return a.activity||null}catch(s){return console.error("Error fetching pipeline activity:",s),null}}async function Ag(e){try{const t=await hl(`${Wn}/api/pipelines/${e}/monitoring`,{method:"GET"}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to get pipeline monitoring data");return s.monitoring||null}catch(t){return console.error("Error fetching pipeline monitoring:",t),null}}function t1(){const{profile:e,hasRoleLevel:t}=qt(),s=t("maintainer"),a=t("maintainer"),n=t("maintainer"),i=(e==null?void 0:e.role)==="admin",l=(e==null?void 0:e.role)==="read_only";return{canCreatePipeline:s,canEditPipeline:a,canDeletePipeline:n,canManageUsers:i,isReadOnly:l}}function hx({isOpen:e,onClose:t,onConfirm:s,title:a="Are you sure you want to delete the Pipeline?",message:n="This action CANNOT be undone. The Pipeline will be permanently deleted from your account. Do you wish to continue?",itemName:i}){if(!e)return null;const l=()=>{s(),t()};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:t}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full relative",children:[r.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:r.jsx(He,{className:"w-5 h-5"})}),r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ma,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3",children:a}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:n}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"NO"}),r.jsx("button",{onClick:l,className:"px-6 py-2.5 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors border-2 border-red-600 hover:border-red-700",children:"YES, DELETE THIS PIPELINE"})]})]})]})})]})}const rr=e=>e==null?"null":JSON.stringify(e);function Ls(e,t=""){if(e==null)return t?{[t]:"null"}:{};if(Array.isArray(e))return e.reduce((a,n,i)=>{const l=t?`${t}[${i}]`:`[${i}]`;return Object.assign(a,Ls(n,l)),a},{});if(typeof e=="object")return Object.entries(e).reduce((a,[n,i])=>{const l=t?`${t}.${n}`:n;return Object.assign(a,Ls(i,l)),a},{});const s=typeof e=="string"?e:JSON.stringify(e);return t?{[t]:s}:{value:s}}const Rg=e=>{if(!e)return null;const t=Array.from(new Set([...Object.keys(e.prevFlat),...Object.keys(e.currFlat)])).sort();return t.length===0?r.jsx("div",{className:"text-gray-500",children:"No differences detected."}):r.jsxs("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono space-y-1",children:[r.jsx("div",{children:"{"}),t.map(s=>{const a=e.prevFlat[s],n=e.currFlat[s];return a!==void 0&&n!==void 0?a===n?r.jsx("div",{className:"text-gray-400",children:`  "${s}": ${rr(n)}`},`same-${s}`):r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("div",{className:"text-red-400",children:`- "${s}": ${rr(a)}`}),r.jsx("div",{className:"text-green-400",children:`+ "${s}": ${rr(n)}`})]},`diff-${s}`):a!==void 0?r.jsx("div",{className:"text-red-400",children:`- "${s}": ${rr(a)}`},`removed-${s}`):r.jsx("div",{className:"text-green-400",children:`+ "${s}": ${rr(n)}`},`added-${s}`)}),r.jsx("div",{children:"}"})]})},r1=e=>{const t=e.diff.currFlat||{},s=e.diff.prevFlat||{},a=Array.from(new Set([...Object.keys(t),...Object.keys(s)])).sort();return a.length===0?r.jsxs("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono",children:[r.jsx("div",{children:"{"}),r.jsx("div",{children:"}"})]}):r.jsxs("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono space-y-1",children:[r.jsx("div",{children:"{"}),a.map(n=>{const i=t[n],l=s[n];return r.jsxs("div",{className:"space-y-0.5",children:[l!==void 0&&i!==void 0&&l!==i&&r.jsx("div",{className:"text-red-400",children:`- "${n}": ${rr(l)}`}),i!==void 0&&r.jsx("div",{className:"text-green-400",children:`  "${n}": ${rr(i)}`}),i===void 0&&l!==void 0&&r.jsx("div",{className:"text-red-400",children:`- "${n}": ${rr(l)}`})]},`badge-${n}`)}),r.jsx("div",{children:"}"})]})},s1=(e,t)=>{const s=Ls(e),a=Ls(t),n=Array.from(new Set([...Object.keys(s),...Object.keys(a)])).filter(c=>s[c]!==a[c]);if(n.length===0)return{summary:"No changes",details:["No differences detected."]};const i=n.slice(0,3).join(", "),l=n.length>3?`${i} (+${n.length-3} more)`:i,o=n.map(c=>{const d=s[c],u=a[c];return d!==void 0&&u!==void 0?`${c}: ${rr(d)} -> ${rr(u)}`:d!==void 0?`${c}: removed (${rr(d)})`:`${c}: added ${rr(u)}`});return{summary:l,details:o}};function a1({onCreatePipeline:e}){const t=tt(),{showToast:s}=St(),{isReadOnly:a}=t1(),{logActivity:n}=qt(),[i,l]=p.useState([]),{data:o=[]}=qN({refetchInterval:1e4}),c=j=>o.filter(z=>z.pipeline_id===j).length,d=j=>o.some(z=>z.pipeline_id===j&&z.severity==="critical"),[u,h]=p.useState(!0),[g,f]=p.useState("grid"),[x,w]=p.useState(""),[v,y]=p.useState("all"),[b,m]=p.useState("newest"),[k,N]=p.useState(null),[S,_]=p.useState(!1),[P,A]=p.useState(null),[R,E]=p.useState(null),[Y,L]=p.useState(!1),[U,O]=p.useState(null),[q,$]=p.useState(!1),[C,M]=p.useState(null),[D,B]=p.useState({}),[W,ie]=p.useState(!0),[te,pe]=p.useState(null),[K,ae]=p.useState("preset"),[de,Pe]=p.useState("6h"),[Ee,Ue]=p.useState("interval"),[I,ue]=p.useState("4"),[me,X]=p.useState(["00:00"]),[ye,st]=p.useState({isOpen:!1,pipelineId:null,pipelineName:""}),[Ce,Tr]=p.useState(null),ds=j=>{var z,Q;return{id:j.id,pipelineId:j.pipeline_id,connectorId:j.connector_id,connectorName:j.connector_name||void 0,connectorType:j.connector_type,registryName:j.registry_name,connectorClass:j.connector_class||void 0,version:j.version,checksum:j.checksum||void 0,stagedConfig:j.staged_config||{},diff:{prevFlat:((z=j.diff)==null?void 0:z.prevFlat)||{},currFlat:((Q=j.diff)==null?void 0:Q.currFlat)||{}}}},_e=j=>{B(z=>{const ee=(z[j.pipelineId]||[]).filter(le=>le.connectorId!==j.connectorId);return{...z,[j.pipelineId]:[...ee,j]}})},Ne=(j,z)=>{B(Q=>{const le=(Q[j]||[]).filter(fe=>fe.id!==z);if(le.length===0){const fe={...Q};return delete fe[j],fe}return{...Q,[j]:le}})};p.useEffect(()=>{ct();const j=setInterval(()=>{ct()},6e4);return()=>clearInterval(j)},[]),p.useEffect(()=>{const j=z=>{const Q=z.target;S&&!Q.closest(".filter-menu-container")&&_(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[S]);const ct=async()=>{var j;h(!0);try{const[z,Q,ee]=await Promise.all([H.from("pipelines").select("*").order("created_at",{ascending:!1}),H.from("pipeline_connectors").select("id, name, type, connector_class, status, pipeline_id, config, last_deployed_version, has_pending_changes, pending_config"),H.from("pipeline_restore_staging").select("*")]);if(z.error){s("error","Failed to load pipelines",z.error.message);return}ee.error?(j=ee.error.message)!=null&&j.includes("Could not find the table 'public.pipeline_restore_staging'")?(W&&s("warning","Run latest migrations to enable staged restores"),ie(!1)):console.warn("Failed to load restore staging:",ee.error.message):ie(!0);const le=(Q.data||[]).map(J=>{var Ge;const ce=(Ge=J.config)!=null&&Ge.registry_connector?J.config:null,Xe=ce!=null&&ce.registry_version?Number(ce.registry_version):null,gt=J.last_deployed_version??null;return{...J,registry_meta:ce,registry_version:Xe,last_deployed_version:J.last_deployed_version??null,has_pending_changes:J.has_pending_changes??!1,pending_config:J.pending_config,pending_update:Xe!==null&&(gt===null&&Xe>0||gt!==Xe)}});let fe={};try{const J=await fetch("http://localhost:5002/api/pipelines/connectors/statuses");J.ok&&(fe=(await J.json()).statuses||{})}catch(J){console.warn("Failed to fetch connector statuses from Kafka Connect",J)}const oe=(z.data||[]).map(J=>{const ce=le.filter(gt=>gt.pipeline_id===J.id),Xe=fe[J.id]||{source:null,sink:null};return{...J,source_connector:{...ce.find(gt=>gt.type==="source"),status:Xe.source},sink_connector:{...ce.find(gt=>gt.type==="sink"),status:Xe.sink},events_ingested:Math.floor(Math.random()*1e6),events_loaded:Math.floor(Math.random()*1e6),error_count:J.status==="error"?Math.floor(Math.random()*10):0,last_sync_time:new Date(Date.now()-Math.random()*36e5).toISOString()}});if(!ee.error){const J={};(ee.data||[]).forEach(ce=>{const Xe=ds(ce);J[Xe.pipelineId]=[...J[Xe.pipelineId]||[],Xe]}),B(J)}l(oe)}catch(z){s("error","An error occurred","Please try again"),console.error(z)}finally{h(!1)}},Ht=j=>{switch(j){case"running":return r.jsx(Rs,{className:"w-4 h-4 text-green-500"});case"paused":return r.jsx(Hs,{className:"w-4 h-4 text-yellow-500"});case"ready":return r.jsx(kr,{className:"w-4 h-4 text-blue-500"});case"error":return r.jsx(Ws,{className:"w-4 h-4 text-red-500"});default:return r.jsx(nr,{className:"w-4 h-4 text-gray-500"})}},Oe=j=>{var Q,ee;const z=(ee=(Q=j==null?void 0:j.status)==null?void 0:Q.connector)==null?void 0:ee.state;if(!z)return"UNKNOWN";switch(z){case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"FAILED":return"FAILED";default:return z}},vt=j=>{switch(j){case"RUNNING":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"PAUSED":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"FAILED":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},F=j=>{switch(j){case"RUNNING":return"";case"PAUSED":return"";case"FAILED":return"";default:return""}},V=j=>{var ee,le,fe,oe,J,ce;if(!j.source_connector&&!j.sink_connector)return j.status;const z=(fe=(le=(ee=j.source_connector)==null?void 0:ee.status)==null?void 0:le.connector)==null?void 0:fe.state,Q=(ce=(J=(oe=j.sink_connector)==null?void 0:oe.status)==null?void 0:J.connector)==null?void 0:ce.state;return z==="FAILED"||Q==="FAILED"?"error":z==="PAUSED"||Q==="PAUSED"?"paused":z==="RUNNING"&&Q==="RUNNING"?"running":j.status},ne=j=>{switch(j){case"running":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"ready":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"error":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},ge=i.filter(j=>{var le,fe;const z=j.name.toLowerCase().includes(x.toLowerCase())||((le=j.source_type)==null?void 0:le.toLowerCase().includes(x.toLowerCase()))||((fe=j.destination_type)==null?void 0:fe.toLowerCase().includes(x.toLowerCase())),Q=!j.destination_type||!j.source_connector||!j.sink_connector;let ee=!0;return v==="all"?ee=!0:v==="draft"?ee=Q||j.status==="draft":ee=!Q&&j.status===v,z&&ee}).sort((j,z)=>b==="newest"?new Date(z.created_at).getTime()-new Date(j.created_at).getTime():b==="oldest"?new Date(j.created_at).getTime()-new Date(z.created_at).getTime():j.name.localeCompare(z.name)),$e=j=>new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ae=j=>!!(j.source_type&&j.destination_type&&j.source_connector&&j.sink_connector)&&(j.status==="draft"||j.status==="ready"),be=async(j,z,Q)=>{var le,fe;if(j.stopPropagation(),N(null),Q==="restore"){const oe=i.find(J=>J.id===z);oe&&await Vt(j,oe);return}if(Q==="deploy"){const oe=i.find(J=>J.id===z);if(!oe)return;if(!Ae(oe)){s("error","Cannot deploy pipeline","Complete source and destination setup first");return}try{Tr(z),await dx(z),await n("pipeline.deploy",`Deployed pipeline: ${oe.name}`,"pipeline",z),s("success","Pipeline deployed successfully"),await ct()}catch(J){s("error","Failed to deploy pipeline",(J==null?void 0:J.message)||"Debezium backend error")}finally{Tr(null)}return}const ee={start:"running",pause:"paused",stop:"ready",restart:"running"};try{const oe=i.find(Ge=>Ge.id===z);if(!oe){s("error","Pipeline not found");return}const J=[];(le=oe.source_connector)!=null&&le.name&&J.push({name:oe.source_connector.name,type:"source"}),(fe=oe.sink_connector)!=null&&fe.name&&J.push({name:oe.sink_connector.name,type:"sink"});const ce={start:"resume",pause:"pause",stop:"pause",restart:"restart"}[Q],Xe=[];for(const Ge of J)try{const Ct=ce==="resume"?`/api/connectors/${Ge.name}/resume`:ce==="pause"?`/api/connectors/${Ge.name}/pause`:`/api/connectors/${Ge.name}/restart`,Vr=await(await fetch(`http://localhost:5002${Ct}`,{method:"POST"})).json();Vr.success||Xe.push(`${Ge.type}: ${Vr.error||"Unknown error"}`)}catch(Ct){Xe.push(`${Ge.type}: ${Ct.message||"Failed to connect"}`)}const{error:gt}=await H.from("pipelines").update({status:ee[Q],updated_at:new Date().toISOString()}).eq("id",z);if(gt){s("error","Failed to update pipeline status",gt.message);return}await n(`pipeline.${Q}`,`${Q.charAt(0).toUpperCase()+Q.slice(1)} pipeline: ${oe.name}`,"pipeline",z),Xe.length>0?s("warning",`Pipeline ${Q}ed with warnings`,Xe.join(", ")):s("success",`Pipeline ${Q}ed successfully`),ct()}catch(oe){s("error","An error occurred",oe.message)}},kt=async()=>{if(P)try{await cx(P.connectorName,P.registryVersion),s("success","Connector marked as deployed"),A(null),E(null),await ct()}catch(j){s("error","Failed to mark deployed",j instanceof Error?j.message:"")}},Ye=(j,z,Q)=>r.jsxs(r.Fragment,{children:[(Q==null?void 0:Q.has_pending_changes)&&r.jsxs("button",{onClick:ee=>{ee.stopPropagation(),t(`/pipelines/${j.id}?tab=settings&section=${z}`)},className:`ml-3 inline-flex items-center gap-1 text-xs font-semibold px-2 py-0.5 rounded-full border ${z==="source"?"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800":"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800"}`,children:[r.jsx(Fr,{className:"w-3 h-3"}),z==="source"?"SRC":"SNK"]}),j.status==="running"&&W&&qr(j,Q)]}),qr=(j,z)=>{if(!z)return null;const Q=(D[j.id]||[]).find(le=>le.connectorId===z.id);if(!Q)return null;const ee=Q.connectorName?Q:{...Q,connectorName:z.name||Q.registryName};return r.jsxs("button",{onClick:le=>ra(le,ee),className:"ml-3 inline-flex items-center gap-1 text-xs font-semibold text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 px-2 py-0.5 rounded-full border border-purple-200 dark:border-purple-800",children:[r.jsx(Yv,{className:"w-3 h-3"}),"New Restore"]})},us=()=>P?r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>A(null),children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:j=>j.stopPropagation(),children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:[P.connectorType==="source"?"Source":"Destination"," Connector"]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:P.connectorName})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.deployedVersion!==null?`v${P.deployedVersion}  v${P.registryVersion}`:`Baseline not tracked  v${P.registryVersion}`})]}),r.jsxs("div",{className:"p-6 max-h-[50vh] overflow-auto space-y-4",children:[Y&&r.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),"Loading diff"]}),!Y&&R&&r.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-auto text-xs font-mono space-y-0.5",children:Rg(R)})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>{A(null),E(null)},className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Close"}),r.jsx("button",{disabled:Y,onClick:kt,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50",children:"Deploy Update"})]})]})}):null,gl=()=>U?r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:ta,children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:j=>j.stopPropagation(),children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Restore History"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:U.pipeline.name})]}),r.jsx("button",{onClick:ta,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-auto",children:q?r.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3"}),"Loading versions"]}):U.rows.length===0?r.jsx("div",{className:"text-center text-gray-500",children:"No registry history found for this pipeline."}):r.jsxs("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-xs uppercase text-gray-500 dark:text-gray-400",children:[r.jsx("th",{className:"py-2",children:"Date"}),r.jsx("th",{children:"Connector"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Version"}),r.jsx("th",{children:"Changes"}),r.jsx("th",{className:"text-right",children:"Action"})]})}),r.jsx("tbody",{children:U.rows.map(j=>r.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-300",children:new Date(j.createdAt).toLocaleString()}),r.jsx("td",{className:"py-2 font-medium text-gray-900 dark:text-gray-100",children:j.connectorName}),r.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-300 capitalize",children:j.connectorType}),r.jsxs("td",{className:"py-2 text-gray-600 dark:text-gray-300",children:["v",j.version]}),r.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-300",children:j.changedSummary}),r.jsx("td",{className:"py-2 text-right",children:r.jsxs("button",{onClick:()=>Gn(j),className:"inline-flex items-center gap-1 px-3 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[r.jsx(Fr,{className:"w-3 h-3"}),"View Changes"]})})]},j.id))})]})})]})}):null,ml=()=>{if(!C)return null;const{row:j,diff:z,title:Q,subtitle:ee,connectorName:le,mode:fe,pipelineId:oe,badgeId:J,badge:ce}=C,Xe=fe==="badge"&&ce?r1(ce):Rg(z),gt=fe==="badge"&&ce?Object.keys(ce.diff.prevFlat).filter(Ge=>ce.diff.prevFlat[Ge]!==ce.diff.currFlat[Ge]).length+Object.keys(ce.diff.currFlat).filter(Ge=>!(Ge in ce.diff.prevFlat)).length:Object.keys((z==null?void 0:z.prevFlat)||{}).filter(Ge=>{var Ct;return(z==null?void 0:z.prevFlat[Ge])!==((Ct=z==null?void 0:z.currFlat)==null?void 0:Ct[Ge])}).length;return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:Pr,children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",onClick:Ge=>Ge.stopPropagation(),children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:Q}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:le}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ee}),fe==="badge"&&r.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[gt," ",gt===1?"change":"changes"]}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Deploying will update connector settings"})]})]}),r.jsx("button",{onClick:Pr,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6 max-h-[70vh] overflow-auto space-y-4",children:Xe}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3",children:[fe==="badge"&&oe&&J&&ce&&r.jsx("button",{onClick:()=>px(oe,J),className:"px-4 py-2 rounded-lg text-sm border border-purple-200 dark:border-purple-700 text-purple-700 dark:text-purple-200 hover:bg-purple-50 dark:hover:bg-purple-900/30",children:"Dismiss"}),r.jsx("button",{onClick:Pr,className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Close"}),fe==="history"&&j&&r.jsx("button",{onClick:()=>fx(j),className:"px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700",children:"Apply Restore"}),fe==="badge"&&ce&&r.jsx("button",{onClick:()=>mx(ce),className:"px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700",children:"Deploy"})]})]})})},Vt=async(j,z)=>{var Q,ee;j.stopPropagation(),$(!0);try{const le=[],fe=[z.source_connector,z.sink_connector].filter(oe=>{var J;return!!((J=oe==null?void 0:oe.registry_meta)!=null&&J.registry_connector)});for(const oe of fe){const J=(Q=oe.registry_meta)==null?void 0:Q.registry_connector;if(!J)continue;const Xe=[...(await L0(J)).versions||[]].sort((Ct,Hr)=>Number(Hr.version)-Number(Ct.version)).slice(0,10);let gt=((ee=oe.config)==null?void 0:ee.snapshot_config)||oe.config||{};const Ge=oe.last_deployed_version||oe.registry_version;if(J&&Ge)try{gt=await Vn(J,Ge)}catch(Ct){console.warn("Failed to fetch current connector config",Ct)}for(let Ct=0;Ct<Xe.length;Ct+=1){const Hr=Xe[Ct],Vr=Xe[Ct+1],{summary:vx,details:kx}=s1((Vr==null?void 0:Vr.config)||{},Hr.config||{});le.push({id:`${J}-${Hr.version}`,pipelineId:z.id,connectorId:oe.id,registryName:J,connectorName:oe.name,connectorType:oe.type,connectorClass:oe.connector_class,version:Hr.version,createdAt:Hr.created_at,changedSummary:vx,changedDetails:kx,checksum:Hr.checksum,config:Hr.config,previousConfig:(Vr==null?void 0:Vr.config)||{},currentConfig:gt})}}le.sort((oe,J)=>new Date(J.createdAt).getTime()-new Date(oe.createdAt).getTime()),O({pipeline:z,rows:le.slice(0,10)})}catch(le){s("error","Failed to load restore history",le instanceof Error?le.message:"")}finally{$(!1)}},ta=()=>{O(null)},Gn=j=>{const z=Ls(j.previousConfig||{}),Q=Ls(j.config||{});M({row:j,title:"View Changes",subtitle:`v${j.version}  ${new Date(j.createdAt).toLocaleString()}  ${j.connectorType}`,connectorName:j.connectorName,connectorType:j.connectorType,diff:{prevFlat:z,currFlat:Q},mode:"history"})},ra=(j,z)=>{if(j.stopPropagation(),!W){s("error","Staged restores unavailable. Please run latest migrations.");return}M({title:"New Restore",subtitle:`v${z.version}  ${z.connectorType}`,connectorName:z.connectorName||z.registryName,connectorType:z.connectorType,diff:z.diff,mode:"badge",pipelineId:z.pipelineId,badgeId:z.id,badge:z})},Pr=()=>M(null),mx=async j=>{if(!W){s("error","Staged restores unavailable. Please run latest migrations.");return}try{await ul(j.registryName,j.version);const z={registry_connector:j.registryName,registry_version:j.version,checksum:j.checksum,connector_class:j.connectorClass,snapshot_config:j.stagedConfig},{error:Q}=await H.from("pipeline_connectors").update({config:z,last_deployed_version:j.version}).eq("id",j.connectorId);if(Q)throw new Error(`Failed to update connector: ${Q.message}`);await H.from("pipeline_restore_staging").delete().eq("id",j.id),Ne(j.pipelineId,j.id),s("success",`Connector restored to v${j.version}. Refreshing details...`),Pr(),await ct(),window.dispatchEvent(new CustomEvent("pipeline-updated",{detail:{pipelineId:j.pipelineId}}))}catch(z){s("error","Deploy failed",z instanceof Error?z.message:"")}},fx=async j=>{if(!W){s("error","Staged restores unavailable. Please run latest migrations.");return}const z=j.currentConfig||{},Q=j.config||{},ee={prevFlat:Ls(z),currFlat:Ls(Q)};try{const{data:le,error:fe}=await H.from("pipeline_restore_staging").upsert({pipeline_id:j.pipelineId,connector_id:j.connectorId,connector_name:j.connectorName,connector_type:j.connectorType,connector_class:j.connectorClass,registry_name:j.registryName,version:j.version,checksum:j.checksum,staged_config:Q,diff:ee},{onConflict:"pipeline_id,connector_id"}).select().single();if(fe)throw fe;const oe=ds(le);_e(oe),Pr(),s("info","Restore staged. Deploy from pipeline card.")}catch(le){s("error","Failed to stage restore",le instanceof Error?le.message:"")}},px=async(j,z)=>{if(!W){Ne(j,z),Pr();return}try{await H.from("pipeline_restore_staging").delete().eq("id",z)}catch(Q){console.warn("Failed to dismiss staged restore:",Q)}Ne(j,z),Pr()},xx=async()=>{var j,z;if(ye.pipelineId){try{const Q=i.find(fe=>fe.id===ye.pipelineId),ee=[];if(Q){const fe=[];(j=Q.source_connector)!=null&&j.name&&fe.push({name:Q.source_connector.name,type:"source"}),(z=Q.sink_connector)!=null&&z.name&&fe.push({name:Q.sink_connector.name,type:"sink"});for(const oe of fe)try{const ce=await(await fetch(`http://localhost:5002/api/connectors/${oe.name}`,{method:"DELETE"})).json();ce.success||ee.push(`${oe.type}: ${ce.error||"Unknown error"}`)}catch(J){console.warn(`Failed to delete ${oe.type} connector:`,J),ee.push(`${oe.type}: ${J.message||"Failed to connect"}`)}}const{error:le}=await H.from("pipelines").delete().eq("id",ye.pipelineId);le?s("error","Failed to delete pipeline",le.message):(await n("pipeline.delete",`Deleted pipeline: ${ye.pipelineName}`,"pipeline",ye.pipelineId),ee.length>0?s("warning",`Pipeline deleted with warnings: ${ee.join(", ")}`):s("success","Pipeline deleted successfully"),ct())}catch{s("error","An error occurred")}st({isOpen:!1,pipelineId:null,pipelineName:""})}},yx=j=>{const z=j.schedule_config;if(!z||!z.type)return"Ingests every 6 Hours";if(z.type==="preset"){const Q=z.value||"6h";if(Q==="30m")return"Ingests every 30 Minutes";if(Q==="1h")return"Ingests every 1 Hour";if(Q==="2h")return"Ingests every 2 Hours";if(Q==="3h")return"Ingests every 3 Hours";if(Q==="6h")return"Ingests every 6 Hours";if(Q==="8h")return"Ingests every 8 Hours";if(Q==="12h")return"Ingests every 12 Hours";if(Q==="24h")return"Ingests every 24 Hours"}else if(z.type==="interval"){const Q=z.hours||4;return`Ingests every ${Q} Hour${Q>1?"s":""}`}else if(z.type==="daily"){const Q=z.times||["00:00"];return Q.length===1?`Ingests daily at ${Q[0]}`:`Ingests daily (${Q.length} times)`}return"Ingests every 6 Hours"};p.useEffect(()=>{if(te){const j=te.schedule_config;j?j.type==="preset"?(ae("preset"),Pe(j.value||"6h")):j.type==="interval"?(ae("custom"),Ue("interval"),ue(String(j.hours||4))):j.type==="daily"&&(ae("custom"),Ue("daily"),X(j.times||["00:00"])):(ae("preset"),Pe("6h"),Ue("interval"),ue("4"),X(["00:00"]))}},[te]);const bx=()=>{if(!te)return null;const j=["30m","1h","2h","3h","6h","8h","12h","24h"],z=async()=>{let ee;if(K==="preset")ee={type:"preset",value:de};else if(Ee==="interval"){const le=parseInt(I);if(isNaN(le)||le<1||le>48){s("error","Invalid interval","Hours must be between 1 and 48");return}ee={type:"interval",hours:le}}else ee={type:"daily",times:me};try{const{error:le}=await H.from("pipelines").update({schedule_config:ee}).eq("id",te.id);if(le)throw le;await n("pipeline.schedule_update",`Updated ingestion schedule for pipeline: ${te.name}`,"pipeline",te.id,{schedule_config:ee}),s("success","Schedule updated successfully"),pe(null),await ct()}catch(le){s("error","Failed to update schedule",le instanceof Error?le.message:"")}},Q=()=>{if(K==="preset"){const ee=de;if(ee==="30m")return"every 30 Minutes";if(ee==="1h")return"every 1 Hour";if(ee==="2h")return"every 2 Hours";if(ee==="3h")return"every 3 Hours";if(ee==="6h")return"every 6 Hours";if(ee==="8h")return"every 8 Hours";if(ee==="12h")return"every 12 Hours";if(ee==="24h")return"every 24 Hours"}else if(Ee==="interval"){const ee=parseInt(I);return`every ${ee} Hour${ee>1?"s":""}`}else return`at ${me.join(", ")} daily`;return""};return r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>pe(null),children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-xl w-full max-h-[90vh] overflow-hidden",onClick:ee=>ee.stopPropagation(),children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Change the Pipeline Ingestion Schedule"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Define the frequency or time(s) at which the Pipeline must ingest the data from the Source."})]}),r.jsx("button",{onClick:()=>pe(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6 max-h-[60vh] overflow-auto",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Scheduled"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"This ingestion schedule applies to all the objects in the Pipeline."}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[j.map(ee=>r.jsx("button",{onClick:()=>{ae("preset"),Pe(ee)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${K==="preset"&&de===ee?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:ee==="30m"?"30 Mins":ee==="1h"?"1 Hr":ee.replace("h"," Hrs")},ee)),r.jsx("button",{onClick:()=>ae("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${K==="custom"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Custom"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-800 pb-4",children:[r.jsxs("button",{onClick:()=>{Ue("interval"),K!=="custom"&&ae("custom")},className:`flex items-center gap-2 px-4 py-2 text-sm font-medium transition-colors ${Ee==="interval"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${Ee==="interval"?"border-blue-600":"border-gray-300 dark:border-gray-600"}`,children:Ee==="interval"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),"Run at fixed interval"]}),r.jsxs("button",{onClick:()=>{Ue("daily"),ae("custom")},className:`flex items-center gap-2 px-4 py-2 text-sm font-medium transition-colors ${Ee==="daily"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${Ee==="daily"?"border-blue-600":"border-gray-300 dark:border-gray-600"}`,children:Ee==="daily"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),"Run daily"]})]}),K==="custom"&&r.jsx("div",{children:Ee==="interval"?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours *"}),r.jsx("input",{type:"number",min:"1",max:"48",value:I,onChange:ee=>ue(ee.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum 1 hr and Maximum 48 hrs"})]}):r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select time(s)"}),r.jsx("div",{className:"space-y-2",children:me.map((ee,le)=>r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"time",value:ee,onChange:fe=>{const oe=[...me];oe[le]=fe.target.value,X(oe)},className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),me.length>1&&r.jsx("button",{onClick:()=>X(me.filter((fe,oe)=>oe!==le)),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:r.jsx(He,{className:"w-4 h-4"})})]},le))}),me.length<24&&r.jsx("button",{onClick:()=>X([...me,"00:00"]),className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"+ ADD MORE"})]})})]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[r.jsx(nr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["DataTravel will ingest your data ",r.jsx("span",{className:"font-semibold",children:Q()})]})]})]}),r.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>pe(null),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"CANCEL"}),r.jsx("button",{onClick:z,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700",children:"UPDATE"})]})]})})};return u?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.length===0?r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl p-12 border border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"text-center space-y-6",children:[r.jsxs("div",{className:"flex justify-center gap-8 mb-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-lg bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(Ve,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"SOURCE"})]}),r.jsx("div",{className:"flex items-center",children:r.jsx(qs,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-lg bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(Ve,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"DESTINATION"})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Move your data from any Source to Destination in Near Real-Time"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Get data in your Destinations in near real-time, easily manage schema drift with Auto Mapping, apply transformations and track progress."})]}),r.jsxs("button",{onClick:e,disabled:a,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",title:a?"Read-only users cannot create pipelines":"",children:[a&&r.jsx(sg,{className:"w-4 h-4"}),r.jsx(Vs,{className:"w-5 h-5"}),"Create Pipeline"]})]})})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search Pipelines",value:x,onChange:j=>w(j.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:[r.jsx("button",{onClick:()=>f("grid"),className:`p-2.5 ${g==="grid"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,title:"Grid View",children:r.jsx(Vv,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>f("list"),className:`p-2.5 border-l border-gray-300 dark:border-gray-600 ${g==="list"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,title:"List View",children:r.jsx(Wv,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"relative filter-menu-container",children:[r.jsxs("button",{onClick:()=>_(!S),className:"inline-flex items-center gap-2 px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300",children:[r.jsx(y0,{className:"w-4 h-4"}),"FILTERS",v!=="all"&&r.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:"1"})]}),S&&r.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg z-50",children:r.jsxs("div",{className:"p-3",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wide",children:"Status"}),r.jsx("div",{className:"space-y-1",children:["all","running","paused","error","ready","draft"].map(j=>r.jsx("button",{onClick:()=>{y(j),_(!1)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${v===j?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]})})]}),r.jsxs("select",{value:b,onChange:j=>m(j.target.value),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300",children:[r.jsx("option",{value:"newest",children:"Newest First"}),r.jsx("option",{value:"oldest",children:"Oldest First"}),r.jsx("option",{value:"name",children:"Name (A-Z)"})]}),r.jsx("button",{onClick:ct,className:"p-2.5 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",title:"Refresh",children:r.jsx(Na,{className:"w-4 h-4"})}),r.jsxs("button",{onClick:e,disabled:a,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:a?"Read-only users cannot create pipelines":"",children:[a&&r.jsx(sg,{className:"w-4 h-4"}),r.jsx(Vs,{className:"w-5 h-5"}),"CREATE PIPELINE"]})]})]}),ge.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Fr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No pipelines found matching your filters"})]}):g==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ge.map(j=>{var ee,le,fe,oe;const z=Ae(j),Q=z||j.status==="draft";return r.jsxs("div",{onClick:()=>{j.status==="draft"&&!j.source_connector?t(`/pipelines/new/source-config?resume=${j.id}`):t(`/pipelines/${j.id}`)},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:border-blue-500 dark:hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 line-clamp-1 mb-1",children:j.name}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created ",$e(j.created_at)]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[c(j.id)>0&&r.jsx("div",{className:"relative",children:r.jsxs("button",{onClick:J=>{J.stopPropagation(),t(`/pipelines/${j.id}?tab=logs`)},className:"p-1 rounded transition-colors hover:bg-red-100 dark:hover:bg-red-900/30 relative",title:`${c(j.id)} unresolved alert(s)`,children:[r.jsx(Wi,{className:`w-5 h-5 ${d(j.id)?"text-red-600 dark:text-red-400 animate-pulse":"text-yellow-600 dark:text-yellow-400 animate-pulse"}`}),r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:c(j.id)})]})}),r.jsx("button",{onClick:J=>{if(j.status==="draft"){J.stopPropagation();return}J.stopPropagation(),t(`/pipelines/${j.id}?tab=monitoring`)},className:`p-1 rounded transition-colors ${j.status==="draft"?"opacity-40 cursor-not-allowed":"hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,title:j.status==="draft"?"Alert settings available after starting pipeline":"View Alert Settings",disabled:j.status==="draft",children:r.jsx(vr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),z&&r.jsxs("button",{onClick:J=>be(J,j.id,"deploy"),className:"inline-flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:Ce===j.id,children:[r.jsx(ri,{className:"w-4 h-4"}),Ce===j.id?"Deploying":"Deploy"]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:J=>{J.stopPropagation(),N(k===j.id?null:j.id)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(tu,{className:"w-5 h-5 text-gray-400"})}),k===j.id&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>N(null)}),r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20",children:[Q?z?r.jsxs("button",{onClick:J=>be(J,j.id,"deploy"),className:"w-full px-4 py-2 text-left text-sm text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center gap-2",disabled:Ce===j.id,children:[r.jsx(ri,{className:"w-4 h-4"}),Ce===j.id?"Deploying":"Deploy Pipeline"]}):r.jsxs("button",{onClick:J=>{J.stopPropagation(),N(null),j.source_type?j.destination_type?t(`/wizard/${j.id}/destination`):t(`/wizard/${j.id}/destination`):t(`/pipelines/new/source-config?resume=${j.id}`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Gi,{className:"w-4 h-4"}),"Complete Setup"]}):r.jsxs(r.Fragment,{children:[V(j)!=="running"&&r.jsxs("button",{onClick:J=>be(J,j.id,"start"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Rs,{className:"w-4 h-4"}),V(j)==="paused"?"Resume":"Start"]}),V(j)==="running"&&r.jsxs("button",{onClick:J=>be(J,j.id,"pause"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Hs,{className:"w-4 h-4"}),"Pause"]}),r.jsxs("button",{onClick:J=>be(J,j.id,"restart"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(_a,{className:"w-4 h-4"}),"Restart"]}),r.jsxs("button",{onClick:J=>{J.stopPropagation(),N(null),pe(j)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(La,{className:"w-4 h-4"}),"Change Schedule"]})]}),r.jsxs("button",{onClick:J=>{J.stopPropagation(),N(null),st({isOpen:!0,pipelineId:j.id,pipelineName:j.name})},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[r.jsx(Ws,{className:"w-4 h-4"}),"Delete Pipeline"]})]})]})]})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[(j.status==="draft"||j.status==="ready")&&(z?r.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ri,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-xs text-blue-900 dark:text-blue-100",children:[r.jsx("span",{className:"font-medium",children:"Ready to deploy."})," Review your selections and click Deploy to push both connectors to Kafka Connect."]})]})}):r.jsx("div",{className:"mb-3 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Fr,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-xs",children:[r.jsx("span",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Setup incomplete: "}),r.jsxs("span",{className:"text-amber-700 dark:text-amber-300",children:[!j.source_type&&"Configure source",j.source_type&&!j.destination_type&&"Configure destination",j.source_type&&j.destination_type&&!j.sink_connector&&"Complete destination setup"]})]})]})})),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Source"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pt,{connectorClass:(ee=j.source_connector)==null?void 0:ee.connector_class,sourceType:j.source_type,className:"w-12 h-12 flex-shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((le=j.source_connector)==null?void 0:le.name)||j.source_type||"Not configured"}),j.source_connector&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${vt(Oe(j.source_connector))}`,children:[r.jsx("span",{children:F(Oe(j.source_connector))}),r.jsx("span",{children:Oe(j.source_connector)})]})]})]})]}),r.jsx(qs,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-4"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Destination"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pt,{connectorClass:(fe=j.sink_connector)==null?void 0:fe.connector_class,sourceType:j.destination_type,className:"w-12 h-12 flex-shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((oe=j.sink_connector)==null?void 0:oe.name)||j.destination_type||"Not configured"}),j.sink_connector&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${vt(Oe(j.sink_connector))}`,children:[r.jsx("span",{children:F(Oe(j.sink_connector))}),r.jsx("span",{children:Oe(j.sink_connector)})]})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("span",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium ${ne(V(j))}`,children:[Ht(V(j)),V(j)]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Ye(j,"source",j.source_connector),Ye(j,"sink",j.sink_connector)]})]})]},j.id)})}):r.jsx("div",{className:"space-y-4",children:ge.map((j,z)=>{var le,fe,oe,J;const Q=Ae(j),ee=Q||j.status==="draft";return r.jsxs("div",{onClick:()=>{j.status==="draft"&&!j.source_connector?t(`/pipelines/new/source-config?resume=${j.id}`):t(`/pipelines/${j.id}`)},className:"bg-white dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-5 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition-all cursor-pointer",children:[r.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:["#",ge.length-z]}),r.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:j.name})]}),r.jsx("button",{onClick:ce=>{ce.stopPropagation(),t(`/pipelines/${j.id}?tab=monitoring`)},className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:"View Alert Settings",children:r.jsx(vr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),Q&&r.jsxs("button",{onClick:ce=>be(ce,j.id,"deploy"),className:"inline-flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:Ce===j.id,children:[r.jsx(ri,{className:"w-4 h-4"}),Ce===j.id?"Deploying":"Deploy"]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[r.jsx(pt,{connectorClass:(le=j.source_connector)==null?void 0:le.connector_class,sourceType:j.source_type,className:"w-12 h-12 flex-shrink-0"}),r.jsxs("div",{className:"flex flex-col min-w-0",children:[r.jsx("span",{className:"text-base font-bold text-gray-900 dark:text-gray-100 truncate",children:((fe=j.source_connector)==null?void 0:fe.name)||"Source"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[j.source_type,"  ",yx(j)]}),j.source_connector&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${vt(Oe(j.source_connector))}`,children:[r.jsx("span",{children:F(Oe(j.source_connector))}),r.jsxs("span",{children:["SRC: ",Oe(j.source_connector)]})]})]})]}),Ye(j,"source",j.source_connector)]}),r.jsxs("div",{className:"flex items-center justify-center px-4 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600 dark:bg-green-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600 dark:bg-green-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600 dark:bg-green-400"})]}),r.jsx(qs,{className:"w-5 h-5 text-gray-400 mx-2"})]}),r.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[r.jsx(pt,{connectorClass:(oe=j.sink_connector)==null?void 0:oe.connector_class,sourceType:j.destination_type,className:"w-12 h-12 flex-shrink-0"}),r.jsxs("div",{className:"flex flex-col min-w-0",children:[r.jsx("span",{className:"text-base font-bold text-gray-900 dark:text-gray-100 truncate",children:((J=j.sink_connector)==null?void 0:J.name)||j.destination_type||"Destination"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.destination_type}),j.sink_connector&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${vt(Oe(j.sink_connector))}`,children:[r.jsx("span",{children:F(Oe(j.sink_connector))}),r.jsxs("span",{children:["SINK: ",Oe(j.sink_connector)]})]})]})]}),Ye(j,"sink",j.sink_connector)]})]}),r.jsxs("div",{className:"flex items-center gap-4 ml-6 flex-shrink-0",children:[(V(j)==="running"||V(j)==="paused"||V(j)==="error"||V(j)==="draft"||V(j)==="ready")&&r.jsx("span",{className:`px-4 py-1.5 rounded-md text-xs font-bold uppercase tracking-wider ${V(j)==="running"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":V(j)==="paused"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":V(j)==="error"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:V(j)}),c(j.id)>0&&r.jsx("div",{className:"relative",children:r.jsxs("button",{onClick:ce=>{ce.stopPropagation(),t(`/pipelines/${j.id}?tab=logs`)},className:"p-2 rounded-full transition-colors hover:bg-red-100 dark:hover:bg-red-900/30 relative",title:`${c(j.id)} unresolved alert(s)`,children:[r.jsx(Wi,{className:`w-5 h-5 ${d(j.id)?"text-red-600 dark:text-red-400 animate-pulse":"text-yellow-600 dark:text-yellow-400 animate-pulse"}`}),r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:c(j.id)})]})}),r.jsx("button",{onClick:ce=>{ce.stopPropagation(),t(`/pipelines/${j.id}`)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",title:"View Details",children:r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-400 dark:border-gray-500 flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-gray-400 dark:text-gray-500",children:"i"})})}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:ce=>{ce.stopPropagation(),N(k===j.id?null:j.id)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(tu,{className:"w-5 h-5 text-gray-400"})}),k===j.id&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>N(null)}),r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20",children:[ee?Q?r.jsxs("button",{onClick:ce=>be(ce,j.id,"deploy"),className:"w-full px-4 py-2 text-left text-sm text-blue-700 dark:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center gap-2",disabled:Ce===j.id,children:[r.jsx(ri,{className:"w-4 h-4"}),Ce===j.id?"Deploying":"Deploy Pipeline"]}):r.jsxs("button",{onClick:ce=>{ce.stopPropagation(),N(null),j.source_type?j.destination_type?t(`/wizard/${j.id}/destination`):t(`/wizard/${j.id}/destination`):t(`/pipelines/new/source-config?resume=${j.id}`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Gi,{className:"w-4 h-4"}),"Complete Setup"]}):r.jsxs(r.Fragment,{children:[V(j)!=="running"&&r.jsxs("button",{onClick:ce=>be(ce,j.id,"start"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Rs,{className:"w-4 h-4"}),V(j)==="paused"?"Resume":"Start"]}),V(j)==="running"&&r.jsxs("button",{onClick:ce=>be(ce,j.id,"pause"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Hs,{className:"w-4 h-4"}),"Pause"]}),r.jsxs("button",{onClick:ce=>be(ce,j.id,"restart"),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(_a,{className:"w-4 h-4"}),"Restart"]}),r.jsxs("button",{onClick:ce=>{ce.stopPropagation(),N(null),pe(j)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(La,{className:"w-4 h-4"}),"Change Schedule"]})]}),r.jsxs("button",{onClick:ce=>{ce.stopPropagation(),N(null),st({isOpen:!0,pipelineId:j.id,pipelineName:j.name})},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[r.jsx(Ws,{className:"w-4 h-4"}),"Delete Pipeline"]})]})]})]})]})]})]},j.id)})})]}),us(),gl(),ml(),bx(),r.jsx(hx,{isOpen:ye.isOpen,onClose:()=>st({isOpen:!1,pipelineId:null,pipelineName:""}),onConfirm:xx,title:"Are you sure you want to delete the Pipeline?",message:"This action CANNOT be undone. The Pipeline will be permanently deleted from your account. Do you wish to continue?"})]})}function n1(){const e=tt(),t=()=>{e("/pipelines/new/source")};return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Pipelines"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Move data between any Source and Destination"}),r.jsx(a1,{onCreatePipeline:t})]})}function i1({children:e,variant:t="default",size:s="sm"}){const a={default:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",success:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",error:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",warning:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",info:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"},n={sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"};return r.jsx("span",{className:`inline-flex items-center rounded-full font-medium ${a[t]} ${n[s]}`,children:e})}function l1({connectorName:e,connectorType:t,currentConfig:s,pendingConfig:a,onDeploy:n,onDismiss:i,onClose:l}){const o=p.useMemo(()=>{const d=[];return new Set([...Object.keys(s||{}),...Object.keys(a||{})]).forEach(h=>{const g=s==null?void 0:s[h],f=a==null?void 0:a[h];g===void 0&&f!==void 0?d.push({key:h,oldValue:g,newValue:f,type:"added"}):g!==void 0&&f===void 0?d.push({key:h,oldValue:g,newValue:f,type:"removed"}):JSON.stringify(g)!==JSON.stringify(f)&&d.push({key:h,oldValue:g,newValue:f,type:"changed"})}),d},[s,a]),c=()=>{const d=[];new Set(o.map(g=>g.key));const u=new Map(o.map(g=>[g.key,g]));d.push(r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"{"},"open-brace"));const h=Object.entries(a);return h.forEach(([g,f],x)=>{const w=u.get(g),v=x===h.length-1;w?w.type==="changed"?(d.push(r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"-  "}),r.jsxs("span",{className:"text-red-700 dark:text-red-300",children:['"',g,'"']}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),r.jsx("span",{className:"text-red-700 dark:text-red-300",children:JSON.stringify(w.oldValue)}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:","})]},`${g}-old`)),d.push(r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:"+  "}),r.jsxs("span",{className:"text-green-700 dark:text-green-300",children:['"',g,'"']}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),r.jsx("span",{className:"text-green-700 dark:text-green-300",children:JSON.stringify(f)}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:v?"":","})]},`${g}-new`))):w.type==="added"&&d.push(r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:"+  "}),r.jsxs("span",{className:"text-green-700 dark:text-green-300",children:['"',g,'"']}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),r.jsx("span",{className:"text-green-700 dark:text-green-300",children:JSON.stringify(f)}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:v?"":","})]},g)):d.push(r.jsxs("div",{className:"text-gray-700 dark:text-gray-300",children:["   ",r.jsxs("span",{children:['"',g,'"']}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),r.jsx("span",{children:JSON.stringify(f)}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:v?"":","})]},g))}),Object.entries(s).forEach(([g,f])=>{if(!a.hasOwnProperty(g)){const x=u.get(g);(x==null?void 0:x.type)==="removed"&&d.push(r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"-  "}),r.jsxs("span",{className:"text-red-700 dark:text-red-300",children:['"',g,'"']}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:": "}),r.jsx("span",{className:"text-red-700 dark:text-red-300",children:JSON.stringify(f)}),r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:","})]},`${g}-removed`))}}),d.push(r.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"}"},"close-brace")),d};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:l}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col m-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Deploy ",t==="source"?"Source":"Destination"," Configuration"]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e,"  ",o.length," changes"]})]}),r.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No changes detected"}):r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Configuration Changes"}),r.jsx("pre",{className:"text-xs bg-white dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto font-mono",children:c()})]})}),r.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:i,disabled:o.length===0,className:"px-4 py-2 text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Dismiss Changes"}),r.jsx("button",{onClick:n,disabled:o.length===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Deploy"})]})]})]})]})}const o1=p.memo(function({pipelineId:t,pipelineStatus:s,sourceType:a,destinationType:n,onPipelineStatusChange:i,refreshTrigger:l,connectorStatuses:o}){var Ue;const[c,d]=p.useState(""),[u,h]=p.useState("all"),[g,f]=p.useState("all"),[x,w]=p.useState(null),[v,y]=p.useState(!1),[b,m]=p.useState(!1),[k,N]=p.useState(null),[S,_]=p.useState(null),[P,A]=p.useState([]),[R,E]=p.useState([]),[Y,L]=p.useState(!0),[U,O]=p.useState(new Set),q=p.useRef({});p.useEffect(()=>{var I,ue;if(x&&o){const me=[];(I=o.source)!=null&&I.tasks&&o.source.tasks.forEach(X=>{me.push({id:`${o.source.name}-${X.id}`,task_number:X.id,status:X.state==="RUNNING"?"running":X.state==="PAUSED"?"paused":"failed",worker_id:X.worker_id||"",lag:"0",throughput:"0",type:"source",connector_name:o.source.name})}),(ue=o.sink)!=null&&ue.tasks&&o.sink.tasks.forEach(X=>{me.push({id:`${o.sink.name}-${X.id}`,task_number:X.id,status:X.state==="RUNNING"?"running":X.state==="PAUSED"?"paused":"failed",worker_id:X.worker_id||"",lag:"0",throughput:"0",type:"sink",connector_name:o.sink.name})}),console.log(" Updating selectedTable with fresh tasks:",me.map(X=>`${X.type}-${X.task_number}:${X.status}`).join(", ")),w(X=>X&&{...X,tasks:me})}},[o,x==null?void 0:x.id]);const $=I=>{const ue=["password","jaas.config","apikey","secret","token","key","username"],me={};for(const[X,ye]of Object.entries(I)){const st=X.toLowerCase();ue.some(Tr=>st.includes(Tr))&&typeof ye=="string"&&ye.length>0?me[X]="********":me[X]=ye}return me},C=async I=>{try{const me=await(await fetch(`http://localhost:5002/api/connectors/${I}/pause`,{method:"POST"})).json();if(!me.success)throw new Error(me.error||"Failed to pause connector");const X=()=>{B(!0),i&&i()};X(),setTimeout(()=>X(),1e3),setTimeout(()=>X(),2e3),setTimeout(()=>X(),3e3)}catch(ue){console.error("Failed to pause connector:",ue),alert(`Failed to pause connector: ${ue.message}`)}},M=async I=>{try{const me=await(await fetch(`http://localhost:5002/api/connectors/${I}/resume`,{method:"POST"})).json();if(!me.success)throw new Error(me.error||"Failed to resume connector");const X=()=>{B(!0),i&&i()};X(),setTimeout(()=>X(),1e3),setTimeout(()=>X(),2e3),setTimeout(()=>X(),3e3)}catch(ue){console.error("Failed to resume connector:",ue),alert(`Failed to resume connector: ${ue.message}`)}},D=async(I,ue)=>{try{const X=await(await fetch(`http://localhost:5002/api/connectors/${I}/tasks/${ue}/restart`,{method:"POST"})).json();if(!X.success)throw new Error(X.error||"Failed to restart task");const ye=()=>{B(!0),i&&i()};ye(),setTimeout(()=>ye(),1e3),setTimeout(()=>ye(),2e3),setTimeout(()=>ye(),3e3)}catch(me){console.error("Failed to restart task:",me),alert(`Failed to restart task: ${me.message}`)}},B=p.useCallback(async(I=!1)=>{var Tr,ds;I||L(!0),console.log(" Fetching data for pipeline:",t);const[{data:ue,error:me},{data:X,error:ye}]=await Promise.all([H.from("pipeline_connectors").select("*").eq("pipeline_id",t).order("type",{ascending:!0}),H.from("pipeline_objects").select("*").eq("pipeline_id",t).order("schema_name",{ascending:!0}).order("table_name",{ascending:!0})]);console.log(" Connectors data:",ue),console.log(" Connectors error:",me),console.log(" Tables data:",X),console.log(" Tables error:",ye),me&&console.error("Connectors fetch error:",me),ye&&console.error("Tables fetch error:",ye);let st=[];ue?(console.log(" Enriching connectors, count:",ue.length),st=await Promise.all(ue.map(async _e=>{var Ht,Oe;let Ne=_e.config||{};const ct=(Ht=_e.config)==null?void 0:Ht.registry_connector;if(ct){try{const vt=await Vn(ct);vt&&(Ne=vt)}catch(vt){console.warn("Failed to fetch registry config for",ct,vt)}Ne===_e.config&&(Ne=((Oe=_e.config)==null?void 0:Oe.snapshot_config)||Ne)}return{..._e,resolved_config:Ne}})),console.log(" Enriched connectors:",st),E(st)):console.log(" No connectors data received");let Ce=[];if(o){const _e=[];console.log(" ObjectsTab: connectorStatuses.source:",o.source),console.log(" ObjectsTab: connectorStatuses.sink:",o.sink),(Tr=o.source)!=null&&Tr.tasks?(console.log(" ObjectsTab: Source tasks found:",o.source.tasks.length),o.source.tasks.forEach(Ne=>{console.log("   Source task:",Ne.id,"state:",Ne.state),_e.push({id:`${o.source.name}-${Ne.id}`,task_number:Ne.id,status:Ne.state==="RUNNING"?"running":Ne.state==="PAUSED"?"paused":"failed",worker_id:Ne.worker_id||"",lag:"0",throughput:"0",type:"source",connector_name:o.source.name})})):console.log(" ObjectsTab: No source tasks found"),(ds=o.sink)!=null&&ds.tasks?(console.log(" ObjectsTab: Sink tasks found:",o.sink.tasks.length),o.sink.tasks.forEach(Ne=>{console.log("   Sink task:",Ne.id,"state:",Ne.state),_e.push({id:`${o.sink.name}-${Ne.id}`,task_number:Ne.id,status:Ne.state==="RUNNING"?"running":Ne.state==="PAUSED"?"paused":"failed",worker_id:Ne.worker_id||"",lag:"0",throughput:"0",type:"sink",connector_name:o.sink.name})})):console.log(" ObjectsTab: No sink tasks found"),Ce=_e,console.log(" ObjectsTab: Total tasks:",Ce.length),console.log(" ObjectsTab: All tasks:",Ce.map(Ne=>`${Ne.type}-${Ne.task_number}:${Ne.status}`).join(", "))}if(X&&X.length>0){const _e=st.find(V=>V.type==="source"),ct=((_e==null?void 0:_e.resolved_config)||(_e==null?void 0:_e.config)||{})["topic.prefix"]||"topic";let Ht={};const Oe="http://127.0.0.1:5001";if(console.log(" Fetching real-time stats - backendUrl:",Oe,"sourceConnector:",_e==null?void 0:_e.type),_e)try{const V=_e.resolved_config||_e.config||{},ne=V["connector.class"]||"";let ge="postgresql";ne.includes("oracle")?ge="oracle":ne.includes("postgresql")&&(ge="postgresql"),console.log(" Source config keys:",Object.keys(V)),console.log(" Connector class:",ne," connectionType:",ge);let $e=V["database.hostname"];["pg-debezium","postgres","oracle-xe"].includes($e)&&($e="localhost");const be={connectionType:ge,host:$e,port:parseInt(V["database.port"],10),database:V["database.dbname"],username:V["database.user"],password:V["database.password"],schemaName:V["database.schema"]||"public"};console.log(" Mapped config:",be),console.log(" Calling /api/list-tables");const kt=await fetch(`${Oe}/api/list-tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(console.log(" Response status:",kt.status),kt.ok){const Ye=await kt.json();console.log(" Response data:",Ye),Ye.success&&Array.isArray(Ye.tables)?(console.log(" Processing",Ye.tables.length,"tables"),Ye.tables.forEach(qr=>{const us=`${qr.schema}.${qr.table}`;Ht[us]={rowCount:qr.rowCount||0,sizeEstimate:qr.sizeEstimate||"0 B"},console.log(" Table stats:",us,"",Ht[us])})):console.warn(" Invalid response format:",Ye)}else{const Ye=await kt.text();console.error(" Backend error:",kt.status,Ye)}}catch(V){console.error(" Failed to fetch real-time table stats:",V)}else console.warn(" Missing backendUrl or sourceConnector:",{backendUrl:Oe,hasSourceConnector:!!_e});const vt=new Set;console.log(" Real-time stats available:",Object.keys(Ht).length,"tables"),console.log(" Tables to map:",X.length);const F=X.map(V=>{const ne=`${V.schema_name}.${V.table_name}`,ge=Ht[ne],$e=(ge==null?void 0:ge.rowCount)??0,Ae=(ge==null?void 0:ge.sizeEstimate)??"0 B";console.log(` Mapping table ${ne}: realStats=${!!ge}, row_count=${$e}, size=${Ae}`);const be=q.current[ne];return be&&($e>be.row_count||Ae!==be.size_estimate)&&(vt.add(ne),console.log(`  Increase detected for ${ne}:`,be,"",{row_count:$e,size_estimate:Ae})),q.current[ne]={row_count:$e,size_estimate:Ae},{id:V.id,schema_name:V.schema_name,table_name:V.table_name,status:"streaming",last_event_timestamp:new Date().toISOString(),row_count:$e,size_estimate:Ae,last_sync_time:new Date().toISOString(),source_topic:`${ct}.${V.schema_name}.${V.table_name}`,partition_count:1,destination_table:`${V.schema_name}_${V.table_name}`,snapshot_progress:V.included?100:0,tasks:Ce}});A(F),O(vt),vt.size>0&&setTimeout(()=>{O(new Set)},5e3)}else{const _e=st.find(Oe=>Oe.type==="source"),Ne=st.find(Oe=>Oe.type==="sink"),Ht=c1(_e,Ne,t).map(Oe=>({...Oe,status:"streaming",tasks:Ce}));A(Ht)}L(!1)},[t]);p.useEffect(()=>{B()},[B]),p.useEffect(()=>{if(s!=="running"&&s!=="paused")return;const I=setInterval(()=>{B(!0)},5e3);return()=>clearInterval(I)},[s,B]);const W=p.useMemo(()=>{var ue,me;if(!o)return[];const I=[];return(ue=o.source)!=null&&ue.tasks&&o.source.tasks.forEach(X=>{console.log(" Source task state:",X.state,"id:",X.id);const ye=X.state==="RUNNING"?"running":X.state==="PAUSED"?"paused":"failed";console.log("   Mapped to:",ye),I.push({id:`${o.source.name}-${X.id}`,task_number:X.id,status:ye,worker_id:X.worker_id||"",lag:"0",throughput:"0",type:"source",connector_name:o.source.name})}),(me=o.sink)!=null&&me.tasks&&o.sink.tasks.forEach(X=>{console.log(" Sink task state:",X.state,"id:",X.id);const ye=X.state==="RUNNING"?"running":X.state==="PAUSED"?"paused":"failed";console.log("   Mapped to:",ye),I.push({id:`${o.sink.name}-${X.id}`,task_number:X.id,status:ye,worker_id:X.worker_id||"",lag:"0",throughput:"0",type:"sink",connector_name:o.sink.name})}),console.log(" INSTANT tasks update from connectorStatuses:",I.map(X=>`${X.type}-${X.task_number}:${X.status}`).join(", ")),console.log(" Full tasks array:",JSON.stringify(I,null,2)),I},[o]),ie=p.useMemo(()=>P.map(I=>{const ue={...I,tasks:W};if(!ue.tasks||ue.tasks.length===0)return ue;const me=ue.tasks.some(Ce=>Ce.status==="failed"),X=ue.tasks.some(Ce=>Ce.status==="paused"),ye=ue.tasks.every(Ce=>Ce.status==="running");let st="paused";return me?st="error":X?st="paused":ye&&(st="streaming"),{...ue,status:st}}),[P,W]),te=I=>{switch(I){case"streaming":return r.jsx(kr,{className:"w-4 h-4"});case"snapshotting":return r.jsx(Na,{className:"w-4 h-4 animate-spin"});case"paused":return r.jsx(nr,{className:"w-4 h-4"});case"error":return r.jsx(jr,{className:"w-4 h-4"});default:return r.jsx(Ve,{className:"w-4 h-4"})}},pe=I=>{switch(I){case"streaming":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"snapshotting":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"error":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},K=I=>new Date(I).toLocaleString(),ae=p.useMemo(()=>ie.filter(I=>{const ue=I.table_name.toLowerCase().includes(c.toLowerCase())||I.schema_name.toLowerCase().includes(c.toLowerCase()),me=u==="all"||I.status===u,X=g==="all"||I.schema_name===g;return ue&&me&&X}),[ie,c,u,g]),de=p.useMemo(()=>Array.from(new Set(P.map(I=>I.schema_name))),[P]),Pe=p.useMemo(()=>R.filter(I=>I.type==="source"),[R]),Ee=p.useMemo(()=>R.filter(I=>I.type==="sink"),[R]);return Y?r.jsx("div",{className:"p-8 text-gray-600 dark:text-gray-400",children:"Loading..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Connectors"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Source Connectors"}),Pe.map(I=>r.jsx("div",{className:"relative",children:r.jsx("div",{className:"w-full p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 cursor-pointer transition-colors",onClick:()=>{_(I),m(!0)},children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(pt,{connectorClass:I.connector_class,className:"w-14 h-14 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:I.name}),I.has_pending_changes&&r.jsxs("button",{onClick:ue=>{ue.stopPropagation(),N(I),y(!0)},className:"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 text-xs font-medium rounded-full hover:bg-orange-200 dark:hover:bg-orange-900/40 transition-colors cursor-pointer",children:[r.jsx(ig,{className:"w-3 h-3"}),"Updated"]})]}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:I.connector_class.split(".").pop()})]})]})})})},I.id))]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sink Connectors"}),Ee.map(I=>r.jsx("div",{className:"relative",children:r.jsx("div",{className:"w-full p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-750 cursor-pointer transition-colors",onClick:()=>{_(I),m(!0)},children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(pt,{connectorClass:I.connector_class,className:"w-14 h-14 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:I.name}),I.has_pending_changes&&r.jsxs("button",{onClick:ue=>{ue.stopPropagation(),N(I),y(!0)},className:"inline-flex items-center gap-1 px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 text-xs font-medium rounded-full hover:bg-orange-200 dark:hover:bg-orange-900/40 transition-colors cursor-pointer",children:[r.jsx(ig,{className:"w-3 h-3"}),"Updated"]})]}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:I.connector_class.split(".").pop()})]})]})})})},I.id))]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Tables"}),r.jsx("button",{onClick:B,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(Na,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search tables...",value:c,onChange:I=>d(I.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("select",{value:u,onChange:I=>h(I.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"streaming",children:"Streaming"}),r.jsx("option",{value:"snapshotting",children:"Snapshotting"}),r.jsx("option",{value:"paused",children:"Paused"}),r.jsx("option",{value:"error",children:"Error"})]}),r.jsxs("select",{value:g,onChange:I=>f(I.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Schemas"}),de.map(I=>r.jsx("option",{value:I,children:I},I))]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Table"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Connector"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Last Event"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rows"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Size"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Destination"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tasks"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ae.map(I=>{var ue,me,X;return r.jsxs("tr",{onClick:()=>w(I),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pt,{connectorClass:(ue=Pe[0])==null?void 0:ue.connector_class,sourceType:a,className:"w-8 h-8 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:I.table_name}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:I.schema_name})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pt,{connectorClass:(me=Pe[0])==null?void 0:me.connector_class,sourceType:a,className:"w-12 h-12 flex-shrink-0"}),r.jsx("span",{className:"text-2xl text-gray-400 dark:text-gray-500 font-light",children:""}),r.jsx(pt,{connectorClass:(X=Ee[0])==null?void 0:X.connector_class,sourceType:n,className:"w-12 h-12 flex-shrink-0"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${pe(I.status)}`,children:[te(I.status),I.status]}),I.status==="snapshotting"&&I.snapshot_progress!==void 0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${I.snapshot_progress}%`}})}),r.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[I.snapshot_progress,"%"]})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:K(I.last_event_timestamp)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{children:I.row_count.toLocaleString()}),U.has(`${I.schema_name}.${I.table_name}`)&&r.jsx(Sa,{className:"w-4 h-4 text-green-600 dark:text-green-400 animate-bounce"})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{children:I.size_estimate}),U.has(`${I.schema_name}.${I.table_name}`)&&r.jsx(Sa,{className:"w-4 h-4 text-green-600 dark:text-green-400 animate-bounce"})]})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-mono",children:I.destination_table}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[I.partition_count," partitions"]})]}),r.jsx("td",{className:"px-6 py-4",children:I.tasks&&I.tasks.length>0?r.jsx("div",{className:"flex items-center gap-1.5",children:I.tasks.map(ye=>r.jsxs("div",{className:`px-2.5 py-1 rounded text-xs font-medium ${ye.status==="running"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":ye.status==="paused"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,title:`${ye.type==="source"?"Source":"Sink"}: ${ye.connector_name}
Task ${ye.task_number}
Worker: ${ye.worker_id}`,children:[ye.type==="source"?"SRC":"SINK","-",ye.task_number]},ye.id))}):r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No tasks"})})]},I.id)})})]})})]}),b&&S&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>m(!1)}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col m-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:S.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Current Configuration"})]}),r.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsx("pre",{className:"text-xs bg-gray-50 dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto font-mono",children:JSON.stringify($(S.resolved_config||S.config),null,2)})}),r.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Close"})})]})]}),v&&k&&r.jsx(l1,{connectorName:k.name,connectorType:k.type,currentConfig:$(k.config),pendingConfig:$(k.pending_config||{}),onDeploy:async()=>{try{const{error:I}=await H.from("pipeline_connectors").update({config:k.pending_config,pending_config:null,has_pending_changes:!1,last_deployed_at:new Date().toISOString(),last_deployed_version:k.last_deployed_version?k.last_deployed_version+1:1}).eq("id",k.id);if(I)throw I;y(!1),N(null),B(),window.dispatchEvent(new CustomEvent("pipeline-updated",{detail:{pipelineId:t}}))}catch(I){console.error("Deploy error:",I),alert("Failed to deploy changes")}},onDismiss:async()=>{try{const{error:I}=await H.from("pipeline_connectors").update({pending_config:null,has_pending_changes:!1}).eq("id",k.id);if(I)throw I;y(!1),N(null),B()}catch(I){console.error("Dismiss error:",I),alert("Failed to dismiss changes")}},onClose:()=>{y(!1),N(null)}}),x&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>w(null)}),r.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50 max-h-[80vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ve,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:[x.schema_name,".",x.table_name]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Table Details"})]})]}),r.jsx("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${pe(x.tasks&&x.tasks.length>0?x.tasks[0].status:x.status)}`,children:[te(x.tasks&&x.tasks.length>0?x.tasks[0].status:x.status),x.tasks&&x.tasks.length>0?x.tasks[0].status:x.status]}),x.status==="snapshotting"&&x.snapshot_progress!==void 0&&r.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[r.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${x.snapshot_progress}%`}})}),r.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[x.snapshot_progress,"%"]})]})]}),x.error_message&&r.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(jr,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-red-900 dark:text-red-200",children:"Error"}),r.jsx("p",{className:"text-sm text-red-800 dark:text-red-300 mt-1",children:x.error_message})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Row Count"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:x.row_count.toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Size"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:x.size_estimate})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Partitions"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:x.partition_count})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tasks"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mt-1",children:((Ue=x.tasks)==null?void 0:Ue.length)||0})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Source Topic"}),r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 mt-1",children:x.source_topic})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Destination Table"}),r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 mt-1",children:x.destination_table})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Event"}),r.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:K(x.last_event_timestamp)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Sync"}),r.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:K(x.last_sync_time)})]})]}),x.tasks&&x.tasks.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Tasks"}),r.jsx("div",{className:"space-y-2",children:x.tasks.map(I=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`px-2.5 py-1 rounded text-xs font-medium ${I.status==="running"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":I.status==="paused"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:[I.type==="source"?"Source":"Sink"," Task ",I.task_number]}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.worker_id})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Lag:"}),r.jsx("span",{className:"ml-1 font-medium text-gray-900 dark:text-gray-100",children:I.lag})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Throughput:"}),r.jsx("span",{className:"ml-1 font-medium text-gray-900 dark:text-gray-100",children:I.throughput})]})]}),r.jsxs("div",{className:"flex items-center gap-1 border-l border-gray-300 dark:border-gray-700 pl-4",children:[I.status==="paused"?r.jsx("button",{onClick:ue=>{ue.stopPropagation(),M(I.connector_name)},className:"p-1.5 hover:bg-green-100 dark:hover:bg-green-900/30 rounded transition-colors",title:"Resume Connector",children:r.jsx(Rs,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}):r.jsx("button",{onClick:ue=>{ue.stopPropagation(),C(I.connector_name)},className:"p-1.5 hover:bg-yellow-100 dark:hover:bg-yellow-900/30 rounded transition-colors",title:"Pause Connector",children:r.jsx(Hs,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),r.jsx("button",{onClick:ue=>{ue.stopPropagation(),D(I.connector_name,I.task_number)},className:"p-1.5 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Restart Task",children:r.jsx(_a,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})})]})]})]},I.id))})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{onClick:()=>alert("Preview data - Under development"),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(Nr,{className:"w-4 h-4"}),"Preview Data"]}),r.jsxs("button",{onClick:()=>alert("Re-snapshot - Under development"),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4"}),"Re-snapshot"]})]})]})]})]})]})});function c1(e,t,s){const a=(e==null?void 0:e.resolved_config)||(e==null?void 0:e.config)||{},n=(t==null?void 0:t.resolved_config)||(t==null?void 0:t.config)||{},i=a["table.include.list"];let l=[];if(i&&(l=i.split(",").map(c=>c.trim()).filter(Boolean)),l.length===0){const c=n.topics;c&&(l=c.split(",").map(d=>d.trim()).filter(Boolean).map(d=>{const u=d.split(".");return u.length>=3?`${u[1]}.${u[2]}`:d}))}const o=a["topic.prefix"]||"topic";return l.map((c,d)=>{const[u,h]=c.includes(".")?c.split("."):["public",c];return{id:`${s||"config"}-${d}`,schema_name:u,table_name:h,status:"streaming",last_event_timestamp:new Date().toISOString(),row_count:0,size_estimate:"0 B",last_sync_time:new Date().toISOString(),source_topic:`${o}.${u}.${h}`,partition_count:1,destination_table:`${u}_${h}`,snapshot_progress:0,tasks:[]}})}function Ul({icon:e,label:t,value:s,variant:a="default"}){const n={default:"bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100",success:"bg-green-50 dark:bg-green-900/20 text-green-900 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/20 text-red-900 dark:text-red-100",warning:"bg-amber-50 dark:bg-amber-900/20 text-amber-900 dark:text-amber-100"},i={default:"text-gray-500 dark:text-gray-400",success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-amber-600 dark:text-amber-400"};return r.jsxs("div",{className:`px-4 py-3 rounded-lg border border-gray-200 dark:border-gray-700 ${n[a]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(e,{className:`w-4 h-4 ${i[a]}`}),r.jsx("span",{className:"text-xs font-medium opacity-75",children:t})]}),r.jsx("div",{className:"text-lg font-bold",children:s})]})}function d1({pipelineId:e}){const{showToast:t}=St(),[s,a]=p.useState(!0),[n,i]=p.useState([]),[l,o]=p.useState([]),[c,d]=p.useState(!1),[u,h]=p.useState(""),[g,f]=p.useState(!1);p.useEffect(()=>{x()},[e]);const x=async()=>{await Promise.all([w(),v()]),a(!1)},w=async()=>{try{const{data:k,error:N}=await H.from("pipeline_slack_channels").select(`
          id,
          slack_webhook_id,
          slack_webhooks (
            id,
            name,
            webhook_url,
            description
          )
        `).eq("pipeline_id",e);if(N)throw N;i(k||[])}catch(k){console.error("Failed to load assigned channels:",k)}},v=async()=>{try{const{data:k,error:N}=await H.from("slack_webhooks").select("*").order("name");if(N)throw N;o(k||[])}catch(k){console.error("Failed to load available webhooks:",k)}},y=async()=>{if(!u){t("error","Please select a Slack channel");return}f(!0);try{const{error:k}=await H.from("pipeline_slack_channels").insert({pipeline_id:e,slack_webhook_id:u});if(k){if(k.code==="23505")t("error","This Slack channel is already assigned");else throw k;return}t("success","Slack channel assigned successfully"),d(!1),h(""),w()}catch(k){console.error("Failed to assign channel:",k),t("error","Failed to assign Slack channel")}finally{f(!1)}},b=async(k,N)=>{if(confirm(`Remove "${N}" from this pipeline?`))try{const{error:S}=await H.from("pipeline_slack_channels").delete().eq("id",k);if(S)throw S;t("success","Slack channel removed"),w()}catch(S){console.error("Failed to remove channel:",S),t("error","Failed to remove Slack channel")}},m=()=>{const k=new Set(n.map(N=>N.slack_webhook_id));return l.filter(N=>!k.has(N.id))};return s?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Le,{className:"w-6 h-6 animate-spin text-blue-600"})}):r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(Ur,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Slack Channels"]}),r.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.length," channel",n.length!==1?"s":""]})]}),n.length===0?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[r.jsx(Ur,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No Slack channels assigned"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mb-4",children:"Assign Slack channels to receive alerts for this pipeline"}),r.jsxs("button",{onClick:()=>d(!0),disabled:l.length===0,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(Vs,{className:"w-4 h-4"}),"Assign Slack Channel"]}),l.length===0&&r.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"No Slack webhooks available. Add webhooks in Admin  Alert Settings  Slack Integrations"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden mb-4",children:r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(k=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:r.jsx(Ur,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:k.slack_webhooks.name}),k.slack_webhooks.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:k.slack_webhooks.description})]})]}),r.jsxs("button",{onClick:()=>b(k.id,k.slack_webhooks.name),className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[r.jsx(Ma,{className:"w-4 h-4"}),"Remove"]})]},k.id))})}),m().length>0&&r.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:[r.jsx(Vs,{className:"w-4 h-4"}),"Assign Another Channel"]})]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(Ur,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Assign Slack Channel"]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"All alerts for this pipeline will be sent to assigned channels"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Slack Channel"}),r.jsxs("select",{value:u,onChange:k=>h(k.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"-- Select a channel --"}),m().map(k=>r.jsxs("option",{value:k.id,children:[k.name,k.description&&` - ${k.description}`]},k.id))]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>{d(!1),h("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:y,disabled:g||!u,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Vs,{className:"w-4 h-4"}),"Assign Channel"]})})]})]})})]})}function u1({refreshTrigger:e,refreshInterval:t=6e4,isActive:s=!1}){var R,E,Y,L,U,O,q,$,C,M;const{id:a}=sc(),[n,i]=p.useState(null),[l,o]=p.useState(!0),[c,d]=p.useState(null),[u,h]=p.useState(!0),[g,f]=p.useState(null),[x,w]=p.useState([0,0,0,0,0,0,0,0,0,0]),[v,y]=p.useState(null);p.useEffect(()=>{if(!(c!=null&&c.throughputMetrics)||c.throughputMetrics.length===0)return;const D=c.throughputMetrics[0];if(D&&D.value){const B=D.value.match(/(\d+)/);if(B){const W=parseInt(B[1],10);w(ie=>{const te=[...ie.slice(-9),W],pe=Math.max(...te);return pe===0?te.map(()=>0):te.map(K=>Math.round(K/pe*100))})}}},[c==null?void 0:c.throughputMetrics]),p.useEffect(()=>{(async()=>{if(a){o(!0);try{const{data:B,error:W}=await H.from("alert_preferences").select(`
            *,
            user_profiles!created_by(full_name)
          `).eq("pipeline_id",a).maybeSingle();if(W)throw W;i(B)}catch(B){console.error("Error fetching alert preferences:",B),i(null)}finally{o(!1)}}})()},[a]),p.useEffect(()=>{(async()=>{if(!a){console.log(" No pipeline ID");return}console.log(" Fetching monitoring data for pipeline:",a),h(!0);try{const B=await Ag(a);console.log(" Monitoring data:",B),d(B)}catch(B){console.error(" Error fetching monitoring data:",B),d(null)}finally{h(!1)}})()},[a,e]),p.useEffect(()=>{if(!s||!a)return;const D=async()=>{try{const W=await Ag(a);d(W)}catch(W){console.error(" Error auto-refreshing monitoring data:",W)}},B=setInterval(()=>{D()},t);return()=>clearInterval(B)},[a,s,t]);const b=(c==null?void 0:c.lagMetrics)||[],m=(c==null?void 0:c.throughputMetrics)||[],k=(c==null?void 0:c.slowTables)||[],N=(c==null?void 0:c.connectorTasks)||[],S=(c==null?void 0:c.state)||{status:"Unknown",errorRate:"0%",commitRate:"0/s",queueUsage:"0%"},_=D=>{if(!D)return 0;const B=D.match(/(\d+)/);if(!B)return 0;const W=parseInt(B[1],10);if(W===0)return 0;const te=Math.min(Math.max(W/1e3*100,20),100);return Math.round(te)},P={sourceToKafka:_((R=c==null?void 0:c.flowMetrics)==null?void 0:R.sourceToKafka),kafkaToSink:_((E=c==null?void 0:c.flowMetrics)==null?void 0:E.kafkaToSink),sinkToDestination:_((Y=c==null?void 0:c.flowMetrics)==null?void 0:Y.sinkToDestination)},A=D=>({"P50 Lag":"50% of records have lower lag. Shows typical performance.","P95 Lag":"95% of records have lower lag. Detects performance outliers.","P99 Lag":"99% of records have lower lag. Captures worst-case scenarios.","Avg Lag":"Average lag across all records in the pipeline."})[D]||"";return u?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(Le,{className:"w-8 h-8 text-blue-600 animate-spin"}),r.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading monitoring data..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pipeline State"}),r.jsx("button",{onClick:()=>y("pipeline"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Maximize",children:r.jsx(Dl,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsx(Ul,{label:"State",value:S.status,icon:Eo,variant:S.status==="Streaming"?"success":"default"}),r.jsx(Ul,{label:"Error Rate",value:S.errorRate,icon:jr,variant:parseFloat(S.errorRate)<1?"success":"default"}),r.jsx(Ul,{label:"Commit Rate",value:S.commitRate,icon:Ve,variant:"default"}),r.jsx(Ul,{label:"Queue Usage",value:S.queueUsage,icon:Mr,variant:"default"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"End-to-End Latency"}),r.jsx("button",{onClick:()=>y("latency"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Maximize",children:r.jsx(Dl,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:b.map(D=>r.jsxs("div",{className:"relative",onMouseEnter:()=>f(D.label),onMouseLeave:()=>f(null),children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-150 cursor-help",children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:D.label}),r.jsx(Js,{className:"w-3.5 h-3.5 text-gray-400 dark:text-gray-500"})]}),r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D.value}),D.change&&r.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${D.trend==="down"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[D.trend==="down"?r.jsx(og,{className:"w-3 h-3"}):r.jsx(Sa,{className:"w-3 h-3"}),D.change]})]})]}),g===D.label&&r.jsxs("div",{className:"absolute z-50 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2.5 bg-gradient-to-br from-gray-900 to-gray-800 dark:from-gray-700 dark:to-gray-600 text-white text-xs rounded-lg shadow-xl max-w-[200px] animate-in fade-in slide-in-from-bottom-2 duration-200",children:[r.jsx("div",{className:"font-semibold mb-1 text-blue-300",children:D.label}),r.jsx("div",{className:"text-gray-200 dark:text-gray-300 leading-relaxed",children:A(D.label)}),r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:r.jsx("div",{className:"border-[5px] border-transparent border-t-gray-900 dark:border-t-gray-700"})})]})]},D.label))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Throughput"}),r.jsx("button",{onClick:()=>y("throughput"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Maximize",children:r.jsx(Dl,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("div",{className:"space-y-4",children:m.map(D=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:D.label}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:D.value})]},D.label))}),r.jsx("div",{className:"mt-6 h-32 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg flex items-end justify-around p-4",children:x.map((D,B)=>r.jsx("div",{className:"w-6 bg-gradient-to-t from-blue-600 to-blue-400 dark:from-blue-500 dark:to-blue-300 rounded-t transition-all duration-700 ease-in-out animate-pulse-subtle",style:{height:`${D}%`,animationDelay:`${B*100}ms`}},B))})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Records Flow"}),r.jsx("button",{onClick:()=>y("records"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Maximize",children:r.jsx(Dl,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Source  Kafka"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:((L=c==null?void 0:c.flowMetrics)==null?void 0:L.sourceToKafka)||"0 rec/s"})]}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500 ease-out relative",style:{width:`${P.sourceToKafka}%`},children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})})]})}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kafka  Sink"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:((U=c==null?void 0:c.flowMetrics)==null?void 0:U.kafkaToSink)||"0 rec/s"})]}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500 ease-out relative",style:{width:`${P.kafkaToSink}%`},children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.3s"}})})})]})}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sink  Destination"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:((O=c==null?void 0:c.flowMetrics)==null?void 0:O.sinkToDestination)||"0 rec/s"})]}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-500 ease-out relative",style:{width:`${P.sinkToDestination}%`},children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.6s"}})})})]})})]})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Top Slow Tables"}),r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Table"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Lag"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Records"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:k.map(D=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:D.table}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:D.lag}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:D.records}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${D.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":D.status==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:D.status})})]},D.table))})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Connector Task Health Map"}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:N.map(D=>r.jsxs("div",{className:`p-4 rounded-lg border-2 ${D.status==="healthy"?"border-green-500 bg-green-50 dark:bg-green-900/20":D.status==="warning"?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:D.id}),r.jsx("span",{className:`w-3 h-3 rounded-full ${D.status==="healthy"?"bg-green-500":D.status==="warning"?"bg-yellow-500":"bg-red-500"}`})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:"Lag:"}),r.jsx("span",{className:"font-medium",children:D.lag})]}),r.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:"Rate:"}),r.jsx("span",{className:"font-medium",children:D.records})]})]})]},D.id))})]}),a&&r.jsx(d1,{pipelineId:a}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(vr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Defined Alarms"]}),r.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded",children:"Read Only"})]}),l?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[r.jsx(Le,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading alarms..."})]}):n?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Defined by:"}),r.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-gray-100",children:((q=n.user_profiles)==null?void 0:q.full_name)||"Unknown"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Last updated:"}),r.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-gray-100",children:new Date(n.updated_at).toLocaleDateString()})]})]})}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Alert Type"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Slack"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Dashboard"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[{key:"pipeline_connectivity",label:"Pipeline Connectivity"},{key:"pipeline_job_failures",label:"Pipeline Job Failures"},{key:"source_event_types",label:"Source Event Types"},{key:"failed_events_summary",label:"Failed Events Summary"},{key:"webhooks",label:"Webhooks"},{key:"pipeline_loading_status",label:"Pipeline Loading Status"},{key:"source_side_events",label:"Source Side Events"},{key:"data_spike_alert",label:"Data Spike Alert"}].map(D=>{const B=n[`${D.key}_slack`],W=n[`${D.key}_dashboard`];return r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:D.label}),r.jsx("td",{className:"px-6 py-4 text-center",children:B?r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs",children:[r.jsx(kp,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Enabled"})]}):r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),r.jsx("td",{className:"px-6 py-4 text-center",children:W?r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs",children:[r.jsx(b0,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Enabled"})]}):r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})})]},D.key)})})]})]}):r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[r.jsx(vr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No alarms defined for this pipeline"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Configure alarms in Alert Preferences to receive notifications"})]})]}),v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-[90vw] h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[v==="latency"&&"End-to-End Latency",v==="throughput"&&"Throughput",v==="records"&&"Records Flow",v==="pipeline"&&"Pipeline State"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>y(null),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Minimize",children:r.jsx(Qv,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>y(null),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Close",children:r.jsx(He,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-8",children:[v==="latency"&&r.jsx("div",{className:"grid grid-cols-2 gap-6 h-full",children:b.map(D=>r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-8 hover:border-blue-500 dark:hover:border-blue-400 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:D.label}),r.jsx(Js,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsx("div",{className:"text-6xl font-bold text-gray-900 dark:text-gray-100",children:D.value}),D.change&&r.jsxs("div",{className:`flex items-center gap-2 text-xl font-medium ${D.trend==="down"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[D.trend==="down"?r.jsx(og,{className:"w-6 h-6"}):r.jsx(Sa,{className:"w-6 h-6"}),D.change]})]}),r.jsx("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:A(D.label)})]},D.label))}),v==="throughput"&&r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"grid grid-cols-2 gap-6 mb-8",children:m.map(D=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:D.label}),r.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D.value})]},D.label))}),r.jsx("div",{className:"flex-1 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg flex items-end justify-around p-12",children:x.map((D,B)=>r.jsx("div",{className:"w-16 bg-gradient-to-t from-blue-600 to-blue-400 dark:from-blue-500 dark:to-blue-300 rounded-t transition-all duration-700 ease-in-out",style:{height:`${D}%`}},B))})]}),v==="records"&&c&&r.jsxs("div",{className:"h-full flex flex-col justify-center space-y-12",children:[r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Source  Kafka"}),r.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:(($=c==null?void 0:c.flowMetrics)==null?void 0:$.sourceToKafka)||"0 rec/s"})]}),r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500 ease-out relative",style:{width:`${P.sourceToKafka}%`},children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})})]}),r.jsx(Ve,{className:"w-20 h-20 text-green-600 dark:text-green-400"})]}),r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Kafka  Sink"}),r.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:((C=c==null?void 0:c.flowMetrics)==null?void 0:C.kafkaToSink)||"0 rec/s"})]}),r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500 ease-out relative",style:{width:`${P.kafkaToSink}%`},children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.3s"}})})})]}),r.jsx(Mr,{className:"w-20 h-20 text-blue-600 dark:text-blue-400"})]}),r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Sink  Destination"}),r.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:((M=c==null?void 0:c.flowMetrics)==null?void 0:M.sinkToDestination)||"0 rec/s"})]}),r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-500 ease-out relative",style:{width:`${P.sinkToDestination}%`},children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer",style:{animationDelay:"0.6s"}})})})]}),r.jsx(Sa,{className:"w-20 h-20 text-purple-600 dark:text-purple-400"})]})]}),v==="pipeline"&&r.jsx("div",{className:"h-full flex items-center justify-center p-12",children:r.jsxs("div",{className:"grid grid-cols-2 gap-12 w-full max-w-5xl",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-10 rounded-2xl border-2 border-blue-200 dark:border-blue-700",children:r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(Eo,{className:"w-16 h-16 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"State"}),r.jsx("div",{className:`text-4xl font-bold ${S.status==="Streaming"?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-gray-100"}`,children:S.status})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-10 rounded-2xl border-2 border-amber-200 dark:border-amber-700",children:r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(jr,{className:"w-16 h-16 text-amber-600 dark:text-amber-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"Error Rate"}),r.jsx("div",{className:`text-4xl font-bold ${parseFloat(S.errorRate)<1?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:S.errorRate})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-10 rounded-2xl border-2 border-purple-200 dark:border-purple-700",children:r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(Ve,{className:"w-16 h-16 text-purple-600 dark:text-purple-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"Commit Rate"}),r.jsx("div",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:S.commitRate})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 dark:from-teal-900/20 dark:to-teal-800/20 p-10 rounded-2xl border-2 border-teal-200 dark:border-teal-700",children:r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(Mr,{className:"w-16 h-16 text-teal-600 dark:text-teal-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"Queue Usage"}),r.jsx("div",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:S.queueUsage})]})]})})]})})]})]})})]})}const Lg=[{id:"1",key:"order-12345",topic:"oracle.SALES.ORDERS",partition:2,offset:1523456,timestamp:"2024-11-12T10:30:15Z",errorReason:'Schema validation failed: missing required field "customer_id"'},{id:"2",key:"customer-98765",topic:"oracle.SALES.CUSTOMERS",partition:1,offset:892341,timestamp:"2024-11-12T09:15:30Z",errorReason:"Data type mismatch: expected INTEGER, got VARCHAR"}];function h1({pipelineId:e,pipelineStatus:t,activeView:s,searchQuery:a,severityFilter:n}){const[i,l]=p.useState(null),[o,c]=p.useState([]),[d,u]=p.useState([]),[h,g]=p.useState(!1),f=x0(),{data:x=[]}=lx(e,{refetchInterval:1e4}),w=async(N=!1)=>{N||g(!0);const S="http://127.0.0.1:5002";try{const _=await fetch(`${S}/api/pipelines/${e}/logs`);if(_.ok){const P=await _.json();P.success&&Array.isArray(P.logs)&&c(P.logs)}}catch(_){console.error("Failed to fetch logs:",_)}finally{N||g(!1)}},v=async(N=!1)=>{const S="http://127.0.0.1:5002";try{const _=await fetch(`${S}/api/pipelines/${e}/state-changes`);if(_.ok){const P=await _.json();P.success&&Array.isArray(P.stateChanges)&&u(P.stateChanges)}}catch(_){console.error("Failed to fetch state changes:",_)}};p.useEffect(()=>{w(),v()},[e]),p.useEffect(()=>{if(t!=="running")return;const N=setInterval(()=>{w(!0),v(!0)},5e3);return()=>clearInterval(N)},[t,e]);const y=N=>{switch(N){case"error":return r.jsx(Fr,{className:"w-5 h-5 text-red-500"});case"warn":return r.jsx(jr,{className:"w-5 h-5 text-yellow-500"});case"info":return r.jsx(Js,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(Js,{className:"w-5 h-5 text-gray-500"})}},b=N=>{switch(N){case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"warn":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";default:return"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-700"}},m=N=>new Date(N).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),k=o.filter(N=>{const S=N.message.toLowerCase().includes(a.toLowerCase()),_=n==="all"||N.severity===n;return S&&_});return r.jsxs("div",{className:"space-y-6",children:[s==="logs"&&r.jsx(r.Fragment,{children:r.jsx("div",{className:"space-y-3",children:k.map(N=>r.jsx("div",{onClick:()=>l(N),className:`border rounded-lg p-4 cursor-pointer hover:shadow-md transition-all ${b(N.severity)}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[y(N.severity),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 uppercase",children:N.severity}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:m(N.timestamp)})]}),r.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:N.message}),N.workerId&&r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Worker: ",N.workerId]}),N.context&&r.jsxs("button",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2 hover:underline flex items-center gap-1",children:["View context",r.jsx(cr,{className:"w-3 h-3"})]})]})]})},N.id))})}),s==="timeline"&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"State Changes"}),r.jsx("div",{className:"relative",children:d.map((N,S)=>r.jsxs("div",{className:"relative pb-8 last:pb-0",children:[S<d.length-1&&r.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-700"}),r.jsxs("div",{className:"relative flex items-start gap-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:r.jsx(kr,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded",children:N.from}),r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded",children:N.to})]}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:m(N.timestamp)})]}),r.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[N.task&&r.jsxs("span",{className:"font-medium",children:[N.task,"  "]}),r.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Worker: ",N.workerId]})]})]})]})]},N.id))})]}),s==="dlq"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(jr,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:[r.jsx("p",{className:"font-medium mb-1",children:"Dead Letter Queue"}),r.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:"Records that failed processing are stored here. Review and retry as needed."})]})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Key"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Topic"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Partition/Offset"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Timestamp"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Lg.map(N=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:N.key})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:N.topic})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[N.partition," / ",N.offset]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:m(N.timestamp)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Retry"})})]},N.id))})]})}),Lg.length>0&&r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry All"}),r.jsxs("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[r.jsx(Ko,{className:"w-4 h-4"}),"Download DLQ Records"]})]})]}),s==="alerts"&&r.jsx("div",{className:"space-y-4",children:x.length===0?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-12 text-center",children:[r.jsx(kr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Alerts"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This pipeline has no unresolved alerts. The monitoring system is actively checking for issues."})]}):r.jsx("div",{className:"space-y-3",children:x.map(N=>r.jsx("div",{className:`bg-white dark:bg-gray-800 border rounded-lg p-4 ${N.severity==="critical"?"border-red-300 dark:border-red-700":N.severity==="warning"?"border-yellow-300 dark:border-yellow-700":"border-blue-300 dark:border-blue-700"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Wi,{className:`w-5 h-5 ${N.severity==="critical"?"text-red-600 dark:text-red-400":N.severity==="warning"?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}`}),r.jsx("span",{className:`px-2.5 py-0.5 rounded text-xs font-semibold ${VN(N.severity)}`,children:N.severity.toUpperCase()}),r.jsx("span",{className:"px-2.5 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:WN(N.alert_type)}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(N.created_at).toLocaleString()})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:N.message}),N.metadata&&Object.keys(N.metadata).length>0&&r.jsxs("details",{className:"text-xs text-gray-600 dark:text-gray-400",children:[r.jsx("summary",{className:"cursor-pointer hover:text-gray-900 dark:hover:text-gray-200",children:"View Details"}),r.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:JSON.stringify(N.metadata,null,2)})]})]}),r.jsxs("button",{onClick:async()=>{try{await HN(N.id),f.invalidateQueries({queryKey:["pipeline-alerts",e]}),f.invalidateQueries({queryKey:["alerts"]}),f.invalidateQueries({queryKey:["alert-stats"]})}catch(S){console.error("Failed to resolve alert:",S)}},className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors flex items-center gap-1.5",title:"Mark as resolved",children:[r.jsx(kr,{className:"w-4 h-4"}),"Resolve"]})]})},N.id))})}),i&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>l(null)}),r.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Log Details"}),r.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Message"}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:i.message})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Timestamp"}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:m(i.timestamp)})]}),i.context&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Context"}),r.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg text-xs text-gray-900 dark:text-gray-100 overflow-auto",children:JSON.stringify(i.context,null,2)})]})]})]})]})]})}function g1({config:e,onChange:t}){const[s,a]=p.useState(new Set(["connection"])),[n,i]=p.useState(e),[l,o]=p.useState(!1),[c,d]=p.useState(null),u=[{id:"connection",title:"Connection & Basic Settings",description:"Database connection and connector identification",parameters:[{key:"database.hostname",label:"Database Hostname",type:"text",defaultValue:"localhost",description:"Oracle database server hostname or IP"},{key:"database.port",label:"Database Port",type:"number",defaultValue:1521,description:"Oracle listener port"},{key:"database.user",label:"Database User",type:"text",defaultValue:"DEBEZIUM",description:"Oracle user with LogMiner privileges"},{key:"database.password",label:"Database Password",type:"password",defaultValue:"",description:"Database password"},{key:"database.dbname",label:"Database Name (SID/Service)",type:"text",defaultValue:"ORCL",description:"Oracle SID or Service Name"},{key:"database.server.name",label:"Database Server Name",type:"text",defaultValue:"oracle-server",description:"Logical name for this database server"},{key:"database.server.id",label:"Database Server ID",type:"text",defaultValue:"1001",description:"Unique numeric ID for this server"},{key:"topic.prefix",label:"Topic Prefix",type:"text",defaultValue:"oracle",description:"Kafka topic prefix (topics will be prefix.schema.table)"},{key:"tasks.max",label:"Max Tasks",type:"number",defaultValue:1,description:"Number of parallel connector tasks"},{key:"database.connection.adapter",label:"Connection Adapter",type:"select",defaultValue:"logminer",options:[{value:"logminer",label:"LogMiner"},{value:"xstream",label:"XStream"}],description:"Oracle CDC adapter to use"}]},{id:"log-mining",title:"Log Mining / Redo Management",description:"Configure Oracle LogMiner and redo log processing",parameters:[{key:"log.mining.strategy",label:"Log Mining Strategy",type:"select",defaultValue:"online_catalog",options:[{value:"online_catalog",label:"Online Catalog"},{value:"redo_log_catalog",label:"Redo Log Catalog"}],description:"Strategy for extracting LogMiner data"},{key:"log.mining.archive.log.only.mode",label:"Archive Log Only Mode",type:"boolean",defaultValue:!1,description:"Force using only archive logs (true when online redo is not accessible)"},{key:"log.mining.sleep.time.default",label:"Sleep Time Default (ms)",type:"number",defaultValue:1e3,description:"Default polling interval for log mining"},{key:"log.mining.sleep.time.min",label:"Sleep Time Min (ms)",type:"number",defaultValue:0,description:"Minimum polling interval"},{key:"log.mining.sleep.time.max",label:"Sleep Time Max (ms)",type:"number",defaultValue:3e3,description:"Maximum polling interval"},{key:"log.mining.batch.size.default",label:"Batch Size Default",type:"number",defaultValue:2e4,description:"Default number of redo records per batch"},{key:"log.mining.batch.size.min",label:"Batch Size Min",type:"number",defaultValue:1e3,description:"Minimum number of redo records per batch"},{key:"log.mining.batch.size.max",label:"Batch Size Max",type:"number",defaultValue:1e5,description:"Maximum number of redo records per batch"},{key:"log.mining.archive.log.only",label:"Archive Log Only",type:"boolean",defaultValue:!1,description:"Use only archived redo logs"},{key:"log.mining.archive.log.hours",label:"Archive Log Hours",type:"number",defaultValue:24,description:"Hours of archive logs to query"},{key:"log.mining.archive.destination.name",label:"Archive Destination Name",type:"text",defaultValue:"",description:"Oracle archive destination (e.g., LOG_ARCHIVE_DEST_1)"},{key:"log.mining.archive.log.minimum.hours",label:"Archive Log Minimum Hours",type:"number",defaultValue:4,description:"Minimum hours to retain archive logs"},{key:"log.mining.continuous.mine",label:"Continuous Mine",type:"boolean",defaultValue:!0,description:"Keep LogMiner session open continuously"},{key:"log.mining.session.max.ms",label:"Session Max (ms)",type:"number",defaultValue:0,description:"Max duration for LogMiner session (0 = unlimited)"},{key:"log.mining.query.timeout.ms",label:"Query Timeout (ms)",type:"number",defaultValue:18e4,description:"Timeout for LogMiner queries"},{key:"oracle.dictionary.mode",label:"Dictionary Mode",type:"select",defaultValue:"auto",options:[{value:"auto",label:"Auto"},{value:"redo_log",label:"Redo Log"},{value:"online_catalog",label:"Online Catalog"}],description:"Source of dictionary information"}]},{id:"snapshot",title:"Snapshot / Initial Load",description:"Configure initial snapshot behavior",parameters:[{key:"snapshot.mode",label:"Snapshot Mode",type:"select",defaultValue:"initial",options:[{value:"initial",label:"Initial (snapshot + streaming)"},{value:"schema_only",label:"Schema Only (no data)"},{value:"initial_only",label:"Initial Only (snapshot only)"},{value:"never",label:"Never (streaming only)"}],description:"How to perform initial snapshot"},{key:"snapshot.lock.timeout.ms",label:"Lock Timeout (ms)",type:"number",defaultValue:1e4,description:"Timeout for acquiring table locks during snapshot"},{key:"snapshot.max.threads",label:"Max Threads",type:"number",defaultValue:1,description:"Number of parallel snapshot threads"},{key:"snapshot.fetch.size",label:"Fetch Size",type:"number",defaultValue:2e3,description:"JDBC fetch batch size for snapshot"},{key:"snapshot.delay.ms",label:"Snapshot Delay (ms)",type:"number",defaultValue:0,description:"Delay before starting snapshot"}]},{id:"filtering",title:"Filtering",description:"Filter which tables and columns to capture",parameters:[{key:"table.include.list",label:"Table Include List",type:"textarea",defaultValue:"",description:"Comma-separated list of tables to include (e.g., SCHEMA.TABLE, SCHEMA.*)"},{key:"table.exclude.list",label:"Table Exclude List",type:"textarea",defaultValue:"",description:"Comma-separated list of tables to exclude"},{key:"column.exclude.list",label:"Column Exclude List",type:"textarea",defaultValue:"",description:"Columns to exclude from events"},{key:"database.include.list",label:"Database Include List",type:"text",defaultValue:"",description:"Filter by database/schema names"},{key:"database.exclude.list",label:"Database Exclude List",type:"text",defaultValue:"",description:"Exclude specific databases/schemas"}]},{id:"data-transformation",title:"Data Transformation & Metadata",description:"Configure data type handling and metadata",parameters:[{key:"decimal.handling.mode",label:"Decimal Handling",type:"select",defaultValue:"precise",options:[{value:"precise",label:"Precise (BigDecimal)"},{value:"double",label:"Double"},{value:"string",label:"String"}],description:"How to represent decimal values"},{key:"binary.handling.mode",label:"Binary Handling",type:"select",defaultValue:"bytes",options:[{value:"bytes",label:"Bytes"},{value:"base64",label:"Base64"},{value:"hex",label:"Hex"}],description:"How to represent binary data"},{key:"time.precision.mode",label:"Time Precision Mode",type:"select",defaultValue:"adaptive",options:[{value:"adaptive",label:"Adaptive"},{value:"connect",label:"Connect"}],description:"Time/timestamp precision handling"},{key:"event.processing.failure.handling.mode",label:"Event Failure Handling",type:"select",defaultValue:"fail",options:[{value:"fail",label:"Fail"},{value:"warn",label:"Warn"},{value:"ignore",label:"Ignore"}],description:"How to handle event processing failures"},{key:"tombstones.on.delete",label:"Tombstones on Delete",type:"boolean",defaultValue:!0,description:"Emit tombstone messages for delete events"}]},{id:"performance",title:"Performance & Resource Usage",description:"Tune performance and resource consumption",parameters:[{key:"max.queue.size",label:"Max Queue Size",type:"number",defaultValue:8192,description:"Queue size for buffering events"},{key:"max.batch.size",label:"Max Batch Size",type:"number",defaultValue:2048,description:"Max records per batch sent to Kafka"},{key:"poll.interval.ms",label:"Poll Interval (ms)",type:"number",defaultValue:1e3,description:"Connector polling interval"},{key:"producer.override.compression.type",label:"Kafka Compression",type:"select",defaultValue:"snappy",options:[{value:"none",label:"None"},{value:"gzip",label:"GZIP"},{value:"snappy",label:"Snappy"},{value:"lz4",label:"LZ4"},{value:"zstd",label:"ZSTD"}],description:"Kafka producer compression type"},{key:"producer.override.max.request.size",label:"Max Request Size (bytes)",type:"number",defaultValue:1048576,description:"Maximum size of producer request"},{key:"offset.flush.interval.ms",label:"Offset Flush Interval (ms)",type:"number",defaultValue:6e4,description:"Frequency of offset commits"}]},{id:"security",title:"Security",description:"SSL and encryption settings",parameters:[{key:"database.ssl.mode",label:"SSL Mode",type:"select",defaultValue:"disabled",options:[{value:"disabled",label:"Disabled"},{value:"required",label:"Required"},{value:"verify-ca",label:"Verify CA"},{value:"verify-full",label:"Verify Full"}],description:"SSL connection mode"},{key:"database.ssl.keystore",label:"SSL Keystore Path",type:"text",defaultValue:"",description:"Path to SSL keystore file"},{key:"database.ssl.truststore",label:"SSL Truststore Path",type:"text",defaultValue:"",description:"Path to SSL truststore file"},{key:"database.password.encryption.key",label:"Password Encryption Key",type:"text",defaultValue:"",description:"Key for encrypting stored passwords"}]},{id:"heartbeat",title:"Heartbeat / Monitoring",description:"Configure heartbeat and monitoring",parameters:[{key:"heartbeat.interval.ms",label:"Heartbeat Interval (ms)",type:"number",defaultValue:0,description:"Frequency of heartbeat events (0 = disabled)"},{key:"heartbeat.action.query",label:"Heartbeat Action Query",type:"textarea",defaultValue:"",description:"Custom SQL query for heartbeat monitoring"},{key:"signal.data.collection",label:"Signal Data Collection",type:"text",defaultValue:"",description:"Table for outbox-style signaling"},{key:"provide.transaction.metadata",label:"Provide Transaction Metadata",type:"boolean",defaultValue:!1,description:"Include transaction metadata in events"},{key:"include.schema.changes",label:"Include Schema Changes",type:"boolean",defaultValue:!1,description:"Include DDL changes in events"}]},{id:"key-value-converters",title:"Key/Value Converters",description:"Configure Kafka message key and value serialization",parameters:[{key:"key.converter",label:"Key Converter",type:"select",defaultValue:"org.apache.kafka.connect.json.JsonConverter",options:[{value:"org.apache.kafka.connect.json.JsonConverter",label:"JSON Converter"},{value:"io.confluent.connect.avro.AvroConverter",label:"Avro Converter"},{value:"org.apache.kafka.connect.storage.StringConverter",label:"String Converter"}],description:"Converter class for message keys"},{key:"key.converter.schemas.enable",label:"Key Converter Schemas Enable",type:"boolean",defaultValue:!0,description:"Include schema in key (for JSON converter)"},{key:"value.converter",label:"Value Converter",type:"select",defaultValue:"org.apache.kafka.connect.json.JsonConverter",options:[{value:"org.apache.kafka.connect.json.JsonConverter",label:"JSON Converter"},{value:"io.confluent.connect.avro.AvroConverter",label:"Avro Converter"},{value:"org.apache.kafka.connect.storage.StringConverter",label:"String Converter"}],description:"Converter class for message values"},{key:"value.converter.schemas.enable",label:"Value Converter Schemas Enable",type:"boolean",defaultValue:!0,description:"Include schema in value (for JSON converter)"},{key:"message.key.columns",label:"Message Key Columns",type:"textarea",defaultValue:"",description:"Override message key columns (format: SCHEMA.TABLE:COL1,COL2;...)"}]},{id:"kafka-schema-history",title:"Kafka Schema History",description:"Configure Kafka topic for schema history storage",parameters:[{key:"schema.history.internal",label:"Schema History Internal",type:"select",defaultValue:"io.debezium.storage.kafka.history.KafkaSchemaHistory",options:[{value:"io.debezium.storage.kafka.history.KafkaSchemaHistory",label:"Kafka Schema History"},{value:"io.debezium.storage.file.history.FileSchemaHistory",label:"File Schema History"}],description:"Schema history storage implementation"},{key:"schema.history.internal.kafka.bootstrap.servers",label:"Kafka Bootstrap Servers",type:"text",defaultValue:"localhost:9092",description:"Kafka brokers for schema history (comma-separated)"},{key:"schema.history.internal.kafka.topic",label:"Schema History Topic",type:"text",defaultValue:"schema-changes.connector",description:"Kafka topic name for storing schema history"},{key:"schema.history.internal.skip.unparseable.ddl",label:"Skip Unparseable DDL",type:"boolean",defaultValue:!0,description:"Skip DDL statements that cannot be parsed"},{key:"schema.history.internal.store.only.captured.tables.ddl",label:"Store Only Captured Tables DDL",type:"boolean",defaultValue:!0,description:"Store DDL only for captured tables"}]},{id:"kafka-sasl-security",title:"Kafka SASL Security",description:"Configure SASL authentication for Kafka (optional)",parameters:[{key:"schema.history.internal.producer.security.protocol",label:"Producer Security Protocol",type:"select",defaultValue:"PLAINTEXT",options:[{value:"PLAINTEXT",label:"PLAINTEXT"},{value:"SASL_PLAINTEXT",label:"SASL_PLAINTEXT"},{value:"SASL_SSL",label:"SASL_SSL"},{value:"SSL",label:"SSL"}],description:"Security protocol for Kafka producer"},{key:"schema.history.internal.producer.sasl.mechanism",label:"Producer SASL Mechanism",type:"select",defaultValue:"PLAIN",options:[{value:"PLAIN",label:"PLAIN"},{value:"SCRAM-SHA-256",label:"SCRAM-SHA-256"},{value:"SCRAM-SHA-512",label:"SCRAM-SHA-512"}],description:"SASL mechanism for producer"},{key:"schema.history.internal.producer.sasl.jaas.config",label:"Producer SASL JAAS Config",type:"textarea",defaultValue:"",description:'JAAS config string for producer (e.g., org.apache.kafka.common.security.plain.PlainLoginModule required username="user" password="pass";)'},{key:"schema.history.internal.consumer.security.protocol",label:"Consumer Security Protocol",type:"select",defaultValue:"PLAINTEXT",options:[{value:"PLAINTEXT",label:"PLAINTEXT"},{value:"SASL_PLAINTEXT",label:"SASL_PLAINTEXT"},{value:"SASL_SSL",label:"SASL_SSL"},{value:"SSL",label:"SSL"}],description:"Security protocol for Kafka consumer"},{key:"schema.history.internal.consumer.sasl.mechanism",label:"Consumer SASL Mechanism",type:"select",defaultValue:"PLAIN",options:[{value:"PLAIN",label:"PLAIN"},{value:"SCRAM-SHA-256",label:"SCRAM-SHA-256"},{value:"SCRAM-SHA-512",label:"SCRAM-SHA-512"}],description:"SASL mechanism for consumer"},{key:"schema.history.internal.consumer.sasl.jaas.config",label:"Consumer SASL JAAS Config",type:"textarea",defaultValue:"",description:"JAAS config string for consumer"}]}],h=v=>{const y=new Set(s);y.has(v)?y.delete(v):y.add(v),a(y)},g=(v,y)=>{const b={...n,[v]:y};i(b),t(b)},f=v=>{d(v),o(!0)},x=()=>{if(!c)return;const y=(n["table.include.list"]||"").split(",").map(b=>b.trim()).filter(Boolean).filter(b=>b!==c);g("table.include.list",y.join(",")),o(!1),d(null)},w=v=>{var b;const y=n[v.key]??v.defaultValue;switch(v.type){case"boolean":return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:y,onChange:m=>g(v.key,m.target.checked),className:"mt-1 rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:v.label}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]})]});case"select":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.label}),r.jsx("select",{value:y,onChange:m=>g(v.key,m.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:(b=v.options)==null?void 0:b.map(m=>r.jsx("option",{value:m.value,children:m.label},m.value))}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]});case"textarea":if(v.key==="table.include.list"){const m=(y||"").split(",").map(k=>k.trim()).filter(Boolean);return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.label}),m.length>0?r.jsx("div",{className:"space-y-2 mb-2",children:m.map((k,N)=>r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:k}),r.jsx("button",{onClick:()=>f(k),className:"p-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove table",children:r.jsx(Ma,{className:"w-4 h-4"})})]},N))}):null,r.jsx("textarea",{value:y,onChange:k=>g(v.key,k.target.value),rows:3,placeholder:"SCHEMA.TABLE1,SCHEMA.TABLE2,...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono text-sm"}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]})}return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.label}),r.jsx("textarea",{value:y,onChange:m=>g(v.key,m.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono text-sm"}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]});case"number":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.label}),r.jsx("input",{type:"number",value:y,onChange:m=>g(v.key,Number(m.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]});case"password":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.label}),r.jsx("input",{type:"password",value:y,onChange:m=>g(v.key,m.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]});default:return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v.label}),r.jsx("input",{type:"text",value:y,onChange:m=>g(v.key,m.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),v.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v.description})]})}};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-4",children:u.map(v=>{const y=s.has(v.id);return r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>h(v.id),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-between",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:v.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:v.description})]}),y?r.jsx(rs,{className:"w-5 h-5 text-gray-500"}):r.jsx(cr,{className:"w-5 h-5 text-gray-500"})]}),y&&r.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 space-y-4",children:v.parameters.map(b=>r.jsx("div",{children:w(b)},b.key))})]},v.id)})}),l&&c&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>o(!1)}),r.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:r.jsx(jr,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Remove Table from Pipeline"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["You are about to remove ",r.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-gray-100",children:c})," from the source configuration."]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Impact on Sink/Destination"]}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-disc list-inside",children:[r.jsx("li",{children:"Data from this table will no longer be replicated"}),r.jsx("li",{children:"Existing data in the destination will remain unchanged"}),r.jsx("li",{children:"The destination table will not be dropped automatically"}),r.jsx("li",{children:"You may need to manually clean up the destination table if required"})]})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Are you sure you want to proceed?"})]})]}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"}),r.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Remove Table"})]})]})})]})]})}function m1({config:e,onChange:t}){const[s,a]=p.useState(!1),n=(o,c)=>{t({...e,[o]:c})},i=(o,c=!1)=>{if(typeof o=="boolean")return o;if(typeof o=="string"){const d=o.toLowerCase();if(d==="true")return!0;if(d==="false")return!1}return c},l=(o,c)=>{if(typeof o=="number"&&!Number.isNaN(o))return o;if(typeof o=="string"){const d=parseInt(o,10);if(!Number.isNaN(d))return d}return c};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hostname"}),r.jsx("input",{type:"text",value:e["database.hostname"]||"",onChange:o=>n("database.hostname",o.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"localhost"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port"}),r.jsx("input",{type:"number",value:l(e["database.port"],5432),onChange:o=>n("database.port",parseInt(o.target.value,10)||5432),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Database Name"}),r.jsx("input",{type:"text",value:e["database.dbname"]||"",onChange:o=>n("database.dbname",o.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"postgres"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),r.jsx("input",{type:"text",value:e["database.user"]||"",onChange:o=>n("database.user",o.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"postgres"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:s?"text":"password",value:e["database.password"]||"",onChange:o=>n("database.password",o.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"CDC Settings"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plugin Name"}),r.jsxs("select",{value:e["plugin.name"]||"pgoutput",onChange:o=>n("plugin.name",o.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"pgoutput",children:"pgoutput"}),r.jsx("option",{value:"wal2json",children:"wal2json"}),r.jsx("option",{value:"decoderbufs",children:"decoderbufs"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Logical decoding plugin for PostgreSQL"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Publication Name"}),r.jsx("input",{type:"text",value:e["publication.name"]||"dbz_publication",onChange:o=>n("publication.name",o.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"dbz_publication"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"PostgreSQL publication for CDC"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slot Name"}),r.jsx("input",{type:"text",value:e["slot.name"]||"debezium",onChange:o=>n("slot.name",o.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"debezium"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Replication slot name"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:i(e["slot.drop.on.stop"]),onChange:o=>n("slot.drop.on.stop",o.target.checked),className:"rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Drop slot on connector stop"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Automatically drop replication slot when connector stops"})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Advanced Settings"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Queue Size"}),r.jsx("input",{type:"number",value:l(e["max.queue.size"],8192),onChange:o=>n("max.queue.size",parseInt(o.target.value,10)||8192),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Batch Size"}),r.jsx("input",{type:"number",value:l(e["max.batch.size"],2048),onChange:o=>n("max.batch.size",parseInt(o.target.value,10)||2048),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]})]})]})}function f1({config:e,onChange:t}){const[s,a]=p.useState(!1),n=(i,l)=>{t({...e,[i]:l})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hostname"}),r.jsx("input",{type:"text",value:e["database.hostname"]||"",onChange:i=>n("database.hostname",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"localhost"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port"}),r.jsx("input",{type:"number",value:e["database.port"]||3306,onChange:i=>n("database.port",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),r.jsx("input",{type:"text",value:e["database.user"]||"",onChange:i=>n("database.user",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"root"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:s?"text":"password",value:e["database.password"]||"",onChange:i=>n("database.password",i.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Binlog Settings"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Server ID"}),r.jsx("input",{type:"number",value:e["database.server.id"]||184054,onChange:i=>n("database.server.id",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"184054"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Unique identifier for this database server"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Snapshot Mode"}),r.jsxs("select",{value:e["snapshot.mode"]||"initial",onChange:i=>n("snapshot.mode",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"initial",children:"Initial"}),r.jsx("option",{value:"when_needed",children:"When Needed"}),r.jsx("option",{value:"never",children:"Never"}),r.jsx("option",{value:"schema_only",children:"Schema Only"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Controls how the connector snapshots existing data"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Binlog Offset Storage"}),r.jsx("input",{type:"text",value:e["offset.storage"]||"kafka",onChange:i=>n("offset.storage",i.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"kafka"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:e["include.schema.changes"]||!0,onChange:i=>n("include.schema.changes",i.target.checked),className:"rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include schema changes"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Capture DDL changes in addition to DML"})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Advanced Settings"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Queue Size"}),r.jsx("input",{type:"number",value:e["max.queue.size"]||8192,onChange:i=>n("max.queue.size",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Batch Size"}),r.jsx("input",{type:"number",value:e["max.batch.size"]||2048,onChange:i=>n("max.batch.size",parseInt(i.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:e["tombstones.on.delete"]||!0,onChange:i=>n("tombstones.on.delete",i.target.checked),className:"rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Send tombstone events on delete"})]})})]})]})}const Dg="jdbc:postgresql://",p1=e=>{if(!e||typeof e!="string"||!e.startsWith(Dg))return null;const t=e.slice(Dg.length),[s="",a=""]=t.split("/",2),[n="",i=""]=a.split("?",2),[l,o]=s.split(":",2),c=o?Number(o):void 0,d=new URLSearchParams(i),u=d.get("currentSchema")||d.get("current_schema")||d.get("search_path")||void 0;return{host:(l==null?void 0:l.trim())||void 0,port:Number.isNaN(c)?void 0:c,database:n?decodeURIComponent(n):void 0,schema:u||void 0}};function x1({config:e,onChange:t}){const[s,a]=p.useState(new Set(["connection"])),[n,i]=p.useState(e),l=n["connection.url"];p.useEffect(()=>{const h=p1(l);h&&i(g=>{const f={};h.host&&g.host!==h.host&&(f.host=h.host);const x=typeof g.port=="string"?Number(g.port):g.port;if(h.port&&x!==h.port&&(f.port=h.port),h.database&&g.database!==h.database&&(f.database=h.database),h.schema&&g.schema!==h.schema&&(f.schema=h.schema),Object.keys(f).length===0)return g;const w={...g,...f};return t(w),w})},[l,t]);const o=[{id:"connection",title:"Connection Settings",description:"Database connection configuration",parameters:[{key:"connection.url",label:"Connection URL",type:"text",defaultValue:"jdbc:postgresql://127.0.0.1:5432/LOCALDN",description:"JDBC connection URL"},{key:"host",label:"Host",type:"text",defaultValue:"127.0.0.1",description:"Hostname or IP of the PostgreSQL sink"},{key:"port",label:"Port",type:"number",defaultValue:5432,description:"Database port (default 5432)"},{key:"database",label:"Database",type:"text",defaultValue:"LOCALDN",description:"Target database name"},{key:"schema",label:"Schema",type:"text",defaultValue:"public",description:"Default schema for table creation"},{key:"connection.username",label:"Username",type:"text",defaultValue:"debezium",description:"Database username"},{key:"connection.password",label:"Password",type:"password",defaultValue:"debezium",description:"Database password"},{key:"connection.pool.size",label:"Connection Pool Size",type:"number",defaultValue:5,description:"Maximum number of database connections in the pool"}]},{id:"insert-mode",title:"Insert Mode & Behavior",description:"Configure how data is inserted into destination",parameters:[{key:"insert.mode",label:"Insert Mode",type:"select",defaultValue:"upsert",options:[{value:"insert",label:"Insert"},{value:"upsert",label:"Upsert"},{value:"update",label:"Update"}],description:"How to handle incoming records"},{key:"delete.enabled",label:"Handle Deletes",type:"boolean",defaultValue:!0,description:"Process delete events from source"},{key:"pk.mode",label:"Primary Key Mode",type:"select",defaultValue:"record_key",options:[{value:"none",label:"None"},{value:"record_key",label:"Record Key"},{value:"record_value",label:"Record Value"},{value:"kafka",label:"Kafka"}],description:"How to determine primary keys for upsert/delete"},{key:"pk.fields",label:"Primary Key Fields",type:"text",defaultValue:"id",description:"Comma-separated list of PK fields (required for upsert/delete)"},{key:"delete.handling.mode",label:"Delete Handling Mode",type:"select",defaultValue:"rewrite",options:[{value:"rewrite",label:"Rewrite (physical delete)"},{value:"none",label:"None (ignore deletes)"}],description:"How to handle delete events (tombstones)"}]},{id:"table-naming",title:"Table & Column Mapping",description:"Configure table and column name handling",parameters:[{key:"table.name.format",label:"Table Name Format",type:"text",defaultValue:"${topic}",description:"Format string for table names (e.g., public.${topic})"},{key:"sanitize.table.names",label:"Sanitize Table Names",type:"boolean",defaultValue:!0,description:"Convert to lowercase and replace special chars"},{key:"sanitize.field.names",label:"Sanitize Field Names",type:"boolean",defaultValue:!0,description:"Convert column names to lowercase"},{key:"quote.sql.identifiers",label:"Quote SQL Identifiers",type:"select",defaultValue:"never",options:[{value:"always",label:"Always"},{value:"never",label:"Never"}],description:"Quote table/column names for case-sensitive objects"},{key:"fields.whitelist",label:"Fields Whitelist",type:"text",defaultValue:"",description:"Comma-separated list of columns to include (empty = all)"},{key:"fields.blacklist",label:"Fields Blacklist",type:"text",defaultValue:"",description:"Comma-separated list of columns to exclude"}]},{id:"performance",title:"Batch & Performance",description:"Tune destination connector performance",parameters:[{key:"batch.size",label:"Batch Size",type:"number",defaultValue:500,description:"Records per batch commit (300-1000 for Postgres)"},{key:"insert.batch.max.rows",label:"Insert Batch Max Rows",type:"number",defaultValue:1e3,description:"Max rows in single INSERT statement"},{key:"max.retries",label:"Max Retries",type:"number",defaultValue:10,description:"Retry count for deadlock/connection errors"},{key:"retry.backoff.ms",label:"Retry Backoff (ms)",type:"number",defaultValue:3e3,description:"Delay between retry attempts"},{key:"tasks.max",label:"Max Tasks",type:"number",defaultValue:1,description:"Number of parallel sink tasks"}]},{id:"schema-evolution",title:"Schema Evolution & Data Types",description:"Auto-create tables and handle data type conversions",parameters:[{key:"auto.create",label:"Auto Create Tables",type:"boolean",defaultValue:!0,description:"Automatically create tables if they don't exist"},{key:"auto.evolve",label:"Auto Evolve Schema",type:"boolean",defaultValue:!0,description:"Automatically add new columns"},{key:"validate.non.null",label:"Validate Non-Null",type:"boolean",defaultValue:!1,description:"Check table existence when auto.create=false"},{key:"decimal.handling.mode",label:"Decimal Handling",type:"select",defaultValue:"precise",options:[{value:"precise",label:"Precise (BigDecimal)"},{value:"string",label:"String"},{value:"double",label:"Double"}],description:"How to handle DECIMAL/NUMERIC columns in Postgres"},{key:"numeric.mapping",label:"Numeric Mapping",type:"select",defaultValue:"best_fit",options:[{value:"best_fit",label:"Best Fit"},{value:"best_fit_eager_double",label:"Best Fit Eager Double"},{value:"precision_only",label:"Precision Only"}],description:"JDBC to Postgres numeric type mapping"},{key:"time.precision.mode",label:"Time Precision Mode",type:"select",defaultValue:"adaptive",options:[{value:"connect",label:"Connect"},{value:"adaptive",label:"Adaptive (microsecond support)"}],description:"Timestamp precision handling"}]},{id:"retry-dlq",title:"Error Handling & DLQ",description:"Configure retry logic and dead letter queue",parameters:[{key:"errors.tolerance",label:"Error Tolerance",type:"select",defaultValue:"none",options:[{value:"none",label:"None (fail immediately)"},{value:"all",label:"All (send to DLQ)"}],description:"How to handle errors"},{key:"errors.deadletterqueue.topic.name",label:"DLQ Topic Name",type:"text",defaultValue:"dlq-sink-errors",description:"Dead letter queue topic name"},{key:"errors.deadletterqueue.context.headers.enable",label:"DLQ Context Headers",type:"boolean",defaultValue:!0,description:"Include error context in DLQ headers"},{key:"errors.log.enable",label:"Log Errors",type:"boolean",defaultValue:!0,description:"Log error messages to console"},{key:"errors.retry.timeout",label:"Retry Timeout (ms)",type:"number",defaultValue:0,description:"Max time to retry failed operations (0 = disabled)"},{key:"errors.retry.delay.max.ms",label:"Max Retry Delay (ms)",type:"number",defaultValue:6e4,description:"Maximum delay between retries"}]}],c=h=>{const g=new Set(s);g.has(h)?g.delete(h):g.add(h),a(g)},d=(h,g)=>{const f={...n,[h]:g};i(f),t(f)},u=h=>{var f;const g=n[h.key]??h.defaultValue;switch(h.type){case"boolean":return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:x=>d(h.key,x.target.checked),className:"mt-1 rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h.label}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]})]});case"select":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),r.jsx("select",{value:g,onChange:x=>d(h.key,x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:(f=h.options)==null?void 0:f.map(x=>r.jsx("option",{value:x.value,children:x.label},x.value))}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});case"textarea":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),r.jsx("textarea",{value:g,onChange:x=>d(h.key,x.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono text-sm"}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});case"number":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),r.jsx("input",{type:"number",value:g,onChange:x=>d(h.key,Number(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});case"password":return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),r.jsx("input",{type:"password",value:g,onChange:x=>d(h.key,x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]});default:return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:h.label}),r.jsx("input",{type:"text",value:g,onChange:x=>d(h.key,x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.description})]})}};return r.jsx("div",{className:"space-y-4",children:o.map(h=>{const g=s.has(h.id);return r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>c(h.id),className:"w-full px-6 py-4 bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-between",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:h.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:h.description})]}),g?r.jsx(rs,{className:"w-5 h-5 text-gray-500"}):r.jsx(cr,{className:"w-5 h-5 text-gray-500"})]}),g&&r.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 space-y-4",children:h.parameters.map(f=>r.jsx("div",{children:u(f)},f.key))})]},h.id)})})}function y1({pipeline:e,onUpdate:t}){var C,M,D,B,W,ie,te,pe;const{showToast:s}=St(),{user:a,logActivity:n}=qt(),[i,l]=p.useState("source"),[o,c]=p.useState(!1),[d,u]=p.useState("{}"),h=K=>{var ae,de;return(K==null?void 0:K.resolved_config)||((ae=K==null?void 0:K.registry_meta)==null?void 0:ae.snapshot_config)||((de=K==null?void 0:K.config)==null?void 0:de.snapshot_config)||(K==null?void 0:K.config)||{}},g=K=>Object.keys(K).reduce((ae,de)=>(["checksum","connector_class","snapshot_config","registry_version","registry_connector","resolved_config"].includes(de)||(ae[de]=K[de]),ae),{}),[f,x]=p.useState(h(e.source_connector)),[w,v]=p.useState(h(e.sink_connector)),[y,b]=p.useState(h(e.source_connector)),[m,k]=p.useState(h(e.sink_connector)),[N,S]=p.useState(!1),[_,P]=p.useState([]),[A,R]=p.useState(!1),E=p.useMemo(()=>v1(_,f),[_,f]);p.useEffect(()=>{const K=h(e.source_connector);x(K),b(K)},[e.source_connector]),p.useEffect(()=>{const K=h(e.sink_connector);v(K),k(K)},[e.sink_connector]),p.useEffect(()=>{(async()=>{if(!e.id)return;R(!0);const{data:ae,error:de}=await H.from("pipeline_objects").select("id, schema_name, table_name, included, stats").eq("pipeline_id",e.id).order("schema_name",{ascending:!0}).order("table_name",{ascending:!0});P(!de&&ae?ae:[]),R(!1)})()},[e.id]);const Y=!Og(f,y),L=!Og(w,m),U=Y||L,O=[{id:"source",label:"Source Settings"},{id:"destination",label:"Destination Settings"},{id:"transformations",label:"Transformations (SMT)"},{id:"errors",label:"Error Management"},{id:"operations",label:"Operations"}],q=(K,ae)=>{const de=[],Pe=new Set([...Object.keys(K),...Object.keys(ae)]);for(const Ee of Pe){const Ue=K[Ee],I=ae[Ee];JSON.stringify(Ue)!==JSON.stringify(I)&&de.push({field:Ee,old_value:Ue,new_value:I})}return de},$=async()=>{var K,ae;S(!0);try{const de=[],Pe={pipeline_name:e.name,connectors:[]};if((K=e.source_connector)!=null&&K.id&&Y){const{error:Ee}=await H.from("pipeline_connectors").update({pending_config:g(f),has_pending_changes:!0,pending_config_updated_by:a==null?void 0:a.id,pending_config_updated_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e.source_connector.id);if(Ee)throw Ee;de.push("source");const Ue=q(y,f);Pe.connectors.push({type:"source",name:e.source_connector.name,connector_class:e.source_connector.connector_class,changes:Ue})}if((ae=e.sink_connector)!=null&&ae.id&&L){const{error:Ee}=await H.from("pipeline_connectors").update({pending_config:g(w),has_pending_changes:!0,pending_config_updated_by:a==null?void 0:a.id,pending_config_updated_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e.sink_connector.id);if(Ee)throw Ee;de.push("destination");const Ue=q(m,w);Pe.connectors.push({type:"sink",name:e.sink_connector.name,connector_class:e.sink_connector.connector_class,changes:Ue})}if(de.length>0){const Ee={};Pe.connectors.forEach(Ue=>{Ue.changes.forEach(I=>{const ue=`${Ue.type}.${I.field}`;Ee[ue]={old:I.old_value,new:I.new_value}})}),await n("pipeline.update",`Updated ${de.join(" and ")} settings for pipeline: ${e.name}`,"pipeline",e.id,{...Pe,changes:Ee})}b(f),k(w),s("success","Settings saved successfully!","Changes are pending deployment"),t&&t()}catch(de){console.error("Error saving settings:",de),s("error","Failed to save settings",de.message)}finally{S(!1)}};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex gap-6",children:[r.jsx("div",{className:"w-64 flex-shrink-0",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-2",children:O.map(K=>r.jsx("button",{onClick:()=>l(K.id),className:`w-full text-left px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===K.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:K.label},K.id))})}),r.jsxs("div",{className:"flex-1 space-y-6",children:[i==="source"&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(pt,{connectorClass:(C=e.source_connector)==null?void 0:C.connector_class,sourceType:e.source_type,className:"w-14 h-14 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Source Settings"}),((M=e.source_connector)==null?void 0:M.has_pending_changes)&&r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded",children:"SRC Updated"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((D=e.source_connector)==null?void 0:D.name)||e.source_type||"Source Connector"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Connector Class"}),r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:((B=e.source_connector)==null?void 0:B.connector_class)||"Not configured"})]})]}),b1(e,f,x),r.jsxs("div",{className:"mt-10 border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tables in Pipeline"}),A&&r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"This view is for information only. Table selection is configured during pipeline creation."}),E.length>0?r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:E.map(K=>{var ae;return r.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded-lg text-sm",children:r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx(pt,{connectorClass:(ae=e.source_connector)==null?void 0:ae.connector_class,sourceType:e.source_type,className:"w-8 h-8 flex-shrink-0"}),r.jsxs("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:[K.schema_name,".",K.table_name]}),!K.included&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:"Excluded"})]})},K.id)})}):r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A?"Loading tables":"No tables have been selected for this pipeline yet."})]})]}),i==="destination"&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx(pt,{connectorClass:(W=e.sink_connector)==null?void 0:W.connector_class,sourceType:e.destination_type,className:"w-14 h-14 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Destination Settings"}),((ie=e.sink_connector)==null?void 0:ie.has_pending_changes)&&r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded",children:"DST Updated"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((te=e.sink_connector)==null?void 0:te.name)||e.destination_type||"Destination Connector"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Connector Class"}),r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:((pe=e.sink_connector)==null?void 0:pe.connector_class)||"Not configured"})]})]}),r.jsx(x1,{config:w,onChange:v})]}),i==="transformations"&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Single Message Transformations"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ExtractNewRecordState"}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enabled"})]})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Unwraps Debezium event structure to extract only the new record state"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"drop.tombstones"}),r.jsx("input",{type:"text",defaultValue:"true",className:"w-full px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono"})]})]}),r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"RegexRouter"}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enabled"})]})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Route records to different topics based on regex pattern"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"regex"}),r.jsx("input",{type:"text",defaultValue:"([^.]+)\\\\.([^.]+)\\\\.([^.]+)",className:"w-full px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"replacement"}),r.jsx("input",{type:"text",defaultValue:"$2_$3",className:"w-full px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-mono"})]})]})]}),r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Test SMT with Sample Event"})]})]}),i==="errors"&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Error Management"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Error Tolerance"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"tolerance",className:"text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"None (fail immediately)"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"tolerance",defaultChecked:!0,className:"text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"All (send to DLQ)"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dead Letter Queue Topic"}),r.jsx("input",{type:"text",defaultValue:"dlq-pipeline-errors",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include error context in headers"})]})}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Log error messages"})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-restart after N failures"}),r.jsx("input",{type:"number",defaultValue:"3",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"0 = disabled, connector will stop on error"})]})]})]}),i==="operations"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Control Operations"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("button",{className:"px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium",children:"Pause All Connectors"}),r.jsx("button",{className:"px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Resume All Connectors"}),r.jsx("button",{className:"px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:"Restart All Tasks"}),r.jsx("button",{className:"px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Restart All Connectors"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Configuration Management"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{onClick:()=>{const K={source:{connector_class:"io.debezium.connector.oracle.OracleConnector"},sink:{connector_class:"io.debezium.connector.jdbc.JdbcSinkConnector"}},ae=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),de=URL.createObjectURL(ae),Pe=document.createElement("a");Pe.href=de,Pe.download="pipeline-config.json",Pe.click(),URL.revokeObjectURL(de)},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium flex items-center justify-center gap-2",children:[r.jsx(Ko,{className:"w-5 h-5"}),"Export Configuration (JSON)"]}),r.jsxs("button",{onClick:()=>c(!0),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium flex items-center justify-center gap-2",children:[r.jsx(tk,{className:"w-5 h-5"}),"Import Configuration"]})]})]})]}),o&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>c(!1)}),r.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50 max-h-[80vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Import Configuration"}),r.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(He,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload JSON File"}),r.jsx("input",{type:"file",accept:".json",onChange:K=>{var de;const ae=(de=K.target.files)==null?void 0:de[0];if(ae){const Pe=new FileReader;Pe.onload=Ee=>{var I;const Ue=(I=Ee.target)==null?void 0:I.result;u(Ue)},Pe.readAsText(ae)}},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Or paste your JSON configuration below. You can edit it directly before importing."}),r.jsx("textarea",{value:d,onChange:K=>u(K.target.value),className:"w-full h-96 px-4 py-3 font-mono text-sm bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100",placeholder:'{\\n  "connector.class": "io.debezium.connector.oracle.OracleConnector",\\n  "tasks.max": "1",\\n  ...\\n}'})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[r.jsx("button",{onClick:()=>{try{JSON.parse(d),alert("Configuration imported successfully!"),c(!1)}catch(K){alert("Invalid JSON: "+K.message)}},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Import & Apply"}),r.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{onClick:$,disabled:N||!U,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Xv,{className:"w-4 h-4"}),N?"Saving...":"Save All Changes"]}),r.jsx("button",{disabled:N,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})})}function b1(e,t,s){const a=(e.source_type||"").toLowerCase();return a==="oracle"?r.jsx(g1,{config:t,onChange:s}):a==="postgres"||a==="postgresql"?r.jsx(m1,{config:t,onChange:s}):a==="mysql"?r.jsx(f1,{config:t,onChange:s}):r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:["Settings for ",e.source_type||"this source"," are not yet configured"]})}function v1(e,t){if(e.length>0)return e.map(a=>({...a,deletable:!0}));const s=t["table.include.list"]||"";return s?s.split(",").map(a=>a.trim()).filter(a=>a.length>0).map((a,n)=>{const[i,l]=a.includes(".")?a.split("."):["public",a];return{id:`config-${n}`,schema_name:i,table_name:l,included:!0,deletable:!1}}):[]}function Og(e,t){return JSON.stringify(e??{})===JSON.stringify(t??{})}const $g=[{key:"source_connected",label:"Connected with Source",description:"Established connection to source database"},{key:"ingesting_started",label:"Started Ingesting Events",description:"Reading change events from source"},{key:"staging_events",label:"Staging Events for Loading",description:"Preparing events for destination"},{key:"loading_started",label:"Started Loading Events",description:"Writing events to destination"}];function k1(e,t){if(t)return r.jsx(Le,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"});if(!e)return r.jsx(nr,{className:"w-5 h-5 text-gray-400"});switch(e.event_status){case"completed":return r.jsx(kr,{className:"w-5 h-5 text-green-600 dark:text-green-400"});case"failed":return r.jsx(Ws,{className:"w-5 h-5 text-red-600 dark:text-red-400"});case"in_progress":return r.jsx(Le,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"});default:return r.jsx(nr,{className:"w-5 h-5 text-gray-400"})}}function w1(e){if(!e)return"bg-gray-100 dark:bg-gray-700";switch(e.event_status){case"completed":return"bg-green-100 dark:bg-green-900/30";case"failed":return"bg-red-100 dark:bg-red-900/30";case"in_progress":return"bg-blue-100 dark:bg-blue-900/30";default:return"bg-gray-100 dark:bg-gray-700"}}const j1=p.memo(function({progress:t,isLoading:s}){return s?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(Le,{className:"w-8 h-8 text-blue-600 animate-spin"}),r.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading progress..."})]}):r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"flex items-center gap-4",children:$g.map((a,n)=>{const i=t[a.key],l=n===$g.length-1;return r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w1(i)}`,title:a.description,children:k1(i,s)}),r.jsxs("div",{children:[r.jsx("span",{className:`text-sm font-semibold ${(i==null?void 0:i.event_status)==="completed"?"text-gray-900 dark:text-gray-100":(i==null?void 0:i.event_status)==="failed"?"text-red-600 dark:text-red-400":(i==null?void 0:i.event_status)==="in_progress"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:a.label}),(i==null?void 0:i.metadata)&&r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[i.metadata.running_tasks&&i.metadata.total_tasks&&r.jsxs("span",{children:[i.metadata.running_tasks,"/",i.metadata.total_tasks," tasks running"]}),i.metadata.connector_state&&r.jsxs("span",{className:"ml-2",children:["(",i.metadata.connector_state,")"]})]})]})]}),!l&&r.jsx(cr,{className:"w-5 h-5 text-gray-300"}),a.key==="ingesting_started"&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:"/simurg.svg",alt:"Simurg",className:"w-12 h-12 mx-4 hover:animate-bounce transition-transform cursor-pointer",style:{animation:"none"},onMouseEnter:o=>{o.currentTarget.style.animation="flap 0.3s ease-in-out 3"},onMouseLeave:o=>{o.currentTarget.style.animation="none"}}),r.jsx(cr,{className:"w-5 h-5 text-gray-300"}),r.jsx("style",{children:`
                    @keyframes flap {
                      0%, 100% { transform: scaleY(1) scaleX(1); }
                      25% { transform: scaleY(0.9) scaleX(1.1); }
                      50% { transform: scaleY(1.1) scaleX(0.95); }
                      75% { transform: scaleY(0.95) scaleX(1.05); }
                    }
                  `})]})]},a.key)})})})});function N1({pipelineId:e,enabled:t=!0,refetchInterval:s=6e4}){return $a({queryKey:["pipeline-activity",e],queryFn:async()=>{if(!e)return null;try{return await e1(e,"24h")}catch(a){return console.error("Failed to load pipeline activity:",a),null}},enabled:t&&!!e,refetchInterval:s,staleTime:5e3,refetchOnWindowFocus:!1,placeholderData:a=>a,gcTime:5*60*1e3})}function hi(e){return e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:e.toString()}function gi(e){return e.toFixed(2)}function _1(e,t){if(e===t)return!0;if(e===null||t===null||e===void 0||t===void 0)return!1;try{return JSON.stringify(e)===JSON.stringify(t)}catch(s){return console.warn("isEqual: JSON.stringify failed, using reference equality",s),e===t}}const mi=p.memo(({icon:e,label:t,totalRef:s,rateRef:a,initialTotal:n,initialRate:i})=>r.jsxs("div",{className:"p-3 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",style:{minHeight:"110px",contain:"layout"},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(e,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:t})]}),r.jsx("div",{ref:s,className:"text-3xl font-bold text-blue-600 dark:text-blue-400 tabular-nums min-w-[80px]",children:hi(n)}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1 tabular-nums",children:[r.jsx(Js,{className:"w-3 h-3"}),r.jsx("span",{ref:a,children:gi(i)})," epm"]})]}));mi.displayName="ActivityCard";const S1=p.memo(function({pipelineId:t,pipelineStatus:s,refreshInterval:a,onRefreshIntervalChange:n,onManualRefresh:i}){const{data:l,isLoading:o,isFetching:c,refetch:d}=N1({pipelineId:t,enabled:s==="running"||s==="paused",refetchInterval:a}),u=p.useRef(null),h=p.useRef(null),g=p.useRef(null),f=p.useRef(null),x=p.useRef(null),w=p.useRef(null),v=p.useRef(null),y=p.useRef(null),b=p.useRef(null);return p.useEffect(()=>{if(!l)return;const m=u.current;(!m||!_1(m,l))&&(h.current&&(h.current.textContent=hi(l.ingestion.total)),g.current&&(g.current.textContent=gi(l.ingestion.rate)),f.current&&(f.current.textContent=hi(l.transformations.total)),x.current&&(x.current.textContent=gi(l.transformations.rate)),w.current&&(w.current.textContent=hi(l.schemaMapper.total)),v.current&&(v.current.textContent=gi(l.schemaMapper.rate)),y.current&&(y.current.textContent=hi(l.load.total)),b.current&&(b.current.textContent=gi(l.load.rate)),u.current=l)},[l]),o?r.jsxs("div",{className:"flex items-center justify-center py-12",style:{minHeight:"200px"},children:[r.jsx(Le,{className:"w-8 h-8 text-blue-600 animate-spin"}),r.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Loading activity..."})]}):l?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pipeline Activity"}),r.jsx("button",{onClick:()=>{d(),i&&i()},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Refresh now",children:r.jsx(_a,{className:`w-4 h-4 ${c?"animate-spin":""}`})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[r.jsx(mi,{icon:Ve,label:"INGESTION",totalRef:h,rateRef:g,initialTotal:l.ingestion.total,initialRate:l.ingestion.rate}),r.jsx(mi,{icon:Zv,label:"TRANSFORMATIONS",totalRef:f,rateRef:x,initialTotal:l.transformations.total,initialRate:l.transformations.rate}),r.jsx(mi,{icon:Ve,label:"SCHEMA MAPPER",totalRef:w,rateRef:v,initialTotal:l.schemaMapper.total,initialRate:l.schemaMapper.rate}),r.jsx(mi,{icon:Sa,label:"LOAD",totalRef:y,rateRef:b,initialTotal:l.load.total,initialRate:l.load.rate})]})]}):r.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",style:{minHeight:"200px"},children:"No activity data available"})});function C1({pipelineId:e,enabled:t,interval:s=3e4,onStatusChange:a,onError:n}){const i=p.useRef(null),l=p.useRef(null),o=p.useCallback(async()=>{var c,d;try{const{data:u}=await H.from("pipelines").select("status").eq("id",e).maybeSingle();if(!u||u.status!=="running")return;const h=await ux(e);if(!h.success||!h.status)return;let g=!1,f="running";if(h.status.source){h.status.source.connector.state==="FAILED"&&(g=!0,f="error");const w=(c=h.status.source.tasks)==null?void 0:c.filter(v=>v.state==="FAILED");w&&w.length>0&&(g=!0,f="error")}if(h.status.sink){h.status.sink.connector.state==="FAILED"&&(g=!0,f="error");const w=(d=h.status.sink.tasks)==null?void 0:d.filter(v=>v.state==="FAILED");w&&w.length>0&&(g=!0,f="error")}g&&l.current!==f&&(await H.from("pipelines").update({status:f,updated_at:new Date().toISOString()}).eq("id",e),l.current=f,a==null||a(f))}catch(u){console.error("Health check failed:",u),n==null||n(u)}},[e,a,n]);return p.useEffect(()=>{if(!t){i.current&&(clearInterval(i.current),i.current=null);return}return o(),i.current=setInterval(o,s),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[t,s,o]),{checkHealth:o}}function E1({pipelineId:e,enabled:t=!0,refetchInterval:s=6e4}){return $a({queryKey:["pipeline-progress",e],queryFn:async()=>{if(!e)return{};try{return await ZN(e)}catch(a){return console.error("Failed to load pipeline progress:",a),{}}},enabled:t&&!!e,refetchInterval:s,staleTime:0,refetchOnWindowFocus:!1,placeholderData:a=>a,gcTime:5*60*1e3})}function T1({pipelineId:e,enabled:t=!0,refetchInterval:s=6e4}){return $a({queryKey:["connector-statuses",e],queryFn:async()=>{if(!e)return{source:null,sink:null};try{const a=await fetch(`http://localhost:5002/api/pipelines/${e}/status`);if(!a.ok)throw new Error("Failed to fetch connector statuses");return(await a.json()).status||{source:null,sink:null}}catch(a){return console.error("Failed to load connector statuses:",a),{source:null,sink:null}}},enabled:t&&!!e,refetchInterval:s,staleTime:0,refetchOnWindowFocus:!1,placeholderData:a=>a,gcTime:5*60*1e3})}function P1({pipelineId:e,enabled:t=!0}){const s=x0();return{...$a({queryKey:["pipeline",e],queryFn:async()=>{if(!e)return null;try{const[i,l]=await Promise.all([H.from("pipelines").select("*").eq("id",e).maybeSingle(),H.from("pipeline_connectors").select("id, name, type, connector_class, status, config, last_deployed_version, has_pending_changes, pending_config").eq("pipeline_id",e)]);if(i.error)throw new Error(i.error.message);if(!i.data)throw new Error("Pipeline not found");const o=l.data||[],c=await Promise.all(o.map(async u=>{var f,x;const h=(f=u.config)!=null&&f.registry_connector?u.config:null;let g;if(h!=null&&h.registry_connector)try{g=await Vn(h.registry_connector)||void 0}catch(w){console.warn("Failed to load registry config",w)}return g||(g=(h==null?void 0:h.snapshot_config)||((x=u.config)==null?void 0:x.snapshot_config)),{...u,registry_meta:h,config:u.config||{},resolved_config:g,last_deployed_version:u.last_deployed_version??null}}));return{...i.data,source_connector:c.find(u=>u.type==="source"),sink_connector:c.find(u=>u.type==="sink")}}catch(i){throw console.error("Failed to load pipeline data:",i),i}},enabled:t&&!!e,staleTime:3e4,refetchOnWindowFocus:!1,placeholderData:i=>i,gcTime:10*60*1e3,retry:1}),updatePipelineStatus:i=>{s.setQueryData(["pipeline",e],l=>l&&{...l,status:i,updated_at:new Date().toISOString()})}}}const A1=[{value:1e3,label:"1s"},{value:5e3,label:"5s"},{value:1e4,label:"10s"},{value:3e4,label:"30s"},{value:6e4,label:"1m"},{value:3e5,label:"5m"},{value:6e5,label:"10m"},{value:9e5,label:"15m"},{value:18e5,label:"30m"}];function R1(){var Oe,vt;const{id:e}=sc(),t=tt(),{showToast:s}=St(),{logActivity:a}=qt(),[n,i]=p.useState("objects"),[l,o]=p.useState("logs"),[c,d]=p.useState(""),[u,h]=p.useState("all"),[g,f]=p.useState(!1),[x,w]=p.useState(!1),[v,y]=p.useState(!1),[b,m]=p.useState("preset"),[k,N]=p.useState("6h"),[S,_]=p.useState("interval"),[P,A]=p.useState("4"),[R,E]=p.useState(["00:00"]),[Y,L]=p.useState(6e4),[U,O]=p.useState(0),[q,$]=p.useState(!0),{data:C,isLoading:M,error:D,refetch:B,updatePipelineStatus:W}=P1({pipelineId:e||"",enabled:!!e}),{data:ie={},isLoading:te,refetch:pe}=E1({pipelineId:e||"",enabled:(C==null?void 0:C.status)==="running"||(C==null?void 0:C.status)==="paused",refetchInterval:Y}),{data:K={source:null,sink:null},refetch:ae}=T1({pipelineId:e||"",enabled:!!C,refetchInterval:Y}),{data:de=[]}=lx(e||"",{refetchInterval:1e4});C1({pipelineId:e||"",enabled:(C==null?void 0:C.status)==="running",interval:Y,onStatusChange:F=>{s("warning","Pipeline status changed",`Pipeline is now ${F}`),B()},onError:F=>{console.error("Health check error:",F)}});const Pe=p.useCallback(async()=>{const F=async()=>{await ae(),await pe()};await F(),setTimeout(()=>F(),1e3),setTimeout(()=>F(),2e3),setTimeout(()=>F(),3e3)},[ae,pe]);p.useEffect(()=>{if(C&&v){const F=C.schedule_config;if(F)if(F.type==="interval"){const V=F.hours||4,ne={.083:"5m",.25:"15m",.5:"30m",1:"1h",2:"2h",3:"3h",6:"6h",8:"8h",12:"12h",24:"24h"};ne[V]?(m("preset"),N(ne[V])):(m("custom"),_("interval"),A(String(V)))}else F.type==="daily"&&(m("custom"),_("daily"),E(F.times||["00:00"]));else m("preset"),N("1h"),_("interval"),A("4"),E(["00:00"])}},[C,v]),p.useEffect(()=>{const F=V=>{var ne;((ne=V.detail)==null?void 0:ne.pipelineId)===e&&B()};return window.addEventListener("pipeline-updated",F),()=>{window.removeEventListener("pipeline-updated",F)}},[e,B]),p.useEffect(()=>{D&&(s("error","Failed to load pipeline"),t("/pipelines"))},[D,t,s]);const Ee=async()=>{var F,V;if(C)try{W("running"),s("info","Resuming pipeline connectors...");const ne=[],ge=[];(F=C.source_connector)!=null&&F.name&&ge.push({name:C.source_connector.name,type:"source"}),(V=C.sink_connector)!=null&&V.name&&ge.push({name:C.sink_connector.name,type:"sink"});const $e=ge.map(async be=>{try{const Ye=await(await fetch(`http://localhost:5002/api/connectors/${be.name}/resume`,{method:"POST"})).json();Ye.success||ne.push(`${be.type}: ${Ye.error||"Unknown error"}`)}catch(kt){ne.push(`${be.type}: ${kt.message||"Failed to connect"}`)}});await Promise.all($e),await H.from("pipelines").update({status:"running",updated_at:new Date().toISOString()}).eq("id",e),await a("pipeline.start",`Resumed pipeline: ${C.name}`,"pipeline",e),ne.length>0?s("warning","Pipeline resumed with warnings",ne.join(", ")):s("success","Pipeline resumed successfully");const Ae=async()=>{await ae(),await pe()};await Ae(),setTimeout(()=>Ae(),1e3),setTimeout(()=>Ae(),2e3),setTimeout(()=>Ae(),3e3)}catch(ne){s("error","Failed to resume pipeline",ne.message),B()}},Ue=async()=>{var F,V;if(C)try{W("paused"),s("info","Pausing pipeline connectors...");const ne=[],ge=[];(F=C.source_connector)!=null&&F.name&&ge.push({name:C.source_connector.name,type:"source"}),(V=C.sink_connector)!=null&&V.name&&ge.push({name:C.sink_connector.name,type:"sink"});const $e=ge.map(async be=>{try{const Ye=await(await fetch(`http://localhost:5002/api/connectors/${be.name}/pause`,{method:"POST"})).json();Ye.success||ne.push(`${be.type}: ${Ye.error||"Unknown error"}`)}catch(kt){ne.push(`${be.type}: ${kt.message||"Failed to connect"}`)}});await Promise.all($e),await H.from("pipelines").update({status:"paused",updated_at:new Date().toISOString()}).eq("id",e),await a("pipeline.pause",`Paused pipeline: ${C.name}`,"pipeline",e),ne.length>0?s("warning","Pipeline paused with warnings",ne.join(", ")):s("success","Pipeline paused successfully");const Ae=async()=>{await ae(),await pe()};await Ae(),setTimeout(()=>Ae(),1e3),setTimeout(()=>Ae(),2e3),setTimeout(()=>Ae(),3e3)}catch(ne){s("error","Failed to pause pipeline",ne.message),B()}},I=async(F,V,ne)=>{try{const ge=V.charAt(0).toUpperCase()+V.slice(1);s("info",`${ge}ing ${ne} connector...`);const $e=V==="resume"?`/api/connectors/${F}/resume`:V==="pause"?`/api/connectors/${F}/pause`:`/api/connectors/${F}/restart`,be=await(await fetch(`http://localhost:5002${$e}`,{method:"POST"})).json();if(!be.success)throw new Error(be.error||`Failed to ${V} connector`);await a(`connector.${V}`,`${ge}ed ${ne} connector: ${F}`,"pipeline",e),s("success",`${ne.charAt(0).toUpperCase()+ne.slice(1)} connector ${V}ed successfully`),ae(),pe()}catch(ge){s("error",`Failed to ${V} ${ne} connector`,ge.message)}},ue=async()=>{var F,V;if(C)try{s("info","Restarting pipeline connectors...");const ne=[],ge=[];(F=C.source_connector)!=null&&F.name&&ge.push({name:C.source_connector.name,type:"source"}),(V=C.sink_connector)!=null&&V.name&&ge.push({name:C.sink_connector.name,type:"sink"});for(const $e of ge)try{const be=await(await fetch(`http://localhost:5002/api/connectors/${$e.name}/restart`,{method:"POST"})).json();be.success||ne.push(`${$e.type}: ${be.error||"Unknown error"}`)}catch(Ae){ne.push(`${$e.type}: ${Ae.message||"Failed to connect"}`)}await a("pipeline.restart",`Restarted pipeline: ${C.name}`,"pipeline",e),ne.length>0?s("warning","Pipeline restarted with warnings",ne.join(", ")):s("success","Pipeline restarted successfully"),ae(),pe()}catch(ne){s("error","Failed to restart pipeline",ne.message)}},me=async()=>{var F,V,ne,ge,$e,Ae,be,kt,Ye,qr,us,gl,ml;if(confirm("Deploy this pipeline to Kafka Connect? This will create source and sink connectors."))try{s("info","Deploying pipeline...");const Vt=await dx(e);if(Vt.success){const ta=`${C==null?void 0:C.name}-source`,Gn=`${C==null?void 0:C.name}-sink`;(V=(F=Vt.results)==null?void 0:F.source)!=null&&V.connector&&await H.from("pipeline_connectors").upsert({pipeline_id:e,name:ta,type:"source",connector_class:((ne=Vt.results.source.connector.config)==null?void 0:ne["connector.class"])||"",config:Vt.results.source.connector.config||{},status:"running"},{onConflict:"pipeline_id,type",ignoreDuplicates:!1}),($e=(ge=Vt.results)==null?void 0:ge.sink)!=null&&$e.connector&&await H.from("pipeline_connectors").upsert({pipeline_id:e,name:Gn,type:"sink",connector_class:((Ae=Vt.results.sink.connector.config)==null?void 0:Ae["connector.class"])||"",config:Vt.results.sink.connector.config||{},status:"running"},{onConflict:"pipeline_id,type",ignoreDuplicates:!1});const ra=await ux(e);let Pr="running";(((Ye=(kt=(be=ra.status)==null?void 0:be.source)==null?void 0:kt.connector)==null?void 0:Ye.state)==="FAILED"||((gl=(us=(qr=ra.status)==null?void 0:qr.sink)==null?void 0:us.connector)==null?void 0:gl.state)==="FAILED")&&(Pr="error"),await H.from("pipelines").update({status:Pr,updated_at:new Date().toISOString()}).eq("id",e),await a("pipeline.deploy",`Deployed pipeline to Kafka Connect: ${C==null?void 0:C.name}`,"pipeline",e),s("success","Pipeline deployed successfully"),B()}else{const ta=((ml=Vt.results)==null?void 0:ml.errors)||[],Gn=ta.length>0?ta.map(ra=>`${ra.connector}: ${ra.error}`).join(", "):Vt.error;s("error","Failed to deploy pipeline",Gn)}}catch(Vt){s("error","Failed to deploy pipeline",Vt.message)}},X=async()=>{try{try{await XN(e)}catch(V){console.warn("Failed to delete connectors from Kafka Connect:",V)}const{error:F}=await H.from("pipelines").delete().eq("id",e);if(F){s("error","Failed to delete pipeline",F.message);return}await a("pipeline.delete",`Deleted pipeline: ${C==null?void 0:C.name}`,"pipeline",e),s("success","Pipeline deleted successfully"),t("/pipelines")}catch(F){s("error","Failed to delete pipeline",F.message)}},ye=async()=>{let F;if(b==="preset")F={type:"interval",hours:{"5m":.083,"15m":.25,"30m":.5,"1h":1,"2h":2,"3h":3,"6h":6,"8h":8,"12h":12,"24h":24}[k]||6};else if(S==="interval"){const V=parseFloat(P);if(isNaN(V)||V<.083||V>48){s("error","Invalid interval","Hours must be between 0.083 (5 mins) and 48");return}F={type:"interval",hours:V}}else F={type:"daily",times:R};try{const{error:V}=await H.from("pipelines").update({schedule_config:F}).eq("id",e);if(V){s("error","Failed to update schedule",V.message);return}await a("pipeline.schedule_update",`Updated ingestion schedule for pipeline: ${C==null?void 0:C.name}`,"pipeline",e,{schedule_config:F}),s("success","Schedule updated successfully"),y(!1),B()}catch(V){s("error","Failed to update schedule",V.message)}},st=()=>{if(b==="preset"){const F=k;if(F==="5m")return"every 5 Minutes";if(F==="15m")return"every 15 Minutes";if(F==="30m")return"every 30 Minutes";if(F==="1h")return"every 1 Hour";if(F==="2h")return"every 2 Hours";if(F==="3h")return"every 3 Hours";if(F==="6h")return"every 6 Hours";if(F==="8h")return"every 8 Hours";if(F==="12h")return"every 12 Hours";if(F==="24h")return"every 24 Hours"}else if(S==="interval"){const F=parseFloat(P);if(F<1){const V=Math.round(F*60);return`every ${V} Minute${V>1?"s":""}`}return`every ${F} Hour${F>1?"s":""}`}else return`at ${R.join(", ")} daily`;return""},Ce=F=>{var ge;const V=F==="source"?K.source:K.sink,ne=(ge=V==null?void 0:V.connector)==null?void 0:ge.state;if(!ne)return"UNKNOWN";switch(ne){case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"FAILED":return"FAILED";default:return ne}},Tr=F=>{switch(F){case"RUNNING":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"PAUSED":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";case"FAILED":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},ds=F=>{switch(F){case"RUNNING":return"";case"PAUSED":return"";case"FAILED":return"";default:return""}},_e=F=>{var ge,$e,Ae,be;if(!F.source_connector&&!F.sink_connector)return F.status;const V=($e=(ge=K.source)==null?void 0:ge.connector)==null?void 0:$e.state,ne=(be=(Ae=K.sink)==null?void 0:Ae.connector)==null?void 0:be.state;return!V&&!ne?F.status:V==="FAILED"||ne==="FAILED"?"error":V==="PAUSED"||ne==="PAUSED"?"paused":V==="RUNNING"&&ne==="RUNNING"?"running":F.status},Ne=F=>{switch(F){case"running":return"success";case"paused":return"warning";case"ready":return"info";case"error":return"error";default:return"default"}},ct=F=>new Date(F).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});if(M&&!C)return r.jsxs("div",{className:"h-full flex flex-col animate-pulse",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:r.jsx("div",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-6 w-48 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),r.jsx("div",{className:"h-4 w-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})]})})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:r.jsx("div",{className:"flex gap-6",children:[1,2,3,4].map(F=>r.jsx("div",{className:"h-10 w-28 bg-gray-200 dark:bg-gray-700 rounded-lg"},F))})}),r.jsxs("div",{className:"flex-1 p-8 space-y-4",children:[r.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"}),r.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"}),r.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})]});if(!C)return null;const Ht=[{id:"objects",label:"Objects",icon:Ve},{id:"monitoring",label:"Monitoring",icon:Sa},{id:"logs",label:"Logs",icon:zv},{id:"settings",label:"Settings",icon:Gi}];return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:r.jsxs("div",{className:"px-6 py-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/pipelines"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(Ia,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:C.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[r.jsxs("span",{children:["Created ",ct(C.created_at)]}),r.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:""}),r.jsx("span",{className:"font-mono opacity-75",children:C.id})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[(C.status==="running"||C.status==="paused")&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsx(nr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),r.jsx("select",{value:Y,onChange:F=>L(Number(F.target.value)),className:"text-sm font-medium bg-transparent border-none text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-0 cursor-pointer",children:A1.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))})]}),de.length>0&&r.jsx("div",{className:"relative",children:r.jsxs("button",{onClick:()=>{i("logs"),o("alerts")},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-colors bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30",title:`${de.length} unresolved alert(s) - Click to view`,children:[r.jsx(Wi,{className:`w-4 h-4 ${de.some(F=>F.severity==="critical")?"text-red-600 dark:text-red-400 animate-pulse":"text-yellow-600 dark:text-yellow-400 animate-pulse"}`}),r.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[de.length," Alert",de.length!==1?"s":""]})]})}),r.jsx(i1,{variant:Ne(_e(C)),children:_e(C).toUpperCase()}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>f(!g),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(tu,{className:"w-5 h-5"})}),g&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[_e(C)==="ready"&&r.jsxs("button",{onClick:()=>{me(),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 border-b border-gray-200 dark:border-gray-700",children:[r.jsx(Rs,{className:"w-4 h-4 text-green-600"}),"Deploy Pipeline"]}),_e(C)==="paused"&&r.jsxs("button",{onClick:()=>{Ee(),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Rs,{className:"w-4 h-4"}),"Resume Pipeline"]}),_e(C)==="running"&&r.jsxs("button",{onClick:()=>{Ue(),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(Hs,{className:"w-4 h-4"}),"Pause Pipeline"]}),r.jsxs("button",{onClick:()=>{ue(),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(_a,{className:"w-4 h-4"}),"Restart Pipeline"]}),r.jsxs("button",{onClick:()=>{f(!1),y(!0)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[r.jsx(La,{className:"w-4 h-4"}),"Change Schedule"]}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),r.jsxs("button",{onClick:()=>{w(!0),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[r.jsx(Ma,{className:"w-4 h-4"}),"Delete Pipeline"]})]})]})]})]})]}),(C.status==="running"||C.status==="paused")&&r.jsx("div",{className:"flex items-center justify-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-800 rounded-lg px-4 py-2.5 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ve,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium mb-0.5",children:"Source"}),r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:((Oe=C.source_connector)==null?void 0:Oe.name)||C.source_type||"Not configured"})]})]}),C.source_connector&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-8 w-px bg-blue-200 dark:bg-blue-700"}),r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-semibold shadow-sm ${Tr(Ce("source"))}`,children:[r.jsx("span",{children:ds(Ce("source"))}),r.jsx("span",{children:Ce("source")})]}),r.jsxs("div",{className:"flex gap-1",children:[Ce("source")==="RUNNING"&&r.jsx("button",{onClick:()=>I(C.source_connector.name,"pause","source"),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors",title:"Pause Source",children:r.jsx(Hs,{className:"w-3.5 h-3.5 text-blue-700 dark:text-blue-300"})}),Ce("source")==="PAUSED"&&r.jsx("button",{onClick:()=>I(C.source_connector.name,"resume","source"),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors",title:"Resume Source",children:r.jsx(Rs,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),r.jsx("button",{onClick:()=>I(C.source_connector.name,"restart","source"),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-md transition-colors",title:"Restart Source",children:r.jsx(_a,{className:"w-3.5 h-3.5 text-blue-700 dark:text-blue-300"})})]})]})]})}),r.jsx(cr,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-4"}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border border-purple-200 dark:border-purple-800 rounded-lg px-4 py-2.5 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ve,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium mb-0.5",children:"Destination"}),r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:((vt=C.sink_connector)==null?void 0:vt.name)||C.destination_type||"Not configured"})]})]}),C.sink_connector&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-8 w-px bg-purple-200 dark:bg-purple-700"}),r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-semibold shadow-sm ${Tr(Ce("sink"))}`,children:[r.jsx("span",{children:ds(Ce("sink"))}),r.jsx("span",{children:Ce("sink")})]}),r.jsxs("div",{className:"flex gap-1",children:[Ce("sink")==="RUNNING"&&r.jsx("button",{onClick:()=>I(C.sink_connector.name,"pause","sink"),className:"p-1.5 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-md transition-colors",title:"Pause Sink",children:r.jsx(Hs,{className:"w-3.5 h-3.5 text-purple-700 dark:text-purple-300"})}),Ce("sink")==="PAUSED"&&r.jsx("button",{onClick:()=>I(C.sink_connector.name,"resume","sink"),className:"p-1.5 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-md transition-colors",title:"Resume Sink",children:r.jsx(Rs,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),r.jsx("button",{onClick:()=>I(C.sink_connector.name,"restart","sink"),className:"p-1.5 hover:bg-purple-200 dark:hover:bg-purple-800 rounded-md transition-colors",title:"Restart Sink",children:r.jsx(_a,{className:"w-3.5 h-3.5 text-purple-700 dark:text-purple-300"})})]})]})]})})]})})]})}),C.status==="running"&&q&&r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800 px-8 py-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800 dark:text-green-200",children:[r.jsx(kr,{className:"w-4 h-4"}),"Events have started loading in your Destination"]}),r.jsx("button",{onClick:()=>$(!1),className:"text-green-600 dark:text-green-400 hover:text-green-700 transition-colors",children:r.jsx(He,{className:"w-4 h-4"})})]})}),(C.status==="running"||C.status==="paused")&&r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-6",children:r.jsx(j1,{progress:ie,isLoading:te})}),(C.status==="running"||C.status==="paused")&&r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-6",children:r.jsx(S1,{pipelineId:e,pipelineStatus:C.status,refreshInterval:Y,onRefreshIntervalChange:L,onManualRefresh:()=>{pe(),ae()}})}),r.jsx("div",{className:"sticky top-0 z-30 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:r.jsx("div",{className:"flex gap-6",children:Ht.map(F=>r.jsxs("button",{onClick:()=>i(F.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${n===F.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(F.icon,{className:"w-4 h-4"}),F.label]},F.id))})}),n==="logs"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sticky top-[72px] z-20 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>o("logs"),className:`px-4 py-2 font-medium transition-colors ${l==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Logs"}),r.jsx("button",{onClick:()=>o("timeline"),className:`px-4 py-2 font-medium transition-colors ${l==="timeline"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Timeline"}),r.jsx("button",{onClick:()=>o("dlq"),className:`px-4 py-2 font-medium transition-colors ${l==="dlq"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"DLQ (2)"}),r.jsxs("button",{onClick:()=>o("alerts"),className:`px-4 py-2 font-medium transition-colors relative ${l==="alerts"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:["Alerts",de.length>0&&r.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-red-600 text-white text-xs rounded-full",children:de.length})]})]})}),l==="logs"&&r.jsx("div",{className:"sticky top-[140px] z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:F=>d(F.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(y0,{className:"w-5 h-5 text-gray-400"}),r.jsxs("select",{value:u,onChange:F=>h(F.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"all",children:"All Levels"}),r.jsx("option",{value:"error",children:"Error"}),r.jsx("option",{value:"warn",children:"Warning"}),r.jsx("option",{value:"info",children:"Info"})]})]})]}),r.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx(Ko,{className:"w-4 h-4"}),"Download Logs"]})]})})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-8",children:[n==="objects"&&r.jsx(o1,{pipelineId:C.id,pipelineStatus:C.status,sourceType:C.source_type,destinationType:C.destination_type,onPipelineStatusChange:Pe,connectorStatuses:K}),n==="monitoring"&&r.jsx(u1,{refreshTrigger:U,refreshInterval:Y,isActive:n==="monitoring"&&(C==null?void 0:C.status)==="running"}),n==="logs"&&r.jsx(h1,{pipelineId:C.id,pipelineStatus:C.status,activeView:l,searchQuery:c,severityFilter:u}),n==="settings"&&r.jsx(y1,{pipeline:C,onUpdate:B})]}),r.jsx(hx,{isOpen:x,onClose:()=>w(!1),onConfirm:X,title:"Are you sure you want to delete the Pipeline?",message:"This action CANNOT be undone. The Pipeline will be permanently deleted from your account. Do you wish to continue?"}),v&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>y(!1),children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl max-w-xl w-full max-h-[90vh] overflow-hidden",onClick:F=>F.stopPropagation(),children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Change the Pipeline Ingestion Schedule"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Define the frequency or time(s) at which the Pipeline must ingest the data from the Source."})]}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6 max-h-[60vh] overflow-auto",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Scheduled"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"This ingestion schedule applies to all the objects in the Pipeline."}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[["5m","15m","30m","1h","2h","3h"].map(F=>r.jsx("button",{onClick:()=>{m("preset"),N(F)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${b==="preset"&&k===F?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:F==="5m"?"5 Mins":F==="15m"?"15 Mins":F==="30m"?"30 Mins":F==="1h"?"1 Hr":F.replace("h"," Hrs")},F)),r.jsx("button",{onClick:()=>m("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${b==="custom"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Custom"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",checked:S==="interval",onChange:()=>{_("interval"),b!=="custom"&&m("custom")},className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Run at fixed interval"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",checked:S==="daily",onChange:()=>{_("daily"),m("custom")},className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Run daily"})]})]}),b==="custom"&&r.jsx("div",{children:S==="interval"?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours *"}),r.jsx("input",{type:"number",min:"0.083",max:"48",step:"0.001",value:P,onChange:F=>A(F.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum 0.083 hr (5 mins) and Maximum 48 hrs"})]}):r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"At (in UTC) *"}),r.jsx("div",{className:"space-y-2",children:R.map((F,V)=>r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx(nr,{className:"w-5 h-5 text-gray-400"}),r.jsx("input",{type:"time",value:F,onChange:ne=>{const ge=[...R];ge[V]=ne.target.value,E(ge)},className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),R.length>1&&r.jsx("button",{onClick:()=>E(R.filter((ne,ge)=>ge!==V)),className:"text-red-600 hover:text-red-700",children:"DELETE"})]},V))}),R.length<24&&r.jsxs("button",{onClick:()=>E([...R,"00:00"]),className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[r.jsx("span",{children:"+"})," ADD MORE"]})]})})]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[r.jsx(nr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["DataTravel will ingest your data ",r.jsx("span",{className:"font-semibold",children:st()})]})]})]}),r.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"CANCEL"}),r.jsx("button",{onClick:ye,className:"px-4 py-2 rounded-lg bg-blue-600 text-white text-sm font-medium hover:bg-blue-700",children:"UPDATE"})]})]})})]})}function L1(){return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Models"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-12",children:"SQL transformation models"}),r.jsx("div",{className:"max-w-2xl mx-auto mt-16",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Hv,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"Models Coming Soon"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Define SQL transformation models to transform your data in-flight. This feature will allow you to apply custom business logic and transformations as data flows through your pipelines."}),r.jsx("span",{className:"inline-block px-4 py-2 bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg font-medium text-sm",children:"Phase 2 Feature"})]})})]})}function D1({connectionId:e}){const[t,s]=p.useState(null),[a,n]=p.useState(!1),[i,l]=p.useState(null),[o,c]=p.useState(null),d=async()=>{try{n(!0),l(null);const f=await(await fetch(`http://localhost:3001/api/pipelines/${e}/database-info`)).json();f.success?(s(f.data),c(new Date)):l(f.error||"Failed to fetch database info")}catch(g){l(g instanceof Error?g.message:"Failed to fetch database info")}finally{n(!1)}};p.useEffect(()=>{d()},[e]);const u=g=>{if(g===0)return"0 B";const f=1024,x=["B","KB","MB","GB","TB"],w=Math.floor(Math.log(g)/Math.log(f));return`${(g/Math.pow(f,w)).toFixed(2)} ${x[w]}`},h=g=>new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(g);return!t&&a?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Ve,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Information"})]}),r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading database information..."})]}):i?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Ve,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Information"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[r.jsx(Ws,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Failed to load database information"}),r.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 mt-1",children:i})]})]}),r.jsxs("button",{onClick:()=>d(),className:"mt-4 w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4"}),"Retry"]})]}):t?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ve,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Information"})]}),r.jsx("button",{onClick:()=>d(),disabled:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",title:"Refresh",children:r.jsx(Na,{className:`w-4 h-4 text-gray-600 dark:text-gray-400 ${a?"animate-spin":""}`})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(on,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Tables"})]}),r.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:t.totalTables})]}),r.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(qv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),r.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Database Size"})]}),r.jsx("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:u(t.size)})]}),r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(kr,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Status"})]}),r.jsx("div",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"Connected"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Database Name"}),r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100",children:t.database})]}),r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Version"}),r.jsx("div",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 break-all",children:t.version})]}),o&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(nr,{className:"w-3 h-3"}),r.jsxs("span",{children:["Last updated: ",h(o)]})]})]})]}):null}function O1({connectionId:e}){const[t,s]=p.useState([]),[a,n]=p.useState(!1),[i,l]=p.useState(null),[o,c]=p.useState(new Set),[d,u]=p.useState(new Map),[h,g]=p.useState(new Set),f=async()=>{try{n(!0),l(null);const k=await(await fetch(`http://localhost:3001/api/pipelines/${e}/sink-tables`)).json();k.success?s(k.data):l(k.error||"Failed to fetch sink tables")}catch(m){l(m instanceof Error?m.message:"Failed to fetch sink tables")}finally{n(!1)}},x=async(m,k)=>{const N=`${m}.${k}`;g(S=>new Set(S).add(N));try{const _=await(await fetch(`http://localhost:3001/api/pipelines/${e}/tables/${m}/${k}/sample`)).json();_.success&&u(P=>new Map(P).set(N,_.data))}catch(S){console.error("Failed to fetch sample data:",S)}finally{g(S=>{const _=new Set(S);return _.delete(N),_})}},w=(m,k)=>{const N=`${m}.${k}`,S=new Set(o);S.has(N)?S.delete(N):(S.add(N),d.has(N)||x(m,k)),c(S)};p.useEffect(()=>{f()},[e]);const v=m=>{if(m===0)return"0 B";const k=1024,N=["B","KB","MB","GB","TB"],S=Math.floor(Math.log(m)/Math.log(k));return`${(m/Math.pow(k,S)).toFixed(2)} ${N[S]}`},y=m=>new Intl.NumberFormat("en-US").format(m),b=m=>m?new Date(m).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return t.length===0&&a?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(on,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"})]}),r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading sink tables..."})]}):i?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(on,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"})]}),r.jsx("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:i})]}):t.length===0?r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(on,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"})]}),r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No CDC sink tables found for this destination"})]}):r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(on,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"CDC Sink Tables"}),r.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 rounded-full",children:[t.length," ",t.length===1?"table":"tables"]})]}),r.jsx("button",{onClick:()=>f(),disabled:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",title:"Refresh",children:r.jsx(Na,{className:`w-4 h-4 text-gray-600 dark:text-gray-400 ${a?"animate-spin":""}`})})]}),r.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto scrollbar-hide",children:t.map(m=>{const k=`${m.schema}.${m.tableName}`,N=o.has(k),S=d.get(k),_=h.has(k);return r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>w(m.schema,m.tableName),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[N?r.jsx(rs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):r.jsx(cr,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),r.jsx(Ve,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[m.schema,".",m.tableName]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y(m.rowCount)," rows  ",v(m.tableSize),"  ",m.columnCount," columns"]})]})]}),m.lastModified&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[r.jsx(La,{className:"w-3 h-3"}),b(m.lastModified)]})]}),N&&r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900",children:_?r.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Loading sample data..."}):S&&S.length>0?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:Object.keys(S[0]).map(P=>r.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:P},P))})}),r.jsx("tbody",{children:S.map((P,A)=>r.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700 last:border-0",children:Object.values(P).map((R,E)=>r.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-gray-100 font-mono text-xs",children:R===null?r.jsx("span",{className:"text-gray-400 italic",children:"null"}):typeof R=="object"?r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:JSON.stringify(R)}):String(R)},E))},A))})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[r.jsx(Nr,{className:"w-3 h-3"}),r.jsx("span",{children:"Showing first 10 rows"})]})]}):r.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No sample data available"})})]},k)})})]})}function $1(){var x;const[e,t]=p.useState([]),[s,a]=p.useState(!0),[n,i]=p.useState(null),[l,o]=p.useState(null),[c,d]=p.useState(!1),u=tt();p.useEffect(()=>{h()},[]);async function h(){try{const{data:w,error:v}=await H.from("pipelines").select(`
          id,
          name,
          destination_type,
          destination_config,
          status,
          sink_connector:pipeline_connectors!pipeline_connectors_pipeline_id_fkey(
            id,
            name,
            connector_class,
            type
          )
        `).not("destination_type","is",null);if(v)throw v;const y=new Map;w==null||w.forEach(b=>{var N,S;const m=(N=b.sink_connector)==null?void 0:N.find(_=>_.type==="sink"),k=`${b.destination_type}-${JSON.stringify(b.destination_config)}`;if(y.has(k)){const _=y.get(k);_.pipelineCount++,_.pipelines.push({id:b.id,name:b.name,status:b.status}),(b.status==="running"||b.status==="incremental")&&(_.status="active")}else y.set(k,{id:b.id,name:(m==null?void 0:m.name)||((S=b.destination_config)==null?void 0:S.host)||b.destination_type||"Destination",type:b.destination_type||"unknown",connector_class:m==null?void 0:m.connector_class,config:b.destination_config||{},pipelineCount:1,pipelines:[{id:b.id,name:b.name,status:b.status}],status:b.status==="running"||b.status==="incremental"?"active":"idle"})}),t(Array.from(y.values()))}catch(w){console.error("Error loading destinations:",w)}finally{a(!1)}}if(s)return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Destinations"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-12",children:"Loading destinations..."})]});if(e.length===0)return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Destinations"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-12",children:"Manage your data destinations"}),r.jsx("div",{className:"max-w-2xl mx-auto mt-16",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Gi,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3",children:"No Destinations Yet"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Destinations are configured as part of the pipeline creation process. Create your first pipeline to set up a destination."})]})})]});function g(w){return w?"".repeat(w.length):""}function f(w){const v=w.host??"localhost",y=w.port??"5432",b=w.database??"mydb";return`${w.username??"user"}@${v}:${y}/${b}`}return r.jsxs("div",{className:"p-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Destinations"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.length," destination",e.length!==1?"s":""," configured"]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(w=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{i(w),o(w.pipelines[0])},children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx(pt,{connectorClass:w.connector_class,sourceType:w.type,className:"w-12 h-12"}),r.jsx("div",{className:"flex items-center gap-2",children:w.status==="active"?r.jsx(kr,{className:"w-5 h-5 text-green-500"}):r.jsx(Fr,{className:"w-5 h-5 text-gray-400"})})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:w.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 uppercase",children:w.type}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pipelines"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:w.pipelineCount})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),r.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${w.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:w.status})]})]}),r.jsxs("button",{className:"mt-4 w-full px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(rg,{className:"w-4 h-4"}),"View Pipelines"]})]},w.id))}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>i(null),children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between z-10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(pt,{connectorClass:n.connector_class,className:"w-14 h-14"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase",children:n.type})]})]}),r.jsx("button",{onClick:()=>i(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Pipelines Using This Destination (",n.pipelines.length,")"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Connector Type:"}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 rounded",children:((x=n.connector_class)==null?void 0:x.split(".").pop())||"N/A"})]})]}),r.jsx("div",{className:"space-y-2",children:n.pipelines.map(w=>r.jsxs("div",{onClick:v=>{v.stopPropagation(),o(w)},className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all ${(l==null?void 0:l.id)===w.id?"bg-blue-100 dark:bg-blue-900/30 ring-2 ring-blue-500 dark:ring-blue-400":"bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[r.jsx("span",{className:`font-medium ${(l==null?void 0:l.id)===w.id?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:w.name}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${w.status==="running"||w.status==="incremental"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":w.status==="snapshot"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:w.status})]},w.id))})]}),n.config.host&&l&&r.jsx(D1,{connectionId:l.id}),l&&r.jsx(O1,{connectionId:l.id}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),r.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${n.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:n.status})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Connection Details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Host"}),r.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:n.config.host||"N/A"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Port"}),r.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:n.config.port||"N/A"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Database"}),r.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:n.config.database||"N/A"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),r.jsx("span",{className:"col-span-2 text-sm text-gray-900 dark:text-gray-100 font-mono",children:n.config.username||"N/A"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),r.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 font-mono flex-1",children:c?n.config.password||"N/A":g(String(n.config.password||""))}),r.jsx("button",{onClick:()=>d(!c),className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:c?r.jsx(Ks,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):r.jsx(Nr,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Connection String"}),r.jsx("span",{className:"col-span-2 text-sm text-blue-900 dark:text-blue-100 font-mono break-all",children:f(n.config)})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("button",{onClick:()=>{i(null),u("/pipelines")},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(rg,{className:"w-4 h-4"}),"View Pipelines"]}),r.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 rounded-lg transition-colors",children:"Close"})]})]})]})})]})}function I1(){const e=[{icon:Ve,title:"Source Configuration",description:"Learn how to configure Oracle and PostgreSQL sources",topics:["Oracle Pre-requisites","PostgreSQL Setup","Network Configuration"]},{icon:Mv,title:"Pre-check SQL Snippets",description:"SQL commands for validating database configuration",topics:["ARCHIVELOG Mode","Supplemental Logging","User Privileges"]},{icon:$v,title:"Troubleshooting",description:"Common issues and their solutions",topics:["Connection Failures","Permission Errors","Long Transactions"]}];return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Documentation"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Guides, references, and troubleshooting help"}),r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"relative mb-8",children:[r.jsx(_r,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search documentation...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100"})]}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map((t,s)=>{const a=t.icon;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mb-4",children:r.jsx(a,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:t.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t.description}),r.jsx("ul",{className:"space-y-2",children:t.topics.map((n,i)=>r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:n})},i))})]},s)})}),r.jsx("div",{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx(vp,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Need More Help?"}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:"Can't find what you're looking for? Our support team is here to help."}),r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm",children:"Contact Support"})]})]})})]})]})}function M1(){const e=tt(),{signIn:t}=qt(),[s,a]=p.useState(""),[n,i]=p.useState(""),[l,o]=p.useState(!1),[c,d]=p.useState(!1),u=async h=>{h.preventDefault(),d(!0);const{error:g}=await t(s,n);g||e("/pipelines"),d(!1)};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden flex items-center justify-center p-4",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[r.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-cyan-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-blue-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:[0,45,90,135,180,225,270,315].map((h,g)=>r.jsx("div",{className:"absolute w-3 h-3 bg-cyan-400 rounded-full shadow-lg shadow-cyan-500/50 animate-flow-dot",style:{top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${h}deg) translateX(0px)`,animationDelay:`${g*.5}s`}},g))})]}),r.jsxs("div",{className:"relative z-10 w-full max-w-6xl grid lg:grid-cols-2 gap-12 items-center",children:[r.jsx("div",{className:"hidden lg:block space-y-8",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h1",{className:"text-6xl font-bold text-white leading-tight",children:["Connect Your",r.jsx("span",{className:"block mt-2 bg-gradient-to-r from-cyan-400 via-blue-400 to-blue-500 text-transparent bg-clip-text",children:"Data Universe"})]}),r.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-white/5 backdrop-blur-sm rounded-full border border-white/10",children:[r.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm text-cyan-400 font-medium",children:"Real-time Data Pipelines"})]}),r.jsx("p",{className:"text-xl text-slate-300 leading-relaxed",children:"Enterprise-grade data replication and CDC platform. Connect any database to anywhere with zero downtime."})]})}),r.jsxs("div",{className:"w-full max-w-md mx-auto",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl blur-xl opacity-50 animate-pulse"}),r.jsx("div",{className:"relative p-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl",children:r.jsx(Ve,{className:"w-10 h-10 text-white"})})]})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),r.jsx("p",{className:"text-slate-300",children:"Sign in to manage your data pipelines"})]}),r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-200 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:s,onChange:h=>a(h.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"you@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-200 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",type:l?"text":"password",value:n,onChange:h=>i(h.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"Enter your password"}),r.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:l?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]}),r.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-cyan-500/50 hover:scale-[1.02] active:scale-[0.98]",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-5 h-5 animate-spin"}),"Signing In..."]}):r.jsxs(r.Fragment,{children:["Sign In",r.jsx(qs,{className:"w-5 h-5"})]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-slate-300",children:["Don't have an account?"," ",r.jsx(nc,{to:"/signup",className:"text-cyan-400 hover:text-cyan-300 font-semibold transition-colors",children:"Sign Up"})]})})]}),r.jsx("p",{className:"text-center text-sm text-slate-400 mt-6",children:"Protected by enterprise-grade security"})]})]})]})}function F1(){const e=tt(),{signUp:t}=qt(),[s,a]=p.useState(""),[n,i]=p.useState(""),[l,o]=p.useState(""),[c,d]=p.useState(""),[u,h]=p.useState(!1),[g,f]=p.useState(!1),[x,w]=p.useState(!1),[v,y]=p.useState(""),b=async m=>{if(m.preventDefault(),y(""),l!==c){y("Passwords do not match");return}if(l.length<6){y("Password must be at least 6 characters");return}w(!0);const{error:k}=await t(n,l,s);k||e("/login"),w(!1)};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden flex items-center justify-center p-4",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[r.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-cyan-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-blue-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:[0,45,90,135,180,225,270,315].map((m,k)=>r.jsx("div",{className:"absolute w-3 h-3 bg-cyan-400 rounded-full shadow-lg shadow-cyan-500/50 animate-flow-dot",style:{top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${m}deg) translateX(0px)`,animationDelay:`${k*.5}s`}},k))})]}),r.jsxs("div",{className:"relative z-10 w-full max-w-md mx-auto",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl blur-xl opacity-50 animate-pulse"}),r.jsx("div",{className:"relative p-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl",children:r.jsx(Ve,{className:"w-10 h-10 text-white"})})]})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),r.jsx("p",{className:"text-slate-300",children:"Sign up to get started with data pipelines"})]}),v&&r.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl backdrop-blur-sm",children:r.jsx("p",{className:"text-sm text-red-300",children:v})}),r.jsxs("form",{onSubmit:b,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-200 mb-2",children:"Full Name"}),r.jsx("input",{id:"fullName",type:"text",value:s,onChange:m=>a(m.target.value),className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"John Doe"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-200 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:n,onChange:m=>i(m.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"you@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-200 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",type:u?"text":"password",value:l,onChange:m=>o(m.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"Minimum 6 characters"}),r.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:u?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-200 mb-2",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"confirmPassword",type:g?"text":"password",value:c,onChange:m=>d(m.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white placeholder-slate-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all outline-none",placeholder:"Re-enter your password"}),r.jsx("button",{type:"button",onClick:()=>f(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:g?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]}),r.jsx("button",{type:"submit",disabled:x,className:"w-full py-3 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-cyan-500/50 hover:scale-[1.02] active:scale-[0.98]",children:x?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-5 h-5 animate-spin"}),"Creating Account..."]}):r.jsxs(r.Fragment,{children:["Create Account",r.jsx(qs,{className:"w-5 h-5"})]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-slate-300",children:["Already have an account?"," ",r.jsx(nc,{to:"/login",className:"text-cyan-400 hover:text-cyan-300 font-semibold transition-colors",children:"Sign In"})]})})]}),r.jsx("p",{className:"text-center text-sm text-slate-400 mt-6",children:"By signing up, you agree to our Terms of Service"})]})]})}function U1(){const{hasRole:e,logActivity:t}=qt(),{showToast:s}=St(),a=tt(),[n,i]=p.useState([]),[l,o]=p.useState(!0),[c,d]=p.useState(""),[u,h]=p.useState(!1),[g,f]=p.useState(!1),[x,w]=p.useState(null),[v,y]=p.useState(!1),[b,m]=p.useState(null),[k,N]=p.useState({email:"",password:"",full_name:"",role:"read_only"});p.useEffect(()=>{if(!e("admin")){a("/pipelines");return}S()},[e,a]);const S=async()=>{try{o(!0);const{data:L,error:U}=await H.from("user_profiles").select("*").order("created_at",{ascending:!1});if(U)throw U;const O=await Promise.all((L||[]).map(async q=>{const{count:$}=await H.from("pipelines").select("*",{count:"exact",head:!0}).eq("user_id",q.id),{data:C}=await H.from("user_activity_logs").select("created_at").eq("user_id",q.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),{count:M}=await H.from("alert_preferences").select("*",{count:"exact",head:!0}).eq("user_id",q.id).not("recipient_id","is",null);return{...q,pipeline_count:$||0,last_activity:(C==null?void 0:C.created_at)||null,alert_count:M||0}}));i(O)}catch(L){console.error("Error fetching users:",L),s("error","Failed to load users")}finally{o(!1)}},_=async L=>{L.preventDefault();try{const{data:U}=await H.auth.getSession();if(!U.session)throw new Error("Not authenticated");const O=await fetch("http://127.0.0.1:54321/functions/v1/admin-users",{method:"POST",headers:{Authorization:`Bearer ${U.session.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:k.email,password:k.password,full_name:k.full_name,role:k.role})});if(!O.ok){const $=await O.json();throw new Error($.error||"Failed to create user")}const{user:q}=await O.json();q&&(await t("user.create",`Created new user: ${k.email}`,"user_profile",q.id,{role:k.role}),s("success","User created successfully"),h(!1),N({email:"",password:"",full_name:"",role:"read_only"}),S())}catch(U){console.error("Error creating user:",U),s("error",U.message||"Failed to create user")}},P=async L=>{if(L.preventDefault(),!!x)try{const{error:U}=await H.from("user_profiles").update({full_name:x.full_name,role:x.role,is_active:x.is_active}).eq("id",x.id);if(U)throw U;await t("user.update",`Updated user: ${x.email}`,"user_profile",x.id,{role:x.role,is_active:x.is_active}),s("success","User updated successfully"),f(!1),w(null),S()}catch(U){console.error("Error updating user:",U),s("error",U.message||"Failed to update user")}},A=async()=>{if(b)try{const{error:L}=await H.auth.admin.deleteUser(b.id);if(L)throw L;await t("user.delete",`Deleted user: ${b.email}`,"user_profile",b.id),s("success","User deleted successfully"),y(!1),m(null),S()}catch(L){console.error("Error deleting user:",L),s("error",L.message||"Failed to delete user")}},R=n.filter(L=>{var U;return L.email.toLowerCase().includes(c.toLowerCase())||((U=L.full_name)==null?void 0:U.toLowerCase().includes(c.toLowerCase()))}),E=L=>{switch(L){case"admin":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"maintainer":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"read_only":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}},Y={admin:n.filter(L=>L.role==="admin").length,maintainer:n.filter(L=>L.role==="maintainer").length,read_only:n.filter(L=>L.role==="read_only").length};return r.jsxs("div",{className:"p-8",children:[r.jsxs("button",{onClick:()=>a("/admin"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-6",children:[r.jsx(Ia,{className:"w-4 h-4"}),"Back to Admin"]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"User Management"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage users, roles, and permissions"})]}),r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[r.jsx(Vs,{className:"w-5 h-5"}),"Create User"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:n.length})]}),r.jsx(su,{className:"w-10 h-10 text-blue-600"})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Admins"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:Y.admin})]}),r.jsx(Dn,{className:"w-10 h-10 text-red-600"})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Maintainers"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:Y.maintainer})]}),r.jsx(Mr,{className:"w-10 h-10 text-blue-600"})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Read Only"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:Y.read_only})]}),r.jsx(su,{className:"w-10 h-10 text-gray-600"})]})})]}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search users by email or name...",value:c,onChange:L=>d(L.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Le,{className:"w-8 h-8 animate-spin text-blue-600"})}):r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pipelines"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Activity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:R.map(L=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>a(`/admin/users/${L.id}`),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:L.full_name||"N/A"}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:L.email})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${E(L.role)}`,children:L.role})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${L.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:L.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:L.pipeline_count||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:L.last_activity?new Date(L.last_activity).toLocaleString():"Never"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 flex items-center justify-center",children:(L.alert_count??0)>0&&r.jsx("div",{className:"p-2 text-amber-600 dark:text-amber-400",title:`${L.alert_count} alert preference${L.alert_count>1?"s":""} configured`,children:r.jsx(vr,{className:"w-4 h-4"})})}),r.jsx("button",{onClick:U=>{U.stopPropagation(),w(L),f(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit user",children:r.jsx(Jv,{className:"w-4 h-4"})}),r.jsx("button",{onClick:U=>{U.stopPropagation(),m(L),y(!0)},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete user",children:r.jsx(Ma,{className:"w-4 h-4"})})]})})]},L.id))})]})})}),u&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Create User"}),r.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:k.email,onChange:L=>N({...k,email:L.target.value}),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),r.jsx("input",{type:"password",value:k.password,onChange:L=>N({...k,password:L.target.value}),required:!0,minLength:6,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",value:k.full_name,onChange:L=>N({...k,full_name:L.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),r.jsxs("select",{value:k.role,onChange:L=>N({...k,role:L.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"read_only",children:"Read Only"}),r.jsx("option",{value:"maintainer",children:"Maintainer"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Create User"})]})]})]})}),g&&x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit User"}),r.jsx("button",{onClick:()=>{f(!1),w(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:P,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:x.email,disabled:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",value:x.full_name||"",onChange:L=>w({...x,full_name:L.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),r.jsxs("select",{value:x.role,onChange:L=>w({...x,role:L.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"read_only",children:"Read Only"}),r.jsx("option",{value:"maintainer",children:"Maintainer"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x.is_active,onChange:L=>w({...x,is_active:L.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{f(!1),w(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Save Changes"})]})]})]})}),v&&b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Delete User"}),r.jsx("button",{onClick:()=>{y(!1),m(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure you want to delete this user? This action cannot be undone."}),r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-400",children:b.full_name||"N/A"}),r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:b.email})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:()=>{y(!1),m(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete User"})]})]})})]})}function z1({log:e,onClose:t}){var o;const s=c=>c==null?"null":typeof c=="object"?JSON.stringify(c,null,2):String(c),a=c=>({"database.hostname":"Database Host","database.port":"Database Port","database.user":"Database User","database.password":"Database Password","database.dbname":"Database Name","database.server.name":"Server Name","table.include.list":"Included Tables","table.exclude.list":"Excluded Tables","connection.url":"Connection URL","connection.user":"Connection User",topics:"Kafka Topics","tasks.max":"Max Tasks","key.converter":"Key Converter","value.converter":"Value Converter",transforms:"Transforms",predicates:"Predicates"})[c]||c.split(".").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "),n=((o=e.metadata)==null?void 0:o.changes)||{},i=Object.keys(n).length>0,l=Object.keys(n).length;return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Change Details"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[l," field",l!==1?"s":""," modified"]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Js,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:e.action_type}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:e.action_description}),r.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:new Date(e.created_at).toLocaleString()})]})]})}),i&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent"}),r.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Modified Fields"}),r.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent"})]}),r.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([c,d])=>r.jsxs("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[r.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:a(c)})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-4",children:c})]}),r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("div",{className:"px-2 py-1 bg-red-100 dark:bg-red-900/30 rounded text-xs font-medium text-red-700 dark:text-red-400",children:"Old Value"})}),r.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:r.jsx("pre",{className:"text-sm text-red-800 dark:text-red-300 whitespace-pre-wrap break-all font-mono",children:s(d.old)})})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx(qs,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("div",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 rounded text-xs font-medium text-green-700 dark:text-green-400",children:"New Value"})}),r.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:r.jsx("pre",{className:"text-sm text-green-800 dark:text-green-300 whitespace-pre-wrap break-all font-mono",children:s(d.new)})})]})]})})]},c))})]})]}),r.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})})}function B1(){var U;const{userId:e}=sc(),t=tt(),{hasRole:s,user:a}=qt(),{showToast:n}=St(),[i,l]=p.useState(null),[o,c]=p.useState(null),[d,u]=p.useState([]),[h,g]=p.useState(!0),[f,x]=p.useState("all"),[w,v]=p.useState(null),[y,b]=p.useState(!1),[m,k]=p.useState({full_name:"",role:"read_only",change_email:!1,new_email:"",change_password:!1,new_password:""});p.useEffect(()=>{if(!s("admin")){t("/pipelines");return}e&&(N(),S(),_())},[e,s,t]);const N=async()=>{try{g(!0);const{data:O,error:q}=await H.from("user_profiles").select("*").eq("id",e).maybeSingle();if(q)throw q;l(O)}catch(O){console.error("Error fetching user:",O),n("error","Failed to load user details")}finally{g(!1)}},S=async()=>{try{const{count:O}=await H.from("pipelines").select("*",{count:"exact",head:!0}).eq("user_id",e),{count:q}=await H.from("pipelines").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","running"),{count:$}=await H.from("user_activity_logs").select("*",{count:"exact",head:!0}).eq("user_id",e),{data:C}=await H.from("user_activity_logs").select("created_at").eq("user_id",e).eq("action_type","auth.login").order("created_at",{ascending:!1}).limit(1).maybeSingle();c({total_pipelines:O||0,active_pipelines:q||0,total_activities:$||0,last_login:(C==null?void 0:C.created_at)||null})}catch(O){console.error("Error fetching stats:",O)}},_=async()=>{try{g(!0);let O=H.from("user_activity_logs").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(100);f!=="all"&&(O=O.ilike("action_type",`${f}%`));const{data:q,error:$}=await O;if($)throw $;u(q||[])}catch(O){console.error("Error fetching activities:",O),n("error","Failed to load activity logs")}finally{g(!1)}};p.useEffect(()=>{e&&_()},[f]);const P=async()=>{if(i)try{const O=!i.is_active,{error:q}=await H.from("user_profiles").update({is_active:O}).eq("id",i.id);if(q)throw q;l({...i,is_active:O}),n("success",`User ${O?"activated":"deactivated"} successfully`)}catch(O){console.error("Error updating user status:",O),n("error",O.message||"Failed to update user status")}},A=async O=>{if(O.preventDefault(),!!i)try{const{data:q}=await H.auth.getSession();if(!q.session)throw new Error("Not authenticated");const $={user_id:i.id,full_name:m.full_name,role:m.role};m.change_email&&m.new_email&&($.new_email=m.new_email),m.change_password&&m.new_password&&($.new_password=m.new_password);const C=await fetch("http://127.0.0.1:54321/functions/v1/admin-users",{method:"PUT",headers:{Authorization:`Bearer ${q.session.access_token}`,"Content-Type":"application/json"},body:JSON.stringify($)});if(!C.ok){const D=await C.json();throw new Error(D.error||"Failed to update user")}const M={...i,full_name:m.full_name,role:m.role,email:m.change_email?m.new_email:i.email};l(M),b(!1),n("success","User updated successfully")}catch(q){console.error("Error updating user:",q),n("error",q.message||"Failed to update user")}},R=()=>{i&&(k({full_name:i.full_name||"",role:i.role,change_email:!1,new_email:"",change_password:!1,new_password:""}),b(!0))},E=O=>O.startsWith("auth.")?r.jsx(Dn,{className:"w-4 h-4"}):O.startsWith("pipeline.")?r.jsx(Ve,{className:"w-4 h-4"}):O.startsWith("user.")?r.jsx(ru,{className:"w-4 h-4"}):r.jsx(Mr,{className:"w-4 h-4"}),Y=O=>O.includes("create")?"text-green-600 bg-green-50 dark:bg-green-900/30":O.includes("delete")?"text-red-600 bg-red-50 dark:bg-red-900/30":O.includes("update")?"text-blue-600 bg-blue-50 dark:bg-blue-900/30":O.includes("login")?"text-purple-600 bg-purple-50 dark:bg-purple-900/30":"text-gray-600 bg-gray-50 dark:bg-gray-900/30",L=O=>{switch(O){case"admin":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"maintainer":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"read_only":return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}};return i?r.jsxs("div",{className:"h-screen flex flex-col p-8",children:[r.jsxs("div",{className:"mb-6 flex-shrink-0",children:[r.jsxs("button",{onClick:()=>t("/admin/users"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-4",children:[r.jsx(Ia,{className:"w-4 h-4"}),"Back to Users"]}),r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:((U=i.full_name)==null?void 0:U.charAt(0))||i.email.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:i.full_name||"N/A"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:i.email}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${L(i.role)}`,children:i.role}),r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${i.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:i.is_active?"Active":"Inactive"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>setShowAddAlertModal(!0),className:"flex items-center gap-2 px-4 py-2 border border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[r.jsx(vr,{className:"w-4 h-4"}),"Add Alert"]}),r.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx(Uv,{className:"w-4 h-4"}),"Edit"]}),r.jsx("button",{onClick:P,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${i.is_active?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:i.is_active?r.jsxs(r.Fragment,{children:[r.jsx(Ov,{className:"w-4 h-4"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(kr,{className:"w-4 h-4"}),"Activate"]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 flex-shrink-0",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pipelines"}),r.jsx(Ve,{className:"w-5 h-5 text-blue-600"})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:(o==null?void 0:o.total_pipelines)||0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Pipelines"}),r.jsx(Mr,{className:"w-5 h-5 text-green-600"})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:(o==null?void 0:o.active_pipelines)||0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Activities"}),r.jsx(Mr,{className:"w-5 h-5 text-purple-600"})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:(o==null?void 0:o.total_activities)||0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Login"}),r.jsx(nr,{className:"w-5 h-5 text-orange-600"})]}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:o!=null&&o.last_login?new Date(o.last_login).toLocaleDateString():"Never"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 mb-6 shadow-sm flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"User Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(eu,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),r.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:i.email})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ru,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full Name"}),r.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:i.full_name||"N/A"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Dn,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Role"}),r.jsx("p",{className:"text-gray-900 dark:text-gray-100 capitalize",children:i.role})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(La,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),r.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:new Date(i.created_at).toLocaleDateString()})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm flex flex-col flex-1 min-h-0",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Activity History"}),r.jsxs("select",{value:f,onChange:O=>x(O.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"all",children:"All Activities"}),r.jsx("option",{value:"auth",children:"Authentication"}),r.jsx("option",{value:"pipeline",children:"Pipelines"}),r.jsx("option",{value:"user",children:"User Actions"})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:h?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Le,{className:"w-8 h-8 animate-spin text-blue-600"})}):d.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Mr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No activity logs found"})]}):r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:d.map(O=>{var q,$;return r.jsxs("div",{className:`flex items-center gap-3 px-6 py-3 transition-colors ${O.action_type.includes("update")&&Object.keys(((q=O.metadata)==null?void 0:q.changes)||{}).length>0?"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,onClick:()=>{var C;O.action_type.includes("update")&&Object.keys(((C=O.metadata)==null?void 0:C.changes)||{}).length>0&&v(O)},children:[r.jsx("div",{className:`p-1.5 rounded-lg flex-shrink-0 ${Y(O.action_type)}`,children:E(O.action_type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:O.action_type}),r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0",children:new Date(O.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:O.action_description})]}),O.action_type.includes("update")&&Object.keys((($=O.metadata)==null?void 0:$.changes)||{}).length>0&&r.jsx(cr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"})]},O.id)})})})]}),w&&r.jsx(z1,{log:w,onClose:()=>v(null)}),showAddAlertModal&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Add Alert Recipient"}),r.jsx("button",{onClick:()=>{setShowAddAlertModal(!1),setSelectedPipelineId("")},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:r.jsx(He,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User"}),r.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(i==null?void 0:i.full_name)||"N/A"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:i==null?void 0:i.email})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pipeline"}),r.jsxs("select",{value:selectedPipelineId,onChange:O=>setSelectedPipelineId(O.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Select a pipeline"}),pipelines.map(O=>r.jsxs("option",{value:O.id,children:[O.name," (",O.status,")"]},O.id))]}),r.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Select which pipeline this user should receive alerts for"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs("button",{onClick:handleAddAlert,disabled:!selectedPipelineId||addingAlert,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[addingAlert&&r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Add Alert"]}),r.jsx("button",{onClick:()=>{setShowAddAlertModal(!1),setSelectedPipelineId("")},className:"flex-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"})]})]})]})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Edit User"}),r.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:r.jsx(He,{className:"w-6 h-6"})})]}),r.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",required:!0,value:m.full_name,onChange:O=>k({...m,full_name:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),r.jsxs("select",{value:m.role,onChange:O=>k({...m,role:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"read_only",children:"Read Only"}),r.jsx("option",{value:"maintainer",children:"Maintainer"}),r.jsx("option",{value:"admin",children:"Admin"})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.change_email,onChange:O=>k({...m,change_email:O.target.checked,new_email:""}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change Email"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.change_password,onChange:O=>k({...m,change_password:O.target.checked,new_password:""}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change Password"})]})]}),m.change_email&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Email"}),r.jsx("input",{type:"email",required:!0,value:m.new_email,onChange:O=>k({...m,new_email:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new email"})]}),m.change_password&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),r.jsx("input",{type:"password",required:!0,value:m.new_password,onChange:O=>k({...m,new_password:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",minLength:6}),r.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Minimum 6 characters"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Save Changes"}),r.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(Le,{className:"w-8 h-8 animate-spin text-blue-600"})})}function q1(){const{hasRole:e}=qt(),{showToast:t}=St(),[s,a]=p.useState([]),[n,i]=p.useState(!0),[l,o]=p.useState(""),[c,d]=p.useState("all"),[u,h]=p.useState("all"),[g,f]=p.useState(new Set),[x,w]=p.useState(null);p.useEffect(()=>{v();const A=H.channel("user_activity_logs_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_activity_logs"},()=>{v()}).subscribe();return()=>{A.unsubscribe()}},[]);const v=async()=>{try{i(!0);let A=H.from("user_activity_logs").select(`
          *,
          user_profiles!user_activity_logs_user_id_fkey (
            email,
            full_name
          )
        `).order("created_at",{ascending:!1}).limit(500);const{data:R,error:E}=await A;if(E)throw E;const Y=(R||[]).map(L=>{var U,O;return{...L,user_email:((U=L.user_profiles)==null?void 0:U.email)||"Unknown",user_name:((O=L.user_profiles)==null?void 0:O.full_name)||"Unknown User"}});a(Y)}catch(A){console.error("Error fetching logs:",A),t("error","Failed to load activity logs")}finally{i(!1)}},y=A=>A.includes("create")||A.includes("login")?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":A.includes("delete")||A.includes("logout")?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":A.includes("update")?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",b=A=>A.includes("create")?"":A.includes("delete")?"":A.includes("update")?"":A.includes("login")?"":A.includes("logout")?"":"",m=()=>{const A=[["Timestamp","User","Action Type","Description","Resource Type","Resource ID"].join(","),...N.map(L=>[new Date(L.created_at).toISOString(),L.user_email,L.action_type,`"${L.action_description}"`,L.resource_type||"",L.resource_id||""].join(","))].join(`
`),R=new Blob([A],{type:"text/csv"}),E=window.URL.createObjectURL(R),Y=document.createElement("a");Y.href=E,Y.download=`activity-logs-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(E),t("success","Logs exported successfully")},k=A=>{if(u==="all")return!0;const R=new Date(A.created_at),E=new Date;switch(u){case"today":return R.toDateString()===E.toDateString();case"week":const Y=new Date(E.getTime()-7*24*60*60*1e3);return R>=Y;case"month":const L=new Date(E.getTime()-30*24*60*60*1e3);return R>=L;default:return!0}},N=s.filter(A=>{var L;const R=A.action_description.toLowerCase().includes(l.toLowerCase())||A.action_type.toLowerCase().includes(l.toLowerCase())||((L=A.user_email)==null?void 0:L.toLowerCase().includes(l.toLowerCase())),E=c==="all"||A.action_type.startsWith(c),Y=k(A);return R&&E&&Y}),S=Array.from(new Set(s.map(A=>A.action_type.split(".")[0]))).sort(),_=(()=>{const R=[];for(const E of N){if(E.resource_type!=="pipeline"||!E.resource_id){R.push({mainLog:E,subLogs:[]});continue}const Y=new Date(E.created_at).getTime();let L=!1;for(const U of R){if(U.mainLog.resource_id!==E.resource_id)continue;if(new Date(U.mainLog.created_at).getTime(),[U.mainLog,...U.subLogs].some($=>Math.abs(new Date($.created_at).getTime()-Y)<3e5)){E.action_type==="pipeline.view"&&U.mainLog.action_type!=="pipeline.view"?(U.subLogs.push(U.mainLog),U.mainLog=E):U.subLogs.push(E),L=!0;break}}L||R.push({mainLog:E,subLogs:[]})}return R.forEach(E=>{E.subLogs.sort((Y,L)=>new Date(L.created_at).getTime()-new Date(Y.created_at).getTime())}),R})(),P=A=>{const R=new Set(g);R.has(A)?R.delete(A):R.add(A),f(R)};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Activity Logs"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("admin")?"View all system activity":"View your activity history"})]}),r.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[r.jsx(Ko,{className:"w-5 h-5"}),"Export Logs"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search logs...",value:l,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(y0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsxs("select",{value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 appearance-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Actions"}),S.map(A=>r.jsx("option",{value:A,children:A.charAt(0).toUpperCase()+A.slice(1)},A))]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(La,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsxs("select",{value:u,onChange:A=>h(A.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 appearance-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"Last 7 Days"}),r.jsx("option",{value:"month",children:"Last 30 Days"})]})]})]}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Mr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-400",children:["Showing ",N.length," of ",s.length," logs"]}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-500 mt-1",children:"Activity logs are retained for audit and compliance purposes"})]})]})})]}),n?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Le,{className:"w-8 h-8 animate-spin text-blue-600"})}):N.length===0?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-12 text-center",children:[r.jsx(Mr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Activity Logs"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l||c!=="all"||u!=="all"?"No logs match your search criteria":"No activity logs have been recorded yet"})]}):r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map((A,R)=>{const{mainLog:E,subLogs:Y}=A,L=`${E.id}-${R}`,U=g.has(L),O=Y.length>0;return console.log("Rendering log row:",{id:E.id,action_type:E.action_type,has_metadata:E.metadata&&Object.keys(E.metadata).length>0,metadata_keys:E.metadata?Object.keys(E.metadata):[],should_show_badge:E.action_type.includes("update")&&Object.keys(E.metadata||{}).length>0}),r.jsxs("div",{children:[r.jsx("div",{className:`p-6 transition-colors ${E.action_type.includes("update")&&Object.keys(E.metadata||{}).length>0?"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,onClick:q=>{console.log(" LOG CARD CLICKED!",{action_type:E.action_type,has_metadata:!!E.metadata,metadata_keys:Object.keys(E.metadata||{}),metadata:E.metadata}),E.action_type.includes("update")&&Object.keys(E.metadata||{}).length>0?(console.log(" Opening modal for:",E.id),w(E)):console.log(" Not opening modal - conditions not met")},children:r.jsxs("div",{className:"flex items-start gap-4",children:[O&&r.jsx("button",{onClick:q=>{q.stopPropagation(),P(L)},className:"mt-1 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",children:U?r.jsx(rs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):r.jsx(cr,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("div",{className:"text-2xl",children:b(E.action_type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${y(E.action_type)}`,children:E.action_type}),O&&r.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:["+",Y.length," action",Y.length>1?"s":""]}),E.resource_type&&r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:E.resource_type}),E.action_type.includes("update")&&Object.keys(E.metadata||{}).length>0&&r.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:" Click for details"})]}),r.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:E.action_description})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(E.created_at).toLocaleString()})})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"User:"})," ",E.user_name||E.user_email]}),E.resource_id&&r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Resource ID:"})," ",E.resource_id.slice(0,8),"..."]})]}),Object.keys(E.metadata||{}).length>0&&r.jsxs("details",{className:"mt-3",onClick:q=>q.stopPropagation(),children:[r.jsx("summary",{className:"text-sm text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",children:"View raw metadata"}),r.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(E.metadata,null,2)})]})]})]})}),O&&U&&r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 border-l-4 border-blue-500",children:Y.map(q=>r.jsx("div",{className:"p-6 pl-16 hover:bg-gray-100 dark:hover:bg-gray-800/50 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-0",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"text-xl",children:b(q.action_type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${y(q.action_type)}`,children:q.action_type})}),r.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:q.action_description})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(q.created_at).toLocaleString()})})]}),Object.keys(q.metadata||{}).length>0&&r.jsxs("details",{className:"mt-3",onClick:$=>$.stopPropagation(),children:[r.jsx("summary",{className:"text-sm text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",children:"View raw metadata"}),r.jsx("pre",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(q.metadata,null,2)})]})]})]})},q.id))})]},L)})})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:A=>{A.target===A.currentTarget&&w(null)},children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Update Details"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:new Date(x.created_at).toLocaleString()})]}),r.jsx("button",{onClick:()=>w(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x.metadata&&r.jsxs("div",{className:"space-y-6",children:[x.metadata.pipeline_name&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Pipeline"}),r.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:x.metadata.pipeline_name})]}),x.metadata.connectors&&Array.isArray(x.metadata.connectors)&&r.jsx("div",{className:"space-y-4",children:x.metadata.connectors.map((A,R)=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${A.type==="source"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:A.type==="source"?"Source":"Sink"}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:A.name})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:A.connector_class}),A.changes&&Array.isArray(A.changes)&&A.changes.length>0?r.jsxs("div",{className:"space-y-3",children:[r.jsx("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Configuration Changes"}),A.changes.map((E,Y)=>r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 space-y-2",children:[r.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-gray-100",children:E.field}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Old Value"}),r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 p-2 rounded border border-red-200 dark:border-red-800",children:r.jsx("code",{className:"text-xs break-all",children:JSON.stringify(E.old_value)})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"New Value"}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 p-2 rounded border border-green-200 dark:border-green-800",children:r.jsx("code",{className:"text-xs break-all",children:JSON.stringify(E.new_value)})})]})]})]},Y))]}):r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(Fr,{className:"w-4 h-4"}),r.jsx("span",{children:"No configuration changes recorded"})]})]},R))})]})})]})})]})}function H1(){const e=tt(),{hasRole:t}=qt();p.useEffect(()=>{t("admin")||e("/pipelines")},[t,e]);const s=[{title:"Alert Preferences",description:"Configure alert notifications for pipelines, webhooks, and data events",icon:vr,path:"/admin/alerts",color:"bg-blue-500",stats:"Manage notifications"},{title:"User Management",description:"Manage users, roles, and permissions across the platform",icon:su,path:"/admin/users",color:"bg-green-500",stats:"Control access"}];return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Dn,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Admin Panel"})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage system settings, users, and alert configurations"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(a=>{const n=a.icon;return r.jsx("button",{onClick:()=>e(a.path),className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 p-6 text-left border border-gray-200 dark:border-gray-700 group",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`${a.color} p-3 rounded-lg text-white group-hover:scale-110 transition-transform`,children:r.jsx(n,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:a.title}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:a.description}),r.jsxs("div",{className:"inline-flex items-center text-sm font-medium text-blue-600 dark:text-blue-400",children:[a.stats,r.jsx("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},a.path)})})]})})}function V1(){const{showToast:e}=St(),{user:t}=qt(),[s,a]=p.useState([]),[n,i]=p.useState([]),[l,o]=p.useState(!0),[c,d]=p.useState(!1),[u,h]=p.useState(""),[g,f]=p.useState(""),[x,w]=p.useState(""),[v,y]=p.useState(new Set),[b,m]=p.useState(null),[k,N]=p.useState(!1),[S,_]=p.useState(!1);p.useEffect(()=>{P()},[]);const P=async()=>{await Promise.all([A(),R()])},A=async()=>{try{const{data:$,error:C}=await H.from("slack_webhooks").select("*").order("created_at",{ascending:!1});if(C)throw C;const M=await Promise.all(($||[]).map(async D=>{const{data:B,error:W}=await H.from("pipeline_slack_channels").select("pipeline_id, pipelines(id, name, status)").eq("slack_webhook_id",D.id),ie=W?[]:(B==null?void 0:B.map(te=>te.pipelines).filter(Boolean))||[];return{...D,pipeline_count:ie.length,assigned_pipelines:ie}}));a(M)}catch($){console.error("Failed to load Slack webhooks:",$),e("error","Failed to load Slack webhooks")}finally{o(!1)}},R=async()=>{try{const{data:$,error:C}=await H.from("pipelines").select("id, name, status").order("name");if(C)throw C;i($||[])}catch($){console.error("Failed to load pipelines:",$)}},E=async()=>{if(!u.trim()||!g.trim()){e("error","Please fill in required fields");return}_(!0);try{const{data:$,error:C}=await H.from("slack_webhooks").insert({name:u.trim(),webhook_url:g.trim(),description:x.trim()||null,created_by:t==null?void 0:t.id}).select().single();if(C)throw C;if(v.size>0){const B=Array.from(v).map(ie=>({pipeline_id:ie,slack_webhook_id:$.id})),{error:W}=await H.from("pipeline_slack_channels").insert(B);if(W)throw W}const M=v.size,D=M>0?`Slack webhook added and assigned to ${M} pipeline${M!==1?"s":""}`:"Slack webhook added successfully";e("success",D),d(!1),U(),A()}catch($){console.error("Failed to add Slack webhook:",$),e("error","Failed to add Slack webhook")}finally{_(!1)}},Y=async($,C)=>{if(confirm(`Are you sure you want to delete "${C}"?`))try{const{error:M}=await H.from("slack_webhooks").delete().eq("id",$);if(M)throw M;e("success","Slack webhook deleted"),A()}catch(M){console.error("Failed to delete Slack webhook:",M),e("error","Failed to delete Slack webhook")}},L=async $=>{m($.id);try{const{data:C,error:M}=await H.from("pipeline_slack_channels").select(`
          pipeline_id,
          pipelines (
            id,
            name,
            status
          )
        `).eq("slack_webhook_id",$.id);M&&console.error("Error fetching assigned pipelines:",M);const D=(C==null?void 0:C.map(te=>te.pipelines).filter(Boolean))||[],B=D.length>0?O(D):{text:" CDCStream Pipeline Status Report",blocks:[{type:"header",text:{type:"plain_text",text:" Pipeline Status Report",emoji:!0}},{type:"section",text:{type:"mrkdwn",text:`*Webhook:* ${$.name}
*Status:* No pipelines assigned to this webhook`}},{type:"context",elements:[{type:"mrkdwn",text:" Generated by CDCStream Monitoring System"}]}]},ie=await(await fetch("http://localhost:5002/api/slack/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({webhookUrl:$.webhook_url,message:B})})).json();ie.success?e("success","Test message sent successfully"):e("error",ie.error||"Failed to send test message")}catch(C){console.error("Failed to test webhook:",C),e("error","Failed to send test message")}finally{m(null)}},U=()=>{h(""),f(""),w(""),y(new Set)},O=$=>{const C=ie=>{switch(ie){case"running":return"";case"ready":return"";case"paused":return"";case"error":return"";case"idle":return"";case"seeding":return"";case"incremental":return"";case"draft":return"";default:return""}},M=$.filter(ie=>ie.status==="running").length;$.filter(ie=>ie.status==="paused").length;const D=$.filter(ie=>ie.status==="error").length;$.filter(ie=>ie.status==="ready").length;const B=[{type:"header",text:{type:"plain_text",text:" CDCStream Pipeline Status Report",emoji:!0}},{type:"section",fields:[{type:"mrkdwn",text:`*Total Pipelines*
${$.length}`},{type:"mrkdwn",text:`*Report Time*
${new Date().toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}`},{type:"mrkdwn",text:`*Running*
 ${M}`},{type:"mrkdwn",text:`*Issues*
${D>0?"":""} ${D}`}]},{type:"divider"}],W=$.reduce((ie,te)=>{const pe=te.status||"unknown";return ie[pe]||(ie[pe]=[]),ie[pe].push(te),ie},{});return Object.entries(W).forEach(([ie,te])=>{B.push({type:"section",text:{type:"mrkdwn",text:`*${C(ie)} ${ie.toUpperCase()} (${te.length})*
${te.map(pe=>` ${pe.name}`).join(`
`)}`}})}),B.push({type:"divider"},{type:"context",elements:[{type:"mrkdwn",text:" *CDCStream* | Real-time Data Pipeline Monitoring"}]}),{text:`Pipeline Status Report: ${$.length} pipelines - ${M} running, ${D} errors`,blocks:B,attachments:D>0?[{color:"#d32f2f",text:` ${D} pipeline${D!==1?"s":""} require${D===1?"s":""} attention`}]:[]}},q=async()=>{if(!g.trim()){e("error","Please enter a webhook URL");return}if(v.size===0){e("error","Please select at least one pipeline to test");return}N(!0);try{const $=n.filter(B=>v.has(B.id)),C=O($),D=await(await fetch("http://localhost:5002/api/slack/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({webhookUrl:g.trim(),message:C})})).json();D.success?e("success",`Test message sent successfully for ${$.length} pipeline(s)`):e("error",D.error||"Failed to send test message")}catch($){console.error("Failed to test webhook:",$),e("error","Failed to send test message")}finally{N(!1)}};return l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Le,{className:"w-8 h-8 animate-spin text-blue-600"})}):r.jsxs("div",{className:"flex-1 p-8",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 flex items-center gap-2",children:[r.jsx(Ur,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Slack Integrations"]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure Slack webhooks for alert notifications"})]}),r.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Vs,{className:"w-4 h-4"}),"Add Webhook"]})]}),r.jsx("div",{className:"p-6",children:s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ur,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No Slack webhooks configured"}),r.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Vs,{className:"w-4 h-4"}),"Add Your First Webhook"]})]}):r.jsx("div",{className:"space-y-4",children:s.map($=>r.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:$.name}),$.pipeline_count!==void 0&&$.pipeline_count>0&&r.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:[$.pipeline_count," pipeline",$.pipeline_count!==1?"s":""]})]}),$.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:$.description}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 font-mono bg-gray-50 dark:bg-gray-900 p-2 rounded",children:$.webhook_url}),$.assigned_pipelines&&$.assigned_pipelines.length>0&&r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Assigned to Pipelines:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:$.assigned_pipelines.map(C=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:C.name},C.id))})]}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Added ",new Date($.created_at).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("button",{onClick:()=>L($),disabled:b===$.id,className:"inline-flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b===$.id?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ng,{className:"w-4 h-4"}),"Test"]})}),r.jsxs("button",{onClick:()=>Y($.id,$.name),className:"inline-flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(Ma,{className:"w-4 h-4"}),"Delete"]})]})]})},$.id))})})]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:r.jsx(Ur,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Add Slack Webhook"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure a new Slack webhook for alerts"})]})]}),r.jsx("button",{onClick:()=>{d(!1),U()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u,onChange:$=>h($.target.value),placeholder:"e.g., Engineering Alerts",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Webhook URL ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"url",value:g,onChange:$=>f($.target.value),placeholder:"https://hooks.slack.com/services/...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),r.jsx("textarea",{value:x,onChange:$=>w($.target.value),placeholder:"e.g., Used for critical pipeline alerts",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign to Pipelines (Optional)"}),r.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 max-h-60 overflow-y-auto",children:n.length===0?r.jsx("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No pipelines available"}):r.jsx("div",{className:"p-3 space-y-2",children:n.map($=>r.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded cursor-pointer transition-colors",children:[r.jsx("input",{type:"checkbox",checked:v.has($.id),onChange:C=>{const M=new Set(v);C.target.checked?M.add($.id):M.delete($.id),y(M)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 flex-1",children:$.name})]},$.id))})}),v.size>0&&r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[v.size," pipeline",v.size!==1?"s":""," selected"]})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3",children:[r.jsx("button",{onClick:q,disabled:k||!g.trim()||v.size===0,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ng,{className:"w-4 h-4"}),"Test"]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>{d(!1),U()},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:E,disabled:S||!u.trim()||!g.trim(),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qo,{className:"w-4 h-4"}),"Add Webhook"]})})]})]})]})})]})}const W1=[{key:"pipeline_connectivity",label:"Pipeline Connectivity",description:"Alerts when pipeline connection is lost or restored"},{key:"pipeline_job_failures",label:"Pipeline Job Failures",description:"Alerts when pipeline jobs fail"},{key:"source_event_types",label:"Source Event Types",description:"Alerts about different source event types"},{key:"failed_events_summary",label:"Failed Events Summary",description:"Summary of failed events"},{key:"webhooks",label:"Webhooks",description:"Webhook-related alerts"},{key:"pipeline_loading_status",label:"Pipeline Loading Status",description:"Alerts about pipeline loading progress"},{key:"source_side_events",label:"Source Side Events",description:"Alerts from source-side events"},{key:"data_spike_alert",label:"Data Spike Alert",description:"Alerts when unusual data spikes are detected"}],G1=e=>({pipeline_id:e,pipeline_connectivity_slack:!1,pipeline_connectivity_dashboard:!1,pipeline_job_failures_slack:!1,pipeline_job_failures_dashboard:!1,source_event_types_slack:!1,source_event_types_dashboard:!1,failed_events_summary_slack:!1,failed_events_summary_dashboard:!1,webhooks_slack:!1,webhooks_dashboard:!1,pipeline_loading_status_slack:!1,pipeline_loading_status_dashboard:!1,source_side_events_slack:!1,source_side_events_dashboard:!1,data_spike_alert_slack:!1,data_spike_alert_dashboard:!1});function Q1(){const e=tt(),{user:t}=qt(),{showToast:s}=St(),[a,n]=p.useState("preferences"),[i,l]=p.useState(!0),[o,c]=p.useState(!1),[d,u]=p.useState([]),[h,g]=p.useState(""),[f,x]=p.useState(null),[w,v]=p.useState([]);p.useEffect(()=>{y()},[]),p.useEffect(()=>{h&&(b(),m())},[h]);const y=async()=>{try{const{data:_,error:P}=await H.from("pipelines").select("id, name").order("name");if(P)throw P;u(_||[]),_&&_.length>0&&!h&&g(_[0].id)}catch(_){console.error("Failed to load pipelines:",_),s("error","Failed to load pipelines")}finally{l(!1)}},b=async()=>{if(h)try{const{data:_,error:P}=await H.from("alert_preferences").select("*").eq("pipeline_id",h).maybeSingle();if(P)throw P;x(_||G1(h))}catch(_){console.error("Failed to load preferences:",_),s("error","Failed to load alert preferences")}},m=async()=>{if(h)try{const{data:_,error:P}=await H.from("pipeline_slack_channels").select(`
          id,
          slack_webhooks (
            id,
            name,
            description
          )
        `).eq("pipeline_id",h);if(P)throw P;const A=(_==null?void 0:_.map(R=>({id:R.slack_webhooks.id,name:R.slack_webhooks.name,description:R.slack_webhooks.description})))||[];v(A)}catch(_){console.error("Failed to load Slack channels:",_)}},k=(_,P)=>{if(!f)return;const A=`${_}_${P}`;x({...f,[A]:!f[A]})},N=async()=>{if(!(!f||!h)){c(!0);try{const _={...f,pipeline_id:h,created_by:t==null?void 0:t.id},{error:P}=await H.from("alert_preferences").upsert(_,{onConflict:"pipeline_id"});if(P)throw P;s("success","Alert preferences saved successfully")}catch(_){console.error("Failed to save preferences:",_),s("error","Failed to save preferences",_.message)}finally{c(!1)}}},S=d.find(_=>_.id===h);return i?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(Le,{className:"w-8 h-8 animate-spin text-blue-600"})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e("/admin"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(Ia,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(vr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Alert Settings"]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure alert preferences for your pipelines"})]})]})}),r.jsxs("div",{className:"flex gap-4 mt-6",children:[r.jsxs("button",{onClick:()=>n("preferences"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a==="preferences"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(Gi,{className:"w-4 h-4 inline-block mr-2"}),"Alert Preferences"]}),r.jsxs("button",{onClick:()=>n("slack"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a==="slack"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(Ur,{className:"w-4 h-4 inline-block mr-2"}),"Slack Integrations"]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a==="preferences"?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pipeline"}),r.jsx("select",{value:h,onChange:_=>g(_.target.value),className:"w-full max-w-md px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:d.map(_=>r.jsx("option",{value:_.id,children:_.name},_.id))}),S&&w.length>0&&r.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ur,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Assigned Slack Channels"}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.map(_=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 text-xs font-medium rounded-full border border-blue-200 dark:border-blue-700",children:["#",_.name]},_.id))}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"Alerts will be sent to these channels when enabled below"})]})]})}),S&&w.length===0&&r.jsx("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:r.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["No Slack channels assigned to this pipeline. Slack alerts will not be sent.",r.jsx("button",{onClick:()=>e(`/pipelines/${h}`),className:"ml-2 text-amber-600 dark:text-amber-400 underline hover:no-underline",children:"Assign channels"})]})})]}),f&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:['Defined Alarms for "',S==null?void 0:S.name,'"']}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure alert types for this pipeline. Alarms will be sent to assigned Slack channels."})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Alert Type"}),r.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[r.jsx(Ur,{className:"w-4 h-4 inline-block mr-1"}),"Slack"]}),r.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[r.jsx(b0,{className:"w-4 h-4 inline-block mr-1"}),"Dashboard"]})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:W1.map(_=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:_.label}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:_.description})]})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>k(_.key,"slack"),className:`inline-flex items-center justify-center w-12 h-6 rounded-full transition-colors ${f[`${_.key}_slack`]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block w-4 h-4 rounded-full bg-white transform transition-transform ${f[`${_.key}_slack`]?"translate-x-3":"-translate-x-3"}`})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>k(_.key,"dashboard"),className:`inline-flex items-center justify-center w-12 h-6 rounded-full transition-colors ${f[`${_.key}_dashboard`]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block w-4 h-4 rounded-full bg-white transform transition-transform ${f[`${_.key}_dashboard`]?"translate-x-3":"-translate-x-3"}`})})})]},_.key))})]})}),r.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{onClick:N,disabled:o,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qo,{className:"w-4 h-4"}),"Save Settings"]})})})]})]}):r.jsx(V1,{})})]})}function K1({currentStep:e,steps:t,onStepClick:s}){return r.jsx("div",{className:"bg-white border-b border-gray-200 px-8 py-6",children:r.jsx("div",{className:"flex items-center justify-center gap-8",children:t.map((a,n)=>{const i=n+1,l=i<e,o=i===e;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{onClick:()=>s==null?void 0:s(i),className:`cursor-pointer w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${l?"bg-green-600 text-white":o?"bg-blue-600 text-white ring-4 ring-blue-200":"bg-gray-300 text-gray-600"}`,children:i}),r.jsx("div",{className:`text-sm font-medium ${o?"text-blue-600":"text-gray-600"}`,children:a}),n<t.length-1&&r.jsx("div",{className:`w-12 h-1 mx-4 ${l?"bg-green-600":"bg-gray-300"}`})]},n)})})})}const zl=[{id:"oracle",name:"Oracle",logo:"/logos/oracle.svg",category:"Relational Databases",connector:"io.debezium.connector.oracle.OracleConnector",description:"Oracle Database"},{id:"postgres",name:"PostgreSQL",logo:"/logos/postgresql.svg",category:"Relational Databases",connector:"io.debezium.connector.postgresql.PostgresConnector",description:"PostgreSQL Database"},{id:"mysql",name:"MySQL",logo:"/logos/mysql.svg",category:"Relational Databases",connector:"io.debezium.connector.mysql.MySqlConnector",description:"MySQL Database"},{id:"mariadb",name:"MariaDB",logo:"/logos/mariadb.svg",category:"Relational Databases",connector:"io.debezium.connector.mysql.MySqlConnector",description:"MariaDB Database"},{id:"sqlserver",name:"SQL Server",logo:"/logos/sqlserver.svg",category:"Relational Databases",connector:"io.debezium.connector.sqlserver.SqlServerConnector",description:"Microsoft SQL Server"},{id:"db2",name:"IBM Db2",logo:"/logos/db2.svg",category:"Relational Databases",connector:"io.debezium.connector.db2.Db2Connector",description:"IBM Db2 Database"},{id:"snowflake",name:"Snowflake",logo:"/logos/snowflake.svg",category:"Cloud Data Warehouses",description:"Snowflake Data Warehouse"},{id:"bigquery",name:"BigQuery",logo:"/logos/bigquery.svg",category:"Cloud Data Warehouses",description:"Google BigQuery"},{id:"redshift",name:"Redshift",logo:"/logos/redshift.svg",category:"Cloud Data Warehouses",description:"Amazon Redshift"},{id:"azure-synapse",name:"Azure Synapse",logo:"/logos/azure.svg",category:"Cloud Data Warehouses",description:"Azure Synapse Analytics"},{id:"mongodb",name:"MongoDB",logo:"/logos/mongodb.svg",category:"NoSQL Databases",connector:"io.debezium.connector.mongodb.MongoDbConnector",description:"MongoDB Database"},{id:"cassandra",name:"Cassandra",logo:"/logos/cassandra.svg",category:"NoSQL Databases",description:"Apache Cassandra"},{id:"couchbase",name:"Couchbase",logo:"/logos/couchbase.svg",category:"NoSQL Databases",description:"Couchbase Server"},{id:"dynamodb",name:"DynamoDB",logo:"/logos/dynamodb.svg",category:"NoSQL Databases",description:"Amazon DynamoDB"},{id:"redis",name:"Redis",logo:"/logos/redis.svg",category:"Key-Value & Cache",description:"Redis Cache"},{id:"neo4j",name:"Neo4j",logo:"/logos/neo4j.svg",category:"Graph Databases",description:"Neo4j Graph Database"},{id:"elasticsearch",name:"Elasticsearch",logo:"/logos/elasticsearch.svg",category:"Search & Analytics",description:"Elasticsearch"},{id:"kafka",name:"Kafka",logo:"/logos/kafka.svg",category:"Event Streaming",description:"Apache Kafka"}];function J1({onSelectSource:e,onBack:t}){const[s,a]=p.useState(""),[n,i]=p.useState(null),l=Array.from(new Set(zl.map(d=>d.category))).sort(),o=zl.filter(d=>{var g;const u=s===""||d.name.toLowerCase().includes(s.toLowerCase())||((g=d.description)==null?void 0:g.toLowerCase().includes(s.toLowerCase())),h=!n||d.category===n;return u&&h}),c=l.reduce((d,u)=>{const h=o.filter(g=>g.category===u);return h.length>0&&(d[u]=h),d},{});return r.jsxs("div",{className:"p-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium",children:[r.jsx(Ia,{className:"w-4 h-4"}),"Back"]}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select Source Type"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Select the Source you want to bring data from"}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"relative",children:[r.jsx(_r,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search Source Types",value:s,onChange:d=>a(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),r.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[r.jsxs("button",{onClick:()=>i(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n===null?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All Sources (",zl.length,")"]}),l.map(d=>{const u=zl.filter(h=>h.category===d).length;return r.jsxs("button",{onClick:()=>i(d),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d," (",u,")"]},d)})]}),Object.keys(c).length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(_r,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sources found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]}):r.jsx("div",{className:"space-y-8",children:Object.entries(c).map(([d,u])=>r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:d}),r.jsx("div",{className:"h-px flex-1 bg-gray-200"}),r.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[u.length," ",u.length===1?"source":"sources"]})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:u.map(h=>r.jsxs("button",{onClick:()=>e(h.id),className:"group flex flex-col items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:shadow-lg transition-all duration-200 relative",children:[h.connector&&r.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full",title:"Debezium connector available"}),r.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:r.jsx("img",{src:h.logo,alt:h.name,className:"w-full h-full object-contain transition-transform group-hover:scale-110",onError:g=>{const f=g.target;f.style.display="none";const x=f.parentElement;if(x){const w=document.createElement("div");w.className="text-blue-600",w.innerHTML='<svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"><path d="M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"></path><path d="M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"></path><path d="M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"></path></svg>',x.appendChild(w)}}})}),r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:h.name}),h.description&&r.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:h.description})]})]},h.id))})]},d))})]})}function Y1({sourceType:e}){const t=tt(),s=bt(),[a,n]=p.useState("change-tracking"),i=()=>{t("/pipelines/new/source")},l=()=>{t("/pipelines/new/pipeline-type",{state:{...s.state,pipelineMode:a}})},c=[{id:"change-tracking",title:"Change Tracking",badge:"Recommended",description:"Data is ingested using database's Change Tracking mode. To use this, you will need to enable Change Tracking on tables.",available:e==="sqlserver"},{id:"log-based",title:"Log-Based (CDC)",badge:"Recommended",description:"Data is ingested using database logs (Write-Ahead Logs for PostgreSQL). This captures all changes including inserts, updates, and deletes in real-time.",available:e==="postgres"||e==="oracle"},{id:"table",title:"Table",badge:"",description:"Data is ingested by running SQL queries on your tables. This mode provides change data capture through modified/updated timestamp columns. Deletes are not replicated to the Destination.",available:!0},{id:"custom-sql",title:"Custom SQL",badge:"",description:"Data is ingested by running a custom SQL query provided by you on the database. With this mode, you can replicate database views or selective data sets queried through the SQL query. Deletes are not replicated to the Destination.",available:!0}].filter(d=>d.available);return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-8",children:r.jsxs("div",{className:"w-full max-w-3xl",children:[r.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium",children:[r.jsx(Ia,{className:"w-4 h-4"}),"Back"]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("span",{className:"text-2xl",children:""}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Pipeline Mode"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Define how your source data will be captured and ingested."})]}),r.jsx("div",{className:"space-y-4 mb-8",children:c.map(d=>r.jsx("label",{className:`block p-6 bg-white dark:bg-gray-800 border-2 rounded-lg cursor-pointer transition-all ${a===d.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700 hover:border-blue-300"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"radio",name:"pipeline-mode",value:d.id,checked:a===d.id,onChange:u=>n(u.target.value),className:"mt-1 w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:d.title}),d.badge&&r.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:d.badge})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.description})]})]})},d.id))}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:l,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Continue"})})]})})}function X1({sourceType:e}){const t=tt(),s=bt(),a=s.state,n=(a==null?void 0:a.sourceType)||e||"your source",[i,l]=p.useState("edge"),o=()=>{t("/pipelines/new/pipeline-mode",{state:s.state})},c=()=>{t("/pipelines/new/source-config",{state:{...a,pipelineType:i}})};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-8",children:r.jsxs("div",{className:"w-full max-w-3xl",children:[r.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium",children:[r.jsx(Ia,{className:"w-4 h-4"}),"Back"]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("span",{className:"text-2xl",children:""}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Pipeline Type"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Choose the pipeline mode that best fits your performance and flexibility needs for ",n,"."]})]}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsx("label",{className:`block p-6 bg-white dark:bg-gray-800 border-2 rounded-lg cursor-pointer transition-all ${i==="edge"?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700 hover:border-blue-300"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"radio",name:"pipeline-type",value:"edge",checked:i==="edge",onChange:d=>l(d.target.value),className:"mt-1 w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Edge"}),r.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:"Recommended"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New batch based engine offering higher throughput, control and observability with increased support for all new database versions and capabilities."})]})]})}),r.jsx("label",{className:`block p-6 bg-white dark:bg-gray-800 border-2 rounded-lg cursor-pointer transition-all ${i==="standard"?"border-blue-500 bg-blue-50 dark:bg-blue-900/10":"border-gray-200 dark:border-gray-700 hover:border-blue-300"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"radio",name:"pipeline-type",value:"standard",checked:i==="standard",onChange:d=>l(d.target.value),className:"mt-1 w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Standard"})}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Legacy pipelines with moderate performance, use this only if you intend to use existing naming convention, structure or pre-load transformations."})]})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Continue"})})]})})}function Te({code:e,language:t="sql",title:s}){const[a,n]=p.useState(!1),i=async()=>{await navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),2e3)};return r.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950 rounded-lg overflow-hidden border border-gray-700",children:[s&&r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 dark:bg-gray-900 border-b border-gray-700",children:[r.jsx("span",{className:"text-sm font-medium text-gray-300",children:s}),r.jsx("span",{className:"text-xs text-gray-500 uppercase",children:t})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:i,className:"absolute top-3 right-3 p-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Copy code",children:a?r.jsx(Qo,{className:"w-4 h-4 text-green-400"}):r.jsx(Fv,{className:"w-4 h-4 text-gray-400"})}),r.jsx("pre",{className:"p-4 overflow-x-auto text-sm text-gray-100 font-mono",children:r.jsx("code",{children:e})})]})]})}function Z1({results:e,connectionName:t,isValidating:s=!1,currentStep:a="",onRetry:n}){const i=[{id:"hostname",label:"Validating hostname"},{id:"host",label:"Connecting to host"},{id:"database",label:"Connecting to database"},{id:"credentials",label:"Validating user credentials"},{id:"permissions",label:"Checking user permissions"},{id:"configurations",label:"Checking configurations"}],l=u=>{if(s){const g=i.findIndex(x=>x.id===a),f=i.findIndex(x=>x.id===u);return f<g?"success":f===g?"loading":"pending"}const h=e.find(g=>g.check_name.toLowerCase().includes(u));return h?h.status==="passed"?"success":"error":"pending"},o=u=>{const h=e.find(g=>g.check_name.toLowerCase().includes(u));return h&&h.status==="failed"?h.message:null},c=u=>{switch(u){case"success":return r.jsx(Zd,{className:"w-5 h-5 text-green-600 dark:text-green-500"});case"error":return r.jsx(Ws,{className:"w-5 h-5 text-red-600 dark:text-red-500"});case"loading":return r.jsx(Le,{className:"w-5 h-5 text-blue-600 dark:text-blue-500 animate-spin"});case"pending":return r.jsx(Zd,{className:"w-5 h-5 text-gray-300 dark:text-gray-600"})}},d=u=>{switch(u){case"success":return"text-gray-700 dark:text-gray-300";case"error":return"text-gray-900 dark:text-gray-100 font-semibold";case"loading":return"text-gray-900 dark:text-gray-100 font-semibold";case"pending":return"text-gray-400 dark:text-gray-500"}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-blue-200 dark:border-blue-800 p-6",children:r.jsx("div",{className:"space-y-4",children:i.map((u,h)=>{const g=l(u.id),f=o(u.id);return r.jsx("div",{children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:c(g)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`text-base ${d(g)}`,children:u.label}),f&&g==="error"&&r.jsx("div",{className:"mt-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-red-900 dark:text-red-200",children:["FATAL: ",f," ",r.jsxs("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline inline-flex items-center gap-1",onClick:x=>x.preventDefault(),children:["Learn More ",r.jsx(cr,{className:"w-4 h-4"})]})]})})]})]})},u.id)})})}),!s&&e.length>0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.filter(u=>u.status==="passed").length," of ",i.length," checks passed"]}),e.some(u=>u.status==="failed")&&n&&r.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",onClick:n,children:"Retry Connection"})]})]})}function e2(){const[e,t]=p.useState(!1),[s,a]=p.useState(null);return{testConnection:async i=>{t(!0),a(null);try{const l="http://127.0.0.1:54321",o="sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH",c="http://127.0.0.1:5001",d=i.connectionType==="oracle";let u;if(d){const g={...i,serviceName:i.serviceName||i.database};u=await fetch(`${c}/api/test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})}else u=await fetch(`${l}/functions/v1/test-connection`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(i)});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const h=await u.json();return a(h),h}catch(l){const o={success:!1,error:l instanceof Error?l.message:"Unknown error occurred"};return a(o),o}finally{t(!1)}},testing:e,result:s}}function oc(e){const t=(e??"source").trim();return t.toLowerCase().endsWith("_source")?t:`${t}_source`}function Ig(e,t){return e==="oracle-xe"?{host:"127.0.0.1",port:1521}:{host:e,port:t}}function t2({sourceType:e}){const t=tt(),s=bt(),{showToast:a}=St(),{testConnection:n,testing:i,result:l}=e2(),[o,c]=p.useState([]),[d,u]=p.useState(!1),[h,g]=p.useState(""),[f,x]=p.useState(!1),[w,v]=p.useState(!1),[y,b]=p.useState(!1),[m,k]=p.useState(!1),[N,S]=p.useState([]),[_,P]=p.useState(""),[A,R]=p.useState(!1),[E,Y]=p.useState({name:"",host:"",port:e==="oracle"?1521:e==="postgres"?5432:1433,database_name:"",service_name:"",schema_name:e==="sqlserver"?"dbo":"public",username:"",password:"",ssh_tunnel:!1,use_ssl:!1,poll_interval:500,query_fetch_size:1e4,long_transaction_window:5,load_all_schemas:!1,online_catalog:!1,archive_log_only:!1,load_historical_data:!1,merge_tables:!1,include_new_tables:!1});function L(M){return M==="postgres"?"postgresql":M==="sqlserver"?"sqlserver":M}p.useEffect(()=>{const M=async()=>{const{data:B}=await H.from("pipelines").select("id, name, source_type, source_config").eq("source_type",e).order("created_at",{ascending:!1});B&&S(B)},D=async()=>{const W=new URLSearchParams(s.search).get("resume");if(W){const{data:ie}=await H.from("pipelines").select("id, name, source_type, source_config").eq("id",W).maybeSingle();if(ie&&ie.source_config){const te=ie.source_config;Y({name:ie.name,host:te.host||"",port:te.port||(e==="oracle"?1521:e==="postgres"?5432:1433),database_name:te.database_name||"",service_name:te.service_name||"",schema_name:te.schema_name||(e==="sqlserver"?"dbo":"public"),username:te.username||"",password:"",ssh_tunnel:te.ssh_tunnel||!1,use_ssl:te.use_ssl||!1,poll_interval:te.poll_interval||500,query_fetch_size:te.query_fetch_size||1e4,long_transaction_window:te.long_transaction_window||5,load_all_schemas:te.load_all_schemas||!1,online_catalog:te.online_catalog||!1,archive_log_only:te.archive_log_only||!1,load_historical_data:te.load_historical_data||!1,merge_tables:te.merge_tables||!1,include_new_tables:te.include_new_tables||!1})}}};M(),D()},[e,s.search]);const U=M=>{const D=M.target.value;if(P(D),!D)return;const B=N.find(W=>W.id===D);if(B&&B.source_config){const W=B.source_config;Y({name:`${B.name} (Copy)`,host:W.host||"",port:W.port||(e==="oracle"?1521:e==="postgres"?5432:1433),database_name:W.database_name||"",service_name:W.service_name||"",schema_name:W.schema_name||(e==="sqlserver"?"dbo":"public"),username:W.username||"",password:"",ssh_tunnel:W.ssh_tunnel||!1,use_ssl:W.use_ssl||!1,poll_interval:W.poll_interval||500,query_fetch_size:W.query_fetch_size||1e4,long_transaction_window:W.long_transaction_window||5,load_all_schemas:W.load_all_schemas||!1,online_catalog:W.online_catalog||!1,archive_log_only:W.archive_log_only||!1,load_historical_data:W.load_historical_data||!1,merge_tables:W.merge_tables||!1,include_new_tables:W.include_new_tables||!1})}},O=M=>{const{name:D,value:B,type:W}=M.target,ie=M.target.checked;Y(te=>({...te,[D]:W==="checkbox"?ie:["port","poll_interval","query_fetch_size","long_transaction_window"].includes(D)?parseInt(B)||0:B}))},q=async()=>{var ie,te,pe,K;if(!E.host.trim()){a("error","Host is required");return}if(!E.username.trim()){a("error","Username is required");return}if(!E.password.trim()){a("error","Password is required");return}if(e==="oracle"&&!E.service_name.trim()&&!E.database_name.trim()){a("error","Oracle kaynaklar iin Service Name ya da Database Name gerekli");return}u(!0),c([]);const M=["hostname","host","database","credentials","permissions","configurations"],D=[];for(const ae of M)g(ae),await new Promise(de=>setTimeout(de,500));const B={connectionType:L(e),host:E.host,port:E.port,username:E.username,password:E.password,ssl:E.use_ssl};if(e==="oracle"){const ae=Ig(E.host,E.port);B.host=ae.host,B.port=ae.port,B.serviceName=E.service_name}else B.database=E.database_name;const W=await n(B);if(W.success)M.forEach(ae=>{D.push({check_name:ae.charAt(0).toUpperCase()+ae.slice(1),status:"passed",message:`${ae.charAt(0).toUpperCase()+ae.slice(1)} validation passed`,details:{}})}),a("success","Connection successful!",W.message);else{const ae=(ie=W.error)!=null&&ie.toLowerCase().includes("database")?"database":(te=W.error)!=null&&te.toLowerCase().includes("password")||(pe=W.error)!=null&&pe.toLowerCase().includes("credential")?"credentials":(K=W.error)!=null&&K.toLowerCase().includes("permission")?"permissions":"host";M.forEach(de=>{M.indexOf(de)<M.indexOf(ae)?D.push({check_name:de.charAt(0).toUpperCase()+de.slice(1),status:"passed",message:`${de.charAt(0).toUpperCase()+de.slice(1)} validation passed`,details:{}}):de===ae?D.push({check_name:de.charAt(0).toUpperCase()+de.slice(1),status:"failed",message:W.error||"Validation failed",details:{}}):D.push({check_name:de.charAt(0).toUpperCase()+de.slice(1),status:"passed",message:"",details:{}})}),a("error","Connection failed",W.error)}c(D),u(!1),g("")},$=async M=>{if(M.preventDefault(),!E.name.trim()){a("error","Pipeline name is required");return}if(!E.host.trim()){a("error","Host is required");return}if(!E.username.trim()){a("error","Username is required");return}if(!E.password.trim()){a("error","Password is required");return}if(e==="oracle"&&!E.service_name.trim()&&!E.database_name.trim()){a("error","Oracle kaynaklar iin Service Name ya da Database Name gerekli");return}v(!0);try{const{data:{user:D}}=await H.auth.getUser(),B={user_id:(D==null?void 0:D.id)||"00000000-0000-0000-0000-000000000000",name:E.name,source_type:e,source_config:{host:E.host,port:E.port,database_name:E.database_name,username:E.username,ssl:E.use_ssl},status:"draft"},{data:W,error:ie}=await H.from("pipelines").insert(B).select().maybeSingle();if(ie){a("error","Failed to create pipeline",ie.message);return}if(!W){a("error","Failed to create pipeline");return}const te=r2(e,E),pe=oc(E.name);console.log("Creating connector version with config:",{name:pe,kind:"source",connectorClass:te.connector_class,config:te.config});const K=await lc({name:pe,kind:"source",connectorClass:te.connector_class,config:te.config,ownerId:D==null?void 0:D.id,createdBy:D==null?void 0:D.id});await ul(pe,K.version.version);const ae={pipeline_id:W.id,name:pe,type:"source",connector_class:te.connector_class,config:{registry_connector:pe,registry_version:K.version.version,checksum:K.version.checksum,connector_class:te.connector_class,snapshot_config:te.config},status:"running",tasks_max:1,last_deployed_version:K.version.version},{error:de}=await H.from("pipeline_connectors").insert(ae);if(de){a("error","Failed to create source connector",de.message);return}a("success","Source configuration saved");const Pe={connectionType:L(e),host:E.host,port:E.port,username:E.username,password:E.password,ssl:E.use_ssl};if(e==="oracle"){const Ue=Ig(E.host,E.port);Pe.host=Ue.host,Pe.port=Ue.port,Pe.serviceName=E.service_name}else Pe.database=E.database_name,Pe.schemaName=E.schema_name;const Ee={...s.state,pipelineId:W.id,sourceType:e,sourceConnection:Pe};t("/pipelines/new/objects",{state:Ee})}catch(D){a("error","An error occurred","Please try again"),console.error(D)}finally{v(!1)}},C=()=>({oracle:"Oracle",postgres:"PostgreSQL",sqlserver:"SQL Server"})[e]||e;return r.jsxs("div",{className:"flex h-full",children:[r.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[r.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Configure your ",C()," Source"]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Follow the guide on the right to set up your Source"}),r.jsxs("form",{onSubmit:$,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy from"}),r.jsxs("select",{value:_,onChange:U,className:"px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"",children:"Existing Sources"}),N.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})]}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Draft saved"})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3 flex items-start gap-3 border-l-4 border-l-blue-500",children:[r.jsx(Js,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["There are ",r.jsx("strong",{children:"Prerequisites"})," that you must ensure to set up this Source for your Pipeline."," ",r.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Learn more "})]})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Pipeline Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"name",value:E.name,onChange:O,required:!0,placeholder:`${C()} Pipeline`,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"A unique name for your Pipeline"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Host ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"host",value:E.host,onChange:O,required:!0,placeholder:"10.123.1.001 or db.example.com",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Port ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",name:"port",value:E.port,onChange:O,required:!0,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database User ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"username",value:E.username,onChange:O,required:!0,placeholder:"dbuser",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Password ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:f?"text":"password",name:"password",value:E.password,onChange:O,required:!0,placeholder:"Enter database password",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-10 text-gray-900 dark:text-gray-100"}),r.jsx("button",{type:"button",onClick:()=>x(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:f?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]})]}),e==="oracle"&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Service Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"service_name",value:E.service_name,onChange:O,required:!0,placeholder:"ORCLPDB1",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),e!=="oracle"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"database_name",value:E.database_name,onChange:O,required:!0,placeholder:"mydb",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name of the database you want to ingest data from"})]}),(e==="postgres"||e==="sqlserver")&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Schema Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"schema_name",value:E.schema_name,onChange:O,required:!0,placeholder:e==="sqlserver"?"dbo":"public",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The name of the schema you want to ingest data from"})]})]}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded p-3",children:r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Please open access to the ",e==="postgres"?"PostgreSQL":e==="oracle"?"Oracle":"database"," port from DataMove's IP addresses"," ",r.jsx("span",{className:"font-mono text-red-600 dark:text-red-400 font-semibold",children:"13.228.214.171"})," and"," ",r.jsx("span",{className:"font-mono text-red-600 dark:text-red-400 font-semibold",children:e==="postgres"?"52.77.50.136":"52.77.56.136"})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-1",children:[r.jsx("input",{type:"checkbox",name:"ssh_tunnel",checked:E.ssh_tunnel,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Connect Through SSH"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Connect securely through an SSH tunnel if your database is not publicly accessible."})]})]}),e==="postgres"&&r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-1",children:[r.jsx("input",{type:"checkbox",name:"use_ssl",checked:E.use_ssl,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Use SSL"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Connect over an SSL-encrypted connection"})]})]})]}),(e==="postgres"||e==="sqlserver")&&r.jsxs("div",{className:"rounded",children:[r.jsxs("button",{type:"button",onClick:()=>k(!m),className:"w-full px-0 py-3 flex items-center gap-2 text-left",children:[r.jsx(rs,{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Advanced Settings"})]}),m&&r.jsxs("div",{className:"pl-6 space-y-3 mt-2",children:[r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"load_historical_data",checked:E.load_historical_data,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Load Historical Data"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e==="sqlserver"?"Applicable for Pipelines created with Change Tracking or Table mode. If this option is enabled, the entire table data is fetched during the first run of the Pipeline. If disabled, DataMove loads only the records written to your database after the Pipeline was created.":"If this option is enabled, the entire table data is fetched during the first run of the Pipeline. If disabled, DataMove loads only the records written to your database after the Pipeline was created."})]})]}),e==="postgres"&&r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"merge_tables",checked:E.merge_tables,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Merge Tables"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove merges tables having the same name from different schemas while loading data to the Destination."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"include_new_tables",checked:E.include_new_tables,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Include New Tables in the Pipeline"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e==="sqlserver"?"Applicable for all ingestion modes except Custom SQL. If enabled, DataMove automatically ingests from any tables created or restored after the Pipeline is created.":"If enabled, DataMove automatically ingests data from tables created in the Source after the Pipeline has been built. These may include completely new tables or previously deleted tables that have been re-created in the Source."})]})]})]})]}),e==="oracle"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded",children:[r.jsxs("button",{type:"button",onClick:()=>b(!y),className:"w-full px-0 py-3 flex items-center gap-2 text-left",children:[r.jsx(rs,{className:`w-4 h-4 transition-transform ${y?"rotate-180":""}`}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Redo Log Advanced Settings"})]}),y&&r.jsxs("div",{className:"pl-6 space-y-4 mt-2",children:[r.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jr,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-yellow-900 dark:text-yellow-100 mb-3",children:"Improper configurations of the redo log settings may impact your database performance. We recommend that you contact Support before making any changes."}),r.jsx("button",{type:"button",className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"CONTACT SUPPORT"})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Poll Interval (in ms) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",name:"poll_interval",value:E.poll_interval,onChange:O,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The delay (in milliseconds) between checks for new transactions in redo logs. Applicable only if pipeline is in streaming mode."})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Query Fetch Size ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",name:"query_fetch_size",value:E.query_fetch_size,onChange:O,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The maximum number of rows that DataMove must fetch from the logs in each cycle."})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Long Transaction Window (in mins) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",name:"long_transaction_window",value:E.long_transaction_window,onChange:O,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The duration for which DataMove must traverse back from the latest transaction to fetch the data from a long-running transaction."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"load_all_schemas",checked:E.load_all_schemas,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Load All Schemas"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove loads data from all the schemas defined on the selected host."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"online_catalog",checked:E.online_catalog,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Online Catalog"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove retrieves the latest schema information on tables and columns from the specified Oracle database."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"archive_log_only",checked:E.archive_log_only,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Archive Log Only"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove ingests data only from archived logs."})]})]})]})]})]}),r.jsxs("div",{className:"rounded",children:[r.jsxs("button",{type:"button",onClick:()=>k(!m),className:"w-full px-0 py-3 flex items-center gap-2 text-left",children:[r.jsx(rs,{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`}),r.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Advanced Settings"})]}),m&&r.jsxs("div",{className:"pl-6 space-y-3 mt-2",children:[r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"load_historical_data",checked:E.load_historical_data,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Load Historical Data"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If disabled, DataMove loads only the data that is written to your database after the time of creation of the Pipeline."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"merge_tables",checked:E.merge_tables,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Merge Tables"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove merges tables having the same name from different schemas while loading data to the Destination."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[r.jsxs("div",{className:"relative inline-block w-11 h-6 mt-0.5",children:[r.jsx("input",{type:"checkbox",name:"include_new_tables",checked:E.include_new_tables,onChange:O,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Include New Tables in the Pipeline"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If enabled, DataMove automatically ingests from any tables created or restored after the Pipeline is created."})]})]})]})]})]}),r.jsx("div",{className:"space-y-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{type:"button",onClick:()=>{R(!0),q()},disabled:i||!E.host||!E.username||!E.password,className:"px-6 py-3 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:"Test Connection"}),r.jsxs("button",{type:"submit",disabled:w,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[w&&r.jsx(Le,{className:"w-4 h-4 animate-spin"}),w?"Saving...":"Continue"]})]})})]})]}),r.jsxs("div",{className:"w-[600px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Prerequisites"}),e==="sqlserver"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"mt-0.5",children:""}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The SQL Server is running."})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"mt-0.5",children:""}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SQL Server version is 12 or higher."})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"mt-0.5",children:""}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"TCP/IP Protocol is enabled with TCP port as 1433."})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"mt-0.5",children:""}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:"VIEW CHANGE TRACKING"})," and ",r.jsx("strong",{children:"ALTER DATABASE"})," privileges are granted to the database user, if Pipeline Mode is Change Tracking or Table, and Query mode is Change Tracking."]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"mt-0.5",children:""}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:"SELECT"})," privileges are granted to the database user."]})]}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-4",children:r.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[r.jsx("strong",{children:"Note:"})," We recommend that you create a database user for configuring your SQL Server Source in DataMove. However, if you already have one, refer to section Grant privileges to the user."]})})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 1: Enable TCP/IP Protocol"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"You need to configure the SQL Server instance with TCP port value 1433 to enable DataMove to connect to your MS SQL Server."}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Enable the TCP/IP port"}),r.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 mb-4 ml-4",children:[r.jsx("li",{children:" Open the SQL Server Configuration Manager."}),r.jsx("li",{children:" In the left navigation pane under SQL Server Network Configuration, click Protocols for <MS SQL Server Instance Name>. The default instance name is MSSQLSERVER."}),r.jsx("li",{children:" In the right pane, right click the TCP/IP Protocol Name, and select Enable (if not enabled already) in the Status field."}),r.jsx("li",{children:" Click OK to acknowledge the dialogue box that warns you to restart the services for the changes to take effect."})]}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"2. Verify the TCP/IP port"}),r.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 mb-4 ml-4",children:[r.jsx("li",{children:" Right-click the TCP/IP Protocol Name, and select Properties."}),r.jsx("li",{children:" In the TCP/IP Properties window, click the IP Addresses tab."}),r.jsx("li",{children:" In the IPAII section, ensure the TCP Port value is 1433, which is the default port for MS SQL Server."}),r.jsx("li",{children:" Click OK to acknowledge the dialogue box that warns you to restart the services for the changes to take effect."}),r.jsx("li",{children:" Click OK, and exit the TCP/IP Properties window."})]}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"3. Restart the MS SQL Server instance"}),r.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 ml-4",children:[r.jsx("li",{children:" In the left navigation pane, click SQL Server Services."}),r.jsx("li",{children:" In the right pane, right-click your <MS SQL Server Instance Name>, and select Restart."})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 2: Enable Change Tracking"}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800 rounded-lg p-3 mb-3",children:r.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[r.jsx("strong",{children:"Note:"})," This step is valid only for Pipelines with Change Tracking as their ingestion mode."]})}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"The Change Tracking mechanism captures the database changes. To enable or disable change tracking, the database user must have the ALTER DATABASE privilege."}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Enable change tracking at the database level:"}),r.jsx(Te,{code:`ALTER DATABASE <database_name> SET CHANGE_TRACKING = ON
(CHANGE_RETENTION = 3 DAYS, AUTO_CLEANUP = ON)`,title:"Enable Database-Level Change Tracking"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 mb-4",children:"The CHANGE_RETENTION value specifies the duration for which change tracking information is retained. DataMove recommends that you set the CHANGE_RETENTION value to 3 DAYS."}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Enable change tracking at the table level:"}),r.jsx(Te,{code:"ALTER TABLE <schema_name>.<table> ENABLE CHANGE_TRACKING",title:"Enable Table-Level Change Tracking"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Repeat this step for each table you want to replicate using Change Tracking."}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-4",children:r.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[r.jsx("strong",{children:"Note:"})," DataMove does not support Change Data Capture (CDC) for SQL Server."]})})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 3: Create a Database User and Grant Privileges"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Create a database user (Optional)"}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-3",children:r.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[r.jsx("strong",{children:"Note:"})," Skip this step if you are using an existing database user."]})}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to your SQL Server database as an admin user with an SQL client tool, such as sqlcmd:"}),r.jsx(Te,{code:`USE <database>;

CREATE LOGIN <username> WITH PASSWORD = '<password>';
CREATE USER <username> FOR LOGIN <username>;`,title:"Create Database User"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"2. Grant privileges to the user"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["The database user must have the following privileges: ",r.jsx("strong",{children:"SELECT"}),", ",r.jsx("strong",{children:"VIEW CHANGE TRACKING"})," (if ingestion mode is Change Tracking)."]}),r.jsx(Te,{code:"GRANT SELECT ON DATABASE::<database> TO <username>;",title:"Grant SELECT at Database Level"}),r.jsx(Te,{code:"GRANT SELECT ON SCHEMA::<schema_name> TO <username>;",title:"Grant SELECT at Schema Level"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 mt-4",children:"If the ingestion mode is Change Tracking, grant the VIEW CHANGE TRACKING privilege at the schema or table level:"}),r.jsx(Te,{code:"GRANT VIEW CHANGE TRACKING ON SCHEMA::<schema_name> TO <username>;",title:"Grant VIEW CHANGE TRACKING (Schema Level)"}),r.jsx(Te,{code:"GRANT VIEW CHANGE TRACKING ON OBJECT::<schema_name>.<table_name> TO <username>;",title:"Grant VIEW CHANGE TRACKING (Table Level)"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Replace placeholder values (e.g., <username> with hevo)"})]})]}),e==="oracle"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Oracle database version is 11 or above. You can retrieve the version with:"}),r.jsx(Te,{code:"SELECT BANNER_FULL FROM V$VERSION WHERE BANNER_FULL LIKE 'Oracle Database%';",title:"Check Oracle Version"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"SELECT permissions are granted to the database user."}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:"Note:"})," Redo Log-based replication is enabled when the ingestion mode is RedoLog and the database user has SYSDBA privileges."]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 1: Create Database User and Grant Privileges"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect as DBA using SQL Developer or any other SQL client tool and create a user with necessary permissions:"}),r.jsx(Te,{code:`-- Create a Database User
CREATE USER <username> IDENTIFIED BY <password>;

-- Grant Privileges to the Database User
GRANT SELECT ANY DICTIONARY to <username>;
GRANT CREATE SESSION, ALTER SESSION TO <username>;
GRANT SELECT ON ALL_VIEWS TO <username>;
GRANT SELECT ON <schema_name>.<table_name> TO <username>;

-- Grant Privileges on Metadata tables
GRANT SELECT ON DATABASE_PROPERTIES TO <username>;
GRANT SELECT ON ALL_OBJECTS TO <username>;
GRANT SELECT ON ALL_TABLES TO <username>;
GRANT SELECT ON ALL_TAB_COLUMNS TO <username>;
GRANT SELECT ON ALL_CONSTRAINTS TO <username>;
GRANT SELECT ON ALL_CONS_COLUMNS TO <username>;

-- Grant Permission to run LogMiner
GRANT LOGMINING TO <username>;
GRANT SELECT ON SYS.V_$DATABASE TO <username>;
GRANT SELECT ON SYS.V_$LOG TO <username>;
GRANT SELECT ON SYS.V_$LOGFILE TO <username>;
GRANT SELECT ON SYS.V_$ARCHIVED_LOG TO <username>;
GRANT SELECT ON SYS.V_$LOGMNR_CONTENTS TO <username>;
GRANT SELECT ON SYS.V_$ARCHIVE_DEST_STATUS TO <username>;
GRANT EXECUTE ON SYS.DBMS_LOGMNR TO <username>;
GRANT EXECUTE ON SYS.DBMS_LOGMNR_D TO <username>;`,title:"Create User & Grant Privileges"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Replace placeholder values (e.g., <username> with hevo)"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 2: Set up Redo Logs for Replication"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Enable Archive Log"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Check if archive log is enabled:"}),r.jsx(Te,{code:"SELECT LOG_MODE FROM V$DATABASE;",title:"Check Archive Log Mode"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-2",children:"Returns ARCHIVELOG (enabled) or NOARCHIVELOG (disabled). If disabled, enable it:"}),r.jsx(Te,{code:`SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE ARCHIVELOG;
ALTER DATABASE OPEN;`,title:"Enable Archive Log"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"2. Configure Retention Policy"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to RMAN and check retention policy:"}),r.jsx(Te,{code:`RMAN
CONNECT TARGET <database_username>;

SELECT VALUE FROM V$RMAN_CONFIGURATION WHERE NAME = 'RETENTION POLICY';`,title:"Check Retention Policy"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-3",children:"If less than 3 days, configure to at least 3 days (72 hours):"}),r.jsx(Te,{code:"CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 3 DAYS;",title:"Set Retention Policy"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"3. Enable Supplemental Logging"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Check if supplemental logging is enabled:"}),r.jsx(Te,{code:'SELECT SUPPLEMENTAL_LOG_DATA_MIN FROM "V$DATABASE";',title:"Check Supplemental Logging"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-2",children:"Returns YES (enabled) or NO (disabled). If NO, enable at database level:"}),r.jsx(Te,{code:"ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;",title:"Enable Supplemental Logging"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4 mb-2",children:"For table-level logging, check status:"}),r.jsx(Te,{code:`SELECT COUNT(*) FROM ALL_LOG_GROUPS
    WHERE LOG_GROUP_TYPE='ALL COLUMN LOGGING'
    AND OWNER= '<group_name>'
    AND TABLE_NAME='<table_name>';`,title:"Check Table-Level Logging"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-2",children:"If result is zero, enable for specific table:"}),r.jsx(Te,{code:"ALTER TABLE <SCHEMA_NAME>.<TABLE_NAME> ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;",title:"Enable Table-Level Logging"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"4. Check PGA/SGA Memory Settings"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Check PGA memory initialization parameters:"}),r.jsx(Te,{code:`SELECT NAME, VALUE/1024/1024 as VALUE_MB
    FROM V$PARAMETER
    WHERE NAME IN ('pga_aggregate_limit', 'pga_aggregate_target');`,title:"Check PGA Settings"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3 mb-3",children:"Monitor current PGA memory usage:"}),r.jsx(Te,{code:`SELECT NAME, VALUE, UNIT
    FROM V$PGASTAT
    WHERE NAME IN ('total PGA inuse','total PGA allocated');`,title:"Monitor PGA Usage"}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-3",children:r.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[r.jsx("strong",{children:"Oracle Buffers:"})," LogMiner uses in-memory Oracle buffers to cache transactions. Long-running transactions can increase PGA memory consumption and lead to OOM errors. Set PGA_AGGREGATE_LIMIT appropriately based on your workload."]})})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"5. Configure PGA Aggregate Limit"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Set PGA limit to prevent out-of-memory errors:"}),r.jsx(Te,{code:"ALTER SYSTEM SET pga_aggregate_limit = <new value> SCOPE=BOTH;",title:"Set PGA Limit"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Units: K (kilobytes), M (megabytes), G (gigabytes). Example: 1G"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 3: Retrieve Service Name"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Get the service name (alias) for your Oracle database:"}),r.jsx(Te,{code:"SELECT NAME FROM V$DATABASE;",title:"Get Service Name"})]})]}),e==="postgres"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"IP address or host name of your PostgreSQL server is available."}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The PostgreSQL version is 9.5 or higher, up to 17.x."}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Log-based incremental replication is enabled if ingestion mode is Logical Replication."}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{children:"Note:"})," DataMove currently does not support logical replication on read replicas."]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"DataMove's IP addresses are whitelisted."}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SELECT, USAGE, and CONNECT privileges are granted to the database user."})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 1: Set up Log-based Incremental Replication"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"DataMove supports data ingestion replication from PostgreSQL servers via Write Ahead Logs (WALs) set at the logical level."}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Update the PostgreSQL database configuration file"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Modify the PostgreSQL configuration file, postgresql.conf:"}),r.jsx(Te,{code:`max_replication_slots = 10
max_wal_senders = 10
wal_level = logical
wal_sender_timeout = 0`,title:"postgresql.conf Settings"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"2. Update the client authentication file"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"In the pg_hba.conf file, assign permission to the database user:"}),r.jsx(Te,{code:`local replication <database_user> peer
host replication <database_user> 127.0.0.1/0 md5
host replication <database_user> ::1/0 md5`,title:"pg_hba.conf Settings"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"3. Enable access to WALs"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Restart the PostgreSQL server and provide your database user access to the WAL:"}),r.jsx(Te,{code:"sudo systemctl restart postgresql.service",title:"Restart PostgreSQL"}),r.jsx(Te,{code:"alter role <database_user> with replication;",title:"Grant Replication Access"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 2: Whitelist DataMove's IP Addresses"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Add the DataMove IP addresses for your region in the postgresql.conf and pg_hba.conf files:"}),r.jsx(Te,{code:"host    all             user_name           0.0.0.0/0              md5",title:"Whitelist IPs"})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Step 3: Create a Database User and Grant Privileges"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"1. Create a database user (Optional)"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Connect to your PostgreSQL database instance as a root user:"}),r.jsx(Te,{code:"CREATE USER <database_username> WITH LOGIN PASSWORD '<password>';",title:"Create User"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 mt-4",children:"2. Grant privileges to the user"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Run the following commands to grant privileges to the database user:"}),r.jsx(Te,{code:`GRANT CONNECT ON DATABASE <database_name> TO <database_username>;
GRANT USAGE ON SCHEMA <schema_name> TO <database_username>;
GRANT SELECT ON ALL TABLES IN SCHEMA <schema_name> TO <database_username>;`,title:"Grant Privileges"}),r.jsx(Te,{code:"ALTER DEFAULT PRIVILEGES IN SCHEMA <schema_name> GRANT SELECT ON TABLES TO <database_username>;",title:"Alter Default Privileges"})]})]})]}),A&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Test Connection"}),r.jsx("button",{onClick:()=>R(!1),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:r.jsx(He,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsx(Z1,{results:o,connectionName:E.name||"Source Connection",isValidating:d,currentStep:h,onRetry:q})})]})})]})}function r2(e,t){return e==="oracle"?s2(t):e==="postgres"?a2(t):{connector_class:"io.debezium.connector.sqlserver.SqlServerConnector",config:{name:oc(t.name),"tasks.max":"1","database.hostname":t.host,"database.port":String(t.port||1433),"database.user":t.username,"database.password":t.password||"","database.dbname":t.database_name,"database.schema":t.schema_name||"dbo","table.include.list":"","tombstones.on.delete":"false","include.schema.changes":"false"}}}function s2(e){const t=gx(e.name,"pipeline"),s=e.service_name||e.database_name||`${t}-server`;return{connector_class:"io.debezium.connector.oracle.OracleConnector",config:{name:oc(e.name),"tasks.max":"1","database.server.name":s,"database.hostname":e.host,"database.port":String(e.port||1521),"database.user":e.username,"database.password":e.password||"","database.dbname":e.service_name||e.database_name||s,"database.out.server.name":`${s}-xout`,"database.connection.adapter":"logminer","database.schema":e.schema_name||"INVENTORY","database.history.kafka.bootstrap.servers":"kafka:9092","database.history.kafka.topic":"schema-changes.inventory","snapshot.mode":"initial","snapshot.lock.timeout.ms":"5000","snapshot.fetch.size":String(e.query_fetch_size||2e3),"snapshot.delay.ms":"0","connector.class":"io.debezium.connector.oracle.OracleConnector","topic.prefix":t,"table.include.list":"","log.mining.strategy":e.online_catalog?"online_catalog":"redo_log_catalog","log.mining.continuous.mine":"true","log.mining.sleep.time.default":"1000","decimal.handling.mode":"double","time.precision.mode":"adaptive","tombstones.on.delete":"false","include.schema.changes":"false",use_ssl:e.use_ssl,ssh_tunnel:e.ssh_tunnel}}}function a2(e){const t=gx(e.name,"pipeline"),s=Math.abs(t.split("").reduce((a,n)=>(a<<5)-a+n.charCodeAt(0),0)%9e3)+1e3;return{connector_class:"io.debezium.connector.postgresql.PostgresConnector",config:{name:oc(e.name),"connector.class":"io.debezium.connector.postgresql.PostgresConnector","database.hostname":e.host,"database.port":String(e.port||5432),"database.user":e.username,"database.password":e.password||"","database.dbname":e.database_name,"database.schema":e.schema_name||"public","database.server.name":t,"database.server.id":String(s),"topic.prefix":t,"table.include.list":"","plugin.name":"pgoutput","publication.name":"dbz_publication","slot.name":`${t}_slot`,"slot.drop.on.stop":"false","snapshot.mode":"initial","decimal.handling.mode":"double","tombstones.on.delete":"false","include.schema.changes":"false","tasks.max":"1","key.converter":"org.apache.kafka.connect.json.JsonConverter","key.converter.schemas.enable":"true","value.converter":"org.apache.kafka.connect.json.JsonConverter","value.converter.schemas.enable":"true","errors.tolerance":"all","errors.log.enable":"true","errors.log.include.messages":"true","errors.deadletterqueue.topic.name":`${t}-source-dlq`,"errors.deadletterqueue.context.headers.enable":"true","errors.deadletterqueue.topic.replication.factor":"1",use_ssl:e.use_ssl,ssh_tunnel:e.ssh_tunnel}}}function gx(e,t){return e&&e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||t}async function n2(e,t){var o;if(!e)return;const s=t.map(c=>c.split(".")).map(([c,d])=>`${c}.${d}`).join(",");console.log("[updateConnectorTables] Selected tables:",t),console.log("[updateConnectorTables] Generated includeList:",s);const{data:a}=await H.from("pipeline_connectors").select("id, config, connector_class").eq("pipeline_id",e).eq("type","source").maybeSingle();if(!a){console.warn("[updateConnectorTables] No connector found for pipeline:",e);return}console.log("[updateConnectorTables] Connector config:",a.config);const n=(o=a.config)!=null&&o.registry_connector?a.config:null;let i=a.config||{};n!=null&&n.registry_connector&&(console.log("[updateConnectorTables] Using registry connector:",n.registry_connector),i=await Vn(n.registry_connector)||{},console.log("[updateConnectorTables] Base config from registry:",i));const l={...i,"table.include.list":s};if(console.log("[updateConnectorTables] Updated config with table.include.list:",l["table.include.list"]),n!=null&&n.registry_connector){console.log("[updateConnectorTables] Creating new connector version...");const c=await lc({name:n.registry_connector,kind:"source",connectorClass:a.connector_class,config:l});console.log("[updateConnectorTables] Created version:",c.version.version),await ul(n.registry_connector,c.version.version),console.log("[updateConnectorTables] Activated version:",c.version.version),await H.from("pipeline_connectors").update({config:{...n,registry_version:c.version.version,checksum:c.version.checksum}}).eq("id",a.id)}else console.log("[updateConnectorTables] Updating connector config directly (no registry)"),await H.from("pipeline_connectors").update({config:l}).eq("id",a.id);console.log("[updateConnectorTables] Update complete")}function i2(){const e=tt(),t=bt(),{showToast:s}=St(),a=t.state||{},n="http://127.0.0.1:5001",[i,l]=p.useState(!0),[o,c]=p.useState(""),[d,u]=p.useState(!0),[h,g]=p.useState([]),[f,x]=p.useState(new Set),[w,v]=p.useState(!1),[y,b]=p.useState(null);p.useEffect(()=>{m()},[a==null?void 0:a.pipelineId,a==null?void 0:a.sourceConnection]);const m=async()=>{l(!0);try{let L=[];if(n&&(a!=null&&a.sourceConnection)){const q=await fetch(`${n}/api/list-tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a.sourceConnection,serviceName:a.sourceConnection.serviceName||a.sourceConnection.database})});if(!q.ok)throw new Error("Failed to load source schemas");const $=await q.json();if($.success&&Array.isArray($.tables))L=$.tables;else if(!$.success)throw new Error($.error||"Failed to load source schemas")}if(L.length===0&&(a!=null&&a.pipelineId)){const{data:q,error:$}=await H.from("pipeline_objects").select("schema_name, table_name, stats").eq("pipeline_id",a.pipelineId).order("schema_name",{ascending:!0}).order("table_name",{ascending:!0});if($)throw $;L=(q||[]).map(C=>{var M,D,B;return{schema:C.schema_name,table:C.table_name,rowCount:((M=C.stats)==null?void 0:M.row_count)||0,sizeEstimate:((D=C.stats)==null?void 0:D.size_estimate)||"",lastModified:((B=C.stats)==null?void 0:B.last_modified)||""}})}if(!L||L.length===0){g([]);return}const U=L.reduce((q,$)=>(q[$.schema]||(q[$.schema]=[]),q[$.schema].push($),q),{}),O=Object.entries(U).map(([q,$])=>({name:q,tables:$,expanded:!0,selected:!1,indeterminate:!1}));if(g(O),a!=null&&a.pipelineId){const{data:q}=await H.from("pipeline_connectors").select("config").eq("pipeline_id",a.pipelineId).eq("type","source").maybeSingle();if(q!=null&&q.config){const C=q.config["table.include.list"]||"";if(C){const M=C.split(",").map(D=>D.trim());x(new Set(M))}}}}catch(L){console.error("Failed to load schema data",L),s("error","Failed to load schema data",L instanceof Error?L.message:"Unknown error"),g([])}finally{l(!1)}},k=L=>{g(U=>U.map(O=>O.name===L?{...O,expanded:!O.expanded}:O))},N=L=>{const U=h.find(q=>q.name===L);if(!U)return;const O=U.tables.map(q=>`${q.schema}.${q.table}`);x(q=>{const $=new Set(q);return O.every(M=>$.has(M))?O.forEach(M=>$.delete(M)):O.forEach(M=>$.add(M)),$})},S=L=>{const U=`${L.schema}.${L.table}`;x(O=>{const q=new Set(O);return q.has(U)?q.delete(U):q.add(U),q})},_=o.trim().toLowerCase(),P=p.useMemo(()=>h.map(L=>{const U=L.tables.map($=>`${$.schema}.${$.table}`),O=U.filter($=>f.has($)).length,q=L.tables.filter($=>_?`${$.schema}.${$.table}`.toLowerCase().includes(_)||$.schema.toLowerCase().includes(_)||$.table.toLowerCase().includes(_):!0);return{...L,tables:q,selected:O===U.length&&U.length>0,indeterminate:O>0&&O<U.length}}).filter(L=>L.tables.length>0),[h,f,_]),A=async()=>{if(f.size===0){s("warning","No tables selected","Please select at least one table to check");return}if(!a.pipelineId){s("error","Pipeline ID is missing");return}l(!0);try{const{data:L}=await H.from("pipeline_connectors").select("config, connector_class").eq("pipeline_id",a.pipelineId).eq("type","source").maybeSingle();if(!L){s("error","Source connector not found");return}let U=L.config||{};if(U.registry_connector){const $=await Vn(U.registry_connector);$&&(U=$)}const O=Array.from(f).map($=>$.split(".")).map(([$,C])=>`${$}.${C}`).join(","),q={...U,"table.include.list":O};q["database.password"]&&(q["database.password"]="********"),q.password&&(q.password="********"),b(q),v(!0)}catch(L){s("error","Failed to generate config",L.message),console.error(L)}finally{l(!1)}},R=async()=>{if(f.size===0){s("warning","No tables selected","Please select at least one table to continue");return}if(!a.pipelineId){s("error","Pipeline ID is missing");return}l(!0);try{const L=Array.from(f).map(O=>{var M;const[q,$]=O.split("."),C=(M=h.find(D=>D.name===q))==null?void 0:M.tables.find(D=>D.table===$);return{pipeline_id:a.pipelineId,schema_name:q,table_name:$,included:!0,stats:{row_count:(C==null?void 0:C.rowCount)||0,size_estimate:(C==null?void 0:C.sizeEstimate)||"",last_modified:(C==null?void 0:C.lastModified)||""}}}),{error:U}=await H.from("pipeline_objects").upsert(L,{onConflict:"pipeline_id,schema_name,table_name"});if(U){s("error","Failed to save selections",U.message);return}await n2(a.pipelineId,Array.from(f)),s("success",`${f.size} tables selected`),e("/pipelines/new/destination-type",{state:t.state})}catch(L){s("error","An error occurred","Please try again"),console.error(L)}finally{l(!1)}},E=f.size,Y=h.reduce((L,U)=>L+U.tables.length,0);return r.jsxs("div",{className:"flex h-full relative overflow-hidden",children:[r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex-shrink-0 p-8 pb-6",children:[r.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Objects to Sync"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Choose which schemas and tables you want to replicate to your destination"}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search schemas or tables...",value:o,onChange:L=>c(L.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100"})]})}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:E})," of ",Y," tables selected"]}),r.jsx("button",{type:"button",onClick:()=>{if(E===Y)x(new Set);else{const L=h.flatMap(U=>U.tables.map(O=>`${O.schema}.${O.table}`));x(new Set(L))}},disabled:Y===0,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:E===Y?"Deselect All":"Select All"})]})]}),r.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:r.jsx("div",{className:"px-8 py-4",children:i?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Le,{className:"w-8 h-8 text-blue-600 animate-spin"})}):P.length===0?r.jsx("div",{className:"py-12 text-center text-gray-600 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:"No tables found. Run object discovery or ensure the source connection details are correct."}):r.jsx("div",{className:"space-y-2",children:P.map(L=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 cursor-pointer",children:[r.jsx("button",{type:"button",onClick:()=>N(L.name),className:"flex-shrink-0",children:L.indeterminate?r.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded flex items-center justify-center",children:r.jsx("div",{className:"w-2.5 h-0.5 bg-white"})}):L.selected?r.jsx(tg,{className:"w-5 h-5 text-blue-600"}):r.jsx(lg,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("button",{type:"button",onClick:()=>k(L.name),className:"flex items-center gap-2 flex-1","aria-expanded":L.expanded,children:[L.expanded?r.jsx(rs,{className:"w-4 h-4 text-gray-500"}):r.jsx(cr,{className:"w-4 h-4 text-gray-500"}),r.jsx(Ve,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:L.name}),r.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",L.tables.length," tables)"]})]})]}),L.expanded&&r.jsx("div",{className:"bg-white dark:bg-gray-900",children:L.tables.map(U=>{const O=`${U.schema}.${U.table}`,q=f.has(O);return r.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 border-t border-gray-100 dark:border-gray-800",children:[r.jsx("button",{type:"button",onClick:()=>S(U),className:"flex-shrink-0",children:q?r.jsx(tg,{className:"w-5 h-5 text-blue-600"}):r.jsx(lg,{className:"w-5 h-5 text-gray-400"})}),r.jsx(on,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:U.table}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[U.rowCount.toLocaleString()," rows  ",U.sizeEstimate,"  Modified ",U.lastModified]})]}),r.jsx("button",{type:"button",className:"flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r.jsx(Nr,{className:"w-4 h-4"})})]},O)})})]},L.name))})})}),r.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 p-6",children:r.jsxs("button",{type:"button",onClick:A,disabled:i||E===0,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Check Configuration"]})})]}),w&&y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Source Connector Configuration Preview"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Review the configuration before continuing. The ",r.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded",children:"table.include.list"})," shows your selected tables."]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:r.jsx("pre",{className:"text-xs font-mono text-gray-800 dark:text-gray-200 overflow-x-auto whitespace-pre-wrap break-words",children:JSON.stringify(y,null,2)})})}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end",children:[r.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Back to Table Selection"}),r.jsxs("button",{type:"button",onClick:()=>{v(!1),R()},disabled:i,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&r.jsx(Le,{className:"w-4 h-4 animate-spin"}),"Continue to Destination"]})]})]})}),r.jsxs("div",{className:"w-[500px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Object Selection Settings"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",id:"auto-mapping",checked:d,onChange:L=>u(L.target.checked),className:"mt-1 w-4 h-4"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"auto-mapping",className:"font-medium text-gray-900 dark:text-gray-100 cursor-pointer block mb-1",children:"Auto-Mapping"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically map source columns to destination columns based on name and type compatibility. Turn off to manually configure column mappings."})]})]})}),!d&&r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:"Manual mapping will be available in the next step after selecting your destination."})}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Selection Summary"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Schemas:"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Set(Array.from(f).map(L=>L.split(".")[0])).size})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tables:"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:E})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Estimated Size:"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:(()=>{let L=0;return f.forEach(U=>{var C;const[O,q]=U.split("."),$=(C=h.find(M=>M.name===O))==null?void 0:C.tables.find(M=>M.table===q);if($){const M=$.sizeEstimate;M.includes("MB")?L+=parseFloat(M):M.includes("KB")&&(L+=parseFloat(M)/1024)}}),L>0?`${L.toFixed(2)} MB`:"< 1 MB"})()})]})]})]})]})]})]})}const Wc=[{id:"postgres",name:"PostgreSQL",logo:"/logos/postgresql.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"PostgreSQL Database"},{id:"mysql",name:"MySQL",logo:"/logos/mysql.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"MySQL Database"},{id:"sqlserver",name:"SQL Server",logo:"/logos/sqlserver.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"Microsoft SQL Server"},{id:"oracle",name:"Oracle",logo:"/logos/oracle.svg",category:"Relational Databases",connector:"io.debezium.connector.jdbc.JdbcSinkConnector",description:"Oracle Database"},{id:"snowflake",name:"Snowflake",logo:"/logos/snowflake.svg",category:"Cloud Data Warehouses",connector:"com.snowflake.kafka.connector.SnowflakeSinkConnector",description:"Snowflake Data Warehouse",comingSoon:!0},{id:"bigquery",name:"BigQuery",logo:"/logos/bigquery.svg",category:"Cloud Data Warehouses",connector:"com.wepay.kafka.connect.bigquery.BigQuerySinkConnector",description:"Google BigQuery",comingSoon:!0},{id:"kafka",name:"Kafka",logo:"/logos/kafka.svg",category:"Streaming Platforms",connector:"org.apache.kafka.connect.file.FileStreamSinkConnector",description:"Apache Kafka Topic",comingSoon:!0},{id:"elasticsearch",name:"Elasticsearch",logo:"/logos/elasticsearch.svg",category:"Search & Analytics",connector:"io.confluent.connect.elasticsearch.ElasticsearchSinkConnector",description:"Elasticsearch Index",comingSoon:!0}];function l2(){const e=tt(),t=bt(),{showToast:s}=St(),a=t.state||{},[n,i]=p.useState(""),[l,o]=p.useState(null),[c,d]=p.useState(!1),h=Wc.filter(f=>{const x=n.toLowerCase();return f.name.toLowerCase().includes(x)||f.category.toLowerCase().includes(x)||f.description.toLowerCase().includes(x)}).reduce((f,x)=>(f[x.category]||(f[x.category]=[]),f[x.category].push(x),f),{}),g=async()=>{if(!l){s("warning","Please select a destination type");return}if(!a.pipelineId){s("error","Pipeline ID is missing");return}const f=Wc.find(x=>x.id===l);if(f!=null&&f.comingSoon){s("info","Coming Soon",`${f.name} support is coming soon!`);return}d(!0);try{const{error:x}=await H.from("pipelines").update({destination_type:l,updated_at:new Date().toISOString()}).eq("id",a.pipelineId);if(x)throw x;e("/pipelines/new/destination",{state:{...a,destinationType:l}})}catch(x){console.error("Error updating destination type:",x),s("error","Failed to save destination type",x.message)}finally{d(!1)}};return r.jsxs("div",{className:"flex h-full",children:[r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex-shrink-0 p-8 pb-6",children:[r.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Select Destination"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Choose where you want to replicate your data"}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx(_r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search destinations...",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-gray-100"})]})})]}),r.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto px-8 pb-8",children:r.jsx("div",{className:"space-y-8",children:Object.entries(h).map(([f,x])=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wider",children:f}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(w=>r.jsxs("button",{onClick:()=>!w.comingSoon&&o(w.id),disabled:w.comingSoon,className:`relative p-6 bg-white dark:bg-gray-800 border-2 rounded-xl text-left transition-all ${l===w.id?"border-blue-500 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700"} ${w.comingSoon?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,children:[w.comingSoon&&r.jsx("span",{className:"absolute top-3 right-3 px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs font-medium rounded",children:"Coming Soon"}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(pt,{sourceType:w.id,connectorClass:w.connector,className:"w-12 h-12 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:w.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.description})]})]})]},w.id))})]},f))})}),r.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 px-8 py-6 bg-white dark:bg-gray-900",children:r.jsxs("button",{onClick:g,disabled:!l||c,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c?"Saving...":"Continue to Configuration",r.jsx(qs,{className:"w-5 h-5"})]})})]}),r.jsxs("div",{className:"w-[400px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Destination Information"}),l?r.jsx(r.Fragment,{children:(()=>{const f=Wc.find(x=>x.id===l);return f?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx(pt,{sourceType:f.id,connectorClass:f.connector,className:"w-16 h-16 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:f.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.category})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Connector Class"}),r.jsx("code",{className:"block text-xs bg-white dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700 font-mono text-gray-900 dark:text-gray-100 break-all",children:f.connector})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Features"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-500 mt-0.5",children:""}),r.jsx("span",{children:"Real-time data replication"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-500 mt-0.5",children:""}),r.jsx("span",{children:"Automatic schema evolution"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-500 mt-0.5",children:""}),r.jsx("span",{children:"Upsert and delete support"})]}),!f.comingSoon&&r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-green-500 mt-0.5",children:""}),r.jsx("span",{children:"Production ready"})]})]})]}),f.comingSoon&&r.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:r.jsxs("p",{className:"text-sm text-orange-900 dark:text-orange-100",children:["Support for ",f.name," is coming soon! Currently, only PostgreSQL, MySQL, SQL Server, and Oracle destinations are available."]})})]}):null})()}):r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select a destination type to see more details"})]})]})}function o2({pipelineId:e}={}){const t=tt(),s=bt(),{showToast:a}=St(),n=s.state,i=e||n.pipelineId,[l,o]=p.useState(!1),[c,d]=p.useState(!1),[u,h]=p.useState(!0),[g,f]=p.useState({host:"",port:5432,database:"",schema:"public",username:"",password:"",ssl:!1}),x=k=>{const{name:N,value:S,type:_,checked:P}=k.target;f(A=>({...A,[N]:_==="checkbox"?P:N==="port"?parseInt(S)||0:S}))},w=k=>u?k.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""):k,v=()=>{const k=w(g.database||"destination"),N=(i==null?void 0:i.slice(0,8))||"local";return`${k}_${N}_sink`},y=()=>{g.schema;const k=v();return{name:k,"connector.class":"io.debezium.connector.jdbc.JdbcSinkConnector","tasks.max":"1",topics:"placeholder","connection.url":`jdbc:postgresql://${g.host}:${g.port}/${g.database}`,"connection.username":g.username,"connection.password":g.password,"connection.pool.size":"10","auto.create":"true","schema.evolution":"basic","insert.mode":"upsert","primary.key.mode":"record_value","primary.key.fields":"id","delete.enabled":"false",transforms:"route","transforms.route.type":"org.apache.kafka.connect.transforms.RegexRouter","transforms.route.regex":"([^.]+)\\.([^.]+)\\.(.*)","transforms.route.replacement":"$1_$2_$3","key.converter":"org.apache.kafka.connect.json.JsonConverter","key.converter.schemas.enable":"true","value.converter":"org.apache.kafka.connect.json.JsonConverter","value.converter.schemas.enable":"true","debezium.format.value.schemas.enable":"true","errors.tolerance":"all","errors.log.enable":"true","errors.log.include.messages":"true","errors.deadletterqueue.topic.name":`${k}-dlq`,"errors.deadletterqueue.topic.replication.factor":"1","errors.deadletterqueue.context.headers.enable":"true","consumer.override.auto.offset.reset":"earliest"}},b=async k=>{if(k.preventDefault(),!g.host.trim()){a("error","Host is required");return}if(!g.database.trim()){a("error","Database is required");return}if(!g.username.trim()){a("error","Username is required");return}if(!g.password.trim()){a("error","Password is required");return}if(!i){a("error","Pipeline ID is missing");return}d(!0);try{const{data:N}=await H.from("pipeline_connectors").select("config, connector_class").eq("pipeline_id",i).eq("type","source").maybeSingle();let S=w(g.database||"pipeline_topic");if(N!=null&&N.config){let U=N.config;if(U.registry_connector){const{getActiveConnectorConfig:q}=await Fn(async()=>{const{getActiveConnectorConfig:C}=await Promise.resolve().then(()=>YN);return{getActiveConnectorConfig:C}},[]),$=await q(U.registry_connector);$&&(U=$,console.log("[DestinationStep] Loaded source config from registry:",U.registry_connector))}const O=U["topic.prefix"]||U["database.server.name"];O?(S=`${O}\\..*`,console.log("[DestinationStep] Using source topic prefix regex:",S)):console.warn("[DestinationStep] No topic.prefix or database.server.name found in source config")}const _={host:g.host,port:g.port,database:g.database,schema:g.schema,username:g.username,ssl:g.ssl,sanitize_names:u},{error:P}=await H.from("pipelines").update({destination_type:"postgres",destination_config:_,updated_at:new Date().toISOString()}).eq("id",i);if(P){a("error","Failed to save destination",P.message);return}const A=v();let R=y();R["topics.regex"]=S,console.log("[DestinationStep] Sink config topics:",R.topics),console.log("[DestinationStep] Sink config topics.regex:",R["topics.regex"]);const E=await lc({name:A,kind:"sink",connectorClass:"io.debezium.connector.jdbc.JdbcSinkConnector",config:R,ownerId:i||null});await ul(A,E.version.version);const Y={pipeline_id:i,name:A,type:"sink",connector_class:"io.debezium.connector.jdbc.JdbcSinkConnector",config:{registry_connector:A,registry_version:E.version.version,checksum:E.version.checksum,connector_class:"io.debezium.connector.jdbc.JdbcSinkConnector",snapshot_config:R},status:"running",tasks_max:1,last_deployed_version:E.version.version},{error:L}=await H.from("pipeline_connectors").insert(Y);if(L){a("error","Failed to create destination connector",L.message);return}a("success","Destination configuration saved"),t("/pipelines/new/schedule",{state:s.state})}catch(N){a("error","An error occurred","Please try again"),console.error(N)}finally{d(!1)}},m=[{original:"User Accounts",sanitized:w("User Accounts")},{original:"Sales Data",sanitized:w("Sales Data")},{original:"Product-Info",sanitized:w("Product-Info")}];return r.jsxs("div",{className:"flex h-full",children:[r.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[r.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Configure PostgreSQL Destination"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Set up your destination database where data will be replicated"}),r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 flex gap-3",children:[r.jsx(Fr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:["Ensure your PostgreSQL destination meets the ",r.jsx("span",{className:"font-semibold",children:"Prerequisites"})," listed on the right."]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Host ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"host",value:g.host,onChange:x,required:!0,placeholder:"localhost or pg.example.com",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Port ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",name:"port",value:g.port,onChange:x,required:!0,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Database ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"database",value:g.database,onChange:x,required:!0,placeholder:"analytics",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Schema ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"schema",value:g.schema,onChange:x,required:!0,placeholder:"public",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Username ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"username",value:g.username,onChange:x,required:!0,placeholder:"pguser",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Password ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l?"text":"password",name:"password",value:g.password,onChange:x,required:!0,placeholder:"Enter password",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-10 text-gray-900 dark:text-gray-100"}),r.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:l?r.jsx(Ks,{className:"w-5 h-5"}):r.jsx(Nr,{className:"w-5 h-5"})})]})]})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",name:"ssl",checked:g.ssl,onChange:x,className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Use SSL Connection"})]})}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u,onChange:k=>h(k.target.checked),className:"mt-1 w-4 h-4"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Sanitize Table and Column Names"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Convert names to lowercase and replace spaces with underscores for PostgreSQL compatibility"}),u&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 space-y-2",children:[r.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview:"}),m.map((k,N)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:k.original}),r.jsx(qs,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{className:"font-mono text-blue-600 dark:text-blue-400",children:k.sanitized})]},N))]})]})]})})}),r.jsx("div",{className:"flex gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c&&r.jsx(Le,{className:"w-4 h-4 animate-spin"}),c?"Saving...":"Save & Continue"]})})]})]}),r.jsxs("div",{className:"w-[600px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Prerequisites"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"1. PostgreSQL Database Available"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Ensure you have a PostgreSQL instance (version 10+) running and accessible"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"2. Create Destination User"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Create a dedicated user with appropriate write permissions"}),r.jsx(Te,{code:`-- Create user
CREATE USER <username> WITH PASSWORD '<strong_password>';

-- Grant database connection
GRANT CONNECT ON DATABASE <database> TO <username>;

-- Grant schema usage and creation rights
GRANT USAGE, CREATE ON SCHEMA <schema> TO <username>;

-- Grant table permissions
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA <schema> TO <username>;
GRANT SELECT, USAGE ON ALL SEQUENCES IN SCHEMA <schema> TO <username>;

-- Grant future table permissions
ALTER DEFAULT PRIVILEGES IN SCHEMA <schema>
  GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO <username>;
ALTER DEFAULT PRIVILEGES IN SCHEMA <schema>
  GRANT SELECT, USAGE ON SEQUENCES TO <username>;`,title:"Create User and Grant Permissions"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"3. Verify Schema Access"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Test that the user can create tables in the target schema"}),r.jsx(Te,{code:`-- Test table creation
CREATE TABLE <schema>._bookkeeping_test (id SERIAL PRIMARY KEY, created_at TIMESTAMP DEFAULT NOW());

-- If successful, drop the test table
DROP TABLE <schema>._bookkeeping_test;`,title:"Test Schema Access"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"4. Network Access"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ensure your PostgreSQL server is accessible from our region. Check your firewall rules and pg_hba.conf settings."})]})]})]})]})}function c2(){const e=tt(),t=bt(),{showToast:s}=St(),a=t.state,[n,i]=p.useState(!1),[l,o]=p.useState("continuous"),[c,d]=p.useState("initial"),[u,h]=p.useState("0 0 * * *"),g=async v=>{if(v.preventDefault(),!a.pipelineId){s("error","Pipeline ID is missing");return}if(l==="scheduled"&&!u.trim()){s("error","Cron expression is required for scheduled mode");return}i(!0);try{const y={mode:l,snapshot_mode:c,...l==="scheduled"&&{cron:u}},{error:b}=await H.from("pipelines").update({schedule_config:y,status:"ready",updated_at:new Date().toISOString()}).eq("id",a.pipelineId);if(b){s("error","Failed to save schedule",b.message);return}s("success","Pipeline created successfully"),e("/pipelines")}catch(y){s("error","An error occurred","Please try again"),console.error(y)}finally{i(!1)}},f=[{id:"continuous",icon:Eo,title:"Continuous Replication",description:"Real-time CDC streaming with minimal latency",recommended:!0},{id:"scheduled",icon:La,title:"Scheduled Sync",description:"Run at specific intervals using cron expressions",recommended:!1},{id:"manual",icon:nr,title:"Manual Trigger",description:"Start replication manually when needed",recommended:!1}],x=[{label:"Every hour",value:"0 * * * *"},{label:"Every 6 hours",value:"0 */6 * * *"},{label:"Daily at midnight",value:"0 0 * * *"},{label:"Weekly (Sunday)",value:"0 0 * * 0"}],w=[{label:"Initial Snapshot",status:c==="always"||c==="initial"?"complete":"skipped",description:"Full table copy"},{label:"CDC Streaming",status:"active",description:"Ongoing changes"},{label:"Monitoring",status:"pending",description:"Health checks"}];return r.jsxs("div",{className:"flex h-full",children:[r.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[r.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm mb-6",children:" Back"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Schedule & Finalize"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Configure when and how your pipeline runs"}),r.jsxs("form",{onSubmit:g,className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Replication Mode"}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.map(v=>r.jsxs("label",{className:`relative flex items-start gap-4 p-5 border-2 rounded-lg cursor-pointer transition-all ${l===v.id?"border-blue-600 dark:border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[r.jsx("input",{type:"radio",name:"scheduleMode",value:v.id,checked:l===v.id,onChange:y=>o(y.target.value),className:"mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(v.icon,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:v.title}),v.recommended&&r.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded",children:"Recommended"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v.description})]})]},v.id))})]}),l==="scheduled"&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Cron Expression"}),r.jsx("input",{type:"text",value:u,onChange:v=>h(v.target.value),placeholder:"0 0 * * *",className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-gray-900 dark:text-gray-100"}),r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:x.map(v=>r.jsx("button",{type:"button",onClick:()=>h(v.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:v.label},v.value))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Initial Snapshot"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[r.jsx("input",{type:"radio",name:"snapshotMode",value:"initial",checked:c==="initial",onChange:v=>d(v.target.value),className:"mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Initial snapshot only (Recommended)"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy existing data once, then stream changes"})]})]}),r.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[r.jsx("input",{type:"radio",name:"snapshotMode",value:"never",checked:c==="never",onChange:v=>d(v.target.value),className:"mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Skip snapshot"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Only capture new changes from now on"})]})]}),r.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[r.jsx("input",{type:"radio",name:"snapshotMode",value:"always",checked:c==="always",onChange:v=>d(v.target.value),className:"mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Always snapshot"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full copy on every run (scheduled mode only)"})]})]})]})]}),r.jsx("div",{className:"flex gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n&&r.jsx(Le,{className:"w-4 h-4 animate-spin"}),n?"Completing Pipeline...":"Complete Pipeline"]})})]})]}),r.jsxs("div",{className:"w-[500px] bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Pipeline Execution Timeline"}),r.jsx("div",{className:"relative",children:w.map((v,y)=>r.jsxs("div",{className:"relative pb-8 last:pb-0",children:[y<w.length-1&&r.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-700"}),r.jsxs("div",{className:"relative flex items-start gap-4",children:[r.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${v.status==="complete"?"bg-green-600 text-white":v.status==="active"?"bg-blue-600 text-white ring-4 ring-blue-200 dark:ring-blue-900":v.status==="skipped"?"bg-gray-400 dark:bg-gray-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:[v.status==="complete"&&r.jsx(Qo,{className:"w-4 h-4"}),v.status==="active"&&r.jsx(Eo,{className:"w-4 h-4"}),v.status==="pending"&&r.jsx(nr,{className:"w-4 h-4"}),v.status==="skipped"&&r.jsx(Fr,{className:"w-4 h-4"})]}),r.jsxs("div",{className:"flex-1 pt-0.5",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:v.label}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v.description})]})]})]},y))}),r.jsx("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Fr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:[r.jsx("p",{className:"font-semibold mb-1",children:"What happens next?"}),r.jsxs("ul",{className:"space-y-1 text-blue-800 dark:text-blue-200",children:[r.jsx("li",{children:' Pipeline will be created in "Ready" state'}),r.jsx("li",{children:" You can start it manually from the dashboard"}),r.jsx("li",{children:" Monitor progress in real-time"}),r.jsx("li",{children:" View logs and metrics"})]})]})]})}),l==="continuous"&&r.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:r.jsxs("div",{className:"text-sm text-green-900 dark:text-green-100",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Continuous Replication"}),r.jsx("p",{className:"text-green-800 dark:text-green-200",children:"Changes will be captured in near real-time with typical latency under 1 second"})]})})]})]})}function ms({step:e,existingPipelineId:t}){const s=tt(),a=bt(),n=a.state,[i,l]=p.useState(null),c=new URLSearchParams(a.search).get("resume")||t;p.useEffect(()=>{c&&e==="source-config"&&(async()=>{const{data:y}=await H.from("pipelines").select("source_type").eq("id",c).maybeSingle();y!=null&&y.source_type&&l(y.source_type)})()},[c,e]);const d={source:1,"pipeline-mode":1,"pipeline-type":1,"source-config":1,objects:2,"destination-type":3,destination:3,schedule:4},u=["Configure Source","Select Objects","Configure Destination","Schedule & Final"],h=()=>{s("/pipelines")},g=v=>{s("/pipelines/new/pipeline-mode",{state:{sourceType:v}})},f=e==="source"||e==="pipeline-mode"||e==="pipeline-type",w=new Set(["objects","destination-type"]).has(e)?"flex-1 min-h-0 overflow-hidden":"flex-1 min-h-0 overflow-auto";return r.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[!f&&r.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4",children:[r.jsx(K1,{currentStep:d[e],steps:u}),r.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(He,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),r.jsxs("div",{className:w,children:[e==="source"&&r.jsx(J1,{onSelectSource:g,onBack:h}),e==="pipeline-mode"&&(n==null?void 0:n.sourceType)&&r.jsx(Y1,{sourceType:n.sourceType}),e==="pipeline-type"&&(n==null?void 0:n.sourceType)&&r.jsx(X1,{sourceType:n.sourceType}),e==="source-config"&&((n==null?void 0:n.sourceType)||i)&&r.jsx(t2,{sourceType:(n==null?void 0:n.sourceType)||i||""}),e==="objects"&&r.jsx(i2,{}),e==="destination-type"&&r.jsx(l2,{}),e==="destination"&&r.jsx(o2,{pipelineId:c}),e==="schedule"&&r.jsx(c2,{})]})]})}function Mg(){const{pipelineId:e}=sc();return r.jsxs(P0,{children:[r.jsx(Ie,{path:"/",element:r.jsx(T0,{to:"source",replace:!0})}),r.jsx(Ie,{path:"source",element:r.jsx(ms,{step:"source",existingPipelineId:e})}),r.jsx(Ie,{path:"pipeline-mode",element:r.jsx(ms,{step:"pipeline-mode",existingPipelineId:e})}),r.jsx(Ie,{path:"pipeline-type",element:r.jsx(ms,{step:"pipeline-type",existingPipelineId:e})}),r.jsx(Ie,{path:"source-config",element:r.jsx(ms,{step:"source-config",existingPipelineId:e})}),r.jsx(Ie,{path:"objects",element:r.jsx(ms,{step:"objects",existingPipelineId:e})}),r.jsx(Ie,{path:"destination-type",element:r.jsx(ms,{step:"destination-type",existingPipelineId:e})}),r.jsx(Ie,{path:"destination",element:r.jsx(ms,{step:"destination",existingPipelineId:e})}),r.jsx(Ie,{path:"schedule",element:r.jsx(ms,{step:"schedule",existingPipelineId:e})})]})}function d2(){const[e,t]=p.useState([]),[s,a]=p.useState(!1),[n,i]=p.useState(""),l=(g,f,x)=>{t(w=>[...w,{step:g,status:f,message:x,timestamp:new Date().toISOString()}])},o=async()=>{var g,f,x,w,v;if(!n){alert("Please enter a pipeline ID");return}a(!0),t([]),l("Start","pending","Starting deployment test...");try{const y=await fetch(`http://localhost:5001/api/pipelines/${n}/deploy`,{method:"POST",headers:{"Content-Type":"application/json"}}),b=await y.json();y.ok?(l("Deploy","success","Deployment successful!"),(g=b.results)!=null&&g.source&&l("Source","success","Source connector deployed"),(f=b.results)!=null&&f.sink&&l("Sink","success","Sink connector deployed")):(l("Deploy","error",`Deployment failed: ${b.error}`),(x=b.results)!=null&&x.errors&&b.results.errors.forEach(m=>{l("Error","error",`${m.connector}: ${m.error}`)}),((w=b.error)!=null&&w.includes("rolled back")||(v=b.error)!=null&&v.includes("rollback"))&&l("Rollback","warning"," Rollback was triggered!"))}catch(y){l("Deploy","error",y.message)}a(!1)},c=async()=>{if(!n){alert("Please enter a pipeline ID");return}a(!0),t([]),l("Start","pending","Pausing pipeline...");try{const g=await fetch(`http://localhost:5001/api/pipelines/${n}/pause`,{method:"POST",headers:{"Content-Type":"application/json"}}),f=await g.json();g.ok?l("Pause","success",f.message):(l("Pause","error",f.error),f.errors&&f.errors.forEach(x=>{l("Error","error",`${x.connector}: ${x.error}`)}))}catch(g){l("Pause","error",g.message)}a(!1)},d=async()=>{if(!n){alert("Please enter a pipeline ID");return}a(!0),t([]),l("Start","pending","Starting pipeline...");try{const g=await fetch(`http://localhost:5001/api/pipelines/${n}/start`,{method:"POST",headers:{"Content-Type":"application/json"}}),f=await g.json();g.ok?l("Start","success",f.message):(l("Start","error",f.error),f.errors&&f.errors.forEach(x=>{l("Error","error",`${x.connector}: ${x.error}`)}))}catch(g){l("Start","error",g.message)}a(!1)},u=async()=>{if(!n){alert("Please enter a pipeline ID");return}if(confirm("Are you sure you want to delete all connectors?")){a(!0),t([]),l("Start","pending","Deleting connectors...");try{const g=await fetch(`http://localhost:5001/api/pipelines/${n}/connectors`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),f=await g.json();g.ok?l("Delete","success",f.message):(l("Delete","error",f.error),f.errors&&f.errors.forEach(x=>{l("Error","error",`${x.connector}: ${x.error}`)}))}catch(g){l("Delete","error",g.message)}a(!1)}},h=g=>{switch(g){case"success":return r.jsx(kr,{className:"w-5 h-5 text-green-500"});case"error":return r.jsx(Ws,{className:"w-5 h-5 text-red-500"});case"warning":return r.jsx(jr,{className:"w-5 h-5 text-yellow-500"});default:return r.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rollback Test Console"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Test deployment, rollback, pause, start, and delete operations"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pipeline ID"}),r.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value),placeholder:"Enter pipeline ID (e.g., 123e4567-e89b-12d3-a456-426614174000)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("button",{onClick:o,disabled:s||!n,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[r.jsx(ag,{className:"w-5 h-5"}),"Deploy"]}),r.jsxs("button",{onClick:c,disabled:s||!n,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[r.jsx(Hs,{className:"w-5 h-5"}),"Pause"]}),r.jsxs("button",{onClick:d,disabled:s||!n,className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[r.jsx(ag,{className:"w-5 h-5"}),"Start"]}),r.jsxs("button",{onClick:u,disabled:s||!n,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[r.jsx(Ma,{className:"w-5 h-5"}),"Delete"]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Test Results"}),e.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500",children:r.jsx("p",{children:"No test results yet. Run a test to see results."})}):r.jsx("div",{className:"space-y-3",children:e.map((g,f)=>r.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg ${g.status==="success"?"bg-green-50":g.status==="error"?"bg-red-50":g.status==="warning"?"bg-yellow-50":"bg-blue-50"}`,children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h(g.status)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900",children:g.step}),r.jsx("p",{className:"text-sm text-gray-600 break-words",children:g.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(g.timestamp).toLocaleTimeString()})]})]},f))})]}),r.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Test Rollback:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[r.jsx("li",{children:"Get a pipeline ID from the Pipelines page"}),r.jsx("li",{children:'Click "Deploy" - this will attempt to deploy both source and sink connectors'}),r.jsx("li",{children:'If sink deployment fails, check the results for "Rollback" warning'}),r.jsx("li",{children:'Check backend logs for: "Rolling back source connector due to sink failure"'}),r.jsx("li",{children:"Verify that source connector was deleted from Kafka Connect"})]})]}),r.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[r.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Backend Logs to Monitor:"}),r.jsxs("div",{className:"text-sm text-yellow-800 space-y-1 font-mono",children:[r.jsx("p",{children:' "Deploying source connector"'}),r.jsx("p",{children:' "Deploying sink connector"'}),r.jsx("p",{children:' "Sink deployment failed"'}),r.jsx("p",{children:' "Rolling back source connector due to sink failure"'}),r.jsx("p",{children:' "Source connector rolled back"'})]})]})]})})})}function u2(){const e=bt(),t=e.pathname.match(/^\/admin\/users\/[^/]+$/),s=e.pathname==="/admin/alerts";return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(GN,{}),r.jsxs("div",{className:"flex-1 flex flex-col ml-[72px]",children:[!s&&r.jsx(KN,{}),r.jsx("div",{className:`flex-1 ${t?"overflow-hidden":"overflow-auto"}`,children:r.jsxs(P0,{children:[r.jsx(Ie,{path:"/",element:r.jsx(T0,{to:"/pipelines",replace:!0})}),r.jsx(Ie,{path:"/pipelines",element:r.jsx(n1,{})}),r.jsx(Ie,{path:"/pipelines/new/*",element:r.jsx(Mg,{})}),r.jsx(Ie,{path:"/wizard/:pipelineId/*",element:r.jsx(Mg,{})}),r.jsx(Ie,{path:"/pipelines/:id",element:r.jsx(R1,{})}),r.jsx(Ie,{path:"/models",element:r.jsx(L1,{})}),r.jsx(Ie,{path:"/destinations",element:r.jsx($1,{})}),r.jsx(Ie,{path:"/docs",element:r.jsx(I1,{})}),r.jsx(Ie,{path:"/admin",element:r.jsx(ui,{requiredRole:"admin",children:r.jsx(H1,{})})}),r.jsx(Ie,{path:"/admin/alerts",element:r.jsx(ui,{requiredRole:"admin",children:r.jsx(Q1,{})})}),r.jsx(Ie,{path:"/admin/users",element:r.jsx(ui,{requiredRole:"admin",children:r.jsx(U1,{})})}),r.jsx(Ie,{path:"/admin/users/:userId",element:r.jsx(ui,{requiredRole:"admin",children:r.jsx(B1,{})})}),r.jsx(Ie,{path:"/admin/activity-logs",element:r.jsx(q1,{})}),r.jsx(Ie,{path:"/test-rollback",element:r.jsx(d2,{})})]})})]})]})}function h2(){return r.jsx(LN,{children:r.jsxs(P0,{children:[r.jsx(Ie,{path:"/login",element:r.jsx(M1,{})}),r.jsx(Ie,{path:"/signup",element:r.jsx(F1,{})}),r.jsx(Ie,{path:"/*",element:r.jsx(ui,{children:r.jsx(u2,{})})})]})})}function g2(){const{showToast:e}=St(),t=p.useRef(null),s=p.useRef(new Set);p.useEffect(()=>{const a=async()=>{try{const{data:n,error:i}=await H.from("pipelines").select("id, name, schedule_config, status").eq("status","ready").not("schedule_config","is",null);if(i)throw i;if(!n)return;const l=new Date;for(const o of n){if(!o.schedule_config)continue;const c=o.schedule_config;let d=!1,u=0;if(c.type==="preset"){const h=c.value||"6h";h==="30m"?u=30:h==="1h"?u=60:h==="2h"?u=120:h==="3h"?u=180:h==="6h"?u=360:h==="8h"?u=480:h==="12h"?u=720:h==="24h"&&(u=1440)}else if(c.type==="interval")u=(c.hours||6)*60;else if(c.type==="daily"){const h=c.times||["00:00"],g=`${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`;for(const f of h){const[x,w]=f.split(":").map(Number),v=l.getHours()*60+l.getMinutes(),y=x*60+w;if(Math.abs(v-y)<1){d=!0;break}}}if(c.type==="preset"||c.type==="interval")if(c.lastRun){const h=new Date(c.lastRun);(l.getTime()-h.getTime())/(1e3*60)>=u&&(d=!0)}else d=!0;d&&!s.current.has(o.id)&&(e("info",`Pipeline "${o.name}" is scheduled to run`,"Starting data ingestion..."),s.current.add(o.id),await H.from("pipelines").update({schedule_config:{...c,lastRun:l.toISOString(),nextRun:new Date(l.getTime()+u*60*1e3).toISOString()}}).eq("id",o.id),setTimeout(()=>{s.current.delete(o.id)},6e4))}}catch(n){console.error("Schedule check error:",n)}};return a(),t.current=setInterval(a,3e4),()=>{t.current&&clearInterval(t.current)}},[e])}function m2(){return g2(),r.jsx(h2,{})}function f2(){return r.jsx(Av,{children:r.jsx(rk,{children:r.jsx(kj,{children:r.jsx(m2,{})})})})}const p2=new yv({defaultOptions:{queries:{staleTime:5e3,refetchOnWindowFocus:!1,retry:1}}});op(document.getElementById("root")).render(r.jsx(p.StrictMode,{children:r.jsx(bv,{client:p2,children:r.jsx(f2,{})})}));
